/*! For license information please see app.js.LICENSE.txt */
(()=>{var t,i={47:()=>{},184:e=>{var t={"":1,lr:1,rl:1},i={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function n(e){return"string"==typeof e&&(!!i[e.toLowerCase()]&&e.toLowerCase())}function r(e,i,r){this.hasBeenReset=!1;var o="",s=!1,a=e,l=i,u=r,c=null,h="",d=!0,p="auto",f="start",g="auto",m="auto",v=100,y="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(e){s=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(e){var i=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===i)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");h=i,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(e){d=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=n(e);t?(f=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=n(e);t?(m=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return y},set:function(e){var t=n(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");y=t,this.hasBeenReset=!0}}}),this.displayState=void 0}r.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=r},251:(e,t)=>{t.read=function(e,t,i,n,r){var o,s,a=8*r-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=i?r-1:0,d=i?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+e[t+h],h+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,i,n,r,o){var s,a,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(t*l-1)*Math.pow(2,r),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;e[i+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;e[i+p]=255&s,p+=f,s/=256,u-=8);e[i+p-f]|=128*g}},253:()=>{},341:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){window.history.pushState({url:e||window.location.href.split(window.location.hostname)[1],random:Math.random(),source:"swup"},document.title,e||window.location.href.split(window.location.hostname)[1])}},542:()=>{},847:function(e,t){var i;!function(){"use strict";function n(e){for(var t in e=e||{},this.settings={level:"polite",parent:"body",idPrefix:"live-region-",delay:0},e)e.hasOwnProperty(t)&&(this.settings[t]=e[t]);this.settings.parent=document.querySelector(this.settings.parent)}n.prototype.say=function(e,t){var i=this.settings.parent.querySelector('[id^="'+this.settings.idPrefix+'"]')||!1;i&&this.settings.parent.removeChild(i),t=t||this.settings.delay,this.currentRegion=document.createElement("span"),this.currentRegion.id=this.settings.idPrefix+Math.floor(1e4*Math.random());var n="assertive"!==this.settings.level?"status":"alert";return this.currentRegion.setAttribute("aria-live",this.settings.level),this.currentRegion.setAttribute("role",n),this.currentRegion.setAttribute("style","clip: rect(1px, 1px, 1px, 1px); height: 1px; overflow: hidden; position: absolute; white-space: nowrap; width: 1px"),this.settings.parent.appendChild(this.currentRegion),window.setTimeout(function(){this.currentRegion.textContent=e}.bind(this),t),this},void 0!==e.exports?e.exports=n:void 0===(i=function(){return n}.apply(t,[]))||(e.exports=i)}()},1034:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3132),r=i(5932);t.default=function(){var e=this.options.animationSelector,t=(0,r.transitionProperty)()+"Duration",i=[],o=(0,n.queryAll)(e,document.body);return o.length?(o.forEach((function(n){var o=window.getComputedStyle(n)[t];if(!o||"0s"==o)return console.warn("[swup] No CSS transition duration defined for element of selector "+e),void i.push(Promise.resolve());var s=new Promise((function(e){n.addEventListener((0,r.transitionEnd)(),(function(t){n==t.target&&e()}))}));i.push(s)})),i):(console.warn("[swup] No animated elements found by selector "+e),[Promise.resolve()])}},1036:(e,t,i)=>{"use strict";var n=i(9840),r=i(4634),o=i(7056);l.httpHandler=i(7495);var s=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var i=e.indexOf(":"),n=e.slice(0,i).trim().toLowerCase(),r=e.slice(i+1).trim();void 0===t[n]?t[n]=r:Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]})),t):t};function a(e,t,i){var n=e;return o(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=r({},t,{uri:e}),n.callback=i,n}function l(e,t,i){return u(t=a(e,t,i))}function u(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,i=function(i,n,r){t||(t=!0,e.callback(i,n,r))};function n(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c),v)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(h),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,i(e,y)}function o(){if(!u){var t;clearTimeout(h),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=y,o=null;return 0!==t?(r={body:n(),statusCode:t,method:p,headers:{},url:d,rawRequest:c},c.getAllResponseHeaders&&(r.headers=s(c.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),i(o,r,r.body)}}var a,u,c=e.xhr||null;c||(c=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var h,d=c.url=e.uri||e.url,p=c.method=e.method||"GET",f=e.body||e.data,g=c.headers=e.headers||{},m=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:p,url:d,rawRequest:c};if("json"in e&&!1!==e.json&&(v=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(o,0)},c.onload=o,c.onerror=r,c.onprogress=function(){},c.onabort=function(){u=!0},c.ontimeout=r,c.open(p,d,!m,e.username,e.password),m||(c.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(h=setTimeout((function(){if(!u){u=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}}),e.timeout)),c.setRequestHeader)for(a in g)g.hasOwnProperty(a)&&c.setRequestHeader(a,g[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(f||null),c}e.exports=l,e.exports.default=l,l.XMLHttpRequest=n.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:n.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],(function(e){l["delete"===e?"del":e]=function(t,i,n){return(i=a(t,i,n)).method=e.toUpperCase(),u(i)}}))},1194:(e,t,i)=>{"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=a(i(2422)),s=a(i(2506));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.name="SwupProgressPlugin",i.startShowingProgress=function(){i.progressBar.setValue(0),i.showProgressBarAfterDelay()},i.stopShowingProgress=function(){i.progressBar.setValue(1),i.options.hideImmediately?i.hideProgressBar():i.finishAnimationAndHideProgressBar()},i.showProgressBar=function(){i.cancelHideProgressBarTimeout(),i.progressBar.show()},i.showProgressBarAfterDelay=function(){i.cancelShowProgressBarTimeout(),i.cancelHideProgressBarTimeout(),i.showProgressBarTimeout=window.setTimeout(i.showProgressBar,i.options.delay)},i.hideProgressBar=function(){i.cancelShowProgressBarTimeout(),i.progressBar.hide()},i.finishAnimationAndHideProgressBar=function(){i.cancelShowProgressBarTimeout(),i.hideProgressBarTimeout=window.setTimeout(i.hideProgressBar,i.options.transition)},i.cancelShowProgressBarTimeout=function(){window.clearTimeout(i.showProgressBarTimeout),delete i.showProgressBarTimeout},i.cancelHideProgressBarTimeout=function(){window.clearTimeout(i.hideProgressBarTimeout),delete i.hideProgressBarTimeout};var r={className:"swup-progress-bar",delay:300,transition:void 0,minValue:void 0,initialValue:void 0,hideImmediately:!0};return i.options=n({},r,e),i.showProgressBarTimeout=null,i.hideProgressBarTimeout=null,i.progressBar=new s.default({className:i.options.className,animationDuration:i.options.transition,minValue:i.options.minValue,initialValue:i.options.initialValue}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"mount",value:function(){this.swup.on("transitionStart",this.startShowingProgress),this.swup.on("contentReplaced",this.stopShowingProgress)}},{key:"unmount",value:function(){this.swup.off("transitionStart",this.startShowingProgress),this.swup.off("contentReplaced",this.stopShowingProgress)}}]),t}(o.default);t.A=l},1526:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){document.documentElement.className.split(" ").forEach((function(e){(new RegExp("^to-").test(e)||"is-changing"===e||"is-rendering"===e||"is-popstate"===e)&&document.documentElement.classList.remove(e)}))}},2008:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){return void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?"webkitTransitionEnd":"transitionend"}},2253:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},2263:(e,t,i)=>{"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=l(i(2422)),a=l(i(847));function l(e){return e&&e.__esModule?e:{default:e}}i(5828);var u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.name="SwupA11yPlugin",i.announceVisit=function(){requestAnimationFrame((function(){i.announcePageName(),i.focusPageContent()}))},i.announcePageName=function(){var e=i.options,t=e.contentSelector,n=e.headingSelector,o=e.urlTemplate,s=e.announcementTemplate,a=o.replace("{url}",window.location.pathname);document.title&&(a=document.title);var l=document.querySelector(t);if(l){var u=l.querySelectorAll(n);if(u&&u.length){var c=r(u,1)[0];a=c.getAttribute("aria-label")||c.textContent}}var h=s.replace("{title}",a.trim());i.liveRegion.say(h)},i.focusPageContent=function(){var e=document.querySelector(i.options.contentSelector);e&&(e.setAttribute("tabindex","-1"),e.focus({preventScroll:!0}))},i.onTransitionStart=function(){document.documentElement.setAttribute("aria-busy","true")},i.onTransitionEnd=function(){document.documentElement.removeAttribute("aria-busy")},i.options=n({contentSelector:"main",headingSelector:"h1, h2, [role=heading]",announcementTemplate:"Navigated to: {title}",urlTemplate:"New page at {url}"},e),i.liveRegion=new a.default,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"mount",value:function(){this.swup.on("contentReplaced",this.announceVisit),this.swup.on("transitionStart",this.onTransitionStart),this.swup.on("transitionEnd",this.onTransitionEnd)}},{key:"unmount",value:function(){this.swup.off("contentReplaced",this.announceVisit),this.swup.off("transitionStart",this.onTransitionStart),this.swup.off("transitionEnd",this.onTransitionEnd)}}]),t}(s.default);t.A=u},2395:(e,t,i)=>{var n={"./index.js":3905};function r(e){return Promise.resolve().then((()=>{if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i(n[e])}))}r.keys=()=>Object.keys(n),r.id=2395,e.exports=r},2422:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSwupPlugin=!0}return i(e,[{key:"mount",value:function(){}},{key:"unmount",value:function(){}},{key:"_beforeMount",value:function(){}},{key:"_afterUnmount",value:function(){}}]),e}();t.default=n},2506:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var n=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.className,r=void 0===n?"progress-bar":n,o=i.styleAttr,s=void 0===o?"data-progressbar-styles":o,a=i.animationDuration,l=void 0===a?300:a,u=i.minValue,c=void 0===u?.1:u,h=i.initialValue,d=void 0===h?.25:h,p=i.trickleValue,f=void 0===p?.03:p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.styleElement=null,this.progressElement=null,this.value=0,this.visible=!1,this.hiding=!1,this.trickleInterval=null,this.trickle=function(){var e=Math.random()*t.trickleValue;t.setValue(t.value+e)},this.className=r,this.styleAttr=s,this.animationDuration=l,this.minValue=c,this.initialValue=d,this.trickleValue=f,this.styleElement=this.createStyleElement(),this.progressElement=this.createProgressElement()}return i(e,[{key:"show",value:function(){this.visible||(this.visible=!0,this.installStyleElement(),this.installProgressElement(),this.startTrickling())}},{key:"hide",value:function(){var e=this;this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement((function(){e.uninstallProgressElement(),e.stopTrickling(),e.visible=!1,e.hiding=!1})))}},{key:"setValue",value:function(e){this.value=Math.min(1,Math.max(this.minValue,e)),this.refresh()}},{key:"installStyleElement",value:function(){document.head.insertBefore(this.styleElement,document.head.firstChild)}},{key:"installProgressElement",value:function(){this.progressElement.style.width="0%",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.progressElement.scrollTop=0,this.setValue(Math.random()*this.initialValue)}},{key:"fadeProgressElement",value:function(e){this.progressElement.style.opacity="0",setTimeout(e,1.5*this.animationDuration)}},{key:"uninstallProgressElement",value:function(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}},{key:"startTrickling",value:function(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,this.animationDuration))}},{key:"stopTrickling",value:function(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}},{key:"refresh",value:function(){var e=this;requestAnimationFrame((function(){e.progressElement.style.width=100*e.value+"%"}))}},{key:"createStyleElement",value:function(){var e=document.createElement("style");return e.setAttribute(this.styleAttr,""),e.textContent=this.defaultStyles,e}},{key:"createProgressElement",value:function(){var e=document.createElement("div");return e.className=this.className,e}},{key:"defaultStyles",get:function(){return"\n\t\t."+this.className+" {\n\t\t\t\tposition: fixed;\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\tbackground-color: black;\n\t\t\t\tz-index: 9999;\n\t\t\t\ttransition:\n\t\t\t\t\twidth "+this.animationDuration+"ms ease-out,\n\t\t\t\t\topacity "+this.animationDuration/2+"ms "+this.animationDuration/2+"ms ease-in;\n\t\t\t\ttransform: translate3d(0, 0, 0);\n\t\t\t}\n\t\t"}}]),e}();t.default=n},2543:function(e,t,i){var n;e=i.nmd(e),function(){var r,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=16,u=32,c=64,h=128,d=256,p=1/0,f=9007199254740991,g=NaN,m=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",u],["partialRight",c],["rearg",d]],y="[object Arguments]",b="[object Array]",_="[object Boolean]",w="[object Date]",T="[object Error]",S="[object Function]",E="[object GeneratorFunction]",x="[object Map]",C="[object Number]",k="[object Object]",P="[object Promise]",A="[object RegExp]",I="[object Set]",L="[object String]",D="[object Symbol]",O="[object WeakMap]",R="[object ArrayBuffer]",M="[object DataView]",N="[object Float32Array]",B="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",$="[object Int32Array]",H="[object Uint8Array]",j="[object Uint8ClampedArray]",z="[object Uint16Array]",q="[object Uint32Array]",V=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,K=RegExp(Y.source),Q=RegExp(X.source),Z=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ie=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(re.source),se=/^\s+/,ae=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,_e=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Te=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",Pe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Le="['’]",De="["+Ee+"]",Oe="["+Ie+"]",Re="["+xe+"]",Me="\\d+",Ne="["+Ce+"]",Be="["+ke+"]",Fe="[^"+Ee+Ie+Me+Ce+ke+Pe+"]",Ue="\\ud83c[\\udffb-\\udfff]",$e="[^"+Ee+"]",He="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Pe+"]",qe="\\u200d",Ve="(?:"+Be+"|"+Fe+")",We="(?:"+ze+"|"+Fe+")",Ge="(?:['’](?:d|ll|m|re|s|t|ve))?",Ye="(?:['’](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+Re+"|"+Ue+")"+"?",Ke="["+Ae+"]?",Qe=Ke+Xe+("(?:"+qe+"(?:"+[$e,He,je].join("|")+")"+Ke+Xe+")*"),Ze="(?:"+[Ne,He,je].join("|")+")"+Qe,Je="(?:"+[$e+Re+"?",Re,He,je,De].join("|")+")",et=RegExp(Le,"g"),tt=RegExp(Re,"g"),it=RegExp(Ue+"(?="+Ue+")|"+Je+Qe,"g"),nt=RegExp([ze+"?"+Be+"+"+Ge+"(?="+[Oe,ze,"$"].join("|")+")",We+"+"+Ye+"(?="+[Oe,ze+Ve,"$"].join("|")+")",ze+"?"+Ve+"+"+Ge,ze+"+"+Ye,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Me,Ze].join("|"),"g"),rt=RegExp("["+qe+Ee+xe+Ae+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,st=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,lt={};lt[N]=lt[B]=lt[F]=lt[U]=lt[$]=lt[H]=lt[j]=lt[z]=lt[q]=!0,lt[y]=lt[b]=lt[R]=lt[_]=lt[M]=lt[w]=lt[T]=lt[S]=lt[x]=lt[C]=lt[k]=lt[A]=lt[I]=lt[L]=lt[O]=!1;var ut={};ut[y]=ut[b]=ut[R]=ut[M]=ut[_]=ut[w]=ut[N]=ut[B]=ut[F]=ut[U]=ut[$]=ut[x]=ut[C]=ut[k]=ut[A]=ut[I]=ut[L]=ut[D]=ut[H]=ut[j]=ut[z]=ut[q]=!0,ut[T]=ut[S]=ut[O]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,pt="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,ft="object"==typeof self&&self&&self.Object===Object&&self,gt=pt||ft||Function("return this")(),mt=t&&!t.nodeType&&t,vt=mt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===mt,bt=yt&&pt.process,_t=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(e){}}(),wt=_t&&_t.isArrayBuffer,Tt=_t&&_t.isDate,St=_t&&_t.isMap,Et=_t&&_t.isRegExp,xt=_t&&_t.isSet,Ct=_t&&_t.isTypedArray;function kt(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function Pt(e,t,i,n){for(var r=-1,o=null==e?0:e.length;++r<o;){var s=e[r];t(n,s,i(s),e)}return n}function At(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function It(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function Lt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function Dt(e,t){for(var i=-1,n=null==e?0:e.length,r=0,o=[];++i<n;){var s=e[i];t(s,i,e)&&(o[r++]=s)}return o}function Ot(e,t){return!!(null==e?0:e.length)&&zt(e,t,0)>-1}function Rt(e,t,i){for(var n=-1,r=null==e?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}function Mt(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}function Nt(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}function Bt(e,t,i,n){var r=-1,o=null==e?0:e.length;for(n&&o&&(i=e[++r]);++r<o;)i=t(i,e[r],r,e);return i}function Ft(e,t,i,n){var r=null==e?0:e.length;for(n&&r&&(i=e[--r]);r--;)i=t(i,e[r],r,e);return i}function Ut(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var $t=Gt("length");function Ht(e,t,i){var n;return i(e,(function(e,i,r){if(t(e,i,r))return n=i,!1})),n}function jt(e,t,i,n){for(var r=e.length,o=i+(n?1:-1);n?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function zt(e,t,i){return t==t?function(e,t,i){var n=i-1,r=e.length;for(;++n<r;)if(e[n]===t)return n;return-1}(e,t,i):jt(e,Vt,i)}function qt(e,t,i,n){for(var r=i-1,o=e.length;++r<o;)if(n(e[r],t))return r;return-1}function Vt(e){return e!=e}function Wt(e,t){var i=null==e?0:e.length;return i?Kt(e,t)/i:g}function Gt(e){return function(t){return null==t?r:t[e]}}function Yt(e){return function(t){return null==e?r:e[t]}}function Xt(e,t,i,n,r){return r(e,(function(e,r,o){i=n?(n=!1,e):t(i,e,r,o)})),i}function Kt(e,t){for(var i,n=-1,o=e.length;++n<o;){var s=t(e[n]);s!==r&&(i=i===r?s:i+s)}return i}function Qt(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function Zt(e){return e?e.slice(0,gi(e)+1).replace(se,""):e}function Jt(e){return function(t){return e(t)}}function ei(e,t){return Mt(t,(function(t){return e[t]}))}function ti(e,t){return e.has(t)}function ii(e,t){for(var i=-1,n=e.length;++i<n&&zt(t,e[i],0)>-1;);return i}function ni(e,t){for(var i=e.length;i--&&zt(t,e[i],0)>-1;);return i}var ri=Yt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),oi=Yt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function si(e){return"\\"+ct[e]}function ai(e){return rt.test(e)}function li(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function ui(e,t){return function(i){return e(t(i))}}function ci(e,t){for(var i=-1,n=e.length,r=0,o=[];++i<n;){var s=e[i];s!==t&&s!==a||(e[i]=a,o[r++]=i)}return o}function hi(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}function di(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=[e,e]})),i}function pi(e){return ai(e)?function(e){var t=it.lastIndex=0;for(;it.test(e);)++t;return t}(e):$t(e)}function fi(e){return ai(e)?function(e){return e.match(it)||[]}(e):function(e){return e.split("")}(e)}function gi(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var mi=Yt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vi=function e(t){var i,n=(t=null==t?gt:vi.defaults(gt.Object(),t,vi.pick(gt,st))).Array,ae=t.Date,Ee=t.Error,xe=t.Function,Ce=t.Math,ke=t.Object,Pe=t.RegExp,Ae=t.String,Ie=t.TypeError,Le=n.prototype,De=xe.prototype,Oe=ke.prototype,Re=t["__core-js_shared__"],Me=De.toString,Ne=Oe.hasOwnProperty,Be=0,Fe=(i=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Ue=Oe.toString,$e=Me.call(ke),He=gt._,je=Pe("^"+Me.call(Ne).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=yt?t.Buffer:r,qe=t.Symbol,Ve=t.Uint8Array,We=ze?ze.allocUnsafe:r,Ge=ui(ke.getPrototypeOf,ke),Ye=ke.create,Xe=Oe.propertyIsEnumerable,Ke=Le.splice,Qe=qe?qe.isConcatSpreadable:r,Ze=qe?qe.iterator:r,Je=qe?qe.toStringTag:r,it=function(){try{var e=po(ke,"defineProperty");return e({},"",{}),e}catch(e){}}(),rt=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,ct=ae&&ae.now!==gt.Date.now&&ae.now,pt=t.setTimeout!==gt.setTimeout&&t.setTimeout,ft=Ce.ceil,mt=Ce.floor,vt=ke.getOwnPropertySymbols,bt=ze?ze.isBuffer:r,_t=t.isFinite,$t=Le.join,Yt=ui(ke.keys,ke),yi=Ce.max,bi=Ce.min,_i=ae.now,wi=t.parseInt,Ti=Ce.random,Si=Le.reverse,Ei=po(t,"DataView"),xi=po(t,"Map"),Ci=po(t,"Promise"),ki=po(t,"Set"),Pi=po(t,"WeakMap"),Ai=po(ke,"create"),Ii=Pi&&new Pi,Li={},Di=Uo(Ei),Oi=Uo(xi),Ri=Uo(Ci),Mi=Uo(ki),Ni=Uo(Pi),Bi=qe?qe.prototype:r,Fi=Bi?Bi.valueOf:r,Ui=Bi?Bi.toString:r;function $i(e){if(ia(e)&&!Vs(e)&&!(e instanceof qi)){if(e instanceof zi)return e;if(Ne.call(e,"__wrapped__"))return $o(e)}return new zi(e)}var Hi=function(){function e(){}return function(t){if(!ta(t))return{};if(Ye)return Ye(t);e.prototype=t;var i=new e;return e.prototype=r,i}}();function ji(){}function zi(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function qi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Vi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Wi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Gi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Yi(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Gi;++t<i;)this.add(e[t])}function Xi(e){var t=this.__data__=new Wi(e);this.size=t.size}function Ki(e,t){var i=Vs(e),n=!i&&qs(e),r=!i&&!n&&Xs(e),o=!i&&!n&&!r&&ca(e),s=i||n||r||o,a=s?Qt(e.length,Ae):[],l=a.length;for(var u in e)!t&&!Ne.call(e,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_o(u,l))||a.push(u);return a}function Qi(e){var t=e.length;return t?e[Xn(0,t-1)]:r}function Zi(e,t){return No(Ir(e),ln(t,0,e.length))}function Ji(e){return No(Ir(e))}function en(e,t,i){(i!==r&&!Hs(e[t],i)||i===r&&!(t in e))&&sn(e,t,i)}function tn(e,t,i){var n=e[t];Ne.call(e,t)&&Hs(n,i)&&(i!==r||t in e)||sn(e,t,i)}function nn(e,t){for(var i=e.length;i--;)if(Hs(e[i][0],t))return i;return-1}function rn(e,t,i,n){return pn(e,(function(e,r,o){t(n,e,i(e),o)})),n}function on(e,t){return e&&Lr(t,Da(t),e)}function sn(e,t,i){"__proto__"==t&&it?it(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function an(e,t){for(var i=-1,o=t.length,s=n(o),a=null==e;++i<o;)s[i]=a?r:ka(e,t[i]);return s}function ln(e,t,i){return e==e&&(i!==r&&(e=e<=i?e:i),t!==r&&(e=e>=t?e:t)),e}function un(e,t,i,n,o,s){var a,l=1&t,u=2&t,c=4&t;if(i&&(a=o?i(e,n,o,s):i(e)),a!==r)return a;if(!ta(e))return e;var h=Vs(e);if(h){if(a=function(e){var t=e.length,i=new e.constructor(t);t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(i.index=e.index,i.input=e.input);return i}(e),!l)return Ir(e,a)}else{var d=mo(e),p=d==S||d==E;if(Xs(e))return Er(e,l);if(d==k||d==y||p&&!o){if(a=u||p?{}:yo(e),!l)return u?function(e,t){return Lr(e,go(e),t)}(e,function(e,t){return e&&Lr(t,Oa(t),e)}(a,e)):function(e,t){return Lr(e,fo(e),t)}(e,on(a,e))}else{if(!ut[d])return o?e:{};a=function(e,t,i){var n=e.constructor;switch(t){case R:return xr(e);case _:case w:return new n(+e);case M:return function(e,t){var i=t?xr(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case N:case B:case F:case U:case $:case H:case j:case z:case q:return Cr(e,i);case x:return new n;case C:case L:return new n(e);case A:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new n;case D:return r=e,Fi?ke(Fi.call(r)):{}}var r}(e,d,l)}}s||(s=new Xi);var f=s.get(e);if(f)return f;s.set(e,a),aa(e)?e.forEach((function(n){a.add(un(n,t,i,n,e,s))})):na(e)&&e.forEach((function(n,r){a.set(r,un(n,t,i,r,e,s))}));var g=h?r:(c?u?oo:ro:u?Oa:Da)(e);return At(g||e,(function(n,r){g&&(n=e[r=n]),tn(a,r,un(n,t,i,r,e,s))})),a}function cn(e,t,i){var n=i.length;if(null==e)return!n;for(e=ke(e);n--;){var o=i[n],s=t[o],a=e[o];if(a===r&&!(o in e)||!s(a))return!1}return!0}function hn(e,t,i){if("function"!=typeof e)throw new Ie(o);return Do((function(){e.apply(r,i)}),t)}function dn(e,t,i,n){var r=-1,o=Ot,s=!0,a=e.length,l=[],u=t.length;if(!a)return l;i&&(t=Mt(t,Jt(i))),n?(o=Rt,s=!1):t.length>=200&&(o=ti,s=!1,t=new Yi(t));e:for(;++r<a;){var c=e[r],h=null==i?c:i(c);if(c=n||0!==c?c:0,s&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else o(t,h,n)||l.push(c)}return l}$i.templateSettings={escape:Z,evaluate:J,interpolate:ee,variable:"",imports:{_:$i}},$i.prototype=ji.prototype,$i.prototype.constructor=$i,zi.prototype=Hi(ji.prototype),zi.prototype.constructor=zi,qi.prototype=Hi(ji.prototype),qi.prototype.constructor=qi,Vi.prototype.clear=function(){this.__data__=Ai?Ai(null):{},this.size=0},Vi.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vi.prototype.get=function(e){var t=this.__data__;if(Ai){var i=t[e];return i===s?r:i}return Ne.call(t,e)?t[e]:r},Vi.prototype.has=function(e){var t=this.__data__;return Ai?t[e]!==r:Ne.call(t,e)},Vi.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ai&&t===r?s:t,this},Wi.prototype.clear=function(){this.__data__=[],this.size=0},Wi.prototype.delete=function(e){var t=this.__data__,i=nn(t,e);return!(i<0)&&(i==t.length-1?t.pop():Ke.call(t,i,1),--this.size,!0)},Wi.prototype.get=function(e){var t=this.__data__,i=nn(t,e);return i<0?r:t[i][1]},Wi.prototype.has=function(e){return nn(this.__data__,e)>-1},Wi.prototype.set=function(e,t){var i=this.__data__,n=nn(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},Gi.prototype.clear=function(){this.size=0,this.__data__={hash:new Vi,map:new(xi||Wi),string:new Vi}},Gi.prototype.delete=function(e){var t=co(this,e).delete(e);return this.size-=t?1:0,t},Gi.prototype.get=function(e){return co(this,e).get(e)},Gi.prototype.has=function(e){return co(this,e).has(e)},Gi.prototype.set=function(e,t){var i=co(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},Yi.prototype.add=Yi.prototype.push=function(e){return this.__data__.set(e,s),this},Yi.prototype.has=function(e){return this.__data__.has(e)},Xi.prototype.clear=function(){this.__data__=new Wi,this.size=0},Xi.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Xi.prototype.get=function(e){return this.__data__.get(e)},Xi.prototype.has=function(e){return this.__data__.has(e)},Xi.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Wi){var n=i.__data__;if(!xi||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Gi(n)}return i.set(e,t),this.size=i.size,this};var pn=Rr(wn),fn=Rr(Tn,!0);function gn(e,t){var i=!0;return pn(e,(function(e,n,r){return i=!!t(e,n,r)})),i}function mn(e,t,i){for(var n=-1,o=e.length;++n<o;){var s=e[n],a=t(s);if(null!=a&&(l===r?a==a&&!ua(a):i(a,l)))var l=a,u=s}return u}function vn(e,t){var i=[];return pn(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}function yn(e,t,i,n,r){var o=-1,s=e.length;for(i||(i=bo),r||(r=[]);++o<s;){var a=e[o];t>0&&i(a)?t>1?yn(a,t-1,i,n,r):Nt(r,a):n||(r[r.length]=a)}return r}var bn=Mr(),_n=Mr(!0);function wn(e,t){return e&&bn(e,t,Da)}function Tn(e,t){return e&&_n(e,t,Da)}function Sn(e,t){return Dt(t,(function(t){return Zs(e[t])}))}function En(e,t){for(var i=0,n=(t=_r(t,e)).length;null!=e&&i<n;)e=e[Fo(t[i++])];return i&&i==n?e:r}function xn(e,t,i){var n=t(e);return Vs(e)?n:Nt(n,i(e))}function Cn(e){return null==e?e===r?"[object Undefined]":"[object Null]":Je&&Je in ke(e)?function(e){var t=Ne.call(e,Je),i=e[Je];try{e[Je]=r;var n=!0}catch(e){}var o=Ue.call(e);n&&(t?e[Je]=i:delete e[Je]);return o}(e):function(e){return Ue.call(e)}(e)}function kn(e,t){return e>t}function Pn(e,t){return null!=e&&Ne.call(e,t)}function An(e,t){return null!=e&&t in ke(e)}function In(e,t,i){for(var o=i?Rt:Ot,s=e[0].length,a=e.length,l=a,u=n(a),c=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Mt(d,Jt(t))),c=bi(d.length,c),u[l]=!i&&(t||s>=120&&d.length>=120)?new Yi(l&&d):r}d=e[0];var p=-1,f=u[0];e:for(;++p<s&&h.length<c;){var g=d[p],m=t?t(g):g;if(g=i||0!==g?g:0,!(f?ti(f,m):o(h,m,i))){for(l=a;--l;){var v=u[l];if(!(v?ti(v,m):o(e[l],m,i)))continue e}f&&f.push(m),h.push(g)}}return h}function Ln(e,t,i){var n=null==(e=Ao(e,t=_r(t,e)))?e:e[Fo(Qo(t))];return null==n?r:kt(n,e,i)}function Dn(e){return ia(e)&&Cn(e)==y}function On(e,t,i,n,o){return e===t||(null==e||null==t||!ia(e)&&!ia(t)?e!=e&&t!=t:function(e,t,i,n,o,s){var a=Vs(e),l=Vs(t),u=a?b:mo(e),c=l?b:mo(t),h=(u=u==y?k:u)==k,d=(c=c==y?k:c)==k,p=u==c;if(p&&Xs(e)){if(!Xs(t))return!1;a=!0,h=!1}if(p&&!h)return s||(s=new Xi),a||ca(e)?io(e,t,i,n,o,s):function(e,t,i,n,r,o,s){switch(i){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!o(new Ve(e),new Ve(t)));case _:case w:case C:return Hs(+e,+t);case T:return e.name==t.name&&e.message==t.message;case A:case L:return e==t+"";case x:var a=li;case I:var l=1&n;if(a||(a=hi),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;n|=2,s.set(e,t);var c=io(a(e),a(t),n,r,o,s);return s.delete(e),c;case D:if(Fi)return Fi.call(e)==Fi.call(t)}return!1}(e,t,u,i,n,o,s);if(!(1&i)){var f=h&&Ne.call(e,"__wrapped__"),g=d&&Ne.call(t,"__wrapped__");if(f||g){var m=f?e.value():e,v=g?t.value():t;return s||(s=new Xi),o(m,v,i,n,s)}}if(!p)return!1;return s||(s=new Xi),function(e,t,i,n,o,s){var a=1&i,l=ro(e),u=l.length,c=ro(t),h=c.length;if(u!=h&&!a)return!1;var d=u;for(;d--;){var p=l[d];if(!(a?p in t:Ne.call(t,p)))return!1}var f=s.get(e),g=s.get(t);if(f&&g)return f==t&&g==e;var m=!0;s.set(e,t),s.set(t,e);var v=a;for(;++d<u;){var y=e[p=l[d]],b=t[p];if(n)var _=a?n(b,y,p,t,e,s):n(y,b,p,e,t,s);if(!(_===r?y===b||o(y,b,i,n,s):_)){m=!1;break}v||(v="constructor"==p)}if(m&&!v){var w=e.constructor,T=t.constructor;w==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof T&&T instanceof T||(m=!1)}return s.delete(e),s.delete(t),m}(e,t,i,n,o,s)}(e,t,i,n,On,o))}function Rn(e,t,i,n){var o=i.length,s=o,a=!n;if(null==e)return!s;for(e=ke(e);o--;){var l=i[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<s;){var u=(l=i[o])[0],c=e[u],h=l[1];if(a&&l[2]){if(c===r&&!(u in e))return!1}else{var d=new Xi;if(n)var p=n(c,h,u,e,t,d);if(!(p===r?On(h,c,3,n,d):p))return!1}}return!0}function Mn(e){return!(!ta(e)||(t=e,Fe&&Fe in t))&&(Zs(e)?je:ye).test(Uo(e));var t}function Nn(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Vs(e)?jn(e[0],e[1]):Hn(e):pl(e)}function Bn(e){if(!xo(e))return Yt(e);var t=[];for(var i in ke(e))Ne.call(e,i)&&"constructor"!=i&&t.push(i);return t}function Fn(e){if(!ta(e))return function(e){var t=[];if(null!=e)for(var i in ke(e))t.push(i);return t}(e);var t=xo(e),i=[];for(var n in e)("constructor"!=n||!t&&Ne.call(e,n))&&i.push(n);return i}function Un(e,t){return e<t}function $n(e,t){var i=-1,r=Gs(e)?n(e.length):[];return pn(e,(function(e,n,o){r[++i]=t(e,n,o)})),r}function Hn(e){var t=ho(e);return 1==t.length&&t[0][2]?ko(t[0][0],t[0][1]):function(i){return i===e||Rn(i,e,t)}}function jn(e,t){return To(e)&&Co(t)?ko(Fo(e),t):function(i){var n=ka(i,e);return n===r&&n===t?Pa(i,e):On(t,n,3)}}function zn(e,t,i,n,o){e!==t&&bn(t,(function(s,a){if(o||(o=new Xi),ta(s))!function(e,t,i,n,o,s,a){var l=Io(e,i),u=Io(t,i),c=a.get(u);if(c)return void en(e,i,c);var h=s?s(l,u,i+"",e,t,a):r,d=h===r;if(d){var p=Vs(u),f=!p&&Xs(u),g=!p&&!f&&ca(u);h=u,p||f||g?Vs(l)?h=l:Ys(l)?h=Ir(l):f?(d=!1,h=Er(u,!0)):g?(d=!1,h=Cr(u,!0)):h=[]:oa(u)||qs(u)?(h=l,qs(l)?h=ya(l):ta(l)&&!Zs(l)||(h=yo(u))):d=!1}d&&(a.set(u,h),o(h,u,n,s,a),a.delete(u));en(e,i,h)}(e,t,a,i,zn,n,o);else{var l=n?n(Io(e,a),s,a+"",e,t,o):r;l===r&&(l=s),en(e,a,l)}}),Oa)}function qn(e,t){var i=e.length;if(i)return _o(t+=t<0?i:0,i)?e[t]:r}function Vn(e,t,i){t=t.length?Mt(t,(function(e){return Vs(e)?function(t){return En(t,1===e.length?e[0]:e)}:e})):[rl];var n=-1;t=Mt(t,Jt(uo()));var r=$n(e,(function(e,i,r){var o=Mt(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return function(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}(r,(function(e,t){return function(e,t,i){var n=-1,r=e.criteria,o=t.criteria,s=r.length,a=i.length;for(;++n<s;){var l=kr(r[n],o[n]);if(l)return n>=a?l:l*("desc"==i[n]?-1:1)}return e.index-t.index}(e,t,i)}))}function Wn(e,t,i){for(var n=-1,r=t.length,o={};++n<r;){var s=t[n],a=En(e,s);i(a,s)&&er(o,_r(s,e),a)}return o}function Gn(e,t,i,n){var r=n?qt:zt,o=-1,s=t.length,a=e;for(e===t&&(t=Ir(t)),i&&(a=Mt(e,Jt(i)));++o<s;)for(var l=0,u=t[o],c=i?i(u):u;(l=r(a,c,l,n))>-1;)a!==e&&Ke.call(a,l,1),Ke.call(e,l,1);return e}function Yn(e,t){for(var i=e?t.length:0,n=i-1;i--;){var r=t[i];if(i==n||r!==o){var o=r;_o(r)?Ke.call(e,r,1):dr(e,r)}}return e}function Xn(e,t){return e+mt(Ti()*(t-e+1))}function Kn(e,t){var i="";if(!e||t<1||t>f)return i;do{t%2&&(i+=e),(t=mt(t/2))&&(e+=e)}while(t);return i}function Qn(e,t){return Oo(Po(e,t,rl),e+"")}function Zn(e){return Qi(Ha(e))}function Jn(e,t){var i=Ha(e);return No(i,ln(t,0,i.length))}function er(e,t,i,n){if(!ta(e))return e;for(var o=-1,s=(t=_r(t,e)).length,a=s-1,l=e;null!=l&&++o<s;){var u=Fo(t[o]),c=i;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var h=l[u];(c=n?n(h,u,l):r)===r&&(c=ta(h)?h:_o(t[o+1])?[]:{})}tn(l,u,c),l=l[u]}return e}var tr=Ii?function(e,t){return Ii.set(e,t),e}:rl,ir=it?function(e,t){return it(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:rl;function nr(e){return No(Ha(e))}function rr(e,t,i){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(i=i>o?o:i)<0&&(i+=o),o=t>i?0:i-t>>>0,t>>>=0;for(var s=n(o);++r<o;)s[r]=e[r+t];return s}function or(e,t){var i;return pn(e,(function(e,n,r){return!(i=t(e,n,r))})),!!i}function sr(e,t,i){var n=0,r=null==e?n:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;n<r;){var o=n+r>>>1,s=e[o];null!==s&&!ua(s)&&(i?s<=t:s<t)?n=o+1:r=o}return r}return ar(e,t,rl,i)}function ar(e,t,i,n){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=i(t))!=t,l=null===t,u=ua(t),c=t===r;o<s;){var h=mt((o+s)/2),d=i(e[h]),p=d!==r,f=null===d,g=d==d,m=ua(d);if(a)var v=n||g;else v=c?g&&(n||p):l?g&&p&&(n||!f):u?g&&p&&!f&&(n||!m):!f&&!m&&(n?d<=t:d<t);v?o=h+1:s=h}return bi(s,4294967294)}function lr(e,t){for(var i=-1,n=e.length,r=0,o=[];++i<n;){var s=e[i],a=t?t(s):s;if(!i||!Hs(a,l)){var l=a;o[r++]=0===s?0:s}}return o}function ur(e){return"number"==typeof e?e:ua(e)?g:+e}function cr(e){if("string"==typeof e)return e;if(Vs(e))return Mt(e,cr)+"";if(ua(e))return Ui?Ui.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function hr(e,t,i){var n=-1,r=Ot,o=e.length,s=!0,a=[],l=a;if(i)s=!1,r=Rt;else if(o>=200){var u=t?null:Kr(e);if(u)return hi(u);s=!1,r=ti,l=new Yi}else l=t?[]:a;e:for(;++n<o;){var c=e[n],h=t?t(c):c;if(c=i||0!==c?c:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),a.push(c)}else r(l,h,i)||(l!==a&&l.push(h),a.push(c))}return a}function dr(e,t){return null==(e=Ao(e,t=_r(t,e)))||delete e[Fo(Qo(t))]}function pr(e,t,i,n){return er(e,t,i(En(e,t)),n)}function fr(e,t,i,n){for(var r=e.length,o=n?r:-1;(n?o--:++o<r)&&t(e[o],o,e););return i?rr(e,n?0:o,n?o+1:r):rr(e,n?o+1:0,n?r:o)}function gr(e,t){var i=e;return i instanceof qi&&(i=i.value()),Bt(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),i)}function mr(e,t,i){var r=e.length;if(r<2)return r?hr(e[0]):[];for(var o=-1,s=n(r);++o<r;)for(var a=e[o],l=-1;++l<r;)l!=o&&(s[o]=dn(s[o]||a,e[l],t,i));return hr(yn(s,1),t,i)}function vr(e,t,i){for(var n=-1,o=e.length,s=t.length,a={};++n<o;){var l=n<s?t[n]:r;i(a,e[n],l)}return a}function yr(e){return Ys(e)?e:[]}function br(e){return"function"==typeof e?e:rl}function _r(e,t){return Vs(e)?e:To(e,t)?[e]:Bo(ba(e))}var wr=Qn;function Tr(e,t,i){var n=e.length;return i=i===r?n:i,!t&&i>=n?e:rr(e,t,i)}var Sr=rt||function(e){return gt.clearTimeout(e)};function Er(e,t){if(t)return e.slice();var i=e.length,n=We?We(i):new e.constructor(i);return e.copy(n),n}function xr(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function Cr(e,t){var i=t?xr(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function kr(e,t){if(e!==t){var i=e!==r,n=null===e,o=e==e,s=ua(e),a=t!==r,l=null===t,u=t==t,c=ua(t);if(!l&&!c&&!s&&e>t||s&&a&&u&&!l&&!c||n&&a&&u||!i&&u||!o)return 1;if(!n&&!s&&!c&&e<t||c&&i&&o&&!n&&!s||l&&i&&o||!a&&o||!u)return-1}return 0}function Pr(e,t,i,r){for(var o=-1,s=e.length,a=i.length,l=-1,u=t.length,c=yi(s-a,0),h=n(u+c),d=!r;++l<u;)h[l]=t[l];for(;++o<a;)(d||o<s)&&(h[i[o]]=e[o]);for(;c--;)h[l++]=e[o++];return h}function Ar(e,t,i,r){for(var o=-1,s=e.length,a=-1,l=i.length,u=-1,c=t.length,h=yi(s-l,0),d=n(h+c),p=!r;++o<h;)d[o]=e[o];for(var f=o;++u<c;)d[f+u]=t[u];for(;++a<l;)(p||o<s)&&(d[f+i[a]]=e[o++]);return d}function Ir(e,t){var i=-1,r=e.length;for(t||(t=n(r));++i<r;)t[i]=e[i];return t}function Lr(e,t,i,n){var o=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var l=t[s],u=n?n(i[l],e[l],l,i,e):r;u===r&&(u=e[l]),o?sn(i,l,u):tn(i,l,u)}return i}function Dr(e,t){return function(i,n){var r=Vs(i)?Pt:rn,o=t?t():{};return r(i,e,uo(n,2),o)}}function Or(e){return Qn((function(t,i){var n=-1,o=i.length,s=o>1?i[o-1]:r,a=o>2?i[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,a&&wo(i[0],i[1],a)&&(s=o<3?r:s,o=1),t=ke(t);++n<o;){var l=i[n];l&&e(t,l,n,s)}return t}))}function Rr(e,t){return function(i,n){if(null==i)return i;if(!Gs(i))return e(i,n);for(var r=i.length,o=t?r:-1,s=ke(i);(t?o--:++o<r)&&!1!==n(s[o],o,s););return i}}function Mr(e){return function(t,i,n){for(var r=-1,o=ke(t),s=n(t),a=s.length;a--;){var l=s[e?a:++r];if(!1===i(o[l],l,o))break}return t}}function Nr(e){return function(t){var i=ai(t=ba(t))?fi(t):r,n=i?i[0]:t.charAt(0),o=i?Tr(i,1).join(""):t.slice(1);return n[e]()+o}}function Br(e){return function(t){return Bt(Za(qa(t).replace(et,"")),e,"")}}function Fr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=Hi(e.prototype),n=e.apply(i,t);return ta(n)?n:i}}function Ur(e){return function(t,i,n){var o=ke(t);if(!Gs(t)){var s=uo(i,3);t=Da(t),i=function(e){return s(o[e],e,o)}}var a=e(t,i,n);return a>-1?o[s?t[a]:a]:r}}function $r(e){return no((function(t){var i=t.length,n=i,s=zi.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new Ie(o);if(s&&!l&&"wrapper"==ao(a))var l=new zi([],!0)}for(n=l?n:i;++n<i;){var u=ao(a=t[n]),c="wrapper"==u?so(a):r;l=c&&So(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[ao(c[0])].apply(l,c[3]):1==a.length&&So(a)?l[u]():l.thru(a)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&Vs(n))return l.plant(n).value();for(var r=0,o=i?t[r].apply(this,e):n;++r<i;)o=t[r].call(this,o);return o}}))}function Hr(e,t,i,o,s,a,l,u,c,d){var p=t&h,f=1&t,g=2&t,m=24&t,v=512&t,y=g?r:Fr(e);return function h(){for(var b=arguments.length,_=n(b),w=b;w--;)_[w]=arguments[w];if(m)var T=lo(h),S=function(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}(_,T);if(o&&(_=Pr(_,o,s,m)),a&&(_=Ar(_,a,l,m)),b-=S,m&&b<d){var E=ci(_,T);return Yr(e,t,Hr,h.placeholder,i,_,E,u,c,d-b)}var x=f?i:this,C=g?x[e]:e;return b=_.length,u?_=function(e,t){var i=e.length,n=bi(t.length,i),o=Ir(e);for(;n--;){var s=t[n];e[n]=_o(s,i)?o[s]:r}return e}(_,u):v&&b>1&&_.reverse(),p&&c<b&&(_.length=c),this&&this!==gt&&this instanceof h&&(C=y||Fr(C)),C.apply(x,_)}}function jr(e,t){return function(i,n){return function(e,t,i,n){return wn(e,(function(e,r,o){t(n,i(e),r,o)})),n}(i,e,t(n),{})}}function zr(e,t){return function(i,n){var o;if(i===r&&n===r)return t;if(i!==r&&(o=i),n!==r){if(o===r)return n;"string"==typeof i||"string"==typeof n?(i=cr(i),n=cr(n)):(i=ur(i),n=ur(n)),o=e(i,n)}return o}}function qr(e){return no((function(t){return t=Mt(t,Jt(uo())),Qn((function(i){var n=this;return e(t,(function(e){return kt(e,n,i)}))}))}))}function Vr(e,t){var i=(t=t===r?" ":cr(t)).length;if(i<2)return i?Kn(t,e):t;var n=Kn(t,ft(e/pi(t)));return ai(t)?Tr(fi(n),0,e).join(""):n.slice(0,e)}function Wr(e){return function(t,i,o){return o&&"number"!=typeof o&&wo(t,i,o)&&(i=o=r),t=fa(t),i===r?(i=t,t=0):i=fa(i),function(e,t,i,r){for(var o=-1,s=yi(ft((t-e)/(i||1)),0),a=n(s);s--;)a[r?s:++o]=e,e+=i;return a}(t,i,o=o===r?t<i?1:-1:fa(o),e)}}function Gr(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=va(t),i=va(i)),e(t,i)}}function Yr(e,t,i,n,o,s,a,l,h,d){var p=8&t;t|=p?u:c,4&(t&=~(p?c:u))||(t&=-4);var f=[e,t,o,p?s:r,p?a:r,p?r:s,p?r:a,l,h,d],g=i.apply(r,f);return So(e)&&Lo(g,f),g.placeholder=n,Ro(g,e,t)}function Xr(e){var t=Ce[e];return function(e,i){if(e=va(e),(i=null==i?0:bi(ga(i),292))&&_t(e)){var n=(ba(e)+"e").split("e");return+((n=(ba(t(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return t(e)}}var Kr=ki&&1/hi(new ki([,-0]))[1]==p?function(e){return new ki(e)}:ul;function Qr(e){return function(t){var i=mo(t);return i==x?li(t):i==I?di(t):function(e,t){return Mt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zr(e,t,i,s,p,f,g,m){var v=2&t;if(!v&&"function"!=typeof e)throw new Ie(o);var y=s?s.length:0;if(y||(t&=-97,s=p=r),g=g===r?g:yi(ga(g),0),m=m===r?m:ga(m),y-=p?p.length:0,t&c){var b=s,_=p;s=p=r}var w=v?r:so(e),T=[e,t,i,s,p,b,_,f,g,m];if(w&&function(e,t){var i=e[1],n=t[1],r=i|n,o=r<131,s=n==h&&8==i||n==h&&i==d&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i;if(!o&&!s)return e;1&n&&(e[2]=t[2],r|=1&i?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?Pr(u,l,t[4]):l,e[4]=u?ci(e[3],a):t[4]}(l=t[5])&&(u=e[5],e[5]=u?Ar(u,l,t[6]):l,e[6]=u?ci(e[5],a):t[6]);(l=t[7])&&(e[7]=l);n&h&&(e[8]=null==e[8]?t[8]:bi(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(T,w),e=T[0],t=T[1],i=T[2],s=T[3],p=T[4],!(m=T[9]=T[9]===r?v?0:e.length:yi(T[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==l?function(e,t,i){var o=Fr(e);return function s(){for(var a=arguments.length,l=n(a),u=a,c=lo(s);u--;)l[u]=arguments[u];var h=a<3&&l[0]!==c&&l[a-1]!==c?[]:ci(l,c);return(a-=h.length)<i?Yr(e,t,Hr,s.placeholder,r,l,h,r,r,i-a):kt(this&&this!==gt&&this instanceof s?o:e,this,l)}}(e,t,m):t!=u&&33!=t||p.length?Hr.apply(r,T):function(e,t,i,r){var o=1&t,s=Fr(e);return function t(){for(var a=-1,l=arguments.length,u=-1,c=r.length,h=n(c+l),d=this&&this!==gt&&this instanceof t?s:e;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++a];return kt(d,o?i:this,h)}}(e,t,i,s);else var S=function(e,t,i){var n=1&t,r=Fr(e);return function t(){return(this&&this!==gt&&this instanceof t?r:e).apply(n?i:this,arguments)}}(e,t,i);return Ro((w?tr:Lo)(S,T),e,t)}function Jr(e,t,i,n){return e===r||Hs(e,Oe[i])&&!Ne.call(n,i)?t:e}function eo(e,t,i,n,o,s){return ta(e)&&ta(t)&&(s.set(t,e),zn(e,t,r,eo,s),s.delete(t)),e}function to(e){return oa(e)?r:e}function io(e,t,i,n,o,s){var a=1&i,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=s.get(e),h=s.get(t);if(c&&h)return c==t&&h==e;var d=-1,p=!0,f=2&i?new Yi:r;for(s.set(e,t),s.set(t,e);++d<l;){var g=e[d],m=t[d];if(n)var v=a?n(m,g,d,t,e,s):n(g,m,d,e,t,s);if(v!==r){if(v)continue;p=!1;break}if(f){if(!Ut(t,(function(e,t){if(!ti(f,t)&&(g===e||o(g,e,i,n,s)))return f.push(t)}))){p=!1;break}}else if(g!==m&&!o(g,m,i,n,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function no(e){return Oo(Po(e,r,Wo),e+"")}function ro(e){return xn(e,Da,fo)}function oo(e){return xn(e,Oa,go)}var so=Ii?function(e){return Ii.get(e)}:ul;function ao(e){for(var t=e.name+"",i=Li[t],n=Ne.call(Li,t)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==e)return r.name}return t}function lo(e){return(Ne.call($i,"placeholder")?$i:e).placeholder}function uo(){var e=$i.iteratee||ol;return e=e===ol?Nn:e,arguments.length?e(arguments[0],arguments[1]):e}function co(e,t){var i,n,r=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof t?"string":"hash"]:r.map}function ho(e){for(var t=Da(e),i=t.length;i--;){var n=t[i],r=e[n];t[i]=[n,r,Co(r)]}return t}function po(e,t){var i=function(e,t){return null==e?r:e[t]}(e,t);return Mn(i)?i:r}var fo=vt?function(e){return null==e?[]:(e=ke(e),Dt(vt(e),(function(t){return Xe.call(e,t)})))}:ml,go=vt?function(e){for(var t=[];e;)Nt(t,fo(e)),e=Ge(e);return t}:ml,mo=Cn;function vo(e,t,i){for(var n=-1,r=(t=_r(t,e)).length,o=!1;++n<r;){var s=Fo(t[n]);if(!(o=null!=e&&i(e,s)))break;e=e[s]}return o||++n!=r?o:!!(r=null==e?0:e.length)&&ea(r)&&_o(s,r)&&(Vs(e)||qs(e))}function yo(e){return"function"!=typeof e.constructor||xo(e)?{}:Hi(Ge(e))}function bo(e){return Vs(e)||qs(e)||!!(Qe&&e&&e[Qe])}function _o(e,t){var i=typeof e;return!!(t=null==t?f:t)&&("number"==i||"symbol"!=i&&_e.test(e))&&e>-1&&e%1==0&&e<t}function wo(e,t,i){if(!ta(i))return!1;var n=typeof t;return!!("number"==n?Gs(i)&&_o(t,i.length):"string"==n&&t in i)&&Hs(i[t],e)}function To(e,t){if(Vs(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!ua(e))||(ie.test(e)||!te.test(e)||null!=t&&e in ke(t))}function So(e){var t=ao(e),i=$i[t];if("function"!=typeof i||!(t in qi.prototype))return!1;if(e===i)return!0;var n=so(i);return!!n&&e===n[0]}(Ei&&mo(new Ei(new ArrayBuffer(1)))!=M||xi&&mo(new xi)!=x||Ci&&mo(Ci.resolve())!=P||ki&&mo(new ki)!=I||Pi&&mo(new Pi)!=O)&&(mo=function(e){var t=Cn(e),i=t==k?e.constructor:r,n=i?Uo(i):"";if(n)switch(n){case Di:return M;case Oi:return x;case Ri:return P;case Mi:return I;case Ni:return O}return t});var Eo=Re?Zs:vl;function xo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Co(e){return e==e&&!ta(e)}function ko(e,t){return function(i){return null!=i&&(i[e]===t&&(t!==r||e in ke(i)))}}function Po(e,t,i){return t=yi(t===r?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=yi(r.length-t,0),a=n(s);++o<s;)a[o]=r[t+o];o=-1;for(var l=n(t+1);++o<t;)l[o]=r[o];return l[t]=i(a),kt(e,this,l)}}function Ao(e,t){return t.length<2?e:En(e,rr(t,0,-1))}function Io(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Lo=Mo(tr),Do=pt||function(e,t){return gt.setTimeout(e,t)},Oo=Mo(ir);function Ro(e,t,i){var n=t+"";return Oo(e,function(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(i>1?"& ":"")+t[n],t=t.join(i>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return At(v,(function(i){var n="_."+i[0];t&i[1]&&!Ot(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(ce):[]}(n),i)))}function Mo(e){var t=0,i=0;return function(){var n=_i(),o=16-(n-i);if(i=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function No(e,t){var i=-1,n=e.length,o=n-1;for(t=t===r?n:t;++i<t;){var s=Xn(i,o),a=e[s];e[s]=e[i],e[i]=a}return e.length=t,e}var Bo=function(e){var t=Ms(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,i,n,r){t.push(n?r.replace(pe,"$1"):i||e)})),t}));function Fo(e){if("string"==typeof e||ua(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Uo(e){if(null!=e){try{return Me.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function $o(e){if(e instanceof qi)return e.clone();var t=new zi(e.__wrapped__,e.__chain__);return t.__actions__=Ir(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ho=Qn((function(e,t){return Ys(e)?dn(e,yn(t,1,Ys,!0)):[]})),jo=Qn((function(e,t){var i=Qo(t);return Ys(i)&&(i=r),Ys(e)?dn(e,yn(t,1,Ys,!0),uo(i,2)):[]})),zo=Qn((function(e,t){var i=Qo(t);return Ys(i)&&(i=r),Ys(e)?dn(e,yn(t,1,Ys,!0),r,i):[]}));function qo(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=null==i?0:ga(i);return r<0&&(r=yi(n+r,0)),jt(e,uo(t,3),r)}function Vo(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return i!==r&&(o=ga(i),o=i<0?yi(n+o,0):bi(o,n-1)),jt(e,uo(t,3),o,!0)}function Wo(e){return(null==e?0:e.length)?yn(e,1):[]}function Go(e){return e&&e.length?e[0]:r}var Yo=Qn((function(e){var t=Mt(e,yr);return t.length&&t[0]===e[0]?In(t):[]})),Xo=Qn((function(e){var t=Qo(e),i=Mt(e,yr);return t===Qo(i)?t=r:i.pop(),i.length&&i[0]===e[0]?In(i,uo(t,2)):[]})),Ko=Qn((function(e){var t=Qo(e),i=Mt(e,yr);return(t="function"==typeof t?t:r)&&i.pop(),i.length&&i[0]===e[0]?In(i,r,t):[]}));function Qo(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Zo=Qn(Jo);function Jo(e,t){return e&&e.length&&t&&t.length?Gn(e,t):e}var es=no((function(e,t){var i=null==e?0:e.length,n=an(e,t);return Yn(e,Mt(t,(function(e){return _o(e,i)?+e:e})).sort(kr)),n}));function ts(e){return null==e?e:Si.call(e)}var is=Qn((function(e){return hr(yn(e,1,Ys,!0))})),ns=Qn((function(e){var t=Qo(e);return Ys(t)&&(t=r),hr(yn(e,1,Ys,!0),uo(t,2))})),rs=Qn((function(e){var t=Qo(e);return t="function"==typeof t?t:r,hr(yn(e,1,Ys,!0),r,t)}));function os(e){if(!e||!e.length)return[];var t=0;return e=Dt(e,(function(e){if(Ys(e))return t=yi(e.length,t),!0})),Qt(t,(function(t){return Mt(e,Gt(t))}))}function ss(e,t){if(!e||!e.length)return[];var i=os(e);return null==t?i:Mt(i,(function(e){return kt(t,r,e)}))}var as=Qn((function(e,t){return Ys(e)?dn(e,t):[]})),ls=Qn((function(e){return mr(Dt(e,Ys))})),us=Qn((function(e){var t=Qo(e);return Ys(t)&&(t=r),mr(Dt(e,Ys),uo(t,2))})),cs=Qn((function(e){var t=Qo(e);return t="function"==typeof t?t:r,mr(Dt(e,Ys),r,t)})),hs=Qn(os);var ds=Qn((function(e){var t=e.length,i=t>1?e[t-1]:r;return i="function"==typeof i?(e.pop(),i):r,ss(e,i)}));function ps(e){var t=$i(e);return t.__chain__=!0,t}function fs(e,t){return t(e)}var gs=no((function(e){var t=e.length,i=t?e[0]:0,n=this.__wrapped__,o=function(t){return an(t,e)};return!(t>1||this.__actions__.length)&&n instanceof qi&&_o(i)?((n=n.slice(i,+i+(t?1:0))).__actions__.push({func:fs,args:[o],thisArg:r}),new zi(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)}));var ms=Dr((function(e,t,i){Ne.call(e,i)?++e[i]:sn(e,i,1)}));var vs=Ur(qo),ys=Ur(Vo);function bs(e,t){return(Vs(e)?At:pn)(e,uo(t,3))}function _s(e,t){return(Vs(e)?It:fn)(e,uo(t,3))}var ws=Dr((function(e,t,i){Ne.call(e,i)?e[i].push(t):sn(e,i,[t])}));var Ts=Qn((function(e,t,i){var r=-1,o="function"==typeof t,s=Gs(e)?n(e.length):[];return pn(e,(function(e){s[++r]=o?kt(t,e,i):Ln(e,t,i)})),s})),Ss=Dr((function(e,t,i){sn(e,i,t)}));function Es(e,t){return(Vs(e)?Mt:$n)(e,uo(t,3))}var xs=Dr((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]}));var Cs=Qn((function(e,t){if(null==e)return[];var i=t.length;return i>1&&wo(e,t[0],t[1])?t=[]:i>2&&wo(t[0],t[1],t[2])&&(t=[t[0]]),Vn(e,yn(t,1),[])})),ks=ct||function(){return gt.Date.now()};function Ps(e,t,i){return t=i?r:t,t=e&&null==t?e.length:t,Zr(e,h,r,r,r,r,t)}function As(e,t){var i;if("function"!=typeof t)throw new Ie(o);return e=ga(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var Is=Qn((function(e,t,i){var n=1;if(i.length){var r=ci(i,lo(Is));n|=u}return Zr(e,n,t,i,r)})),Ls=Qn((function(e,t,i){var n=3;if(i.length){var r=ci(i,lo(Ls));n|=u}return Zr(t,n,e,i,r)}));function Ds(e,t,i){var n,s,a,l,u,c,h=0,d=!1,p=!1,f=!0;if("function"!=typeof e)throw new Ie(o);function g(t){var i=n,o=s;return n=s=r,h=t,l=e.apply(o,i)}function m(e){var i=e-c;return c===r||i>=t||i<0||p&&e-h>=a}function v(){var e=ks();if(m(e))return y(e);u=Do(v,function(e){var i=t-(e-c);return p?bi(i,a-(e-h)):i}(e))}function y(e){return u=r,f&&n?g(e):(n=s=r,l)}function b(){var e=ks(),i=m(e);if(n=arguments,s=this,c=e,i){if(u===r)return function(e){return h=e,u=Do(v,t),d?g(e):l}(c);if(p)return Sr(u),u=Do(v,t),g(c)}return u===r&&(u=Do(v,t)),l}return t=va(t)||0,ta(i)&&(d=!!i.leading,a=(p="maxWait"in i)?yi(va(i.maxWait)||0,t):a,f="trailing"in i?!!i.trailing:f),b.cancel=function(){u!==r&&Sr(u),h=0,n=c=s=u=r},b.flush=function(){return u===r?l:y(ks())},b}var Os=Qn((function(e,t){return hn(e,1,t)})),Rs=Qn((function(e,t,i){return hn(e,va(t)||0,i)}));function Ms(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(o);var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=e.apply(this,n);return i.cache=o.set(r,s)||o,s};return i.cache=new(Ms.Cache||Gi),i}function Ns(e){if("function"!=typeof e)throw new Ie(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ms.Cache=Gi;var Bs=wr((function(e,t){var i=(t=1==t.length&&Vs(t[0])?Mt(t[0],Jt(uo())):Mt(yn(t,1),Jt(uo()))).length;return Qn((function(n){for(var r=-1,o=bi(n.length,i);++r<o;)n[r]=t[r].call(this,n[r]);return kt(e,this,n)}))})),Fs=Qn((function(e,t){var i=ci(t,lo(Fs));return Zr(e,u,r,t,i)})),Us=Qn((function(e,t){var i=ci(t,lo(Us));return Zr(e,c,r,t,i)})),$s=no((function(e,t){return Zr(e,d,r,r,r,t)}));function Hs(e,t){return e===t||e!=e&&t!=t}var js=Gr(kn),zs=Gr((function(e,t){return e>=t})),qs=Dn(function(){return arguments}())?Dn:function(e){return ia(e)&&Ne.call(e,"callee")&&!Xe.call(e,"callee")},Vs=n.isArray,Ws=wt?Jt(wt):function(e){return ia(e)&&Cn(e)==R};function Gs(e){return null!=e&&ea(e.length)&&!Zs(e)}function Ys(e){return ia(e)&&Gs(e)}var Xs=bt||vl,Ks=Tt?Jt(Tt):function(e){return ia(e)&&Cn(e)==w};function Qs(e){if(!ia(e))return!1;var t=Cn(e);return t==T||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!oa(e)}function Zs(e){if(!ta(e))return!1;var t=Cn(e);return t==S||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Js(e){return"number"==typeof e&&e==ga(e)}function ea(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ta(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ia(e){return null!=e&&"object"==typeof e}var na=St?Jt(St):function(e){return ia(e)&&mo(e)==x};function ra(e){return"number"==typeof e||ia(e)&&Cn(e)==C}function oa(e){if(!ia(e)||Cn(e)!=k)return!1;var t=Ge(e);if(null===t)return!0;var i=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Me.call(i)==$e}var sa=Et?Jt(Et):function(e){return ia(e)&&Cn(e)==A};var aa=xt?Jt(xt):function(e){return ia(e)&&mo(e)==I};function la(e){return"string"==typeof e||!Vs(e)&&ia(e)&&Cn(e)==L}function ua(e){return"symbol"==typeof e||ia(e)&&Cn(e)==D}var ca=Ct?Jt(Ct):function(e){return ia(e)&&ea(e.length)&&!!lt[Cn(e)]};var ha=Gr(Un),da=Gr((function(e,t){return e<=t}));function pa(e){if(!e)return[];if(Gs(e))return la(e)?fi(e):Ir(e);if(Ze&&e[Ze])return function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}(e[Ze]());var t=mo(e);return(t==x?li:t==I?hi:Ha)(e)}function fa(e){return e?(e=va(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ga(e){var t=fa(e),i=t%1;return t==t?i?t-i:t:0}function ma(e){return e?ln(ga(e),0,m):0}function va(e){if("number"==typeof e)return e;if(ua(e))return g;if(ta(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ta(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var i=ve.test(e);return i||be.test(e)?dt(e.slice(2),i?2:8):me.test(e)?g:+e}function ya(e){return Lr(e,Oa(e))}function ba(e){return null==e?"":cr(e)}var _a=Or((function(e,t){if(xo(t)||Gs(t))Lr(t,Da(t),e);else for(var i in t)Ne.call(t,i)&&tn(e,i,t[i])})),wa=Or((function(e,t){Lr(t,Oa(t),e)})),Ta=Or((function(e,t,i,n){Lr(t,Oa(t),e,n)})),Sa=Or((function(e,t,i,n){Lr(t,Da(t),e,n)})),Ea=no(an);var xa=Qn((function(e,t){e=ke(e);var i=-1,n=t.length,o=n>2?t[2]:r;for(o&&wo(t[0],t[1],o)&&(n=1);++i<n;)for(var s=t[i],a=Oa(s),l=-1,u=a.length;++l<u;){var c=a[l],h=e[c];(h===r||Hs(h,Oe[c])&&!Ne.call(e,c))&&(e[c]=s[c])}return e})),Ca=Qn((function(e){return e.push(r,eo),kt(Ma,r,e)}));function ka(e,t,i){var n=null==e?r:En(e,t);return n===r?i:n}function Pa(e,t){return null!=e&&vo(e,t,An)}var Aa=jr((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=i}),tl(rl)),Ia=jr((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),Ne.call(e,t)?e[t].push(i):e[t]=[i]}),uo),La=Qn(Ln);function Da(e){return Gs(e)?Ki(e):Bn(e)}function Oa(e){return Gs(e)?Ki(e,!0):Fn(e)}var Ra=Or((function(e,t,i){zn(e,t,i)})),Ma=Or((function(e,t,i,n){zn(e,t,i,n)})),Na=no((function(e,t){var i={};if(null==e)return i;var n=!1;t=Mt(t,(function(t){return t=_r(t,e),n||(n=t.length>1),t})),Lr(e,oo(e),i),n&&(i=un(i,7,to));for(var r=t.length;r--;)dr(i,t[r]);return i}));var Ba=no((function(e,t){return null==e?{}:function(e,t){return Wn(e,t,(function(t,i){return Pa(e,i)}))}(e,t)}));function Fa(e,t){if(null==e)return{};var i=Mt(oo(e),(function(e){return[e]}));return t=uo(t),Wn(e,i,(function(e,i){return t(e,i[0])}))}var Ua=Qr(Da),$a=Qr(Oa);function Ha(e){return null==e?[]:ei(e,Da(e))}var ja=Br((function(e,t,i){return t=t.toLowerCase(),e+(i?za(t):t)}));function za(e){return Qa(ba(e).toLowerCase())}function qa(e){return(e=ba(e))&&e.replace(we,ri).replace(tt,"")}var Va=Br((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()})),Wa=Br((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()})),Ga=Nr("toLowerCase");var Ya=Br((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}));var Xa=Br((function(e,t,i){return e+(i?" ":"")+Qa(t)}));var Ka=Br((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()})),Qa=Nr("toUpperCase");function Za(e,t,i){return e=ba(e),(t=i?r:t)===r?function(e){return ot.test(e)}(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Ja=Qn((function(e,t){try{return kt(e,r,t)}catch(e){return Qs(e)?e:new Ee(e)}})),el=no((function(e,t){return At(t,(function(t){t=Fo(t),sn(e,t,Is(e[t],e))})),e}));function tl(e){return function(){return e}}var il=$r(),nl=$r(!0);function rl(e){return e}function ol(e){return Nn("function"==typeof e?e:un(e,1))}var sl=Qn((function(e,t){return function(i){return Ln(i,e,t)}})),al=Qn((function(e,t){return function(i){return Ln(e,i,t)}}));function ll(e,t,i){var n=Da(t),r=Sn(t,n);null!=i||ta(t)&&(r.length||!n.length)||(i=t,t=e,e=this,r=Sn(t,Da(t)));var o=!(ta(i)&&"chain"in i&&!i.chain),s=Zs(e);return At(r,(function(i){var n=t[i];e[i]=n,s&&(e.prototype[i]=function(){var t=this.__chain__;if(o||t){var i=e(this.__wrapped__);return(i.__actions__=Ir(this.__actions__)).push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,Nt([this.value()],arguments))})})),e}function ul(){}var cl=qr(Mt),hl=qr(Lt),dl=qr(Ut);function pl(e){return To(e)?Gt(Fo(e)):function(e){return function(t){return En(t,e)}}(e)}var fl=Wr(),gl=Wr(!0);function ml(){return[]}function vl(){return!1}var yl=zr((function(e,t){return e+t}),0),bl=Xr("ceil"),_l=zr((function(e,t){return e/t}),1),wl=Xr("floor");var Tl,Sl=zr((function(e,t){return e*t}),1),El=Xr("round"),xl=zr((function(e,t){return e-t}),0);return $i.after=function(e,t){if("function"!=typeof t)throw new Ie(o);return e=ga(e),function(){if(--e<1)return t.apply(this,arguments)}},$i.ary=Ps,$i.assign=_a,$i.assignIn=wa,$i.assignInWith=Ta,$i.assignWith=Sa,$i.at=Ea,$i.before=As,$i.bind=Is,$i.bindAll=el,$i.bindKey=Ls,$i.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Vs(e)?e:[e]},$i.chain=ps,$i.chunk=function(e,t,i){t=(i?wo(e,t,i):t===r)?1:yi(ga(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,l=n(ft(o/t));s<o;)l[a++]=rr(e,s,s+=t);return l},$i.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,r=[];++t<i;){var o=e[t];o&&(r[n++]=o)}return r},$i.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),i=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Nt(Vs(i)?Ir(i):[i],yn(t,1))},$i.cond=function(e){var t=null==e?0:e.length,i=uo();return e=t?Mt(e,(function(e){if("function"!=typeof e[1])throw new Ie(o);return[i(e[0]),e[1]]})):[],Qn((function(i){for(var n=-1;++n<t;){var r=e[n];if(kt(r[0],this,i))return kt(r[1],this,i)}}))},$i.conforms=function(e){return function(e){var t=Da(e);return function(i){return cn(i,e,t)}}(un(e,1))},$i.constant=tl,$i.countBy=ms,$i.create=function(e,t){var i=Hi(e);return null==t?i:on(i,t)},$i.curry=function e(t,i,n){var o=Zr(t,8,r,r,r,r,r,i=n?r:i);return o.placeholder=e.placeholder,o},$i.curryRight=function e(t,i,n){var o=Zr(t,l,r,r,r,r,r,i=n?r:i);return o.placeholder=e.placeholder,o},$i.debounce=Ds,$i.defaults=xa,$i.defaultsDeep=Ca,$i.defer=Os,$i.delay=Rs,$i.difference=Ho,$i.differenceBy=jo,$i.differenceWith=zo,$i.drop=function(e,t,i){var n=null==e?0:e.length;return n?rr(e,(t=i||t===r?1:ga(t))<0?0:t,n):[]},$i.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?rr(e,0,(t=n-(t=i||t===r?1:ga(t)))<0?0:t):[]},$i.dropRightWhile=function(e,t){return e&&e.length?fr(e,uo(t,3),!0,!0):[]},$i.dropWhile=function(e,t){return e&&e.length?fr(e,uo(t,3),!0):[]},$i.fill=function(e,t,i,n){var o=null==e?0:e.length;return o?(i&&"number"!=typeof i&&wo(e,t,i)&&(i=0,n=o),function(e,t,i,n){var o=e.length;for((i=ga(i))<0&&(i=-i>o?0:o+i),(n=n===r||n>o?o:ga(n))<0&&(n+=o),n=i>n?0:ma(n);i<n;)e[i++]=t;return e}(e,t,i,n)):[]},$i.filter=function(e,t){return(Vs(e)?Dt:vn)(e,uo(t,3))},$i.flatMap=function(e,t){return yn(Es(e,t),1)},$i.flatMapDeep=function(e,t){return yn(Es(e,t),p)},$i.flatMapDepth=function(e,t,i){return i=i===r?1:ga(i),yn(Es(e,t),i)},$i.flatten=Wo,$i.flattenDeep=function(e){return(null==e?0:e.length)?yn(e,p):[]},$i.flattenDepth=function(e,t){return(null==e?0:e.length)?yn(e,t=t===r?1:ga(t)):[]},$i.flip=function(e){return Zr(e,512)},$i.flow=il,$i.flowRight=nl,$i.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var r=e[t];n[r[0]]=r[1]}return n},$i.functions=function(e){return null==e?[]:Sn(e,Da(e))},$i.functionsIn=function(e){return null==e?[]:Sn(e,Oa(e))},$i.groupBy=ws,$i.initial=function(e){return(null==e?0:e.length)?rr(e,0,-1):[]},$i.intersection=Yo,$i.intersectionBy=Xo,$i.intersectionWith=Ko,$i.invert=Aa,$i.invertBy=Ia,$i.invokeMap=Ts,$i.iteratee=ol,$i.keyBy=Ss,$i.keys=Da,$i.keysIn=Oa,$i.map=Es,$i.mapKeys=function(e,t){var i={};return t=uo(t,3),wn(e,(function(e,n,r){sn(i,t(e,n,r),e)})),i},$i.mapValues=function(e,t){var i={};return t=uo(t,3),wn(e,(function(e,n,r){sn(i,n,t(e,n,r))})),i},$i.matches=function(e){return Hn(un(e,1))},$i.matchesProperty=function(e,t){return jn(e,un(t,1))},$i.memoize=Ms,$i.merge=Ra,$i.mergeWith=Ma,$i.method=sl,$i.methodOf=al,$i.mixin=ll,$i.negate=Ns,$i.nthArg=function(e){return e=ga(e),Qn((function(t){return qn(t,e)}))},$i.omit=Na,$i.omitBy=function(e,t){return Fa(e,Ns(uo(t)))},$i.once=function(e){return As(2,e)},$i.orderBy=function(e,t,i,n){return null==e?[]:(Vs(t)||(t=null==t?[]:[t]),Vs(i=n?r:i)||(i=null==i?[]:[i]),Vn(e,t,i))},$i.over=cl,$i.overArgs=Bs,$i.overEvery=hl,$i.overSome=dl,$i.partial=Fs,$i.partialRight=Us,$i.partition=xs,$i.pick=Ba,$i.pickBy=Fa,$i.property=pl,$i.propertyOf=function(e){return function(t){return null==e?r:En(e,t)}},$i.pull=Zo,$i.pullAll=Jo,$i.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?Gn(e,t,uo(i,2)):e},$i.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?Gn(e,t,r,i):e},$i.pullAt=es,$i.range=fl,$i.rangeRight=gl,$i.rearg=$s,$i.reject=function(e,t){return(Vs(e)?Dt:vn)(e,Ns(uo(t,3)))},$i.remove=function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,r=[],o=e.length;for(t=uo(t,3);++n<o;){var s=e[n];t(s,n,e)&&(i.push(s),r.push(n))}return Yn(e,r),i},$i.rest=function(e,t){if("function"!=typeof e)throw new Ie(o);return Qn(e,t=t===r?t:ga(t))},$i.reverse=ts,$i.sampleSize=function(e,t,i){return t=(i?wo(e,t,i):t===r)?1:ga(t),(Vs(e)?Zi:Jn)(e,t)},$i.set=function(e,t,i){return null==e?e:er(e,t,i)},$i.setWith=function(e,t,i,n){return n="function"==typeof n?n:r,null==e?e:er(e,t,i,n)},$i.shuffle=function(e){return(Vs(e)?Ji:nr)(e)},$i.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i&&"number"!=typeof i&&wo(e,t,i)?(t=0,i=n):(t=null==t?0:ga(t),i=i===r?n:ga(i)),rr(e,t,i)):[]},$i.sortBy=Cs,$i.sortedUniq=function(e){return e&&e.length?lr(e):[]},$i.sortedUniqBy=function(e,t){return e&&e.length?lr(e,uo(t,2)):[]},$i.split=function(e,t,i){return i&&"number"!=typeof i&&wo(e,t,i)&&(t=i=r),(i=i===r?m:i>>>0)?(e=ba(e))&&("string"==typeof t||null!=t&&!sa(t))&&!(t=cr(t))&&ai(e)?Tr(fi(e),0,i):e.split(t,i):[]},$i.spread=function(e,t){if("function"!=typeof e)throw new Ie(o);return t=null==t?0:yi(ga(t),0),Qn((function(i){var n=i[t],r=Tr(i,0,t);return n&&Nt(r,n),kt(e,this,r)}))},$i.tail=function(e){var t=null==e?0:e.length;return t?rr(e,1,t):[]},$i.take=function(e,t,i){return e&&e.length?rr(e,0,(t=i||t===r?1:ga(t))<0?0:t):[]},$i.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?rr(e,(t=n-(t=i||t===r?1:ga(t)))<0?0:t,n):[]},$i.takeRightWhile=function(e,t){return e&&e.length?fr(e,uo(t,3),!1,!0):[]},$i.takeWhile=function(e,t){return e&&e.length?fr(e,uo(t,3)):[]},$i.tap=function(e,t){return t(e),e},$i.throttle=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new Ie(o);return ta(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),Ds(e,t,{leading:n,maxWait:t,trailing:r})},$i.thru=fs,$i.toArray=pa,$i.toPairs=Ua,$i.toPairsIn=$a,$i.toPath=function(e){return Vs(e)?Mt(e,Fo):ua(e)?[e]:Ir(Bo(ba(e)))},$i.toPlainObject=ya,$i.transform=function(e,t,i){var n=Vs(e),r=n||Xs(e)||ca(e);if(t=uo(t,4),null==i){var o=e&&e.constructor;i=r?n?new o:[]:ta(e)&&Zs(o)?Hi(Ge(e)):{}}return(r?At:wn)(e,(function(e,n,r){return t(i,e,n,r)})),i},$i.unary=function(e){return Ps(e,1)},$i.union=is,$i.unionBy=ns,$i.unionWith=rs,$i.uniq=function(e){return e&&e.length?hr(e):[]},$i.uniqBy=function(e,t){return e&&e.length?hr(e,uo(t,2)):[]},$i.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?hr(e,r,t):[]},$i.unset=function(e,t){return null==e||dr(e,t)},$i.unzip=os,$i.unzipWith=ss,$i.update=function(e,t,i){return null==e?e:pr(e,t,br(i))},$i.updateWith=function(e,t,i,n){return n="function"==typeof n?n:r,null==e?e:pr(e,t,br(i),n)},$i.values=Ha,$i.valuesIn=function(e){return null==e?[]:ei(e,Oa(e))},$i.without=as,$i.words=Za,$i.wrap=function(e,t){return Fs(br(t),e)},$i.xor=ls,$i.xorBy=us,$i.xorWith=cs,$i.zip=hs,$i.zipObject=function(e,t){return vr(e||[],t||[],tn)},$i.zipObjectDeep=function(e,t){return vr(e||[],t||[],er)},$i.zipWith=ds,$i.entries=Ua,$i.entriesIn=$a,$i.extend=wa,$i.extendWith=Ta,ll($i,$i),$i.add=yl,$i.attempt=Ja,$i.camelCase=ja,$i.capitalize=za,$i.ceil=bl,$i.clamp=function(e,t,i){return i===r&&(i=t,t=r),i!==r&&(i=(i=va(i))==i?i:0),t!==r&&(t=(t=va(t))==t?t:0),ln(va(e),t,i)},$i.clone=function(e){return un(e,4)},$i.cloneDeep=function(e){return un(e,5)},$i.cloneDeepWith=function(e,t){return un(e,5,t="function"==typeof t?t:r)},$i.cloneWith=function(e,t){return un(e,4,t="function"==typeof t?t:r)},$i.conformsTo=function(e,t){return null==t||cn(e,t,Da(t))},$i.deburr=qa,$i.defaultTo=function(e,t){return null==e||e!=e?t:e},$i.divide=_l,$i.endsWith=function(e,t,i){e=ba(e),t=cr(t);var n=e.length,o=i=i===r?n:ln(ga(i),0,n);return(i-=t.length)>=0&&e.slice(i,o)==t},$i.eq=Hs,$i.escape=function(e){return(e=ba(e))&&Q.test(e)?e.replace(X,oi):e},$i.escapeRegExp=function(e){return(e=ba(e))&&oe.test(e)?e.replace(re,"\\$&"):e},$i.every=function(e,t,i){var n=Vs(e)?Lt:gn;return i&&wo(e,t,i)&&(t=r),n(e,uo(t,3))},$i.find=vs,$i.findIndex=qo,$i.findKey=function(e,t){return Ht(e,uo(t,3),wn)},$i.findLast=ys,$i.findLastIndex=Vo,$i.findLastKey=function(e,t){return Ht(e,uo(t,3),Tn)},$i.floor=wl,$i.forEach=bs,$i.forEachRight=_s,$i.forIn=function(e,t){return null==e?e:bn(e,uo(t,3),Oa)},$i.forInRight=function(e,t){return null==e?e:_n(e,uo(t,3),Oa)},$i.forOwn=function(e,t){return e&&wn(e,uo(t,3))},$i.forOwnRight=function(e,t){return e&&Tn(e,uo(t,3))},$i.get=ka,$i.gt=js,$i.gte=zs,$i.has=function(e,t){return null!=e&&vo(e,t,Pn)},$i.hasIn=Pa,$i.head=Go,$i.identity=rl,$i.includes=function(e,t,i,n){e=Gs(e)?e:Ha(e),i=i&&!n?ga(i):0;var r=e.length;return i<0&&(i=yi(r+i,0)),la(e)?i<=r&&e.indexOf(t,i)>-1:!!r&&zt(e,t,i)>-1},$i.indexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=null==i?0:ga(i);return r<0&&(r=yi(n+r,0)),zt(e,t,r)},$i.inRange=function(e,t,i){return t=fa(t),i===r?(i=t,t=0):i=fa(i),function(e,t,i){return e>=bi(t,i)&&e<yi(t,i)}(e=va(e),t,i)},$i.invoke=La,$i.isArguments=qs,$i.isArray=Vs,$i.isArrayBuffer=Ws,$i.isArrayLike=Gs,$i.isArrayLikeObject=Ys,$i.isBoolean=function(e){return!0===e||!1===e||ia(e)&&Cn(e)==_},$i.isBuffer=Xs,$i.isDate=Ks,$i.isElement=function(e){return ia(e)&&1===e.nodeType&&!oa(e)},$i.isEmpty=function(e){if(null==e)return!0;if(Gs(e)&&(Vs(e)||"string"==typeof e||"function"==typeof e.splice||Xs(e)||ca(e)||qs(e)))return!e.length;var t=mo(e);if(t==x||t==I)return!e.size;if(xo(e))return!Bn(e).length;for(var i in e)if(Ne.call(e,i))return!1;return!0},$i.isEqual=function(e,t){return On(e,t)},$i.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:r)?i(e,t):r;return n===r?On(e,t,r,i):!!n},$i.isError=Qs,$i.isFinite=function(e){return"number"==typeof e&&_t(e)},$i.isFunction=Zs,$i.isInteger=Js,$i.isLength=ea,$i.isMap=na,$i.isMatch=function(e,t){return e===t||Rn(e,t,ho(t))},$i.isMatchWith=function(e,t,i){return i="function"==typeof i?i:r,Rn(e,t,ho(t),i)},$i.isNaN=function(e){return ra(e)&&e!=+e},$i.isNative=function(e){if(Eo(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mn(e)},$i.isNil=function(e){return null==e},$i.isNull=function(e){return null===e},$i.isNumber=ra,$i.isObject=ta,$i.isObjectLike=ia,$i.isPlainObject=oa,$i.isRegExp=sa,$i.isSafeInteger=function(e){return Js(e)&&e>=-9007199254740991&&e<=f},$i.isSet=aa,$i.isString=la,$i.isSymbol=ua,$i.isTypedArray=ca,$i.isUndefined=function(e){return e===r},$i.isWeakMap=function(e){return ia(e)&&mo(e)==O},$i.isWeakSet=function(e){return ia(e)&&"[object WeakSet]"==Cn(e)},$i.join=function(e,t){return null==e?"":$t.call(e,t)},$i.kebabCase=Va,$i.last=Qo,$i.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=n;return i!==r&&(o=(o=ga(i))<0?yi(n+o,0):bi(o,n-1)),t==t?function(e,t,i){for(var n=i+1;n--;)if(e[n]===t)return n;return n}(e,t,o):jt(e,Vt,o,!0)},$i.lowerCase=Wa,$i.lowerFirst=Ga,$i.lt=ha,$i.lte=da,$i.max=function(e){return e&&e.length?mn(e,rl,kn):r},$i.maxBy=function(e,t){return e&&e.length?mn(e,uo(t,2),kn):r},$i.mean=function(e){return Wt(e,rl)},$i.meanBy=function(e,t){return Wt(e,uo(t,2))},$i.min=function(e){return e&&e.length?mn(e,rl,Un):r},$i.minBy=function(e,t){return e&&e.length?mn(e,uo(t,2),Un):r},$i.stubArray=ml,$i.stubFalse=vl,$i.stubObject=function(){return{}},$i.stubString=function(){return""},$i.stubTrue=function(){return!0},$i.multiply=Sl,$i.nth=function(e,t){return e&&e.length?qn(e,ga(t)):r},$i.noConflict=function(){return gt._===this&&(gt._=He),this},$i.noop=ul,$i.now=ks,$i.pad=function(e,t,i){e=ba(e);var n=(t=ga(t))?pi(e):0;if(!t||n>=t)return e;var r=(t-n)/2;return Vr(mt(r),i)+e+Vr(ft(r),i)},$i.padEnd=function(e,t,i){e=ba(e);var n=(t=ga(t))?pi(e):0;return t&&n<t?e+Vr(t-n,i):e},$i.padStart=function(e,t,i){e=ba(e);var n=(t=ga(t))?pi(e):0;return t&&n<t?Vr(t-n,i)+e:e},$i.parseInt=function(e,t,i){return i||null==t?t=0:t&&(t=+t),wi(ba(e).replace(se,""),t||0)},$i.random=function(e,t,i){if(i&&"boolean"!=typeof i&&wo(e,t,i)&&(t=i=r),i===r&&("boolean"==typeof t?(i=t,t=r):"boolean"==typeof e&&(i=e,e=r)),e===r&&t===r?(e=0,t=1):(e=fa(e),t===r?(t=e,e=0):t=fa(t)),e>t){var n=e;e=t,t=n}if(i||e%1||t%1){var o=Ti();return bi(e+o*(t-e+ht("1e-"+((o+"").length-1))),t)}return Xn(e,t)},$i.reduce=function(e,t,i){var n=Vs(e)?Bt:Xt,r=arguments.length<3;return n(e,uo(t,4),i,r,pn)},$i.reduceRight=function(e,t,i){var n=Vs(e)?Ft:Xt,r=arguments.length<3;return n(e,uo(t,4),i,r,fn)},$i.repeat=function(e,t,i){return t=(i?wo(e,t,i):t===r)?1:ga(t),Kn(ba(e),t)},$i.replace=function(){var e=arguments,t=ba(e[0]);return e.length<3?t:t.replace(e[1],e[2])},$i.result=function(e,t,i){var n=-1,o=(t=_r(t,e)).length;for(o||(o=1,e=r);++n<o;){var s=null==e?r:e[Fo(t[n])];s===r&&(n=o,s=i),e=Zs(s)?s.call(e):s}return e},$i.round=El,$i.runInContext=e,$i.sample=function(e){return(Vs(e)?Qi:Zn)(e)},$i.size=function(e){if(null==e)return 0;if(Gs(e))return la(e)?pi(e):e.length;var t=mo(e);return t==x||t==I?e.size:Bn(e).length},$i.snakeCase=Ya,$i.some=function(e,t,i){var n=Vs(e)?Ut:or;return i&&wo(e,t,i)&&(t=r),n(e,uo(t,3))},$i.sortedIndex=function(e,t){return sr(e,t)},$i.sortedIndexBy=function(e,t,i){return ar(e,t,uo(i,2))},$i.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=sr(e,t);if(n<i&&Hs(e[n],t))return n}return-1},$i.sortedLastIndex=function(e,t){return sr(e,t,!0)},$i.sortedLastIndexBy=function(e,t,i){return ar(e,t,uo(i,2),!0)},$i.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var i=sr(e,t,!0)-1;if(Hs(e[i],t))return i}return-1},$i.startCase=Xa,$i.startsWith=function(e,t,i){return e=ba(e),i=null==i?0:ln(ga(i),0,e.length),t=cr(t),e.slice(i,i+t.length)==t},$i.subtract=xl,$i.sum=function(e){return e&&e.length?Kt(e,rl):0},$i.sumBy=function(e,t){return e&&e.length?Kt(e,uo(t,2)):0},$i.template=function(e,t,i){var n=$i.templateSettings;i&&wo(e,t,i)&&(t=r),e=ba(e),t=Ta({},t,n,Jr);var o,s,a=Ta({},t.imports,n.imports,Jr),l=Da(a),u=ei(a,l),c=0,h=t.interpolate||Te,d="__p += '",p=Pe((t.escape||Te).source+"|"+h.source+"|"+(h===ee?fe:Te).source+"|"+(t.evaluate||Te).source+"|$","g"),f="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(p,(function(t,i,n,r,a,l){return n||(n=r),d+=e.slice(c,l).replace(Se,si),i&&(o=!0,d+="' +\n__e("+i+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var g=Ne.call(t,"variable")&&t.variable;if(g){if(de.test(g))throw new Ee("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(V,""):d).replace(W,"$1").replace(G,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Ja((function(){return xe(l,f+"return "+d).apply(r,u)}));if(m.source=d,Qs(m))throw m;return m},$i.times=function(e,t){if((e=ga(e))<1||e>f)return[];var i=m,n=bi(e,m);t=uo(t),e-=m;for(var r=Qt(n,t);++i<e;)t(i);return r},$i.toFinite=fa,$i.toInteger=ga,$i.toLength=ma,$i.toLower=function(e){return ba(e).toLowerCase()},$i.toNumber=va,$i.toSafeInteger=function(e){return e?ln(ga(e),-9007199254740991,f):0===e?e:0},$i.toString=ba,$i.toUpper=function(e){return ba(e).toUpperCase()},$i.trim=function(e,t,i){if((e=ba(e))&&(i||t===r))return Zt(e);if(!e||!(t=cr(t)))return e;var n=fi(e),o=fi(t);return Tr(n,ii(n,o),ni(n,o)+1).join("")},$i.trimEnd=function(e,t,i){if((e=ba(e))&&(i||t===r))return e.slice(0,gi(e)+1);if(!e||!(t=cr(t)))return e;var n=fi(e);return Tr(n,0,ni(n,fi(t))+1).join("")},$i.trimStart=function(e,t,i){if((e=ba(e))&&(i||t===r))return e.replace(se,"");if(!e||!(t=cr(t)))return e;var n=fi(e);return Tr(n,ii(n,fi(t))).join("")},$i.truncate=function(e,t){var i=30,n="...";if(ta(t)){var o="separator"in t?t.separator:o;i="length"in t?ga(t.length):i,n="omission"in t?cr(t.omission):n}var s=(e=ba(e)).length;if(ai(e)){var a=fi(e);s=a.length}if(i>=s)return e;var l=i-pi(n);if(l<1)return n;var u=a?Tr(a,0,l).join(""):e.slice(0,l);if(o===r)return u+n;if(a&&(l+=u.length-l),sa(o)){if(e.slice(l).search(o)){var c,h=u;for(o.global||(o=Pe(o.source,ba(ge.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var d=c.index;u=u.slice(0,d===r?l:d)}}else if(e.indexOf(cr(o),l)!=l){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+n},$i.unescape=function(e){return(e=ba(e))&&K.test(e)?e.replace(Y,mi):e},$i.uniqueId=function(e){var t=++Be;return ba(e)+t},$i.upperCase=Ka,$i.upperFirst=Qa,$i.each=bs,$i.eachRight=_s,$i.first=Go,ll($i,(Tl={},wn($i,(function(e,t){Ne.call($i.prototype,t)||(Tl[t]=e)})),Tl),{chain:!1}),$i.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){$i[e].placeholder=$i})),At(["drop","take"],(function(e,t){qi.prototype[e]=function(i){i=i===r?1:yi(ga(i),0);var n=this.__filtered__&&!t?new qi(this):this.clone();return n.__filtered__?n.__takeCount__=bi(i,n.__takeCount__):n.__views__.push({size:bi(i,m),type:e+(n.__dir__<0?"Right":"")}),n},qi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),At(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=1==i||3==i;qi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}})),At(["head","last"],(function(e,t){var i="take"+(t?"Right":"");qi.prototype[e]=function(){return this[i](1).value()[0]}})),At(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");qi.prototype[e]=function(){return this.__filtered__?new qi(this):this[i](1)}})),qi.prototype.compact=function(){return this.filter(rl)},qi.prototype.find=function(e){return this.filter(e).head()},qi.prototype.findLast=function(e){return this.reverse().find(e)},qi.prototype.invokeMap=Qn((function(e,t){return"function"==typeof e?new qi(this):this.map((function(i){return Ln(i,e,t)}))})),qi.prototype.reject=function(e){return this.filter(Ns(uo(e)))},qi.prototype.slice=function(e,t){e=ga(e);var i=this;return i.__filtered__&&(e>0||t<0)?new qi(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==r&&(i=(t=ga(t))<0?i.dropRight(-t):i.take(t-e)),i)},qi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},qi.prototype.toArray=function(){return this.take(m)},wn(qi.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=$i[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);o&&($i.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,l=t instanceof qi,u=a[0],c=l||Vs(t),h=function(e){var t=o.apply($i,Nt([e],a));return n&&d?t[0]:t};c&&i&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,p=!!this.__actions__.length,f=s&&!d,g=l&&!p;if(!s&&c){t=g?t:new qi(this);var m=e.apply(t,a);return m.__actions__.push({func:fs,args:[h],thisArg:r}),new zi(m,d)}return f&&g?e.apply(this,a):(m=this.thru(h),f?n?m.value()[0]:m.value():m)})})),At(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Le[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);$i.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var r=this.value();return t.apply(Vs(r)?r:[],e)}return this[i]((function(i){return t.apply(Vs(i)?i:[],e)}))}})),wn(qi.prototype,(function(e,t){var i=$i[t];if(i){var n=i.name+"";Ne.call(Li,n)||(Li[n]=[]),Li[n].push({name:t,func:i})}})),Li[Hr(r,2).name]=[{name:"wrapper",func:r}],qi.prototype.clone=function(){var e=new qi(this.__wrapped__);return e.__actions__=Ir(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ir(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ir(this.__views__),e},qi.prototype.reverse=function(){if(this.__filtered__){var e=new qi(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},qi.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=Vs(e),n=t<0,r=i?e.length:0,o=function(e,t,i){var n=-1,r=i.length;for(;++n<r;){var o=i[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=bi(t,e+s);break;case"takeRight":e=yi(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=o.start,a=o.end,l=a-s,u=n?a:s-1,c=this.__iteratees__,h=c.length,d=0,p=bi(l,this.__takeCount__);if(!i||!n&&r==l&&p==l)return gr(e,this.__actions__);var f=[];e:for(;l--&&d<p;){for(var g=-1,m=e[u+=t];++g<h;){var v=c[g],y=v.iteratee,b=v.type,_=y(m);if(2==b)m=_;else if(!_){if(1==b)continue e;break e}}f[d++]=m}return f},$i.prototype.at=gs,$i.prototype.chain=function(){return ps(this)},$i.prototype.commit=function(){return new zi(this.value(),this.__chain__)},$i.prototype.next=function(){this.__values__===r&&(this.__values__=pa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},$i.prototype.plant=function(e){for(var t,i=this;i instanceof ji;){var n=$o(i);n.__index__=0,n.__values__=r,t?o.__wrapped__=n:t=n;var o=n;i=i.__wrapped__}return o.__wrapped__=e,t},$i.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof qi){var t=e;return this.__actions__.length&&(t=new qi(this)),(t=t.reverse()).__actions__.push({func:fs,args:[ts],thisArg:r}),new zi(t,this.__chain__)}return this.thru(ts)},$i.prototype.toJSON=$i.prototype.valueOf=$i.prototype.value=function(){return gr(this.__wrapped__,this.__actions__)},$i.prototype.first=$i.prototype.head,Ze&&($i.prototype[Ze]=function(){return this}),$i}();gt._=vi,(n=function(){return vi}.call(t,i,t,e))===r||(e.exports=n)}.call(this)},3132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.query=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"!=typeof e?e:t.querySelector(e)},t.queryAll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"!=typeof e?e:Array.prototype.slice.call(t.querySelectorAll(e))},t.escapeCssIdentifier=function(e){return window.CSS&&window.CSS.escape?CSS.escape(e):e}},3382:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){this._handlers[e].forEach((function(e){try{e(t)}catch(e){console.error(e)}}));var i=new CustomEvent("swup:"+e,{detail:e});document.dispatchEvent(i)}},3447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={url:window.location.pathname+window.location.search,method:"GET",data:null,headers:{}},r=i({},n,e),o=new XMLHttpRequest;return o.onreadystatechange=function(){4===o.readyState&&(o.status,t(o))},o.open(r.method,r.url,!0),Object.keys(r.headers).forEach((function(e){o.setRequestHeader(e,r.headers[e])})),o.send(r.data),o}},3626:e=>{var t=Math.pow(2,32);e.exports={getUint64:function(e){var i,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(i=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(i):i:n.getUint32(0)*t+n.getUint32(4)},MAX_UINT32:t}},3688:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.toString().toLowerCase().replace(/\s+/g,"-").replace(/\//g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");return"/"===t[0]&&(t=t.splice(1)),""===t&&(t="homepage"),t}},3719:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(5932);t.default=function(e){var t=e.responseText,i=(0,n.getDataFromHtml)(t,this.options.containers);return i?(i.responseURL=e.responseURL?e.responseURL:window.location.href,i):(console.warn("[swup] Received page is invalid."),null)}},3751:(e,t,i)=>{"use strict";var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(6712);function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var e,i,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.name="GtmPlugin",a(n,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"mount",value:function(){var e=this;this.swup.on("contentReplaced",(function(t){if("object"===r(window.dataLayer)){var i={event:"VirtualPageview",virtualPageURL:window.location.pathname+window.location.search,virtualPageTitle:document.title};window.dataLayer.push(i),e.swup.log("GTM pageview (url '"+i.virtualPageURL+"').")}else console.warn("GTM is not loaded.")}))}}]),t}(((n=s)&&n.__esModule?n:{default:n}).default);t.A=l},3905:(e,t,i)=>{"use strict";i.r(t),i.d(t,{createBehavior:()=>a,manageBehaviors:()=>P});var n=i(5606),r=function(){return getComputedStyle(document.documentElement).getPropertyValue("--breakpoint").trim().replace(/"/g,"")};const o=function(e,t){if(!e)return console.error("You need to pass a breakpoint name!"),!1;const i=new RegExp("\\+$|\\-$");let n=["xs","sm","md","lg","xl","xxl"];window.A17&&window.A17.breakpoints&&(Array.isArray(window.A17.breakpoints)?n=window.A17.breakpoints:console.warn("A17.breakpoints should be an array. Using defaults.")),t&&(Array.isArray(t)?n=t:console.warn("isBreakpoint breakpoints should be an array. Using defaults."));const o=r(),s=n.indexOf(o),a=i.exec(e),l=!!a&&a[0],u=a?e.slice(0,-1):e,c=n.indexOf(u);return c<0?(console.warn("Unrecognized breakpoint. Supported breakpoints are: "+n.join(", ")),!1):"+"===l&&s>=c||"-"===l&&s<=c||!l&&e===o};function s(e,t={}){if(!(e&&e instanceof Element))throw new Error("Node argument is required");return this.$node=e,this.options=Object.assign({intersectionOptions:{rootMargin:"20%"}},t.options||{}),this.__isEnabled=!1,this.__children=t.children,this.__breakpoints=t.breakpoints,this.customMethodNames.forEach((e=>{this[e]=this[e].bind(this)})),this._binds={},this._data=new Proxy(this._binds,{set:(e,t,i)=>(this.updateBinds(t,i),e[t]=i,!0)}),this.__isIntersecting=!1,this.__intersectionObserver=null,this}s.prototype=Object.freeze({updateBinds(e,t){this.$node.querySelectorAll("[data-"+this.name.toLowerCase()+"-bindel*="+e+"]").forEach((e=>{e.innerHTML=t}));this.$node.querySelectorAll("[data-"+this.name.toLowerCase()+'-bindattr*="'+e+':"]').forEach((i=>{i.dataset[this.name.toLowerCase()+"Bindattr"].split(",").forEach((n=>{(n=n.split(":"))[0]===e&&("class"===n[1]?(this._binds[e]!==t&&i.classList.remove(this._binds[e]),t&&i.classList.add(t)):i.setAttribute(n[1],t))}))}))},init(){const e=new RegExp("^data-"+this.name+"-(.*)","i");for(let t=0;t<this.$node.attributes.length;t++){const i=this.$node.attributes[t],n=e.exec(i.nodeName);null!=n&&n.length>=2&&(this.options[n[1]]&&console.warn(`Ignoring ${n[1]} option, as it already exists on the ${name} behavior. Please choose another name.`),this.options[n[1]]=i.value)}"function"==typeof this.lifecycle?.init&&this.lifecycle.init.call(this),"function"==typeof this.lifecycle?.resized&&(this.__resizedBind=this.__resized.bind(this),window.addEventListener("resized",this.__resizedBind)),("function"==typeof this.lifecycle.mediaQueryUpdated||this.options.media)&&(this.__mediaQueryUpdatedBind=this.__mediaQueryUpdated.bind(this),window.addEventListener("mediaQueryUpdated",this.__mediaQueryUpdatedBind)),this.options.media?this.__toggleEnabled():this.enable(),this.__intersections()},destroy(){!0===this.__isEnabled&&this.disable(),"function"==typeof this.lifecycle?.destroy&&this.lifecycle.destroy.call(this),"function"==typeof this.lifecycle.resized&&window.removeEventListener("resized",this.__resizedBind),("function"==typeof this.lifecycle.mediaQueryUpdated||this.options.media)&&window.removeEventListener("mediaQueryUpdated",this.__mediaQueryUpdatedBind),null==this.lifecycle.intersectionIn&&null==this.lifecycle.intersectionOut||(this.__intersectionObserver.unobserve(this.$node),this.__intersectionObserver.disconnect()),function(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t]}(this)},getChild(e,t,i=!1){return null==t&&(t=this.$node),null!=this.__children&&null!=this.__children[e]?this.__children[e]:t[i?"querySelectorAll":"querySelector"]("[data-"+this.name.toLowerCase()+"-"+e.toLowerCase()+"]")},getChildren(e,t){return this.getChild(e,t,!0)},isEnabled(){return this.__isEnabled},enable(){this.__isEnabled=!0,"function"==typeof this.lifecycle.enabled&&this.lifecycle.enabled.call(this)},disable(){this.__isEnabled=!1,"function"==typeof this.lifecycle.disabled&&this.lifecycle.disabled.call(this)},addSubBehavior(e,t=this.$node,i={}){const n=P;"string"==typeof e?n.initBehavior(e,t,i):(n.add(e),n.initBehavior(e.prototype.behaviorName,t,i))},isBreakpoint(e){return o(e,this.__breakpoints)},__toggleEnabled(){const e=o(this.options.media,this.__breakpoints);e&&!this.__isEnabled?this.enable():!e&&this.__isEnabled&&this.disable()},__mediaQueryUpdated(e){"function"==typeof this.lifecycle?.mediaQueryUpdated&&this.lifecycle.mediaQueryUpdated.call(this,e),this.options.media&&this.__toggleEnabled()},__resized(e){"function"==typeof this.lifecycle?.resized&&this.lifecycle.resized.call(this,e)},__intersections(){null==this.lifecycle.intersectionIn&&null==this.lifecycle.intersectionOut||(this.__intersectionObserver=new IntersectionObserver((e=>{e.forEach((e=>{e.target===this.$node&&(e.isIntersecting?this.__isIntersecting||"function"!=typeof this.lifecycle.intersectionIn||(this.__isIntersecting=!0,this.lifecycle.intersectionIn.call(this)):this.__isIntersecting&&"function"==typeof this.lifecycle.intersectionOut&&(this.__isIntersecting=!1,this.lifecycle.intersectionOut.call(this)))}))}),this.options.intersectionOptions),this.__intersectionObserver.observe(this.$node))}});const a=(e,t,i={})=>{const n=function(...e){s.apply(this,e)},r=[],o={name:{get(){return this.behaviorName}},behaviorName:{value:e,writable:!0},lifecycle:{value:i},customMethodNames:{value:r}};return Object.keys(t).forEach((e=>{r.push(e),o[e]={value:t[e],writable:!0}})),n.prototype=Object.create(s.prototype,o),n};let l={dataAttr:"behavior",lazyAttr:"behavior-lazy",intersectionOptions:{rootMargin:"20%"},breakpoints:["xs","sm","md","lg","xl","xxl"]},u=[],c=!1;const h={},d=new Map,p=new Map;let f;const g=new Map,m=new Map;function v(e,t){return t=t.toLowerCase().replace(/-([a-zA-Z0-9])/gi,((e,t)=>t.toUpperCase())),e.dataset&&e.dataset[t]?e.dataset[t].split(" "):[]}function y(e){const t=u.indexOf(e);t>-1&&u.splice(t,1)}function b(e){const t=Array.from(d.keys());t.push(e),t.forEach((t=>{if(e===t||e.contains(t)){const e=d.get(t);e&&Object.keys(e).forEach((e=>{!function(e,t){const i=d.get(t);i&&i[e]?(i[e].destroy(),delete i[e],0===Object.keys(i).length&&d.delete(t)):console.warn(`No behavior '${e}' instance on:`,t)}(e,t),f.unobserve(t),g.delete(t),m.delete(t)}))}}))}function _(e,t,i){i.default&&"function"==typeof i.default?(h[e]=i.default,x(e,t),p.get(e)&&(p.get(e).forEach((t=>{x(e,t)})),p.delete(e))):(console.warn(`Tried to import ${e}, but it seems to not be a behavior`),y(e))}function w(e){if(!("querySelectorAll"in e))return;[e,...e.querySelectorAll(`[data-${l.dataAttr}]`)].forEach((e=>{const t=v(e,l.dataAttr);t&&t.forEach((t=>{x(t,e)}))}));[e,...e.querySelectorAll(`[data-${l.lazyAttr}]`)].forEach((e=>{const t=v(e,l.lazyAttr),i=new Map;t.forEach((t=>{const n=e.dataset[`${t.toLowerCase()}Lazymedia`];i.set(t,n||!1)})),e!==document&&(g.set(e,i),m.set(e,!1),f.observe(e))}))}function T(e){e.forEach((e=>{if(void 0!==m.get(e)&&!1===m.get(e))return;let t=g.get(e);t&&t.forEach(((i,n)=>{i&&!o(i,l.breakpoints)||(x(n,e),t.delete(n),0===t.size?(f.unobserve(e),g.delete(e)):g.set(e,t))}))}))}function S(e){e.forEach((e=>{e.isIntersecting?(m.set(e.target,!0),T([e.target])):m.set(e.target,!1)}))}function E(){T(Array.from(g.keys()))}function x(e,t,r={}){if(!h[e])return void function(e,t){if(u.indexOf(e)>-1){const i=p.get(e)||[];return i.includes(t)||i.push(t),void p.set(e,i)}u.push(e);try{i(7608)(`${n.env.BEHAVIORS_PATH}/${(n.env.BEHAVIORS_COMPONENT_PATHS[e]||"").replace(/^\/|\/$/gi,"")}/${e}.${n.env.BEHAVIORS_EXTENSION}`).then((i=>{_(e,t,i)})).catch((t=>{console.warn(`No loaded behavior called: ${e}`),y(e)}))}catch(r){try{i(2395)(`${n.env.BEHAVIORS_PATH}/${e}.${n.env.BEHAVIORS_EXTENSION}`).then((i=>{_(e,t,i)})).catch((t=>{console.warn(`No loaded behavior called: ${e}`),y(e)}))}catch(t){console.warn(`Unknown behavior called: ${e}. \nIt maybe the behavior doesn't exist, check for typos and check Webpack has generated your file. \nIf you are using dynamically imported behaviors, you may also want to check your webpack config. See https://github.com/area17/a17-behaviors/wiki/Setup#webpack-config`),y(e)}}}(e,t);r={breakpoints:l.breakpoints,...r};const o=d.get(t)||{};if(o==={}||!o[e]){const i=new h[e](t,r);o[e]=i,d.set(t,o);try{return i.init(),i}catch(i){console.log(`Error in behavior '${e}' on:`,t),console.log(i)}}}function C(e){"function"==typeof e&&e.prototype.behaviorName&&(e={[e.prototype.behaviorName]:e}),"string"==typeof e&&arguments.length>1&&(e={[e]:a(...arguments)});const t=Object.keys(e).filter((e=>-1===u.indexOf(e)));t.length&&(u=u.concat(t),t.forEach((t=>{h[t]=e[t]})),w(document),c||(c=!0,new MutationObserver((e=>{e.forEach((e=>{e.removedNodes.forEach((e=>{b(e)})),e.addedNodes.forEach((e=>{w(e)}))}))})).observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1})))}let k={init:function(e,t={}){l={...l,...t},function(){var e,t=r();function i(){var e=r();window.dispatchEvent(new CustomEvent("resized",{detail:{breakpoint:e}})),e!==t&&(window.A17&&(window.A17.currentMediaQuery=e),window.dispatchEvent(new CustomEvent("mediaQueryUpdated",{detail:{breakpoint:e,prevBreakpoint:t}})),t=e)}window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout(i,250)})),""===t?window.requestAnimationFrame(i):window.A17&&(window.A17.currentMediaQuery=t)}(),f=new IntersectionObserver(S,l.intersectionOptions),e&&C(e),window.addEventListener("mediaQueryUpdated",E)},add:C,initBehavior:x,get currentBreakpoint(){return r()}};try{0}catch(e){}var P=k},4017:(t,i,n)=>{"use strict";var r={};n.r(r),n.d(r,{Accordion:()=>l,Modal:()=>ne,VideoBackground:()=>re});var o={};n.r(o),n.d(o,{Accordion:()=>Ho,Alert:()=>jo,AmountInput:()=>zo,ArtworkSearch:()=>qo,ArtworkViewer:()=>Yo,AudioPlayer:()=>Ko,BackgroundVideo:()=>Qo,CarouselThumbnail:()=>Cl,CheckboxLink:()=>kl,CheckboxToggle:()=>Al,DateInput:()=>Il,Discount:()=>Ll,Donation:()=>Ol,Dropdown:()=>Hl,EditorialHero:()=>nd,FileUpload:()=>rd,FilterBar:()=>cd,FilterCheckbox:()=>hd,FilterDatepicker:()=>Xd,FilterDropdown:()=>op,FilterLoadMore:()=>pp,FilterModal:()=>vp,FilterableItems:()=>ud,FormCaptcha:()=>yp,Gallery:()=>wp,GalleryLightbox:()=>kp,GlobalHeader:()=>Pp,HighlightScroll:()=>Ip,ImageComparisonSlider:()=>Eg,InputHandler:()=>Cg,ItemizedAudio:()=>Rg,JumpLinks:()=>Ng,LanguageSwitcher:()=>Fg,ListingFade:()=>Ug,LocationInput:()=>$g,MediaExpander2up:()=>jg,MediaHandler:()=>zg,MobileSearch:()=>Vg,Modal:()=>Qg,NavDropdown:()=>Jg,NavigationSidebar:()=>tm,PageTools:()=>im,PaginationInput:()=>nm,PasswordReveal:()=>rm,RegisterForm:()=>um,RemoteClick:()=>cm,SectionAngle:()=>hm,SectionExpander:()=>pm,Select:()=>fm,ShowVideo:()=>ym,SlashScrollPin:()=>_m,SocialSharing:()=>Sm,SplitMedia:()=>xm,TextExpander:()=>Cm,TextExpanderLines:()=>km,TicketDateSelect:()=>Pm,TicketSelectList:()=>Am,TicketTimeSelect:()=>Im,TimePicker:()=>Dm,TopLink:()=>Om,VideoPlayer:()=>Zk});var s=n(3905),a=(0,s.createBehavior)("Accordion",{toggle:function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-Accordion-index");this._data.activeIndexes.includes(t)?(this.close(t),this._data.activeIndexes=this._data.activeIndexes.filter((function(e){return e!==t}))):(this.open(t),this._data.activeIndexes.push(t))},close:function(e){var t=this.$triggers[e],i=this.$triggerIcons[e],n=this.$contents[e];n.style.height="0px",t.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true"),i.classList.remove("rotate-180")},open:function(e){var t=this.$triggers[e],i=this.$triggerIcons[e],n=this.$contents[e],r=this.$contentInners[e].offsetHeight;n.style.height="".concat(r,"px"),t.setAttribute("aria-expanded","true"),n.setAttribute("aria-hidden","false"),i.classList.add("rotate-180")}},{init:function(){var e=this;this._data.activeIndexes=[],this.$initOpen=this.getChildren("init-open"),this.$triggers=this.getChildren("trigger"),this.$triggerIcons=this.getChildren("trigger-icon"),this.$contents=this.getChildren("content"),this.$contentInners=this.getChildren("content-inner"),this.$triggers.forEach((function(t){t.addEventListener("click",e.toggle,!1)})),this.$initOpen.forEach((function(e){e.click()}))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){var e=this;this.$triggers.forEach((function(t){t.removeEventListener("click",e.toggle)}))}});const l=a;var u=!1;if("undefined"!=typeof window){var c={get passive(){u=!0}};window.addEventListener("testPassive",null,c),window.removeEventListener("testPassive",null,c)}var h="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),d=[],p=!1,f=-1,g=void 0,m=void 0,v=void 0,y=function(e){return d.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},b=function(e){var t=e||window.event;return!!y(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},_=function(){void 0!==v&&(document.body.style.paddingRight=v,v=void 0),void 0!==g&&(document.body.style.overflow=g,g=void 0)},w=function(){if(void 0!==m){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=m.position,document.body.style.top=m.top,document.body.style.left=m.left,window.scrollTo(t,e),m=void 0}},T=function(e,t){if(e){if(!d.some((function(t){return t.targetElement===e}))){var i={targetElement:e,options:t||{}};d=[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(d),[i]),h?window.requestAnimationFrame((function(){if(void 0===m){m={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window,t=e.scrollY,i=e.scrollX,n=e.innerHeight;document.body.style.position="fixed",document.body.style.top=-t,document.body.style.left=-i,setTimeout((function(){return window.requestAnimationFrame((function(){var e=n-window.innerHeight;e&&t>=n&&(document.body.style.top=-(t+e))}))}),300)}})):function(e){if(void 0===v){var t=!!e&&!0===e.reserveScrollBarGap,i=window.innerWidth-document.documentElement.clientWidth;if(t&&i>0){var n=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);v=document.body.style.paddingRight,document.body.style.paddingRight=n+i+"px"}}void 0===g&&(g=document.body.style.overflow,document.body.style.overflow="hidden")}(t),h&&(e.ontouchstart=function(e){1===e.targetTouches.length&&(f=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var i=e.targetTouches[0].clientY-f;!y(e.target)&&(t&&0===t.scrollTop&&i>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&i<0?b(e):e.stopPropagation())}(t,e)},p||(document.addEventListener("touchmove",b,u?{passive:!1}:void 0),p=!0))}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},S=function(e){e?(d=d.filter((function(t){return t.targetElement!==e})),h&&(e.ontouchstart=null,e.ontouchmove=null,p&&0===d.length&&(document.removeEventListener("touchmove",b,u?{passive:!1}:void 0),p=!1)),h?w():_()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")},E=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],x=E.join(","),C="undefined"==typeof Element,k=C?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,P=!C&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},A=function(e,t,i){var n=Array.prototype.slice.apply(e.querySelectorAll(x));return t&&k.call(e,x)&&n.unshift(e),n=n.filter(i)},I=function e(t,i,n){for(var r=[],o=Array.from(t);o.length;){var s=o.shift();if("SLOT"===s.tagName){var a=s.assignedElements(),l=e(a.length?a:s.children,!0,n);n.flatten?r.push.apply(r,l):r.push({scope:s,candidates:l})}else{k.call(s,x)&&n.filter(s)&&(i||!t.includes(s))&&r.push(s);var u=s.shadowRoot||"function"==typeof n.getShadowRoot&&n.getShadowRoot(s),c=!n.shadowRootFilter||n.shadowRootFilter(s);if(u&&c){var h=e(!0===u?s.children:u.children,!0,n);n.flatten?r.push.apply(r,h):r.push({scope:s,candidates:h})}else o.unshift.apply(o,s.children)}}return r},L=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},D=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},O=function(e){return"INPUT"===e.tagName},R=function(e){return function(e){return O(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,i=e.form||P(e),n=function(e){return i.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var r=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]}(t,e.form);return!r||r===e}(e)},M=function(e){var t=e.getBoundingClientRect(),i=t.width,n=t.height;return 0===i&&0===n},N=function(e,t){return!(t.disabled||function(e){return O(e)&&"hidden"===e.type}(t)||function(e,t){var i=t.displayCheck,n=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var r=k.call(e,"details>summary:first-of-type")?e.parentElement:e;if(k.call(r,"details:not([open]) *"))return!0;var o=P(e).host,s=(null==o?void 0:o.ownerDocument.contains(o))||e.ownerDocument.contains(e);if(i&&"full"!==i){if("non-zero-area"===i)return M(e)}else{if("function"==typeof n){for(var a=e;e;){var l=e.parentElement,u=P(e);if(l&&!l.shadowRoot&&!0===n(l))return M(e);e=e.assignedSlot?e.assignedSlot:l||u===e.ownerDocument?l:u.host}e=a}if(s)return!e.getClientRects().length}return!1}(t,e)||function(e){var t="DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}));return t}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var i=0;i<t.children.length;i++){var n=t.children.item(i);if("LEGEND"===n.tagName)return!!k.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1}(t))},B=function(e,t){return!(R(t)||L(t)<0||!N(e,t))},F=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},U=function e(t){var i=[],n=[];return t.forEach((function(t,r){var o=!!t.scope,s=o?t.scope:t,a=L(s,o),l=o?e(t.candidates):s;0===a?o?i.push.apply(i,l):i.push(s):n.push({documentOrder:r,tabIndex:a,item:t,isScope:o,content:l})})),n.sort(D).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(i)},$=function(e,t){var i;return i=(t=t||{}).getShadowRoot?I([e],t.includeContainer,{filter:B.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:F}):A(e,t.includeContainer,B.bind(null,t)),U(i)},H=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==k.call(e,x)&&B(t,e)},j=E.concat("iframe").join(","),z=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==k.call(e,j)&&N(t,e)};function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function V(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?q(Object(i),!0).forEach((function(t){W(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var G,Y=(G=[],{activateTrap:function(e){if(G.length>0){var t=G[G.length-1];t!==e&&t.pause()}var i=G.indexOf(e);-1===i||G.splice(i,1),G.push(e)},deactivateTrap:function(e){var t=G.indexOf(e);-1!==t&&G.splice(t,1),G.length>0&&G[G.length-1].unpause()}}),X=function(e){return setTimeout(e,0)},K=function(e,t){var i=-1;return e.every((function(e,n){return!t(e)||(i=n,!1)})),i},Q=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return"function"==typeof e?e.apply(void 0,i):e},Z=function(e){return e.target.shadowRoot&&"function"==typeof e.composedPath?e.composedPath()[0]:e.target},J=function(e,t){var i,n=(null==t?void 0:t.document)||document,r=V({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},t),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},s=function(e,t,i){return e&&void 0!==e[t]?e[t]:r[i||t]},a=function(e){return o.containerGroups.findIndex((function(t){var i=t.container,n=t.tabbableNodes;return i.contains(e)||n.find((function(t){return t===e}))}))},l=function(e){var t=r[e];if("function"==typeof t){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];t=t.apply(void 0,o)}if(!0===t&&(t=void 0),!t){if(void 0===t||!1===t)return t;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var a=t;if("string"==typeof t&&!(a=n.querySelector(t)))throw new Error("`".concat(e,"` as selector refers to no known node"));return a},u=function(){var e=l("initialFocus");if(!1===e)return!1;if(void 0===e)if(a(n.activeElement)>=0)e=n.activeElement;else{var t=o.tabbableGroups[0];e=t&&t.firstTabbableNode||l("fallbackFocus")}if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},c=function(){if(o.containerGroups=o.containers.map((function(e){var t,i,n=$(e,r.tabbableOptions),o=(t=e,(i=(i=r.tabbableOptions)||{}).getShadowRoot?I([t],i.includeContainer,{filter:N.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):A(t,i.includeContainer,N.bind(null,i)));return{container:e,tabbableNodes:n,focusableNodes:o,firstTabbableNode:n.length>0?n[0]:null,lastTabbableNode:n.length>0?n[n.length-1]:null,nextTabbableNode:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=o.findIndex((function(t){return t===e}));if(!(i<0))return t?o.slice(i+1).find((function(e){return H(e,r.tabbableOptions)})):o.slice(0,i).reverse().find((function(e){return H(e,r.tabbableOptions)}))}}})),o.tabbableGroups=o.containerGroups.filter((function(e){return e.tabbableNodes.length>0})),o.tabbableGroups.length<=0&&!l("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},h=function e(t){!1!==t&&t!==n.activeElement&&(t&&t.focus?(t.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=t,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(t)&&t.select()):e(u()))},d=function(e){var t=l("setReturnFocus",e);return t||!1!==t&&e},p=function(e){var t=Z(e);a(t)>=0||(Q(r.clickOutsideDeactivates,e)?i.deactivate({returnFocus:r.returnFocusOnDeactivate&&!z(t,r.tabbableOptions)}):Q(r.allowOutsideClick,e)||e.preventDefault())},f=function(e){var t=Z(e),i=a(t)>=0;i||t instanceof Document?i&&(o.mostRecentlyFocusedNode=t):(e.stopImmediatePropagation(),h(o.mostRecentlyFocusedNode||u()))},g=function(e){if(function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e)&&!1!==Q(r.escapeDeactivates,e))return e.preventDefault(),void i.deactivate();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){var t=Z(e);c();var i=null;if(o.tabbableGroups.length>0){var n=a(t),s=n>=0?o.containerGroups[n]:void 0;if(n<0)i=e.shiftKey?o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:o.tabbableGroups[0].firstTabbableNode;else if(e.shiftKey){var u=K(o.tabbableGroups,(function(e){var i=e.firstTabbableNode;return t===i}));if(u<0&&(s.container===t||z(t,r.tabbableOptions)&&!H(t,r.tabbableOptions)&&!s.nextTabbableNode(t,!1))&&(u=n),u>=0){var d=0===u?o.tabbableGroups.length-1:u-1;i=o.tabbableGroups[d].lastTabbableNode}}else{var p=K(o.tabbableGroups,(function(e){var i=e.lastTabbableNode;return t===i}));if(p<0&&(s.container===t||z(t,r.tabbableOptions)&&!H(t,r.tabbableOptions)&&!s.nextTabbableNode(t))&&(p=n),p>=0){var f=p===o.tabbableGroups.length-1?0:p+1;i=o.tabbableGroups[f].firstTabbableNode}}}else i=l("fallbackFocus");i&&(e.preventDefault(),h(i))}(e)},m=function(e){var t=Z(e);a(t)>=0||Q(r.clickOutsideDeactivates,e)||Q(r.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},v=function(){if(o.active)return Y.activateTrap(i),o.delayInitialFocusTimer=r.delayInitialFocus?X((function(){h(u())})):h(u()),n.addEventListener("focusin",f,!0),n.addEventListener("mousedown",p,{capture:!0,passive:!1}),n.addEventListener("touchstart",p,{capture:!0,passive:!1}),n.addEventListener("click",m,{capture:!0,passive:!1}),n.addEventListener("keydown",g,{capture:!0,passive:!1}),i},y=function(){if(o.active)return n.removeEventListener("focusin",f,!0),n.removeEventListener("mousedown",p,!0),n.removeEventListener("touchstart",p,!0),n.removeEventListener("click",m,!0),n.removeEventListener("keydown",g,!0),i};return(i={get active(){return o.active},get paused(){return o.paused},activate:function(e){if(o.active)return this;var t=s(e,"onActivate"),i=s(e,"onPostActivate"),r=s(e,"checkCanFocusTrap");r||c(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,t&&t();var a=function(){r&&c(),v(),i&&i()};return r?(r(o.containers.concat()).then(a,a),this):(a(),this)},deactivate:function(e){if(!o.active)return this;var t=V({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},e);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,y(),o.active=!1,o.paused=!1,Y.deactivateTrap(i);var n=s(t,"onDeactivate"),a=s(t,"onPostDeactivate"),l=s(t,"checkCanReturnFocus"),u=s(t,"returnFocus","returnFocusOnDeactivate");n&&n();var c=function(){X((function(){u&&h(d(o.nodeFocusedBeforeActivation)),a&&a()}))};return u&&l?(l(d(o.nodeFocusedBeforeActivation)).then(c,c),this):(c(),this)},pause:function(){return o.paused||!o.active||(o.paused=!0,y()),this},unpause:function(){return o.paused&&o.active?(o.paused=!1,c(),v(),this):this},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return o.containers=t.map((function(e){return"string"==typeof e?n.querySelector(e):e})),o.active&&c(),this}}).updateContainerElements(e),i};function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?te(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var ie=(0,s.createBehavior)("Modal",{toggle:function(e){e.preventDefault(),this._data.isActive?this.close():this.open()},close:function(e){var t;this._data.isActive&&((t=this.$node.classList).remove.apply(t,ee(this._data.activeClasses)),this._data.focusTrap.deactivate(),this._data.isActive=!1,S(this.$node),this.$node.dispatchEvent(new CustomEvent("Modal:closed")))},open:function(){var e,t=this;document.dispatchEvent(new CustomEvent("Modal:closeAll")),(e=this.$node.classList).add.apply(e,ee(this._data.activeClasses)),this._data.isActive=!0,setTimeout((function(){t._data.focusTrap.activate(),T(t.$node)}),300)},handleEsc:function(e){"Escape"===e.key&&this.close()},handleClickOutside:function(e){e.target.id===this.$node.id&&this.close(e)},addListener:function(e,t){for(var i=e.length,n=0;n<i;n++)e[n].addEventListener("click",t,!1)},removeListener:function(e,t){for(var i=e.length,n=0;n<i;n++)e[n].removeEventListener("click",t)}},{init:function(){this.$focusTrap=this.getChild("focus-trap"),this.$closeButtons=this.getChildren("close-trigger"),this.$initialFocus=this.getChild("initial-focus"),this.$initialFocus||console.warn("No initial focus element found. Add a `h1` with the attribute `data-Modal-initial-focus`. The `h1` should also have an id that matches the modal id with `_title` appended"),this._data.focusTrap=J(this.$focusTrap,{initialFocus:this.$initialFocus}),this._data.isActive=!1,this._data.activeClasses=["a17-trans-show-hide--active"],this.$closeButtons&&this.addListener(this.$closeButtons,this.close),this.$node.addEventListener("Modal:toggle",this.toggle,!1),this.$node.addEventListener("Modal:open",this.open,!1),this.$node.addEventListener("Modal:close",this.close,!1),document.addEventListener("Modal:closeAll",this.close,!1),document.addEventListener("keyup",this.handleEsc,!1);var e=this.$node.getAttribute("id");this.$triggers=document.querySelectorAll('[data-modal-target="#'.concat(e,'"]')),this.addListener(this.$triggers,this.toggle),this.options.panel&&this.$node.addEventListener("click",this.handleClickOutside,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.close(),this.$closeButtons&&this.removeListener(this.$closeButtons,this.close),this.$node.removeEventListener("Modal:toggle",this.toggle),this.$node.removeEventListener("Modal:open",this.open),this.$node.removeEventListener("Modal:close",this.close),this.$node.removeEventListener("click",this.handleClickOutside),document.removeEventListener("Modal:closeAll",this.close),document.removeEventListener("keyup",this.handleEsc),this.removeListener(this.$triggers,this.toggle)}});const ne=ie;const re=(0,s.createBehavior)("VideoBackground",{toggle:function(e){e.preventDefault(),this.isPlaying?this.$player.pause():this.$player.play(),this.updateButton()},handlePlay:function(e){this.isPlaying=!0},handlePause:function(e){this.isPlaying=!1},updateButton:function(){var e=this.isPlaying?this.buttonText.play:this.buttonText.pause;this.$pauseButton.innerText=e,this.$pauseButton.setAttribute("aria-label",e),this.$pauseButton.setAttribute("aria-pressed",this.isPlaying.toString())}},{init:function(){this.isPlaying=!1,this.buttonText={play:this.options["text-play"],pause:this.options["text-pause"]},this.$player=this.getChild("player"),this.$pauseButton=this.getChild("controls").querySelector("button"),this.$player.addEventListener("play",this.handlePlay,!1),this.$player.addEventListener("pause",this.handlePause,!1),this.$pauseButton.addEventListener("click",this.toggle,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$player.removeEventListener("play",this.handlePlay),this.$player.removeEventListener("pause",this.handlePause),this.$pauseButton.removeEventListener("click",this.toggle)}}),oe=function(){const e="data-focus-method",t="touch";let i="",n="";document.addEventListener("keydown",(function(){i="key"}),!0),document.addEventListener("mousedown",(function(){i!==t&&(i="mouse")}),!0),document.addEventListener("touchstart",(function(){i=t}),!0),document.addEventListener("focus",(function(t){i||(i=n),t.target&&"function"==typeof t.target.setAttribute&&(t.target.setAttribute(e,i),n=i,i="")}),!0),document.addEventListener("blur",(function(t){t.target&&"function"==typeof t.target.removeAttribute&&t.target.removeAttribute(e)}),!0),window.addEventListener("blur",(function(){i=null}))},se=function(){function e(){const e=.01*Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);document.documentElement.style.setProperty("--vh",`${e}px`)}"undefined"!=typeof window&&(window.addEventListener("resize",e),e())},ae=function(){return"undefined"==typeof window?"":getComputedStyle(document.documentElement).getPropertyValue("--breakpoint").trim().replace(/"/g,"")},le=function(){var e,t=ae();function i(){var e=ae();window.dispatchEvent(new CustomEvent("resized",{detail:{breakpoint:e}})),e!==t&&(window.A17&&(window.A17.currentMediaQuery=e),window.dispatchEvent(new CustomEvent("mediaQueryUpdated",{detail:{breakpoint:e,prevBreakpoint:t}})),t=e)}if(window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout(i,250)})),"function"==typeof ResizeObserver){let e=null;new ResizeObserver((t=>{clearTimeout(e),e=setTimeout((()=>{window.A17.currentMediaQuery!==ae()&&window.dispatchEvent(new Event("resize"))}),251)})).observe(document.documentElement)}""===t?window.requestAnimationFrame(i):window.A17&&(window.A17.currentMediaQuery=t)};const ue=function(){function e(){const e=document.querySelectorAll("img[srcset][sizes], source[srcset][sizes]");for(let t=0;t<e.length;t++)e[t].sizes+=""}window.addEventListener("resized",e),document.addEventListener("page:updated",e)};var ce=n(2263),he=n(6124),de=n(6627),pe=n(3751),fe=n(6902),ge=n(1194);function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var ye,be,_e,we,Te,Se,Ee,xe,Ce,ke,Pe,Ae,Ie,Le,De,Oe,Re,Me={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ne={duration:.5,overwrite:!1,delay:0},Be=1e8,Fe=1e-8,Ue=2*Math.PI,$e=Ue/4,He=0,je=Math.sqrt,ze=Math.cos,qe=Math.sin,Ve=function(e){return"string"==typeof e},We=function(e){return"function"==typeof e},Ge=function(e){return"number"==typeof e},Ye=function(e){return void 0===e},Xe=function(e){return"object"==typeof e},Ke=function(e){return!1!==e},Qe=function(){return"undefined"!=typeof window},Ze=function(e){return We(e)||Ve(e)},Je="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},et=Array.isArray,tt=/(?:-?\.?\d|\.)+/gi,it=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,nt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,rt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ot=/[+-]=-?[.\d]+/,st=/[^,'"\[\]\s]+/gi,at=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,lt={},ut={},ct=function(e){return(ut=Ut(e,lt))&&Hn},ht=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},dt=function(e,t){return!t&&console.warn(e)},pt=function(e,t){return e&&(lt[e]=t)&&ut&&(ut[e]=t)||lt},ft=function(){return 0},gt={suppressEvents:!0,isStart:!0,kill:!1},mt={suppressEvents:!0,kill:!1},vt={suppressEvents:!0},yt={},bt=[],_t={},wt={},Tt={},St=30,Et=[],xt="",Ct=function(e){var t,i,n=e[0];if(Xe(n)||We(n)||(e=[e]),!(t=(n._gsap||{}).harness)){for(i=Et.length;i--&&!Et[i].targetTest(n););t=Et[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new en(e[i],t)))||e.splice(i,1);return e},kt=function(e){return e._gsap||Ct(vi(e))[0]._gsap},Pt=function(e,t,i){return(i=e[t])&&We(i)?e[t]():Ye(i)&&e.getAttribute&&e.getAttribute(t)||i},At=function(e,t){return(e=e.split(",")).forEach(t)||e},It=function(e){return Math.round(1e5*e)/1e5||0},Lt=function(e){return Math.round(1e7*e)/1e7||0},Dt=function(e,t){var i=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+n:"-"===i?e-n:"*"===i?e*n:e/n},Ot=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},Rt=function(){var e,t,i=bt.length,n=bt.slice(0);for(_t={},bt.length=0,e=0;e<i;e++)(t=n[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Mt=function(e,t,i,n){bt.length&&!be&&Rt(),e.render(t,i,n||be&&t<0&&(e._initted||e._startAt)),bt.length&&!be&&Rt()},Nt=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(st).length<2?t:Ve(e)?e.trim():e},Bt=function(e){return e},Ft=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Ut=function(e,t){for(var i in t)e[i]=t[i];return e},$t=function e(t,i){for(var n in i)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(t[n]=Xe(i[n])?e(t[n]||(t[n]={}),i[n]):i[n]);return t},Ht=function(e,t){var i,n={};for(i in e)i in t||(n[i]=e[i]);return n},jt=function(e){var t,i=e.parent||we,n=e.keyframes?(t=et(e.keyframes),function(e,i){for(var n in i)n in e||"duration"===n&&t||"ease"===n||(e[n]=i[n])}):Ft;if(Ke(e.inherit))for(;i;)n(e,i.vars.defaults),i=i.parent||i._dp;return e},zt=function(e,t,i,n,r){void 0===i&&(i="_first"),void 0===n&&(n="_last");var o,s=e[n];if(r)for(o=t[r];s&&s[r]>o;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=s,t.parent=t._dp=e,t},qt=function(e,t,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=t._prev,o=t._next;r?r._next=o:e[i]===t&&(e[i]=o),o?o._prev=r:e[n]===t&&(e[n]=r),t._next=t._prev=t.parent=null},Vt=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Wt=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Gt=function(e,t,i,n){return e._startAt&&(be?e._startAt.revert(mt):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},Yt=function e(t){return!t||t._ts&&e(t.parent)},Xt=function(e){return e._repeat?Kt(e._tTime,e=e.duration()+e._rDelay)*e:0},Kt=function(e,t){var i=Math.floor(e=Lt(e/t));return e&&i===e?i-1:i},Qt=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Zt=function(e){return e._end=Lt(e._start+(e._tDur/Math.abs(e._ts||e._rts||Fe)||0))},Jt=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Lt(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Zt(e),i._dirty||Wt(i,e)),e},ei=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Qt(e.rawTime(),t),(!t._dur||di(0,t.totalDuration(),i)-t._tTime>Fe)&&t.render(i,!0)),Wt(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},ti=function(e,t,i,n){return t.parent&&Vt(t),t._start=Lt((Ge(i)?i:i||e!==we?ui(e,i,t):e._time)+t._delay),t._end=Lt(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),zt(e,t,"_first","_last",e._sort?"_start":0),oi(t)||(e._recent=t),n||ei(e,t),e._ts<0&&Jt(e,e._tTime),e},ii=function(e,t){return(lt.ScrollTrigger||ht("scrollTrigger",t))&&lt.ScrollTrigger.create(t,e)},ni=function(e,t,i,n,r){return un(e,t,r),e._initted?!i&&e._pt&&!be&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Ce!==Hi.frame?(bt.push(e),e._lazy=[r,n],1):void 0:1},ri=function e(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||e(i))},oi=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},si=function(e,t,i,n){var r=e._repeat,o=Lt(t)||0,s=e._tTime/e._tDur;return s&&!n&&(e._time*=o/e._dur),e._dur=o,e._tDur=r?r<0?1e10:Lt(o*(r+1)+e._rDelay*r):o,s>0&&!n&&Jt(e,e._tTime=e._tDur*s),e.parent&&Zt(e),i||Wt(e.parent,e),e},ai=function(e){return e instanceof nn?Wt(e):si(e,e._dur)},li={_start:0,endTime:ft,totalDuration:ft},ui=function e(t,i,n){var r,o,s,a=t.labels,l=t._recent||li,u=t.duration()>=Be?l.endTime(!1):t._dur;return Ve(i)&&(isNaN(i)||i in a)?(o=i.charAt(0),s="%"===i.substr(-1),r=i.indexOf("="),"<"===o||">"===o?(r>=0&&(i=i.replace(/=/,"")),("<"===o?l._start:l.endTime(l._repeat>=0))+(parseFloat(i.substr(1))||0)*(s?(r<0?l:n).totalDuration()/100:1)):r<0?(i in a||(a[i]=u),a[i]):(o=parseFloat(i.charAt(r-1)+i.substr(r+1)),s&&n&&(o=o/100*(et(n)?n[0]:n).totalDuration()),r>1?e(t,i.substr(0,r-1),n)+o:u+o)):null==i?u:+i},ci=function(e,t,i){var n,r,o=Ge(t[1]),s=(o?2:1)+(e<2?0:1),a=t[s];if(o&&(a.duration=t[1]),a.parent=i,e){for(n=a,r=i;r&&!("immediateRender"in n);)n=r.vars.defaults||{},r=Ke(r.vars.inherit)&&r.parent;a.immediateRender=Ke(n.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new fn(t[0],a,t[s+1])},hi=function(e,t){return e||0===e?t(e):t},di=function(e,t,i){return i<e?e:i>t?t:i},pi=function(e,t){return Ve(e)&&(t=at.exec(e))?t[1]:""},fi=[].slice,gi=function(e,t){return e&&Xe(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Xe(e[0]))&&!e.nodeType&&e!==Te},mi=function(e,t,i){return void 0===i&&(i=[]),e.forEach((function(e){var n;return Ve(e)&&!t||gi(e,1)?(n=i).push.apply(n,vi(e)):i.push(e)}))||i},vi=function(e,t,i){return _e&&!t&&_e.selector?_e.selector(e):!Ve(e)||i||!Se&&ji()?et(e)?mi(e,i):gi(e)?fi.call(e,0):e?[e]:[]:fi.call((t||Ee).querySelectorAll(e),0)},yi=function(e){return e=vi(e)[0]||dt("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return vi(t,i.querySelectorAll?i:i===e?dt("Invalid scope")||Ee.createElement("div"):e)}},bi=function(e){return e.sort((function(){return.5-Math.random()}))},_i=function(e){if(We(e))return e;var t=Xe(e)?e:{each:e},i=Xi(t.ease),n=t.from||0,r=parseFloat(t.base)||0,o={},s=n>0&&n<1,a=isNaN(n)||s,l=t.axis,u=n,c=n;return Ve(n)?u=c={center:.5,edges:.5,end:1}[n]||0:!s&&a&&(u=n[0],c=n[1]),function(e,s,h){var d,p,f,g,m,v,y,b,_,w=(h||t).length,T=o[w];if(!T){if(!(_="auto"===t.grid?0:(t.grid||[1,Be])[1])){for(y=-Be;y<(y=h[_++].getBoundingClientRect().left)&&_<w;);_<w&&_--}for(T=o[w]=[],d=a?Math.min(_,w)*u-.5:n%_,p=_===Be?0:a?w*c/_-.5:n/_|0,y=0,b=Be,v=0;v<w;v++)f=v%_-d,g=p-(v/_|0),T[v]=m=l?Math.abs("y"===l?g:f):je(f*f+g*g),m>y&&(y=m),m<b&&(b=m);"random"===n&&bi(T),T.max=y-b,T.min=b,T.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(_>w?w-1:l?"y"===l?w/_:_:Math.max(_,w/_))||0)*("edges"===n?-1:1),T.b=w<0?r-w:r,T.u=pi(t.amount||t.each)||0,i=i&&w<0?Gi(i):i}return w=(T[e]-T.min)/T.max||0,Lt(T.b+(i?i(w):w)*T.v)+T.u}},wi=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var n=Lt(Math.round(parseFloat(i)/e)*e*t);return(n-n%1)/t+(Ge(i)?0:pi(i))}},Ti=function(e,t){var i,n,r=et(e);return!r&&Xe(e)&&(i=r=e.radius||Be,e.values?(e=vi(e.values),(n=!Ge(e[0]))&&(i*=i)):e=wi(e.increment)),hi(t,r?We(e)?function(t){return n=e(t),Math.abs(n-t)<=i?n:t}:function(t){for(var r,o,s=parseFloat(n?t.x:t),a=parseFloat(n?t.y:0),l=Be,u=0,c=e.length;c--;)(r=n?(r=e[c].x-s)*r+(o=e[c].y-a)*o:Math.abs(e[c]-s))<l&&(l=r,u=c);return u=!i||l<=i?e[u]:t,n||u===t||Ge(t)?u:u+pi(t)}:wi(e))},Si=function(e,t,i,n){return hi(et(e)?!t:!0===i?!!(i=0):!n,(function(){return et(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*n)/n}))},Ei=function(e,t,i){return hi(i,(function(i){return e[~~t(i)]}))},xi=function(e){for(var t,i,n,r,o=0,s="";~(t=e.indexOf("random(",o));)n=e.indexOf(")",t),r="["===e.charAt(t+7),i=e.substr(t+7,n-t-7).match(r?st:tt),s+=e.substr(o,t-o)+Si(r?i:+i[0],r?0:+i[1],+i[2]||1e-5),o=n+1;return s+e.substr(o,e.length-o)},Ci=function(e,t,i,n,r){var o=t-e,s=n-i;return hi(r,(function(t){return i+((t-e)/o*s||0)}))},ki=function(e,t,i){var n,r,o,s=e.labels,a=Be;for(n in s)(r=s[n]-t)<0==!!i&&r&&a>(r=Math.abs(r))&&(o=n,a=r);return o},Pi=function(e,t,i){var n,r,o,s=e.vars,a=s[t],l=_e,u=e._ctx;if(a)return n=s[t+"Params"],r=s.callbackScope||e,i&&bt.length&&Rt(),u&&(_e=u),o=n?a.apply(r,n):a.call(r),_e=l,o},Ai=function(e){return Vt(e),e.scrollTrigger&&e.scrollTrigger.kill(!!be),e.progress()<1&&Pi(e,"onInterrupt"),e},Ii=[],Li=function(e){if(e)if(e=!e.name&&e.default||e,Qe()||e.headless){var t=e.name,i=We(e),n=t&&!i&&e.init?function(){this._props=[]}:e,r={init:ft,render:Sn,add:an,kill:xn,modifier:En,rawVars:0},o={targetTest:0,get:0,getSetter:bn,aliases:{},register:0};if(ji(),e!==n){if(wt[t])return;Ft(n,Ft(Ht(e,r),o)),Ut(n.prototype,Ut(r,Ht(e,o))),wt[n.prop=t]=n,e.targetTest&&(Et.push(n),yt[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}pt(t,n),e.register&&e.register(Hn,n,Pn)}else Ii.push(e)},Di=255,Oi={aqua:[0,Di,Di],lime:[0,Di,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Di],navy:[0,0,128],white:[Di,Di,Di],olive:[128,128,0],yellow:[Di,Di,0],orange:[Di,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Di,0,0],pink:[Di,192,203],cyan:[0,Di,Di],transparent:[Di,Di,Di,0]},Ri=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*Di+.5|0},Mi=function(e,t,i){var n,r,o,s,a,l,u,c,h,d,p=e?Ge(e)?[e>>16,e>>8&Di,e&Di]:0:Oi.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Oi[e])p=Oi[e];else if("#"===e.charAt(0)){if(e.length<6&&(n=e.charAt(1),r=e.charAt(2),o=e.charAt(3),e="#"+n+n+r+r+o+o+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&Di,p&Di,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&Di,e&Di]}else if("hsl"===e.substr(0,3))if(p=d=e.match(tt),t){if(~e.indexOf("="))return p=e.match(it),i&&p.length<4&&(p[3]=1),p}else s=+p[0]%360/360,a=+p[1]/100,n=2*(l=+p[2]/100)-(r=l<=.5?l*(a+1):l+a-l*a),p.length>3&&(p[3]*=1),p[0]=Ri(s+1/3,n,r),p[1]=Ri(s,n,r),p[2]=Ri(s-1/3,n,r);else p=e.match(tt)||Oi.transparent;p=p.map(Number)}return t&&!d&&(n=p[0]/Di,r=p[1]/Di,o=p[2]/Di,l=((u=Math.max(n,r,o))+(c=Math.min(n,r,o)))/2,u===c?s=a=0:(h=u-c,a=l>.5?h/(2-u-c):h/(u+c),s=u===n?(r-o)/h+(r<o?6:0):u===r?(o-n)/h+2:(n-r)/h+4,s*=60),p[0]=~~(s+.5),p[1]=~~(100*a+.5),p[2]=~~(100*l+.5)),i&&p.length<4&&(p[3]=1),p},Ni=function(e){var t=[],i=[],n=-1;return e.split(Fi).forEach((function(e){var r=e.match(nt)||[];t.push.apply(t,r),i.push(n+=r.length+1)})),t.c=i,t},Bi=function(e,t,i){var n,r,o,s,a="",l=(e+a).match(Fi),u=t?"hsla(":"rgba(",c=0;if(!l)return e;if(l=l.map((function(e){return(e=Mi(e,t,1))&&u+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),i&&(o=Ni(e),(n=i.c).join(a)!==o.c.join(a)))for(s=(r=e.replace(Fi,"1").split(nt)).length-1;c<s;c++)a+=r[c]+(~n.indexOf(c)?l.shift()||u+"0,0,0,0)":(o.length?o:l.length?l:i).shift());if(!r)for(s=(r=e.split(Fi)).length-1;c<s;c++)a+=r[c]+l[c];return a+r[s]},Fi=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Oi)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),Ui=/hsl[a]?\(/,$i=function(e){var t,i=e.join(" ");if(Fi.lastIndex=0,Fi.test(i))return t=Ui.test(i),e[1]=Bi(e[1],t),e[0]=Bi(e[0],t,Ni(e[1])),!0},Hi=function(){var e,t,i,n,r,o,s=Date.now,a=500,l=33,u=s(),c=u,h=1e3/240,d=h,p=[],f=function i(f){var g,m,v,y,b=s()-c,_=!0===f;if((b>a||b<0)&&(u+=b-l),((g=(v=(c+=b)-u)-d)>0||_)&&(y=++n.frame,r=v-1e3*n.time,n.time=v/=1e3,d+=g+(g>=h?4:h-g),m=1),_||(e=t(i)),m)for(o=0;o<p.length;o++)p[o](v,r,y,f)};return n={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(e){return r/(1e3/(e||60))},wake:function(){xe&&(!Se&&Qe()&&(Te=Se=window,Ee=Te.document||{},lt.gsap=Hn,(Te.gsapVersions||(Te.gsapVersions=[])).push(Hn.version),ct(ut||Te.GreenSockGlobals||!Te.gsap&&Te||{}),Ii.forEach(Li)),i="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,e&&n.sleep(),t=i||function(e){return setTimeout(e,d-1e3*n.time+1|0)},Pe=1,f(2))},sleep:function(){(i?cancelAnimationFrame:clearTimeout)(e),Pe=0,t=ft},lagSmoothing:function(e,t){a=e||1/0,l=Math.min(t||33,a)},fps:function(e){h=1e3/(e||240),d=1e3*n.time+h},add:function(e,t,i){var r=t?function(t,i,o,s){e(t,i,o,s),n.remove(r)}:e;return n.remove(e),p[i?"unshift":"push"](r),ji(),r},remove:function(e,t){~(t=p.indexOf(e))&&p.splice(t,1)&&o>=t&&o--},_listeners:p},n}(),ji=function(){return!Pe&&Hi.wake()},zi={},qi=/^[\d.\-M][\d.\-,\s]/,Vi=/["']/g,Wi=function(e){for(var t,i,n,r={},o=e.substr(1,e.length-3).split(":"),s=o[0],a=1,l=o.length;a<l;a++)i=o[a],t=a!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,t),r[s]=isNaN(n)?n.replace(Vi,"").trim():+n,s=i.substr(t+1).trim();return r},Gi=function(e){return function(t){return 1-e(1-t)}},Yi=function e(t,i){for(var n,r=t._first;r;)r instanceof nn?e(r,i):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===i||(r.timeline?e(r.timeline,i):(n=r._ease,r._ease=r._yEase,r._yEase=n,r._yoyo=i)),r=r._next},Xi=function(e,t){return e&&(We(e)?e:zi[e]||function(e){var t,i,n,r,o=(e+"").split("("),s=zi[o[0]];return s&&o.length>1&&s.config?s.config.apply(null,~e.indexOf("{")?[Wi(o[1])]:(t=e,i=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",i),t.substring(i,~r&&r<n?t.indexOf(")",n+1):n)).split(",").map(Nt)):zi._CE&&qi.test(e)?zi._CE("",e):s}(e))||t},Ki=function(e,t,i,n){void 0===i&&(i=function(e){return 1-t(1-e)}),void 0===n&&(n=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var r,o={easeIn:t,easeOut:i,easeInOut:n};return At(e,(function(e){for(var t in zi[e]=lt[e]=o,zi[r=e.toLowerCase()]=i,o)zi[r+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=zi[e+"."+t]=o[t]})),o},Qi=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Zi=function e(t,i,n){var r=i>=1?i:1,o=(n||(t?.3:.45))/(i<1?i:1),s=o/Ue*(Math.asin(1/r)||0),a=function(e){return 1===e?1:r*Math.pow(2,-10*e)*qe((e-s)*o)+1},l="out"===t?a:"in"===t?function(e){return 1-a(1-e)}:Qi(a);return o=Ue/o,l.config=function(i,n){return e(t,i,n)},l},Ji=function e(t,i){void 0===i&&(i=1.70158);var n=function(e){return e?--e*e*((i+1)*e+i)+1:0},r="out"===t?n:"in"===t?function(e){return 1-n(1-e)}:Qi(n);return r.config=function(i){return e(t,i)},r};At("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var i=t<5?t+1:t;Ki(e+",Power"+(i-1),t?function(e){return Math.pow(e,i)}:function(e){return e},(function(e){return 1-Math.pow(1-e,i)}),(function(e){return e<.5?Math.pow(2*e,i)/2:1-Math.pow(2*(1-e),i)/2}))})),zi.Linear.easeNone=zi.none=zi.Linear.easeIn,Ki("Elastic",Zi("in"),Zi("out"),Zi()),Ae=7.5625,De=2*(Le=1/(Ie=2.75)),Oe=2.5*Le,Ki("Bounce",(function(e){return 1-Re(1-e)}),Re=function(e){return e<Le?Ae*e*e:e<De?Ae*Math.pow(e-1.5/Ie,2)+.75:e<Oe?Ae*(e-=2.25/Ie)*e+.9375:Ae*Math.pow(e-2.625/Ie,2)+.984375}),Ki("Expo",(function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)})),Ki("Circ",(function(e){return-(je(1-e*e)-1)})),Ki("Sine",(function(e){return 1===e?1:1-ze(e*$e)})),Ki("Back",Ji("in"),Ji("out"),Ji()),zi.SteppedEase=zi.steps=lt.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,n=e+(t?0:1),r=t?1:0;return function(e){return((n*di(0,.99999999,e)|0)+r)*i}}},Ne.ease=zi["quad.out"],At("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return xt+=e+","+e+"Params,"}));var en=function(e,t){this.id=He++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Pt,this.set=t?t.getSetter:bn},tn=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,si(this,+e.duration,1,1),this.data=e.data,_e&&(this._ctx=_e,_e.data.push(this)),Pe||Hi.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,si(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(ji(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Jt(this,e),!i._dp||i.parent||ei(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&ti(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===Fe||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Mt(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Xt(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Xt(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*i,t):this._repeat?Kt(this._tTime,i)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var i=this.parent&&this._ts?Qt(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(di(-Math.abs(this._delay),this._tDur,i),!1!==t),Zt(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ji(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Fe&&(this._tTime-=Fe)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&ti(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Ke(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Qt(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=vt);var t=be;return be=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),be=t,this},t.globalTime=function(e){for(var t=this,i=arguments.length?e:t.rawTime();t;)i=t._start+i/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):i},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,ai(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,ai(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(ui(this,e),Ke(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,Ke(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,i=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<this.endTime(!0)-Fe))},t.eventCallback=function(e,t,i){var n=this.vars;return arguments.length>1?(t?(n[e]=t,i&&(n[e+"Params"]=i),"onUpdate"===e&&(this._onUpdate=t)):delete n[e],this):n[e]},t.then=function(e){var t=this;return new Promise((function(i){var n=We(e)?e:Bt,r=function(){var e=t.then;t.then=null,We(n)&&(n=n(t))&&(n.then||n===t)&&(t.then=e),i(n),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?r():t._prom=r}))},t.kill=function(){Ai(this)},e}();Ft(tn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var nn=function(e){function t(t,i){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).labels={},n.smoothChildTiming=!!t.smoothChildTiming,n.autoRemoveChildren=!!t.autoRemoveChildren,n._sort=Ke(t.sortChildren),we&&ti(t.parent||we,me(n),i),t.reversed&&n.reverse(),t.paused&&n.paused(!0),t.scrollTrigger&&ii(me(n),t.scrollTrigger),n}ve(t,e);var i=t.prototype;return i.to=function(e,t,i){return ci(0,arguments,this),this},i.from=function(e,t,i){return ci(1,arguments,this),this},i.fromTo=function(e,t,i,n){return ci(2,arguments,this),this},i.set=function(e,t,i){return t.duration=0,t.parent=this,jt(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new fn(e,t,ui(this,i),1),this},i.call=function(e,t,i){return ti(this,fn.delayedCall(0,e,t),i)},i.staggerTo=function(e,t,i,n,r,o,s){return i.duration=t,i.stagger=i.stagger||n,i.onComplete=o,i.onCompleteParams=s,i.parent=this,new fn(e,i,ui(this,r)),this},i.staggerFrom=function(e,t,i,n,r,o,s){return i.runBackwards=1,jt(i).immediateRender=Ke(i.immediateRender),this.staggerTo(e,t,i,n,r,o,s)},i.staggerFromTo=function(e,t,i,n,r,o,s,a){return n.startAt=i,jt(n).immediateRender=Ke(n.immediateRender),this.staggerTo(e,t,n,r,o,s,a)},i.render=function(e,t,i){var n,r,o,s,a,l,u,c,h,d,p,f,g=this._time,m=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=e<=0?0:Lt(e),b=this._zTime<0!=e<0&&(this._initted||!v);if(this!==we&&y>m&&e>=0&&(y=m),y!==this._tTime||i||b){if(g!==this._time&&v&&(y+=this._time-g,e+=this._time-g),n=y,h=this._start,l=!(c=this._ts),b&&(v||(g=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,a=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,i);if(n=Lt(y%a),y===m?(s=this._repeat,n=v):((s=~~(d=Lt(y/a)))&&s===d&&(n=v,s--),n>v&&(n=v)),d=Kt(this._tTime,a),!g&&this._tTime&&d!==s&&this._tTime-d*a-this._dur<=0&&(d=s),p&&1&s&&(n=v-n,f=1),s!==d&&!this._lock){var _=p&&1&d,w=_===(p&&1&s);if(s<d&&(_=!_),g=_?0:y%v?v:y,this._lock=1,this.render(g||(f?0:Lt(s*a)),t,!v)._lock=0,this._tTime=y,!t&&this.parent&&Pi(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),g&&g!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,m=this._tDur,w&&(this._lock=2,g=_?v:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Yi(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if("isPause"===n.data&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if("isPause"===n.data&&n._start<t)return n;n=n._prev}}(this,Lt(g),Lt(n)),u&&(y-=n-(n=u._start))),this._tTime=y,this._time=n,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,g=0),!g&&n&&!t&&!s&&(Pi(this,"onStart"),this._tTime!==y))return this;if(n>=g&&e>=0)for(r=this._first;r;){if(o=r._next,(r._act||n>=r._start)&&r._ts&&u!==r){if(r.parent!==this)return this.render(e,t,i);if(r.render(r._ts>0?(n-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(n-r._start)*r._ts,t,i),n!==this._time||!this._ts&&!l){u=0,o&&(y+=this._zTime=-1e-8);break}}r=o}else{r=this._last;for(var T=e<0?e:n;r;){if(o=r._prev,(r._act||T<=r._end)&&r._ts&&u!==r){if(r.parent!==this)return this.render(e,t,i);if(r.render(r._ts>0?(T-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(T-r._start)*r._ts,t,i||be&&(r._initted||r._startAt)),n!==this._time||!this._ts&&!l){u=0,o&&(y+=this._zTime=T?-1e-8:Fe);break}}r=o}}if(u&&!t&&(this.pause(),u.render(n>=g?0:-1e-8)._zTime=n>=g?1:-1,this._ts))return this._start=h,Zt(this),this.render(e,t,i);this._onUpdate&&!t&&Pi(this,"onUpdate",!0),(y===m&&this._tTime>=this.totalDuration()||!y&&g)&&(h!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((e||!v)&&(y===m&&this._ts>0||!y&&this._ts<0)&&Vt(this,1),t||e<0&&!g||!y&&!g&&m||(Pi(this,y===m&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<m&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(e,t){var i=this;if(Ge(t)||(t=ui(this,t,e)),!(e instanceof tn)){if(et(e))return e.forEach((function(e){return i.add(e,t)})),this;if(Ve(e))return this.addLabel(e,t);if(!We(e))return this;e=fn.delayedCall(0,e)}return this!==e?ti(this,e,t):this},i.getChildren=function(e,t,i,n){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=-Be);for(var r=[],o=this._first;o;)o._start>=n&&(o instanceof fn?t&&r.push(o):(i&&r.push(o),e&&r.push.apply(r,o.getChildren(!0,t,i)))),o=o._next;return r},i.getById=function(e){for(var t=this.getChildren(1,1,1),i=t.length;i--;)if(t[i].vars.id===e)return t[i]},i.remove=function(e){return Ve(e)?this.removeLabel(e):We(e)?this.killTweensOf(e):(e.parent===this&&qt(this,e),e===this._recent&&(this._recent=this._last),Wt(this))},i.totalTime=function(t,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Lt(Hi.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,i),this._forcing=0,this):this._tTime},i.addLabel=function(e,t){return this.labels[e]=ui(this,t),this},i.removeLabel=function(e){return delete this.labels[e],this},i.addPause=function(e,t,i){var n=fn.delayedCall(0,t||ft,i);return n.data="isPause",this._hasPause=1,ti(this,n,ui(this,e))},i.removePause=function(e){var t=this._first;for(e=ui(this,e);t;)t._start===e&&"isPause"===t.data&&Vt(t),t=t._next},i.killTweensOf=function(e,t,i){for(var n=this.getTweensOf(e,i),r=n.length;r--;)rn!==n[r]&&n[r].kill(e,t);return this},i.getTweensOf=function(e,t){for(var i,n=[],r=vi(e),o=this._first,s=Ge(t);o;)o instanceof fn?Ot(o._targets,r)&&(s?(!rn||o._initted&&o._ts)&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&n.push(o):(i=o.getTweensOf(r,t)).length&&n.push.apply(n,i),o=o._next;return n},i.tweenTo=function(e,t){t=t||{};var i,n=this,r=ui(n,e),o=t,s=o.startAt,a=o.onStart,l=o.onStartParams,u=o.immediateRender,c=fn.to(n,Ft({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:t.duration||Math.abs((r-(s&&"time"in s?s.time:n._time))/n.timeScale())||Fe,onStart:function(){if(n.pause(),!i){var e=t.duration||Math.abs((r-(s&&"time"in s?s.time:n._time))/n.timeScale());c._dur!==e&&si(c,e,0,1).render(c._time,!0,!0),i=1}a&&a.apply(c,l||[])}},t));return u?c.render(0):c},i.tweenFromTo=function(e,t,i){return this.tweenTo(t,Ft({startAt:{time:ui(this,e)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(e){return void 0===e&&(e=this._time),ki(this,ui(this,e))},i.previousLabel=function(e){return void 0===e&&(e=this._time),ki(this,ui(this,e),1)},i.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+Fe)},i.shiftChildren=function(e,t,i){void 0===i&&(i=0);for(var n,r=this._first,o=this.labels;r;)r._start>=i&&(r._start+=e,r._end+=e),r=r._next;if(t)for(n in o)o[n]>=i&&(o[n]+=e);return Wt(this)},i.invalidate=function(t){var i=this._first;for(this._lock=0;i;)i.invalidate(t),i=i._next;return e.prototype.invalidate.call(this,t)},i.clear=function(e){void 0===e&&(e=!0);for(var t,i=this._first;i;)t=i._next,this.remove(i),i=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Wt(this)},i.totalDuration=function(e){var t,i,n,r=0,o=this,s=o._last,a=Be;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(n=o.parent;s;)t=s._prev,s._dirty&&s.totalDuration(),(i=s._start)>a&&o._sort&&s._ts&&!o._lock?(o._lock=1,ti(o,s,i-s._delay,1)._lock=0):a=i,i<0&&s._ts&&(r-=i,(!n&&!o._dp||n&&n.smoothChildTiming)&&(o._start+=i/o._ts,o._time-=i,o._tTime-=i),o.shiftChildren(-i,!1,-Infinity),a=0),s._end>r&&s._ts&&(r=s._end),s=t;si(o,o===we&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(e){if(we._ts&&(Mt(we,Qt(e,we)),Ce=Hi.frame),Hi.frame>=St){St+=Me.autoSleep||120;var t=we._first;if((!t||!t._ts)&&Me.autoSleep&&Hi._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||Hi.sleep()}}},t}(tn);Ft(nn.prototype,{_lock:0,_hasPause:0,_forcing:0});var rn,on,sn=function(e,t,i,n,r,o,s){var a,l,u,c,h,d,p,f,g=new Pn(this._pt,e,t,0,1,Tn,null,r),m=0,v=0;for(g.b=i,g.e=n,i+="",(p=~(n+="").indexOf("random("))&&(n=xi(n)),o&&(o(f=[i,n],e,t),i=f[0],n=f[1]),l=i.match(rt)||[];a=rt.exec(n);)c=a[0],h=n.substring(m,a.index),u?u=(u+1)%5:"rgba("===h.substr(-5)&&(u=1),c!==l[v++]&&(d=parseFloat(l[v-1])||0,g._pt={_next:g._pt,p:h||1===v?h:",",s:d,c:"="===c.charAt(1)?Dt(d,c)-d:parseFloat(c)-d,m:u&&u<4?Math.round:0},m=rt.lastIndex);return g.c=m<n.length?n.substring(m,n.length):"",g.fp=s,(ot.test(n)||p)&&(g.e=0),this._pt=g,g},an=function(e,t,i,n,r,o,s,a,l,u){We(n)&&(n=n(r||0,e,o));var c,h=e[t],d="get"!==i?i:We(h)?l?e[t.indexOf("set")||!We(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,p=We(h)?l?vn:mn:gn;if(Ve(n)&&(~n.indexOf("random(")&&(n=xi(n)),"="===n.charAt(1)&&((c=Dt(d,n)+(pi(d)||0))||0===c)&&(n=c)),!u||d!==n||on)return isNaN(d*n)||""===n?(!h&&!(t in e)&&ht(t,n),sn.call(this,e,t,d,n,p,a||Me.stringFilter,l)):(c=new Pn(this._pt,e,t,+d||0,n-(d||0),"boolean"==typeof h?wn:_n,0,p),l&&(c.fp=l),s&&c.modifier(s,this,e),this._pt=c)},ln=function(e,t,i,n,r,o){var s,a,l,u;if(wt[e]&&!1!==(s=new wt[e]).init(r,s.rawVars?t[e]:function(e,t,i,n,r){if(We(e)&&(e=hn(e,r,t,i,n)),!Xe(e)||e.style&&e.nodeType||et(e)||Je(e))return Ve(e)?hn(e,r,t,i,n):e;var o,s={};for(o in e)s[o]=hn(e[o],r,t,i,n);return s}(t[e],n,r,o,i),i,n,o)&&(i._pt=a=new Pn(i._pt,r,e,0,1,s.render,s,0,s.priority),i!==ke))for(l=i._ptLookup[i._targets.indexOf(r)],u=s._props.length;u--;)l[s._props[u]]=a;return s},un=function e(t,i,n){var r,o,s,a,l,u,c,h,d,p,f,g,m,v=t.vars,y=v.ease,b=v.startAt,_=v.immediateRender,w=v.lazy,T=v.onUpdate,S=v.runBackwards,E=v.yoyoEase,x=v.keyframes,C=v.autoRevert,k=t._dur,P=t._startAt,A=t._targets,I=t.parent,L=I&&"nested"===I.data?I.vars.targets:A,D="auto"===t._overwrite&&!ye,O=t.timeline;if(O&&(!x||!y)&&(y="none"),t._ease=Xi(y,Ne.ease),t._yEase=E?Gi(Xi(!0===E?y:E,Ne.ease)):0,E&&t._yoyo&&!t._repeat&&(E=t._yEase,t._yEase=t._ease,t._ease=E),t._from=!O&&!!v.runBackwards,!O||x&&!v.stagger){if(g=(h=A[0]?kt(A[0]).harness:0)&&v[h.prop],r=Ht(v,yt),P&&(P._zTime<0&&P.progress(1),i<0&&S&&_&&!C?P.render(-1,!0):P.revert(S&&k?mt:gt),P._lazy=0),b){if(Vt(t._startAt=fn.set(A,Ft({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:!P&&Ke(w),startAt:null,delay:0,onUpdate:T&&function(){return Pi(t,"onUpdate")},stagger:0},b))),t._startAt._dp=0,t._startAt._sat=t,i<0&&(be||!_&&!C)&&t._startAt.revert(mt),_&&k&&i<=0&&n<=0)return void(i&&(t._zTime=i))}else if(S&&k&&!P)if(i&&(_=!1),s=Ft({overwrite:!1,data:"isFromStart",lazy:_&&!P&&Ke(w),immediateRender:_,stagger:0,parent:I},r),g&&(s[h.prop]=g),Vt(t._startAt=fn.set(A,s)),t._startAt._dp=0,t._startAt._sat=t,i<0&&(be?t._startAt.revert(mt):t._startAt.render(-1,!0)),t._zTime=i,_){if(!i)return}else e(t._startAt,Fe,Fe);for(t._pt=t._ptCache=0,w=k&&Ke(w)||w&&!k,o=0;o<A.length;o++){if(c=(l=A[o])._gsap||Ct(A)[o]._gsap,t._ptLookup[o]=p={},_t[c.id]&&bt.length&&Rt(),f=L===A?o:L.indexOf(l),h&&!1!==(d=new h).init(l,g||r,t,f,L)&&(t._pt=a=new Pn(t._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(e){p[e]=a})),d.priority&&(u=1)),!h||g)for(s in r)wt[s]&&(d=ln(s,r,t,f,l,L))?d.priority&&(u=1):p[s]=a=an.call(t,l,s,"get",r[s],f,L,0,v.stringFilter);t._op&&t._op[o]&&t.kill(l,t._op[o]),D&&t._pt&&(rn=t,we.killTweensOf(l,p,t.globalTime(i)),m=!t.parent,rn=0),t._pt&&w&&(_t[c.id]=1)}u&&kn(t),t._onInit&&t._onInit(t)}t._onUpdate=T,t._initted=(!t._op||t._pt)&&!m,x&&i<=0&&O.render(Be,!0,!0)},cn=function(e,t,i,n){var r,o,s=t.ease||n||"power1.inOut";if(et(t))o=i[e]||(i[e]=[]),t.forEach((function(e,i){return o.push({t:i/(t.length-1)*100,v:e,e:s})}));else for(r in t)o=i[r]||(i[r]=[]),"ease"===r||o.push({t:parseFloat(e),v:t[r],e:s})},hn=function(e,t,i,n,r){return We(e)?e.call(t,i,n,r):Ve(e)&&~e.indexOf("random(")?xi(e):e},dn=xt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",pn={};At(dn+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return pn[e]=1}));var fn=function(e){function t(t,i,n,r){var o;"number"==typeof i&&(n.duration=i,i=n,n=null);var s,a,l,u,c,h,d,p,f=(o=e.call(this,r?i:jt(i))||this).vars,g=f.duration,m=f.delay,v=f.immediateRender,y=f.stagger,b=f.overwrite,_=f.keyframes,w=f.defaults,T=f.scrollTrigger,S=f.yoyoEase,E=i.parent||we,x=(et(t)||Je(t)?Ge(t[0]):"length"in i)?[t]:vi(t);if(o._targets=x.length?Ct(x):dt("GSAP target "+t+" not found. https://gsap.com",!Me.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=b,_||y||Ze(g)||Ze(m)){if(i=o.vars,(s=o.timeline=new nn({data:"nested",defaults:w||{},targets:E&&"nested"===E.data?E.vars.targets:x})).kill(),s.parent=s._dp=me(o),s._start=0,y||Ze(g)||Ze(m)){if(u=x.length,d=y&&_i(y),Xe(y))for(c in y)~dn.indexOf(c)&&(p||(p={}),p[c]=y[c]);for(a=0;a<u;a++)(l=Ht(i,pn)).stagger=0,S&&(l.yoyoEase=S),p&&Ut(l,p),h=x[a],l.duration=+hn(g,me(o),a,h,x),l.delay=(+hn(m,me(o),a,h,x)||0)-o._delay,!y&&1===u&&l.delay&&(o._delay=m=l.delay,o._start+=m,l.delay=0),s.to(h,l,d?d(a,h,x):0),s._ease=zi.none;s.duration()?g=m=0:o.timeline=0}else if(_){jt(Ft(s.vars.defaults,{ease:"none"})),s._ease=Xi(_.ease||i.ease||"none");var C,k,P,A=0;if(et(_))_.forEach((function(e){return s.to(x,e,">")})),s.duration();else{for(c in l={},_)"ease"===c||"easeEach"===c||cn(c,_[c],l,_.easeEach);for(c in l)for(C=l[c].sort((function(e,t){return e.t-t.t})),A=0,a=0;a<C.length;a++)(P={ease:(k=C[a]).e,duration:(k.t-(a?C[a-1].t:0))/100*g})[c]=k.v,s.to(x,P,A),A+=P.duration;s.duration()<g&&s.to({},{duration:g-s.duration()})}}g||o.duration(g=s.duration())}else o.timeline=0;return!0!==b||ye||(rn=me(o),we.killTweensOf(x),rn=0),ti(E,me(o),n),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(v||!g&&!_&&o._start===Lt(E._time)&&Ke(v)&&Yt(me(o))&&"nested"!==E.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-m)||0)),T&&ii(me(o),T),o}ve(t,e);var i=t.prototype;return i.render=function(e,t,i){var n,r,o,s,a,l,u,c,h,d=this._time,p=this._tDur,f=this._dur,g=e<0,m=e>p-Fe&&!g?p:e<Fe?0:e;if(f){if(m!==this._tTime||!e||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(n=m,c=this.timeline,this._repeat){if(s=f+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*s+e,t,i);if(n=Lt(m%s),m===p?(o=this._repeat,n=f):(o=~~(a=Lt(m/s)))&&o===a?(n=f,o--):n>f&&(n=f),(l=this._yoyo&&1&o)&&(h=this._yEase,n=f-n),a=Kt(this._tTime,s),n===d&&!i&&this._initted&&o===a)return this._tTime=m,this;o!==a&&(c&&this._yEase&&Yi(c,l),this.vars.repeatRefresh&&!l&&!this._lock&&n!==s&&this._initted&&(this._lock=i=1,this.render(Lt(s*o),!0).invalidate()._lock=0))}if(!this._initted){if(ni(this,g?e:n,i,t,m))return this._tTime=0,this;if(!(d===this._time||i&&this.vars.repeatRefresh&&o!==a))return this;if(f!==this._dur)return this.render(e,t,i)}if(this._tTime=m,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(h||this._ease)(n/f),this._from&&(this.ratio=u=1-u),n&&!d&&!t&&!o&&(Pi(this,"onStart"),this._tTime!==m))return this;for(r=this._pt;r;)r.r(u,r.d),r=r._next;c&&c.render(e<0?e:c._dur*c._ease(n/this._dur),t,i)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(g&&Gt(this,e,0,i),Pi(this,"onUpdate")),this._repeat&&o!==a&&this.vars.onRepeat&&!t&&this.parent&&Pi(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(g&&!this._onUpdate&&Gt(this,e,0,!0),(e||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Vt(this,1),t||g&&!d||!(m||d||l)||(Pi(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,n){var r,o,s,a=e.ratio,l=t<0||!t&&(!e._start&&ri(e)&&(e._initted||!oi(e))||(e._ts<0||e._dp._ts<0)&&!oi(e))?0:1,u=e._rDelay,c=0;if(u&&e._repeat&&(c=di(0,e._tDur,t),o=Kt(c,u),e._yoyo&&1&o&&(l=1-l),o!==Kt(e._tTime,u)&&(a=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==a||be||n||e._zTime===Fe||!t&&e._zTime){if(!e._initted&&ni(e,t,n,i,c))return;for(s=e._zTime,e._zTime=t||(i?Fe:0),i||(i=t&&!s),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=c,r=e._pt;r;)r.r(l,r.d),r=r._next;t<0&&Gt(e,t,0,!0),e._onUpdate&&!i&&Pi(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&Pi(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&Vt(e,1),i||be||(Pi(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,i);return this},i.targets=function(){return this._targets},i.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},i.resetTo=function(e,t,i,n,r){Pe||Hi.wake(),this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||un(this,o),function(e,t,i,n,r,o,s,a){var l,u,c,h,d=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!d)for(d=e._ptCache[t]=[],c=e._ptLookup,h=e._targets.length;h--;){if((l=c[h][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return on=1,e.vars[t]="+=0",un(e,s),on=0,a?dt(t+" not eligible for reset"):1;d.push(l)}for(h=d.length;h--;)(l=(u=d[h])._pt||u).s=!n&&0!==n||r?l.s+(n||0)+o*l.c:n,l.c=i-l.s,u.e&&(u.e=It(i)+pi(u.e)),u.b&&(u.b=l.s+pi(u.b))}(this,e,t,i,n,this._ease(o/this._dur),o,r)?this.resetTo(e,t,i,n,1):(Jt(this,0),this.parent||zt(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?Ai(this):this.scrollTrigger&&this.scrollTrigger.kill(!!be),this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,rn&&!0!==rn.vars.overwrite)._first||Ai(this),this.parent&&i!==this.timeline.totalDuration()&&si(this,this._dur*this.timeline._tDur/i,0,1),this}var n,r,o,s,a,l,u,c=this._targets,h=e?vi(e):c,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0}(c,h))return"all"===t&&(this._pt=0),Ai(this);for(n=this._op=this._op||[],"all"!==t&&(Ve(t)&&(a={},At(t,(function(e){return a[e]=1})),t=a),t=function(e,t){var i,n,r,o,s=e[0]?kt(e[0]).harness:0,a=s&&s.aliases;if(!a)return t;for(n in i=Ut({},t),a)if(n in i)for(r=(o=a[n].split(",")).length;r--;)i[o[r]]=i[n];return i}(c,t)),u=c.length;u--;)if(~h.indexOf(c[u]))for(a in r=d[u],"all"===t?(n[u]=t,s=r,o={}):(o=n[u]=n[u]||{},s=t),s)(l=r&&r[a])&&("kill"in l.d&&!0!==l.d.kill(a)||qt(this,l,"_pt"),delete r[a]),"all"!==o&&(o[a]=1);return this._initted&&!this._pt&&p&&Ai(this),this},t.to=function(e,i){return new t(e,i,arguments[2])},t.from=function(e,t){return ci(1,arguments)},t.delayedCall=function(e,i,n,r){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:i,onReverseComplete:i,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:r})},t.fromTo=function(e,t,i){return ci(2,arguments)},t.set=function(e,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(e,i)},t.killTweensOf=function(e,t,i){return we.killTweensOf(e,t,i)},t}(tn);Ft(fn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),At("staggerTo,staggerFrom,staggerFromTo",(function(e){fn[e]=function(){var t=new nn,i=fi.call(arguments,0);return i.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,i)}}));var gn=function(e,t,i){return e[t]=i},mn=function(e,t,i){return e[t](i)},vn=function(e,t,i,n){return e[t](n.fp,i)},yn=function(e,t,i){return e.setAttribute(t,i)},bn=function(e,t){return We(e[t])?mn:Ye(e[t])&&e.setAttribute?yn:gn},_n=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},wn=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Tn=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(1===e&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},Sn=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},En=function(e,t,i,n){for(var r,o=this._pt;o;)r=o._next,o.p===n&&o.modifier(e,t,i),o=r},xn=function(e){for(var t,i,n=this._pt;n;)i=n._next,n.p===e&&!n.op||n.op===e?qt(this,n,"_pt"):n.dep||(t=1),n=i;return!t},Cn=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},kn=function(e){for(var t,i,n,r,o=e._pt;o;){for(t=o._next,i=n;i&&i.pr>o.pr;)i=i._next;(o._prev=i?i._prev:r)?o._prev._next=o:n=o,(o._next=i)?i._prev=o:r=o,o=t}e._pt=n},Pn=function(){function e(e,t,i,n,r,o,s,a,l){this.t=t,this.s=n,this.c=r,this.p=i,this.r=o||_n,this.d=s||this,this.set=a||gn,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,i){this.mSet=this.mSet||this.set,this.set=Cn,this.m=e,this.mt=i,this.tween=t},e}();At(xt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return yt[e]=1})),lt.TweenMax=lt.TweenLite=fn,lt.TimelineLite=lt.TimelineMax=nn,we=new nn({sortChildren:!1,defaults:Ne,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Me.stringFilter=$i;var An=[],In={},Ln=[],Dn=0,On=0,Rn=function(e){return(In[e]||Ln).map((function(e){return e()}))},Mn=function(){var e=Date.now(),t=[];e-Dn>2&&(Rn("matchMediaInit"),An.forEach((function(e){var i,n,r,o,s=e.queries,a=e.conditions;for(n in s)(i=Te.matchMedia(s[n]).matches)&&(r=1),i!==a[n]&&(a[n]=i,o=1);o&&(e.revert(),r&&t.push(e))})),Rn("matchMediaRevert"),t.forEach((function(e){return e.onMatch(e,(function(t){return e.add(null,t)}))})),Dn=e,Rn("matchMedia"))},Nn=function(){function e(e,t){this.selector=t&&yi(t),this.data=[],this._r=[],this.isReverted=!1,this.id=On++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,i){We(e)&&(i=t,t=e,e=We);var n=this,r=function(){var e,r=_e,o=n.selector;return r&&r!==n&&r.data.push(n),i&&(n.selector=yi(i)),_e=n,e=t.apply(n,arguments),We(e)&&n._r.push(e),_e=r,n.selector=o,n.isReverted=!1,e};return n.last=r,e===We?r(n,(function(e){return n.add(null,e)})):e?n[e]=r:r},t.ignore=function(e){var t=_e;_e=null,e(this),_e=t},t.getTweens=function(){var t=[];return this.data.forEach((function(i){return i instanceof e?t.push.apply(t,i.getTweens()):i instanceof fn&&!(i.parent&&"nested"===i.parent.data)&&t.push(i)})),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var i=this;if(e?function(){for(var t,n=i.getTweens(),r=i.data.length;r--;)"isFlip"===(t=i.data[r]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(e){return n.splice(n.indexOf(e),1)})));for(n.map((function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}})).sort((function(e,t){return t.g-e.g||-1/0})).forEach((function(t){return t.t.revert(e)})),r=i.data.length;r--;)(t=i.data[r])instanceof nn?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof fn)&&t.revert&&t.revert(e);i._r.forEach((function(t){return t(e,i)})),i.isReverted=!0}():this.data.forEach((function(e){return e.kill&&e.kill()})),this.clear(),t)for(var n=An.length;n--;)An[n].id===this.id&&An.splice(n,1)},t.revert=function(e){this.kill(e||{})},e}(),Bn=function(){function e(e){this.contexts=[],this.scope=e,_e&&_e.data.push(this)}var t=e.prototype;return t.add=function(e,t,i){Xe(e)||(e={matches:e});var n,r,o,s=new Nn(0,i||this.scope),a=s.conditions={};for(r in _e&&!s.selector&&(s.selector=_e.selector),this.contexts.push(s),t=s.add("onMatch",t),s.queries=e,e)"all"===r?o=1:(n=Te.matchMedia(e[r]))&&(An.indexOf(s)<0&&An.push(s),(a[r]=n.matches)&&(o=1),n.addListener?n.addListener(Mn):n.addEventListener("change",Mn));return o&&t(s,(function(e){return s.add(null,e)})),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach((function(t){return t.kill(e,!0)}))},e}(),Fn={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((function(e){return Li(e)}))},timeline:function(e){return new nn(e)},getTweensOf:function(e,t){return we.getTweensOf(e,t)},getProperty:function(e,t,i,n){Ve(e)&&(e=vi(e)[0]);var r=kt(e||{}).get,o=i?Bt:Nt;return"native"===i&&(i=""),e?t?o((wt[t]&&wt[t].get||r)(e,t,i,n)):function(t,i,n){return o((wt[t]&&wt[t].get||r)(e,t,i,n))}:e},quickSetter:function(e,t,i){if((e=vi(e)).length>1){var n=e.map((function(e){return Hn.quickSetter(e,t,i)})),r=n.length;return function(e){for(var t=r;t--;)n[t](e)}}e=e[0]||{};var o=wt[t],s=kt(e),a=s.harness&&(s.harness.aliases||{})[t]||t,l=o?function(t){var n=new o;ke._pt=0,n.init(e,i?t+i:t,ke,0,[e]),n.render(1,n),ke._pt&&Sn(1,ke)}:s.set(e,a);return o?l:function(t){return l(e,a,i?t+i:t,s,1)}},quickTo:function(e,t,i){var n,r=Hn.to(e,Ft(((n={})[t]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),o=function(e,i,n){return r.resetTo(t,e,i,n)};return o.tween=r,o},isTweening:function(e){return we.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Xi(e.ease,Ne.ease)),$t(Ne,e||{})},config:function(e){return $t(Me,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,r=e.defaults,o=e.extendTimeline;(n||"").split(",").forEach((function(e){return e&&!wt[e]&&!lt[e]&&dt(t+" effect requires "+e+" plugin.")})),Tt[t]=function(e,t,n){return i(vi(e),Ft(t||{},r),n)},o&&(nn.prototype[t]=function(e,i,n){return this.add(Tt[t](e,Xe(i)?i:(n=i)&&{},this),n)})},registerEase:function(e,t){zi[e]=Xi(t)},parseEase:function(e,t){return arguments.length?Xi(e,t):zi},getById:function(e){return we.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var i,n,r=new nn(e);for(r.smoothChildTiming=Ke(e.smoothChildTiming),we.remove(r),r._dp=0,r._time=r._tTime=we._time,i=we._first;i;)n=i._next,!t&&!i._dur&&i instanceof fn&&i.vars.onComplete===i._targets[0]||ti(r,i,i._start-i._delay),i=n;return ti(we,r,0),r},context:function(e,t){return e?new Nn(e,t):_e},matchMedia:function(e){return new Bn(e)},matchMediaRefresh:function(){return An.forEach((function(e){var t,i,n=e.conditions;for(i in n)n[i]&&(n[i]=!1,t=1);t&&e.revert()}))||Mn()},addEventListener:function(e,t){var i=In[e]||(In[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=In[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},utils:{wrap:function e(t,i,n){var r=i-t;return et(t)?Ei(t,e(0,t.length),i):hi(n,(function(e){return(r+(e-t)%r)%r+t}))},wrapYoyo:function e(t,i,n){var r=i-t,o=2*r;return et(t)?Ei(t,e(0,t.length-1),i):hi(n,(function(e){return t+((e=(o+(e-t)%o)%o||0)>r?o-e:e)}))},distribute:_i,random:Si,snap:Ti,normalize:function(e,t,i){return Ci(e,t,0,1,i)},getUnit:pi,clamp:function(e,t,i){return hi(i,(function(i){return di(e,t,i)}))},splitColor:Mi,toArray:vi,selector:yi,mapRange:Ci,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||pi(i))}},interpolate:function e(t,i,n,r){var o=isNaN(t+i)?0:function(e){return(1-e)*t+e*i};if(!o){var s,a,l,u,c,h=Ve(t),d={};if(!0===n&&(r=1)&&(n=null),h)t={p:t},i={p:i};else if(et(t)&&!et(i)){for(l=[],u=t.length,c=u-2,a=1;a<u;a++)l.push(e(t[a-1],t[a]));u--,o=function(e){e*=u;var t=Math.min(c,~~e);return l[t](e-t)},n=i}else r||(t=Ut(et(t)?[]:{},t));if(!l){for(s in i)an.call(d,t,s,"get",i[s]);o=function(e){return Sn(e,d)||(h?t.p:t)}}}return hi(n,o)},shuffle:bi},install:ct,effects:Tt,ticker:Hi,updateRoot:nn.updateRoot,plugins:wt,globalTimeline:we,core:{PropTween:Pn,globals:pt,Tween:fn,Timeline:nn,Animation:tn,getCache:kt,_removeLinkedListItem:qt,reverting:function(){return be},context:function(e){return e&&_e&&(_e.data.push(e),e._ctx=_e),_e},suppressOverwrites:function(e){return ye=e}}};At("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return Fn[e]=fn[e]})),Hi.add(nn.updateRoot),ke=Fn.to({},{duration:0});var Un=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},$n=function(e,t){return{name:e,rawVars:1,init:function(e,i,n){n._onInit=function(e){var n,r;if(Ve(i)&&(n={},At(i,(function(e){return n[e]=1})),i=n),t){for(r in n={},i)n[r]=t(i[r]);i=n}!function(e,t){var i,n,r,o=e._targets;for(i in t)for(n=o.length;n--;)(r=e._ptLookup[n][i])&&(r=r.d)&&(r._pt&&(r=Un(r,i)),r&&r.modifier&&r.modifier(t[i],e,o[n],i))}(e,i)}}}},Hn=Fn.registerPlugin({name:"attr",init:function(e,t,i,n,r){var o,s,a;for(o in this.tween=i,t)a=e.getAttribute(o)||"",(s=this.add(e,"setAttribute",(a||0)+"",t[o],n,r,0,0,o)).op=o,s.b=a,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)be?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},$n("roundProps",wi),$n("modifiers"),$n("snap",Ti))||Fn;fn.version=nn.version=Hn.version="3.12.7",xe=1,Qe()&&ji();zi.Power0,zi.Power1,zi.Power2,zi.Power3;var jn,zn,qn,Vn,Wn,Gn,Yn,Xn,Kn=zi.Power4,Qn=(zi.Linear,zi.Quad,zi.Cubic,zi.Quart,zi.Quint,zi.Strong,zi.Elastic,zi.Back,zi.SteppedEase,zi.Bounce,zi.Sine,zi.Expo,zi.Circ,{}),Zn=180/Math.PI,Jn=Math.PI/180,er=Math.atan2,tr=/([A-Z])/g,ir=/(left|right|width|margin|padding|x)/i,nr=/[\s,\(]\S/,rr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},or=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},sr=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},ar=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},lr=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},ur=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},cr=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},hr=function(e,t,i){return e.style[t]=i},dr=function(e,t,i){return e.style.setProperty(t,i)},pr=function(e,t,i){return e._gsap[t]=i},fr=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},gr=function(e,t,i,n,r){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(r,o)},mr=function(e,t,i,n,r){var o=e._gsap;o[t]=i,o.renderTransform(r,o)},vr="transform",yr=vr+"Origin",br=function e(t,i){var n=this,r=this.target,o=r.style,s=r._gsap;if(t in Qn&&o){if(this.tfm=this.tfm||{},"transform"===t)return rr.transform.split(",").forEach((function(t){return e.call(n,t,i)}));if(~(t=rr[t]||t).indexOf(",")?t.split(",").forEach((function(e){return n.tfm[e]=Br(r,e)})):this.tfm[t]=s.x?s[t]:Br(r,t),t===yr&&(this.tfm.zOrigin=s.zOrigin),this.props.indexOf(vr)>=0)return;s.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(yr,i,"")),t=vr}(o||i)&&this.props.push(t,i,o[t])},_r=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},wr=function(){var e,t,i=this.props,n=this.target,r=n.style,o=n._gsap;for(e=0;e<i.length;e+=3)i[e+1]?2===i[e+1]?n[i[e]](i[e+2]):n[i[e]]=i[e+2]:i[e+2]?r[i[e]]=i[e+2]:r.removeProperty("--"===i[e].substr(0,2)?i[e]:i[e].replace(tr,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)o[t]=this.tfm[t];o.svg&&(o.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),(e=Yn())&&e.isStart||r[vr]||(_r(r),o.zOrigin&&r[yr]&&(r[yr]+=" "+o.zOrigin+"px",o.zOrigin=0,o.renderTransform()),o.uncache=1)}},Tr=function(e,t){var i={target:e,props:[],revert:wr,save:br};return e._gsap||Hn.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach((function(e){return i.save(e)})),i},Sr=function(e,t){var i=zn.createElementNS?zn.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):zn.createElement(e);return i&&i.style?i:zn.createElement(e)},Er=function e(t,i,n){var r=getComputedStyle(t);return r[i]||r.getPropertyValue(i.replace(tr,"-$1").toLowerCase())||r.getPropertyValue(i)||!n&&e(t,Cr(i)||i,1)||""},xr="O,Moz,ms,Ms,Webkit".split(","),Cr=function(e,t,i){var n=(t||Wn).style,r=5;if(e in n&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(xr[r]+e in n););return r<0?null:(3===r?"ms":r>=0?xr[r]:"")+e},kr=function(){"undefined"!=typeof window&&window.document&&(jn=window,zn=jn.document,qn=zn.documentElement,Wn=Sr("div")||{style:{}},Sr("div"),vr=Cr(vr),yr=vr+"Origin",Wn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Xn=!!Cr("perspective"),Yn=Hn.core.reverting,Vn=1)},Pr=function(e){var t,i=e.ownerSVGElement,n=Sr("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0);r.style.display="block",n.appendChild(r),qn.appendChild(n);try{t=r.getBBox()}catch(e){}return n.removeChild(r),qn.removeChild(n),t},Ar=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},Ir=function(e){var t,i;try{t=e.getBBox()}catch(n){t=Pr(e),i=1}return t&&(t.width||t.height)||i||(t=Pr(e)),!t||t.width||t.x||t.y?t:{x:+Ar(e,["x","cx","x1"])||0,y:+Ar(e,["y","cy","y1"])||0,width:0,height:0}},Lr=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Ir(e))},Dr=function(e,t){if(t){var i,n=e.style;t in Qn&&t!==yr&&(t=vr),n.removeProperty?("ms"!==(i=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty("--"===i?t:t.replace(tr,"-$1").toLowerCase())):n.removeAttribute(t)}},Or=function(e,t,i,n,r,o){var s=new Pn(e._pt,t,i,0,1,o?cr:ur);return e._pt=s,s.b=n,s.e=r,e._props.push(i),s},Rr={deg:1,rad:1,turn:1},Mr={grid:1,flex:1},Nr=function e(t,i,n,r){var o,s,a,l,u=parseFloat(n)||0,c=(n+"").trim().substr((u+"").length)||"px",h=Wn.style,d=ir.test(i),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),g=100,m="px"===r,v="%"===r;if(r===c||!u||Rr[r]||Rr[c])return u;if("px"!==c&&!m&&(u=e(t,i,n,"px")),l=t.getCTM&&Lr(t),(v||"%"===c)&&(Qn[i]||~i.indexOf("adius")))return o=l?t.getBBox()[d?"width":"height"]:t[f],It(v?u/o*g:u/100*o);if(h[d?"width":"height"]=g+(m?c:r),s="rem"!==r&&~i.indexOf("adius")||"em"===r&&t.appendChild&&!p?t:t.parentNode,l&&(s=(t.ownerSVGElement||{}).parentNode),s&&s!==zn&&s.appendChild||(s=zn.body),(a=s._gsap)&&v&&a.width&&d&&a.time===Hi.time&&!a.uncache)return It(u/a.width*g);if(!v||"height"!==i&&"width"!==i)(v||"%"===c)&&!Mr[Er(s,"display")]&&(h.position=Er(t,"position")),s===t&&(h.position="static"),s.appendChild(Wn),o=Wn[f],s.removeChild(Wn),h.position="absolute";else{var y=t.style[i];t.style[i]=g+r,o=t[f],y?t.style[i]=y:Dr(t,i)}return d&&v&&((a=kt(s)).time=Hi.time,a.width=s[f]),It(m?o*u/g:o&&u?g/o*u:0)},Br=function(e,t,i,n){var r;return Vn||kr(),t in rr&&"transform"!==t&&~(t=rr[t]).indexOf(",")&&(t=t.split(",")[0]),Qn[t]&&"transform"!==t?(r=Yr(e,n),r="transformOrigin"!==t?r[t]:r.svg?r.origin:Xr(Er(e,yr))+" "+r.zOrigin+"px"):(!(r=e.style[t])||"auto"===r||n||~(r+"").indexOf("calc("))&&(r=Hr[t]&&Hr[t](e,t,i)||Er(e,t)||Pt(e,t)||("opacity"===t?1:0)),i&&!~(r+"").trim().indexOf(" ")?Nr(e,t,r,i)+i:r},Fr=function(e,t,i,n){if(!i||"none"===i){var r=Cr(t,e,1),o=r&&Er(e,r,1);o&&o!==i?(t=r,i=o):"borderColor"===t&&(i=Er(e,"borderTopColor"))}var s,a,l,u,c,h,d,p,f,g,m,v=new Pn(this._pt,e.style,t,0,1,Tn),y=0,b=0;if(v.b=i,v.e=n,i+="","auto"===(n+="")&&(h=e.style[t],e.style[t]=n,n=Er(e,t)||n,h?e.style[t]=h:Dr(e,t)),$i(s=[i,n]),n=s[1],l=(i=s[0]).match(nt)||[],(n.match(nt)||[]).length){for(;a=nt.exec(n);)d=a[0],f=n.substring(y,a.index),c?c=(c+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(c=1),d!==(h=l[b++]||"")&&(u=parseFloat(h)||0,m=h.substr((u+"").length),"="===d.charAt(1)&&(d=Dt(u,d)+m),p=parseFloat(d),g=d.substr((p+"").length),y=nt.lastIndex-g.length,g||(g=g||Me.units[t]||m,y===n.length&&(n+=g,v.e+=g)),m!==g&&(u=Nr(e,t,h,g)||0),v._pt={_next:v._pt,p:f||1===b?f:",",s:u,c:p-u,m:c&&c<4||"zIndex"===t?Math.round:0});v.c=y<n.length?n.substring(y,n.length):""}else v.r="display"===t&&"none"===n?cr:ur;return ot.test(n)&&(v.e=0),this._pt=v,v},Ur={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},$r=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i,n,r,o=t.t,s=o.style,a=t.u,l=o._gsap;if("all"===a||!0===a)s.cssText="",n=1;else for(r=(a=a.split(",")).length;--r>-1;)i=a[r],Qn[i]&&(n=1,i="transformOrigin"===i?yr:vr),Dr(o,i);n&&(Dr(o,vr),l&&(l.svg&&o.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",Yr(o,1),l.uncache=1,_r(s)))}},Hr={clearProps:function(e,t,i,n,r){if("isFromStart"!==r.data){var o=e._pt=new Pn(e._pt,t,i,0,0,$r);return o.u=n,o.pr=-10,o.tween=r,e._props.push(i),1}}},jr=[1,0,0,1,0,0],zr={},qr=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},Vr=function(e){var t=Er(e,vr);return qr(t)?jr:t.substr(7).match(it).map(It)},Wr=function(e,t){var i,n,r,o,s=e._gsap||kt(e),a=e.style,l=Vr(e);return s.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?jr:l:(l!==jr||e.offsetParent||e===qn||s.svg||(r=a.display,a.display="block",(i=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(o=1,n=e.nextElementSibling,qn.appendChild(e)),l=Vr(e),r?a.display=r:Dr(e,"display"),o&&(n?i.insertBefore(e,n):i?i.appendChild(e):qn.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Gr=function(e,t,i,n,r,o){var s,a,l,u=e._gsap,c=r||Wr(e,!0),h=u.xOrigin||0,d=u.yOrigin||0,p=u.xOffset||0,f=u.yOffset||0,g=c[0],m=c[1],v=c[2],y=c[3],b=c[4],_=c[5],w=t.split(" "),T=parseFloat(w[0])||0,S=parseFloat(w[1])||0;i?c!==jr&&(a=g*y-m*v)&&(l=T*(-m/a)+S*(g/a)-(g*_-m*b)/a,T=T*(y/a)+S*(-v/a)+(v*_-y*b)/a,S=l):(T=(s=Ir(e)).x+(~w[0].indexOf("%")?T/100*s.width:T),S=s.y+(~(w[1]||w[0]).indexOf("%")?S/100*s.height:S)),n||!1!==n&&u.smooth?(b=T-h,_=S-d,u.xOffset=p+(b*g+_*v)-b,u.yOffset=f+(b*m+_*y)-_):u.xOffset=u.yOffset=0,u.xOrigin=T,u.yOrigin=S,u.smooth=!!n,u.origin=t,u.originIsAbsolute=!!i,e.style[yr]="0px 0px",o&&(Or(o,u,"xOrigin",h,T),Or(o,u,"yOrigin",d,S),Or(o,u,"xOffset",p,u.xOffset),Or(o,u,"yOffset",f,u.yOffset)),e.setAttribute("data-svg-origin",T+" "+S)},Yr=function(e,t){var i=e._gsap||new en(e);if("x"in i&&!t&&!i.uncache)return i;var n,r,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,_,w,T,S,E,x,C,k,P,A,I,L,D,O,R,M=e.style,N=i.scaleX<0,B="px",F="deg",U=getComputedStyle(e),$=Er(e,yr)||"0";return n=r=o=l=u=c=h=d=p=0,s=a=1,i.svg=!(!e.getCTM||!Lr(e)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(M[vr]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[vr]?U[vr]:"")),M.scale=M.rotate=M.translate="none"),m=Wr(e,i.svg),i.svg&&(i.uncache?(k=e.getBBox(),$=i.xOrigin-k.x+"px "+(i.yOrigin-k.y)+"px",C=""):C=!t&&e.getAttribute("data-svg-origin"),Gr(e,C||$,!!C||i.originIsAbsolute,!1!==i.smooth,m)),f=i.xOrigin||0,g=i.yOrigin||0,m!==jr&&(_=m[0],w=m[1],T=m[2],S=m[3],n=E=m[4],r=x=m[5],6===m.length?(s=Math.sqrt(_*_+w*w),a=Math.sqrt(S*S+T*T),l=_||w?er(w,_)*Zn:0,(h=T||S?er(T,S)*Zn+l:0)&&(a*=Math.abs(Math.cos(h*Jn))),i.svg&&(n-=f-(f*_+g*T),r-=g-(f*w+g*S))):(R=m[6],D=m[7],A=m[8],I=m[9],L=m[10],O=m[11],n=m[12],r=m[13],o=m[14],u=(v=er(R,L))*Zn,v&&(C=E*(y=Math.cos(-v))+A*(b=Math.sin(-v)),k=x*y+I*b,P=R*y+L*b,A=E*-b+A*y,I=x*-b+I*y,L=R*-b+L*y,O=D*-b+O*y,E=C,x=k,R=P),c=(v=er(-T,L))*Zn,v&&(y=Math.cos(-v),O=S*(b=Math.sin(-v))+O*y,_=C=_*y-A*b,w=k=w*y-I*b,T=P=T*y-L*b),l=(v=er(w,_))*Zn,v&&(C=_*(y=Math.cos(v))+w*(b=Math.sin(v)),k=E*y+x*b,w=w*y-_*b,x=x*y-E*b,_=C,E=k),u&&Math.abs(u)+Math.abs(l)>359.9&&(u=l=0,c=180-c),s=It(Math.sqrt(_*_+w*w+T*T)),a=It(Math.sqrt(x*x+R*R)),v=er(E,x),h=Math.abs(v)>2e-4?v*Zn:0,p=O?1/(O<0?-O:O):0),i.svg&&(C=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!qr(Er(e,vr)),C&&e.setAttribute("transform",C))),Math.abs(h)>90&&Math.abs(h)<270&&(N?(s*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,h+=h<=0?180:-180)),t=t||i.uncache,i.x=n-((i.xPercent=n&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-n)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+B,i.y=r-((i.yPercent=r&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-r)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+B,i.z=o+B,i.scaleX=It(s),i.scaleY=It(a),i.rotation=It(l)+F,i.rotationX=It(u)+F,i.rotationY=It(c)+F,i.skewX=h+F,i.skewY=d+F,i.transformPerspective=p+B,(i.zOrigin=parseFloat($.split(" ")[2])||!t&&i.zOrigin||0)&&(M[yr]=Xr($)),i.xOffset=i.yOffset=0,i.force3D=Me.force3D,i.renderTransform=i.svg?io:Xn?to:Qr,i.uncache=0,i},Xr=function(e){return(e=e.split(" "))[0]+" "+e[1]},Kr=function(e,t,i){var n=pi(t);return It(parseFloat(t)+parseFloat(Nr(e,"x",i+"px",n)))+n},Qr=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,to(e,t)},Zr="0deg",Jr="0px",eo=") ",to=function(e,t){var i=t||this,n=i.xPercent,r=i.yPercent,o=i.x,s=i.y,a=i.z,l=i.rotation,u=i.rotationY,c=i.rotationX,h=i.skewX,d=i.skewY,p=i.scaleX,f=i.scaleY,g=i.transformPerspective,m=i.force3D,v=i.target,y=i.zOrigin,b="",_="auto"===m&&e&&1!==e||!0===m;if(y&&(c!==Zr||u!==Zr)){var w,T=parseFloat(u)*Jn,S=Math.sin(T),E=Math.cos(T);T=parseFloat(c)*Jn,w=Math.cos(T),o=Kr(v,o,S*w*-y),s=Kr(v,s,-Math.sin(T)*-y),a=Kr(v,a,E*w*-y+y)}g!==Jr&&(b+="perspective("+g+eo),(n||r)&&(b+="translate("+n+"%, "+r+"%) "),(_||o!==Jr||s!==Jr||a!==Jr)&&(b+=a!==Jr||_?"translate3d("+o+", "+s+", "+a+") ":"translate("+o+", "+s+eo),l!==Zr&&(b+="rotate("+l+eo),u!==Zr&&(b+="rotateY("+u+eo),c!==Zr&&(b+="rotateX("+c+eo),h===Zr&&d===Zr||(b+="skew("+h+", "+d+eo),1===p&&1===f||(b+="scale("+p+", "+f+eo),v.style[vr]=b||"translate(0, 0)"},io=function(e,t){var i,n,r,o,s,a=t||this,l=a.xPercent,u=a.yPercent,c=a.x,h=a.y,d=a.rotation,p=a.skewX,f=a.skewY,g=a.scaleX,m=a.scaleY,v=a.target,y=a.xOrigin,b=a.yOrigin,_=a.xOffset,w=a.yOffset,T=a.forceCSS,S=parseFloat(c),E=parseFloat(h);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=Jn,p*=Jn,i=Math.cos(d)*g,n=Math.sin(d)*g,r=Math.sin(d-p)*-m,o=Math.cos(d-p)*m,p&&(f*=Jn,s=Math.tan(p-f),r*=s=Math.sqrt(1+s*s),o*=s,f&&(s=Math.tan(f),i*=s=Math.sqrt(1+s*s),n*=s)),i=It(i),n=It(n),r=It(r),o=It(o)):(i=g,o=m,n=r=0),(S&&!~(c+"").indexOf("px")||E&&!~(h+"").indexOf("px"))&&(S=Nr(v,"x",c,"px"),E=Nr(v,"y",h,"px")),(y||b||_||w)&&(S=It(S+y-(y*i+b*r)+_),E=It(E+b-(y*n+b*o)+w)),(l||u)&&(s=v.getBBox(),S=It(S+l/100*s.width),E=It(E+u/100*s.height)),s="matrix("+i+","+n+","+r+","+o+","+S+","+E+")",v.setAttribute("transform",s),T&&(v.style[vr]=s)},no=function(e,t,i,n,r){var o,s,a=360,l=Ve(r),u=parseFloat(r)*(l&&~r.indexOf("rad")?Zn:1)-n,c=n+u+"deg";return l&&("short"===(o=r.split("_")[1])&&(u%=a)!==u%180&&(u+=u<0?a:-360),"cw"===o&&u<0?u=(u+36e9)%a-~~(u/a)*a:"ccw"===o&&u>0&&(u=(u-36e9)%a-~~(u/a)*a)),e._pt=s=new Pn(e._pt,t,i,n,u,sr),s.e=c,s.u="deg",e._props.push(i),s},ro=function(e,t){for(var i in t)e[i]=t[i];return e},oo=function(e,t,i){var n,r,o,s,a,l,u,c=ro({},i._gsap),h=i.style;for(r in c.svg?(o=i.getAttribute("transform"),i.setAttribute("transform",""),h[vr]=t,n=Yr(i,1),Dr(i,vr),i.setAttribute("transform",o)):(o=getComputedStyle(i)[vr],h[vr]=t,n=Yr(i,1),h[vr]=o),Qn)(o=c[r])!==(s=n[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(a=pi(o)!==(u=pi(s))?Nr(i,r,o,u):parseFloat(o),l=parseFloat(s),e._pt=new Pn(e._pt,n,r,a,l-a,or),e._pt.u=u||0,e._props.push(r));ro(n,c)};At("padding,margin,Width,Radius",(function(e,t){var i="Top",n="Right",r="Bottom",o="Left",s=(t<3?[i,n,r,o]:[i+o,i+n,r+n,r+o]).map((function(i){return t<2?e+i:"border"+i+e}));Hr[t>1?"border"+e:e]=function(e,t,i,n,r){var o,a;if(arguments.length<4)return o=s.map((function(t){return Br(e,t,i)})),5===(a=o.join(" ")).split(o[0]).length?o[0]:a;o=(n+"").split(" "),a={},s.forEach((function(e,t){return a[e]=o[t]=o[t]||o[(t-1)/2|0]})),e.init(t,a,r)}}));var so,ao,lo,uo={name:"css",register:kr,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,r){var o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,_,w,T,S,E,x=this._props,C=e.style,k=i.vars.startAt;for(h in Vn||kr(),this.styles=this.styles||Tr(e),_=this.styles.props,this.tween=i,t)if("autoRound"!==h&&(s=t[h],!wt[h]||!ln(h,t,i,n,e,r)))if(u=typeof s,c=Hr[h],"function"===u&&(u=typeof(s=s.call(i,n,e,r))),"string"===u&&~s.indexOf("random(")&&(s=xi(s)),c)c(this,e,h,s,i)&&(b=1);else if("--"===h.substr(0,2))o=(getComputedStyle(e).getPropertyValue(h)+"").trim(),s+="",Fi.lastIndex=0,Fi.test(o)||(d=pi(o),p=pi(s)),p?d!==p&&(o=Nr(e,h,o,p)+p):d&&(s+=d),this.add(C,"setProperty",o,s,n,r,0,0,h),x.push(h),_.push(h,0,C[h]);else if("undefined"!==u){if(k&&h in k?(o="function"==typeof k[h]?k[h].call(i,n,e,r):k[h],Ve(o)&&~o.indexOf("random(")&&(o=xi(o)),pi(o+"")||"auto"===o||(o+=Me.units[h]||pi(Br(e,h))||""),"="===(o+"").charAt(1)&&(o=Br(e,h))):o=Br(e,h),l=parseFloat(o),(f="string"===u&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),a=parseFloat(s),h in rr&&("autoAlpha"===h&&(1===l&&"hidden"===Br(e,"visibility")&&a&&(l=0),_.push("visibility",0,C.visibility),Or(this,C,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==h&&"transform"!==h&&~(h=rr[h]).indexOf(",")&&(h=h.split(",")[0])),g=h in Qn)if(this.styles.save(h),m||((v=e._gsap).renderTransform&&!t.parseTransform||Yr(e,t.parseTransform),y=!1!==t.smoothOrigin&&v.smooth,(m=this._pt=new Pn(this._pt,C,vr,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===h)this._pt=new Pn(this._pt,v,"scaleY",v.scaleY,(f?Dt(v.scaleY,f+a):a)-v.scaleY||0,or),this._pt.u=0,x.push("scaleY",h),h+="X";else{if("transformOrigin"===h){_.push(yr,0,C[yr]),T=void 0,S=void 0,E=void 0,T=(w=s).split(" "),S=T[0],E=T[1]||"50%","top"!==S&&"bottom"!==S&&"left"!==E&&"right"!==E||(w=S,S=E,E=w),T[0]=Ur[S]||S,T[1]=Ur[E]||E,s=T.join(" "),v.svg?Gr(e,s,0,y,0,this):((p=parseFloat(s.split(" ")[2])||0)!==v.zOrigin&&Or(this,v,"zOrigin",v.zOrigin,p),Or(this,C,h,Xr(o),Xr(s)));continue}if("svgOrigin"===h){Gr(e,s,1,y,0,this);continue}if(h in zr){no(this,v,h,l,f?Dt(l,f+s):s);continue}if("smoothOrigin"===h){Or(this,v,"smooth",v.smooth,s);continue}if("force3D"===h){v[h]=s;continue}if("transform"===h){oo(this,s,e);continue}}else h in C||(h=Cr(h)||h);if(g||(a||0===a)&&(l||0===l)&&!nr.test(s)&&h in C)a||(a=0),(d=(o+"").substr((l+"").length))!==(p=pi(s)||(h in Me.units?Me.units[h]:d))&&(l=Nr(e,h,o,p)),this._pt=new Pn(this._pt,g?v:C,h,l,(f?Dt(l,f+a):a)-l,g||"px"!==p&&"zIndex"!==h||!1===t.autoRound?or:lr),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=o,this._pt.r=ar);else if(h in C)Fr.call(this,e,h,o,f?f+s:s);else if(h in e)this.add(e,h,o||e[h],f?f+s:s,n,r);else if("parseTransform"!==h){ht(h,s);continue}g||(h in C?_.push(h,0,C[h]):"function"==typeof e[h]?_.push(h,2,e[h]()):_.push(h,1,o||e[h])),x.push(h)}b&&kn(this)},render:function(e,t){if(t.tween._time||!Yn())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Br,aliases:rr,getSetter:function(e,t,i){var n=rr[t];return n&&n.indexOf(",")<0&&(t=n),t in Qn&&t!==yr&&(e._gsap.x||Br(e,"x"))?i&&Gn===i?"scale"===t?fr:pr:(Gn=i||{})&&("scale"===t?gr:mr):e.style&&!Ye(e.style[t])?hr:~t.indexOf("-")?dr:bn(e,t)},core:{_removeProperty:Dr,_getMatrix:Wr}};Hn.utils.checkPrefix=Cr,Hn.core.getStyleSaver=Tr,lo=At((so="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(ao="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){Qn[e]=1})),At(ao,(function(e){Me.units[e]="deg",zr[e]=1})),rr[lo[13]]=so+","+ao,At("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");rr[t[1]]=lo[t[0]]})),At("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){Me.units[e]="px"})),Hn.registerPlugin(uo);var co,ho,po,fo,go,mo,vo,yo,bo=Hn.registerPlugin(uo)||Hn,_o=(bo.core.Tween,function(){return"undefined"!=typeof window}),wo=function(){return co||_o()&&(co=window.gsap)&&co.registerPlugin&&co},To=function(e){return"string"==typeof e},So=function(e){return"function"==typeof e},Eo=function(e,t){var i="x"===t?"Width":"Height",n="scroll"+i,r="client"+i;return e===po||e===fo||e===go?Math.max(fo[n],go[n])-(po["inner"+i]||fo[r]||go[r]):e[n]-e["offset"+i]},xo=function(e,t){var i="scroll"+("x"===t?"Left":"Top");return e===po&&(null!=e.pageXOffset?i="page"+t.toUpperCase()+"Offset":e=null!=fo[i]?fo:go),function(){return e[i]}},Co=function(e,t){if(!(e=mo(e)[0])||!e.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var i=e.getBoundingClientRect(),n=!t||t===po||t===go,r=n?{top:fo.clientTop-(po.pageYOffset||fo.scrollTop||go.scrollTop||0),left:fo.clientLeft-(po.pageXOffset||fo.scrollLeft||go.scrollLeft||0)}:t.getBoundingClientRect(),o={x:i.left-r.left,y:i.top-r.top};return!n&&t&&(o.x+=xo(t,"x")(),o.y+=xo(t,"y")()),o},ko=function(e,t,i,n,r){return isNaN(e)||"object"==typeof e?To(e)&&"="===e.charAt(1)?parseFloat(e.substr(2))*("-"===e.charAt(0)?-1:1)+n-r:"max"===e?Eo(t,i)-r:Math.min(Eo(t,i),Co(e,t)[i]-r):parseFloat(e)-r},Po=function(){co=wo(),_o()&&co&&"undefined"!=typeof document&&document.body&&(po=window,go=document.body,fo=document.documentElement,mo=co.utils.toArray,co.config({autoKillThreshold:7}),vo=co.config(),ho=1)},Ao={version:"3.12.7",name:"scrollTo",rawVars:1,register:function(e){co=e,Po()},init:function(e,t,i,n,r){ho||Po();var o=this,s=co.getProperty(e,"scrollSnapType");o.isWin=e===po,o.target=e,o.tween=i,t=function(e,t,i,n){if(So(e)&&(e=e(t,i,n)),"object"!=typeof e)return To(e)&&"max"!==e&&"="!==e.charAt(1)?{x:e,y:e}:{y:e};if(e.nodeType)return{y:e,x:e};var r,o={};for(r in e)o[r]="onAutoKill"!==r&&So(e[r])?e[r](t,i,n):e[r];return o}(t,n,e,r),o.vars=t,o.autoKill=!!("autoKill"in t?t:vo).autoKill,o.getX=xo(e,"x"),o.getY=xo(e,"y"),o.x=o.xPrev=o.getX(),o.y=o.yPrev=o.getY(),yo||(yo=co.core.globals().ScrollTrigger),"smooth"===co.getProperty(e,"scrollBehavior")&&co.set(e,{scrollBehavior:"auto"}),s&&"none"!==s&&(o.snap=1,o.snapInline=e.style.scrollSnapType,e.style.scrollSnapType="none"),null!=t.x?(o.add(o,"x",o.x,ko(t.x,e,"x",o.x,t.offsetX||0),n,r),o._props.push("scrollTo_x")):o.skipX=1,null!=t.y?(o.add(o,"y",o.y,ko(t.y,e,"y",o.y,t.offsetY||0),n,r),o._props.push("scrollTo_y")):o.skipY=1},render:function(e,t){for(var i,n,r,o,s,a=t._pt,l=t.target,u=t.tween,c=t.autoKill,h=t.xPrev,d=t.yPrev,p=t.isWin,f=t.snap,g=t.snapInline;a;)a.r(e,a.d),a=a._next;i=p||!t.skipX?t.getX():h,r=(n=p||!t.skipY?t.getY():d)-d,o=i-h,s=vo.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),c&&(!t.skipX&&(o>s||o<-s)&&i<Eo(l,"x")&&(t.skipX=1),!t.skipY&&(r>s||r<-s)&&n<Eo(l,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(u.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(u,t.vars.onAutoKillParams||[]))),p?po.scrollTo(t.skipX?i:t.x,t.skipY?n:t.y):(t.skipY||(l.scrollTop=t.y),t.skipX||(l.scrollLeft=t.x)),!f||1!==e&&0!==e||(n=l.scrollTop,i=l.scrollLeft,g?l.style.scrollSnapType=g:l.style.removeProperty("scroll-snap-type"),l.scrollTop=n+1,l.scrollLeft=i+1,l.scrollTop=n,l.scrollLeft=i),t.xPrev=t.x,t.yPrev=t.y,yo&&yo.update()},kill:function(e){var t="scrollTo"===e,i=this._props.indexOf(e);return(t||"scrollTo_x"===e)&&(this.skipX=1),(t||"scrollTo_y"===e)&&(this.skipY=1),i>-1&&this._props.splice(i,1),!this._props.length}};Ao.max=Eo,Ao.getOffset=Co,Ao.buildGetter=xo,Ao.config=function(e){for(var t in vo||Po()||(vo=co.config()),e)vo[t]=e[t]},wo()&&co.registerPlugin(Ao);var Io=n(8434);function Lo(e){return function(e){if(Array.isArray(e))return Do(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Do(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Do(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Do(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}var Ro=0,Mo=!1,No=!1,Bo=function(e,t,i){var n;Array.isArray(e)?(n=e.find((function(e){return document.querySelector(e)})),n=document.querySelector(e)):n="object"===Oo(e)?e:document.querySelector(e),"out"===t?Ro=window.scrollY:window.scrollTo({top:Ro}),n?(n.style.opacity="in"===t?0:1,bo.to(n,{opacity:"in"===t?1:0,duration:.5,onComplete:function(){"in"===t&&(window.scrollTo({top:n.offsetTop-200,behavior:"smooth"}),Ro=0),i()}})):i()},Fo=[{from:"(.*)",to:"ticket-select-museum",in:function(e){Bo("#wrapper-ticket-type","in",e)},out:function(e){Bo("#wrapper-ticket-type","out",e)}},{from:"(.*)",to:"ticket-select-date",in:function(e){Bo(["#wrapper-ticket-times","#wrapper-ticket-selection"],"in",e)},out:function(e){Bo(["#wrapper-ticket-times","#wrapper-ticket-selection"],"out",e)}},{from:"(.*)",to:"ticket-select-time",in:function(e){Bo("#wrapper-ticket-selection","in",e)},out:function(e){Bo("#wrapper-ticket-selection","out",e)}},{from:"(.*)",to:"ticket-select-time-addon",in:function(e){var t=document.querySelectorAll("[data-ticket-upsell-group]"),i=No>-1&&t[No],n=!!i&&i.querySelector("[data-wrapper-ticket-select-addon]");Bo(n,"in",e)},out:function(e){var t=document.querySelectorAll("[data-ticket-upsell-group]"),i=Mo.closest("[data-ticket-upsell-group]"),n=i.querySelector("[data-wrapper-ticket-select-addon]");No=Lo(t).indexOf(i),Bo(n,"out",e)}},{from:"(.*)",to:"filters",in:function(e){document.querySelector("#filters").style.opacity=0,bo.to("#filters",{opacity:1,duration:1,onComplete:e})},out:function(e){document.querySelector("#filters").style.opacity=1,bo.to("#filters",{opacity:0,duration:1,onComplete:e})}},{from:"(.*)",to:"(.*)",in:function(e){document.querySelector("#swup").style.opacity=0,bo.to(window,{duration:0,scrollTo:{y:0}}),bo.to("#swup",{opacity:1,duration:.5,delay:.1,onComplete:e})},out:function(e){document.querySelector("#swup").style.opacity=1,Ro=window.scrollY,bo.to("#swup",{opacity:0,duration:.5,onComplete:e})}}];var Uo=n(8028),$o=(0,s.createBehavior)("Accordion",{toggle:function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-Accordion-index");this._data.activeIndexes.includes(t)?(this.close(t),this._data.activeIndexes=this._data.activeIndexes.filter((function(e){return e!==t}))):(this.open(t),this._data.activeIndexes.push(t))},close:function(e){var t=this.$triggers[e],i=this.$triggerIcons[e],n=this.$contents[e];n.style.height="0px",t.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true"),i.classList.remove("rotate-45")},open:function(e){var t=this.$triggers[e],i=this.$triggerIcons[e],n=this.$contents[e],r=this.$contentInners[e];n.classList.remove("hidden"),setTimeout((function(){var e=r.offsetHeight;n.style.height="".concat(e,"px"),t.setAttribute("aria-expanded","true"),n.setAttribute("aria-hidden","false"),i.classList.add("rotate-45")}),1)},handleTransitionEnd:function(e){e.stopPropagation(),e.currentTarget&&0===e.currentTarget.clientHeight&&e.currentTarget.classList.add("hidden")},updateOpenItems:function(){var e=this;this._data.activeIndexes.length>0&&this._data.activeIndexes.forEach((function(t){e.open(t)}))}},{init:function(){var e=this;this._data.activeIndexes=[],this.$initOpen=this.getChildren("init-open"),this.$triggers=this.getChildren("trigger"),this.$triggerIcons=this.getChildren("trigger-icon"),this.$contents=this.getChildren("content"),this.$contentInners=this.getChildren("content-inner"),this.$triggers.forEach((function(t){t.addEventListener("click",e.toggle,!1)})),this.$contents.forEach((function(t){t.addEventListener("transitionend",e.handleTransitionEnd,!1)})),this.$initOpen.forEach((function(e){e.click()})),document.addEventListener("Accordion:update",this.updateOpenItems,!1)},enabled:function(){},resized:function(){this.updateOpenItems()},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){var e=this;document.removeEventListener("Accordion:update",this.updateOpenItems),this.$triggers.forEach((function(t){t.removeEventListener("click",e.toggle)}))}});const Ho=$o;const jo=(0,s.createBehavior)("Alert",{showAlert:function(){window.sessionStorage&&window.sessionStorage.getItem("alertDismissed")&&this.$node.classList.add("hidden")},hideAlert:function(e){e.preventDefault(),this.$node.classList.add("hidden"),window.sessionStorage&&sessionStorage.setItem("alertDismissed",!0)}},{init:function(){this.$closeBtn=this.getChild("close-button"),this.$closeBtn.addEventListener("click",this.hideAlert,!1),this.showAlert()},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$closeBtn.removeEventListener("click",this.hideAlert)}});const zo=(0,s.createBehavior)("AmountInput",{initStore:function(){if(this.canStore){var e=window.sessionStorage.getItem(this.storageKey);e>this.maxAmount?e=this.maxAmount:e<=this.minAmount&&(e=this.minAmount),e&&(!e||e>this.minAmount)&&(this.$inputElement.value=e),this.storeValue(),this.updateInputStyle()}},storeValue:function(e){if(this.canStore){var t=e||this.$inputElement.value;this.isValidValue(t)&&window.sessionStorage.setItem(this.storageKey,t)}},clearStoredValue:function(){window.sessionStorage.removeItem(this.storageKey)},isValidValue:function(e){return null!==e&&""!==e&&e>=this.minAmount&&e<=this.maxAmount},getValue:function(e){var t;return(null==e||null===(t=e.firstElementChild)||void 0===t?void 0:t.value)||null},toggleAddBtn:function(e){e?this.$addBtn.setAttribute("disabled",!0):this.$addBtn.removeAttribute("disabled")},toggleSubtractBtn:function(e){e?this.$subtractBtn.setAttribute("disabled",!0):this.$subtractBtn.removeAttribute("disabled")},add:function(e){e.preventDefault();var t=parseInt(this.getValue(this.$inputField));if(t)if(this.maxAmount&&t<this.maxAmount){var i=!t||0===t||t<this.minAmount?this.minAmount:t+1;this.$inputField.firstElementChild.value=i,this.toggleSubtractBtn(!1),this.maxAmount===t+1&&this.toggleAddBtn(!0),this.toggleErrorState(i>this.maxAmount)}else this.$inputField.firstElementChild.value=t+1;else{if(0===this.maxAmount)return;this.$inputField.firstElementChild.value=this.minAmount||1,this.toggleSubtractBtn(!1)}this.storeValue(),this.updateSumAmount(),this.updateInputStyle()},subtract:function(e){e.preventDefault();var t=parseInt(this.getValue(this.$inputField));if(t&&t>this.minAmount){var i=t-(t>this.minAmount?1:this.minAmount);t>this.maxAmount&&(i=this.maxAmount),this.$inputField.firstElementChild.value=i,this.toggleAddBtn(i>=this.maxAmount),this.toggleErrorState(i>this.maxAmount)}else this.$inputField.firstElementChild.value=null,this.toggleSubtractBtn(!0);this.storeValue(),this.updateSumAmount(),this.updateInputStyle()},updateSumAmount:function(){var e=document.querySelectorAll(".amount-input-field");if(e.length&&this.$sum){var t=Array.from(e).reduce((function(e,t){var i;return parseInt(e)+parseInt((null==t||null===(i=t.firstElementChild)||void 0===i?void 0:i.value)||0)}),0);dispatchEvent(new CustomEvent("ticketAmountUpdated",{detail:t}))}},toggleErrorState:function(e){var t,i,n=["active:border-interactive-active","focus:border-interactive-active","text-primary","focus:text-primary"];e?((t=this.$inputField.firstElementChild.classList).remove.apply(t,n),this.$inputField.firstElementChild.classList.add("border-error","text-error"),this.$inputBorder.classList.add("hidden")):(this.$inputField.firstElementChild.classList.remove("border-error","text-error"),(i=this.$inputField.firstElementChild.classList).add.apply(i,n),this.$inputBorder.classList.remove("hidden"))},validateInput:function(e){var t=parseInt(e.target.value);this.toggleAddBtn(t>=this.maxAmount),this.toggleSubtractBtn(t<=0||!t||t<this.minAmount),this.toggleErrorState(this.maxAmount&&t>this.maxAmount||this.minAmount&&t<this.minAmount),this.storeValue(),this.updateSumAmount(),this.updateInputStyle()},updateInputStyle:function(){var e=this.$inputElement.value;this.$inputElement.classList.toggle("bg-quaternary",this.isValidValue(e))}},{init:function(){var e,t,i;this.$addBtn=this.getChild("add-button"),this.$subtractBtn=this.getChild("subtract-button"),this.$inputField=this.getChild("input-field"),this.$inputBorder=this.$inputField.lastElementChild,this.$inputElement=this.$inputField.querySelector("input"),this.canStore=window.sessionStorage;var n=this.options.key||this.$inputElement.getAttribute("name");this.storageKey=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1)+"-"+n,this.$sum=document.getElementById("cart-sum-button"),this.minAmount=parseInt((null===(e=this.$node)||void 0===e||null===(e=e.dataset)||void 0===e?void 0:e.minAmount)||1),this.maxAmount=parseInt(null===(t=this.$node)||void 0===t||null===(t=t.dataset)||void 0===t?void 0:t.maxAmount)||9999,this.initStore();var r=parseInt(null===(i=this.$inputElement)||void 0===i?void 0:i.value);0===this.maxAmount&&this.toggleAddBtn(!0),r&&0!==r||this.toggleSubtractBtn(!0),this.updateSumAmount(),this.$addBtn.addEventListener("click",this.add),this.$subtractBtn.addEventListener("click",this.subtract),this.$inputField.addEventListener("input",this.validateInput),this.$sum.addEventListener("click",this.clearStoredValue)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$addBtn.removeEventListener("click",null),this.$subtractBtn.removeEventListener("click",null),this.$inputField.removeEventListener("input",null)}});const qo=(0,s.createBehavior)("ArtworkSearch",{updatePlaceholder:function(){this.currentPlaceholder=["xs","sm"].includes(window.A17.currentMediaQuery)?this.placeholderSmall:this.placeholderLarge,this.$input.placeholder=this.currentPlaceholder}},{init:function(){this.placeholderSmall=this.options["placeholder-small"],this.placeholderLarge=this.options["placeholder-large"],this.$input=this.getChild("form").querySelector('input[type="search"]'),this.updatePlaceholder()},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){this.updatePlaceholder()},disabled:function(){},destroy:function(){}});var Vo=n(4791),Wo=n.n(Vo),Go=(0,s.createBehavior)("ArtworkViewer",{initViewer:function(){this.isActive||(this.viewer=Wo()(this.viewerOptions),this.viewer.goToPage(0),this.isActive=!0)},updateViewer:function(e){if(this.isActive){var t=e.detail.index;t>-1&&(this.viewer.goToPage(t),this.viewer.viewport.goHome())}}},{init:function(){this.isActive=!1,this.autoInit="true"===this.options["auto-init"],this.sources=JSON.parse(this.options.sources);var e=this.sources.map((function(e){return{"@context":"http://iiif.io/api/image/2/context.json","@id":"http://famsf.emuseum.com/apis/iiif/image/v2/".concat(e.iiifId),width:e.width,height:e.height,profile:["http://iiif.io/api/image/2/level2.json"],protocol:"http://iiif.io/api/image"}}));if(this.viewerOptions={id:this.$node.id,prefixUrl:window.location.protocol+"//openseadragon.github.io/openseadragon/images/",preserveViewport:!0,springStiffness:15,visibilityRatio:1,zoomPerScroll:1.2,zoomPerClick:1.3,immediateRender:!1,constrainDuringPan:!0,animationTime:1.5,minZoomLevel:0,minZoomImageRatio:.8,maxZoomPixelRatio:1,defaultZoomLevel:0,gestureSettingsMouse:{scrollToZoom:!0},zoomInButton:"".concat(this.$node.id,"-artwork-viewer-zoom-in"),zoomOutButton:"".concat(this.$node.id,"-artwork-viewer-zoom-out"),showZoomControl:!0,showHomeControl:!1,showFullPageControl:!1,showRotationControl:!1,showSequenceControl:!1,tileSources:e},this.autoInit)this.initViewer();else{var t=this.$node.closest('[data-behavior="Modal"]');t&&t.addEventListener("Modal:opened",this.initViewer,!1),this.$node.addEventListener("artwork-viewer:init",this.initViewer,!1)}document.addEventListener("artwork-viewer:update",this.updateViewer,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){var e;if(null===(e=this.viewer)||void 0===e||e.destroy(),document.removeEventListener("artwork-viewer:update",this.updateViewer,!1),!this.autoInit){var t=this.$node.closest('[data-behavior="Modal"]');t&&t.removeEventListener("Modal:open",this.initViewer),this.$node.removeEventListener("artwork-viewer:init",this.initViewer)}}});const Yo=Go;var Xo=(0,s.createBehavior)("AudioPlayer",{togglePlay:function(e){e&&e.preventDefault(),this.isPlaying?this.$player.pause():this.$player.play(),this.$playIcon.classList.toggle("hidden",!this.isPlaying),this.$pauseIcon.classList.toggle("hidden",this.isPlaying)},playerLoaded:function(){this.start()},handlePause:function(){this.isPlaying=!1,this.$playToggle.setAttribute("aria-label",this.buttonText.play)},handlePlay:function(){this.isPlaying=!0,this.$playToggle.setAttribute("aria-label",this.buttonText.pause)},handleEnd:function(){this.isPlaying=!1,this.$pauseIcon.classList.add("hidden"),this.$playIcon.classList.remove("hidden"),this.$playToggle.setAttribute("aria-label",this.buttonText.play)},updateTime:function(){this.currentSeconds=parseInt(this.$player.currentTime),this.percentComplete=parseInt(this.currentSeconds/this.duration*100),this.$timeCurrent.innerText=this.formatTime(this.currentSeconds),this.updateProgressBar()},seek:function(e){this.currentSeconds=e.target.value,this.$player.currentTime=e.target.value},updateTooltip:function(){},setDuration:function(){this.duration=parseInt(this.$player.duration),this.$progressBar.setAttribute("max",parseInt(this.$player.duration)),this.$duration.innerText=this.formatTime(this.duration)},formatTime:function(e){var t=Math.floor(e/60)||0,i=Math.floor(e-60*t)||0;return"".concat(t,":").concat(i<10?"0":"").concat(i)},updateProgressBar:function(){var e=this.formatTime(this.currentSeconds),t=this.formatTime(this.duration);this.$progressBar.value=this.currentSeconds,this.$progressBar.setAttribute("aria-valuetext","".concat(e," of ").concat(t)),this.$progressBar.style.setProperty("--value",Math.max(2,this.percentComplete))},handleProgressBarKeyUp:function(e){e.preventDefault(),[13,32].includes(e.keyCode)&&this.togglePlay()},toggleTranscript:function(e){e.preventDefault(),this.transcriptOpen?this.closeTranscript():this.openTranscript()},openTranscript:function(){var e=this;this.transcriptOpen=!0,this.$transcriptContent.classList.remove("hidden"),setTimeout((function(){var t=e.$transcriptContentInner.offsetHeight;e.$transcriptContent.style.height="".concat(t,"px"),e.$transcriptToggle.setAttribute("aria-expanded","true"),e.$transcriptContent.setAttribute("aria-hidden","false"),e.$transcriptToggleText.innerText=e.buttonText.transcriptClose,e.$transcriptToggleIcon.classList.add("rotate-45")}),1)},closeTranscript:function(){this.transcriptOpen=!1,this.$transcriptContent.style.height="0px",this.$transcriptToggle.setAttribute("aria-expanded","false"),this.$transcriptContent.setAttribute("aria-hidden","true"),this.$transcriptToggleText.innerText=this.buttonText.transcriptOpen,this.$transcriptToggleIcon.classList.remove("rotate-45")},handleTranscriptTransitionEnd:function(e){e.stopPropagation(),e.currentTarget&&0===e.currentTarget.clientHeight&&e.currentTarget.classList.add("hidden")},start:function(){this.setDuration(),this.updateProgressBar()}},{init:function(){this.duration=0,this.percentComplete=0,this.currentSeconds=0,this.isPlaying=!1,this.transcriptOpen=!1,this.buttonText={play:this.options["text-play"],pause:this.options["text-pause"],transcriptOpen:this.options["text-transcript-open"],transcriptClose:this.options["text-transcript-close"]},this.$player=this.getChild("player"),this.$playToggle=this.getChild("play-toggle"),this.$playIcon=this.getChild("play-icon"),this.$pauseIcon=this.getChild("pause-icon"),this.$timeCurrent=this.getChild("time-current"),this.$duration=this.getChild("duration"),this.$progressBar=this.getChild("progress"),this.$transcriptToggle=this.getChild("transcript-toggle"),this.$transcriptContent=this.getChild("transcript-content"),this.$transcriptContentInner=this.getChild("transcript-content-inner"),this.$playToggle.addEventListener("click",this.togglePlay,!1),this.$player.addEventListener("loadeddata",this.playerLoaded,!1),this.$player.addEventListener("pause",this.handlePause,!1),this.$player.addEventListener("play",this.handlePlay,!1),this.$player.addEventListener("ended",this.handleEnd,!1),this.$player.addEventListener("timeupdate",this.updateTime,!1),this.$progressBar.addEventListener("keyup",this.handleProgressBarKeyUp,!1),this.$progressBar.addEventListener("change",this.seek,!1),this.$progressBar.addEventListener("click",this.seek,!1),this.$progressBar.addEventListener("mousemove",this.updateTooltip,!1),this.$transcriptToggle&&(this.$transcriptToggleText=this.$transcriptToggle.querySelector("span"),this.$transcriptToggleIcon=this.$transcriptToggle.querySelector("svg"),this.$transcriptToggle.addEventListener("click",this.toggleTranscript,!1),this.$transcriptContent.addEventListener("transitionend",this.handleTranscriptTransitionEnd,!1))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){}});const Ko=Xo;const Qo=(0,s.createBehavior)("BackgroundVideo",{togglePlay:function(e){e.preventDefault(),this.isPlaying?(this.$player.pause(),this.$pauseIcon.classList.add("hidden"),this.$playIcon.classList.remove("hidden")):(this.$player.play(),this.$pauseIcon.classList.remove("hidden"),this.$playIcon.classList.add("hidden"));var t=this.isPlaying?this.buttonText.play:this.buttonText.pause;this.$pauseButtonText.innerText=t,this.$pauseButton.setAttribute("aria-label",t)},handlePlay:function(){this.isPlaying=!0},handlePause:function(){this.isPlaying=!1}},{init:function(){this.isPlaying=!0,this.buttonText={play:this.options["text-play"],pause:this.options["text-pause"]},this.$player=this.getChild("player"),this.$pauseButton=this.getChild("pause"),this.$pauseButtonText=this.getChild("pause-text"),this.$playIcon=this.getChild("icon-play"),this.$pauseIcon=this.getChild("icon-pause"),this.$player.addEventListener("play",this.handlePlay,!1),this.$player.addEventListener("pause",this.handlePause,!1),this.$pauseButton&&this.$pauseButton.addEventListener("click",this.togglePlay,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$player.removeEventListener("play",this.handlePlay),this.$player.removeEventListener("pause",this.handlePause),this.$pauseButton&&this.$pauseButton.removeEventListener("click",this.togglePlay)}}),Zo="splide",Jo=`data-${Zo}`,es={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,DESTROYED:5};function ts(e){e.length=0}function is(e){return!ss(e)&&"object"==typeof e}function ns(e){return Array.isArray(e)}function rs(e){return"string"==typeof e}function os(e){return void 0===e}function ss(e){return null===e}function as(e){return e instanceof HTMLElement}function ls(e){return ns(e)?e:[e]}function us(e,t){ls(e).forEach(t)}function cs(e,t){return e.indexOf(t)>-1}function hs(e,t){return e.push(...ls(t)),e}const ds=Array.prototype;function ps(e,t,i){return ds.slice.call(e,t,i)}function fs(e,t,i){e&&us(t,(t=>{t&&e.classList[i?"add":"remove"](t)}))}function gs(e,t){fs(e,rs(t)?t.split(" "):t,!0)}function ms(e,t){us(t,e.appendChild.bind(e))}function vs(e,t){us(e,(e=>{const i=t.parentNode;i&&i.insertBefore(e,t)}))}function ys(e,t){return as(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function bs(e,t){return e?ps(e.children).filter((e=>ys(e,t))):[]}function _s(e,t){return t?bs(e,t)[0]:e.firstElementChild}function ws(e,t,i){if(e){let n=Object.keys(e);n=i?n.reverse():n;for(let i=0;i<n.length;i++){const r=n[i];if("__proto__"!==r&&!1===t(e[r],r))break}}return e}function Ts(e){return ps(arguments,1).forEach((t=>{ws(t,((i,n)=>{e[n]=t[n]}))})),e}function Ss(e,t){return ws(t,((t,i)=>{ns(t)?e[i]=t.slice():is(t)?e[i]=Ss(is(e[i])?e[i]:{},t):e[i]=t})),e}function Es(e,t){e&&us(t,(t=>{e.removeAttribute(t)}))}function xs(e,t,i){is(t)?ws(t,((t,i)=>{xs(e,i,t)})):ss(i)?Es(e,t):e.setAttribute(t,String(i))}function Cs(e,t,i){const n=document.createElement(e);return t&&(rs(t)?gs(n,t):xs(n,t)),i&&ms(i,n),n}function ks(e,t,i){if(os(i))return getComputedStyle(e)[t];if(!ss(i)){const{style:n}=e;i=`${i}`,n[t]!==i&&(n[t]=i)}}function Ps(e,t){ks(e,"display",t)}function As(e,t){return e.getAttribute(t)}function Is(e,t){return e&&e.classList.contains(t)}function Ls(e){return e.getBoundingClientRect()}function Ds(e){us(e,(e=>{e&&e.parentNode&&e.parentNode.removeChild(e)}))}function Os(e){return _s((new DOMParser).parseFromString(e,"text/html").body)}function Rs(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function Ms(e,t){return e&&e.querySelector(t)}function Ns(e,t){return ps(e.querySelectorAll(t))}function Bs(e,t){fs(e,t,!1)}function Fs(e){return rs(e)?e:e?`${e}px`:""}function Us(e,t=""){if(!e)throw new Error(`[${Zo}] ${t}`)}function $s(e){setTimeout(e)}const Hs=()=>{};function js(e){return requestAnimationFrame(e)}const{min:zs,max:qs,floor:Vs,ceil:Ws,abs:Gs}=Math;function Ys(e,t,i,n){const r=zs(t,i),o=qs(t,i);return n?r<e&&e<o:r<=e&&e<=o}function Xs(e,t,i){const n=zs(t,i),r=qs(t,i);return zs(qs(n,e),r)}function Ks(e){return+(e>0)-+(e<0)}function Qs(e,t){return us(t,(t=>{e=e.replace("%s",`${t}`)})),e}function Zs(e){return e<10?`0${e}`:`${e}`}const Js={};function ea(e){return`${e}${Zs(Js[e]=(Js[e]||0)+1)}`}const ta="mounted",ia="ready",na="move",ra="moved",oa="shifted",sa="click",aa="visible",la="hidden",ua="slide:keydown",ca="refresh",ha="updated",da="resize",pa="resized",fa="repositioned",ga="scroll",ma="scrolled",va="destroy",ya="navigation:mounted",ba="lazyload:loaded";function _a(e){const{event:t}=e,i={};let n=[];function r(e,t,i){o(e,t,((e,t)=>{n=n.filter((n=>!!(n[0]!==e||n[1]!==t||i&&n[2]!==i)||(e.removeEventListener(t,n[2],n[3]),!1)))}))}function o(e,t,i){us(e,(e=>{e&&t.split(" ").forEach(i.bind(null,e))}))}function s(){n=n.filter((e=>r(e[0],e[1]))),t.offBy(i)}return t.on(va,s,i),{on:function(e,n,r){t.on(e,n,i,r)},off:function(e){t.off(e,i)},emit:t.emit,bind:function(e,t,i,r){o(e,t,((e,t)=>{n.push([e,t,i,r]),e.addEventListener(t,i,r)}))},unbind:r,destroy:s}}function wa(e,t,i,n){const{now:r}=Date;let o,s,a=0,l=!0,u=0;function c(){if(!l){const s=r()-o;if(s>=e?(a=1,o=r()):a=s/e,i&&i(a),1===a&&(t(),n&&++u>=n))return h();js(c)}}function h(){l=!0}function d(){cancelAnimationFrame(s),a=0,s=0,l=!0}return{start:function(t){!t&&d(),o=r()-(t?a*e:0),l=!1,js(c)},rewind:function(){o=r(),a=0,i&&i(a)},pause:h,cancel:d,set:function(t){e=t},isPaused:function(){return l}}}function Ta(e,t){let i;return function(){i||(i=wa(t||0,(()=>{e.apply(this,arguments),i=null}),null,1),i.start())}}const Sa="ttb",Ea={marginRight:["marginBottom","marginLeft"],autoWidth:["autoHeight"],fixedWidth:["fixedHeight"],paddingLeft:["paddingTop","paddingRight"],paddingRight:["paddingBottom","paddingLeft"],width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:["ArrowUp","ArrowRight"],ArrowRight:["ArrowDown","ArrowLeft"]};function xa(e,t,i){return{resolve:function(e,t){const{direction:n}=i;return Ea[e]["rtl"!==n||t?n===Sa?0:-1:1]||e},orient:function(e){return e*("rtl"===i.direction?1:-1)}}}const Ca=Zo,ka=`${Zo}__slider`,Pa=`${Zo}__track`,Aa=`${Zo}__list`,Ia=`${Zo}__slide`,La=`${Ia}--clone`,Da=`${Ia}__container`,Oa=`${Zo}__arrows`,Ra=`${Zo}__arrow`,Ma=`${Ra}--prev`,Na=`${Ra}--next`,Ba=`${Zo}__pagination`,Fa=`${Zo}__progress`,Ua=`${Fa}__bar`,$a=`${Zo}__autoplay`,Ha=`${Zo}__play`,ja=`${Zo}__pause`,za="is-active",qa="is-prev",Va="is-next",Wa="is-visible",Ga="is-loading",Ya=[za,Wa,qa,Va,Ga],Xa={slide:Ia,clone:La,arrows:Oa,arrow:Ra,prev:Ma,next:Na,pagination:Ba,page:`${Ba}__page`,spinner:`${Zo}__spinner`};const Ka="role",Qa="aria-controls",Za="aria-current",Ja="aria-label",el="aria-hidden",tl="tabindex",il="aria-orientation",nl=[Ka,Qa,Za,Ja,el,il,tl,"disabled"],rl="slide",ol="loop",sl="fade";function al(e,t,i,n){const{on:r,emit:o,bind:s,destroy:a}=_a(e),{Components:l,root:u,options:c}=e,{isNavigation:h,updateOnMove:d}=c,{resolve:p}=l.Direction,f=As(n,"style"),g=i>-1,m=_s(n,`.${Da}`),v=c.focusableNodes&&Ns(n,c.focusableNodes);let y;function b(){const r=g?i:t,o=Qs(c.i18n.slideX,r+1),s=e.splides.map((e=>e.splide.root.id)).join(" ");xs(n,Ja,o),xs(n,Qa,s),xs(n,Ka,"menuitem"),T(S())}function _(){y||w()}function w(){if(!y){const{index:i}=e;T(S()),function(e){const t=!e&&(!S()||g);xs(n,el,t||null),xs(n,tl,!t&&c.slideFocus?0:null),v&&v.forEach((e=>{xs(e,tl,t?-1:null)}));e!==Is(n,Wa)&&(fs(n,Wa,e),o(e?aa:la,E))}(function(){if(e.is(sl))return S();const t=Ls(l.Elements.track),i=Ls(n),r=p("left"),o=p("right");return Vs(t[r])<=Ws(i[r])&&Vs(i[o])<=Ws(t[o])}()),fs(n,qa,t===i-1),fs(n,Va,t===i+1)}}function T(e){e!==Is(n,za)&&(fs(n,za,e),h&&xs(n,Za,e||null),o(e?"active":"inactive",E))}function S(){const{index:n}=e;return n===t||c.cloneStatus&&n===i}const E={index:t,slideIndex:i,slide:n,container:m,isClone:g,mount:function(){g||(n.id=`${u.id}-slide${Zs(t+1)}`),s(n,"click keydown",(e=>{o("click"===e.type?sa:ua,E,e)})),r([ca,fa,oa,ra,ma],w),r(ya,b),d&&r(na,_)},destroy:function(){y=!0,a(),Bs(n,Ya),Es(n,nl),xs(n,"style",f)},update:w,style:function(e,t,i){ks(i&&m||n,e,t)},isWithin:function(i,n){let r=Gs(i-t);return g||!c.rewind&&!e.is(ol)||(r=zs(r,e.length-r)),r<=n}};return E}const ll="http://www.w3.org/2000/svg",ul="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z";const cl=`${Jo}-interval`;const hl={passive:!1,capture:!0},dl="touchmove mousemove",pl="touchend touchcancel mouseup";const fl=["Left","Right","Up","Down"],gl="keydown";const ml=`${Jo}-lazy`,vl=`${ml}-srcset`,yl=`[${ml}], [${vl}]`;const bl=[" ","Enter","Spacebar"];var _l=Object.freeze({__proto__:null,Options:function(e,t,i){const n=Ta(l);let r,o,s;function a(e){e&&removeEventListener("resize",n)}function l(){const t=(n=e=>e[1].matches,ps(o).filter(n)[0]||[]);var n;t[0]!==s&&function(t){const n=i.breakpoints[t]||r;n.destroy?(e.options=r,e.destroy("completely"===n.destroy)):(e.state.is(5)&&(a(!0),e.mount()),e.options=n)}(s=t[0])}return{setup:function(){try{Ss(i,JSON.parse(As(e.root,Jo)))}catch(e){Us(!1,e.message)}r=Ss({},i);const{breakpoints:t}=i;if(t){const e="min"===i.mediaQuery;o=Object.keys(t).sort(((t,i)=>e?+i-+t:+t-+i)).map((t=>[t,matchMedia(`(${e?"min":"max"}-width:${t}px)`)])),l()}},mount:function(){o&&addEventListener("resize",n)},destroy:a}},Direction:xa,Elements:function(e,t,i){const{on:n}=_a(e),{root:r}=e,o={},s=[];let a,l,u,c;function h(){!function(){l=_s(r,`.${ka}`),u=Ms(r,`.${Pa}`),c=_s(u,`.${Aa}`),Us(u&&c,"A track/list element is missing."),hs(s,bs(c,`.${Ia}:not(.${La})`));const e=g(`.${$a}`),t=g(`.${Oa}`);Ts(o,{root:r,slider:l,track:u,list:c,slides:s,arrows:t,autoplay:e,prev:Ms(t,`.${Ma}`),next:Ms(t,`.${Na}`),bar:Ms(g(`.${Fa}`),`.${Ua}`),play:Ms(e,`.${Ha}`),pause:Ms(e,`.${ja}`)})}(),function(){const e=r.id||ea(Zo);r.id=e,u.id=u.id||`${e}-track`,c.id=c.id||`${e}-list`}(),gs(r,a=m())}function d(){[r,u,c].forEach((e=>{Es(e,"style")})),ts(s),Bs(r,a)}function p(){d(),h()}function f(){Bs(r,a),gs(r,a=m())}function g(e){return _s(r,e)||_s(l,e)}function m(){return[`${Ca}--${i.type}`,`${Ca}--${i.direction}`,i.drag&&`${Ca}--draggable`,i.isNavigation&&`${Ca}--nav`,za]}return Ts(o,{setup:h,mount:function(){n(ca,p,8),n(ha,f)},destroy:d})},Slides:function(e,t,i){const{on:n,emit:r,bind:o}=_a(e),{slides:s,list:a}=t.Elements,l=[];function u(){s.forEach(((e,t)=>{d(e,t,-1)}))}function c(){f((e=>{e.destroy()})),ts(l)}function h(){c(),u()}function d(t,i,n){const r=al(e,i,n,t);r.mount(),l.push(r)}function p(e){return e?g((e=>!e.isClone)):l}function f(e,t){p(t).forEach(e)}function g(e){return l.filter("function"==typeof e?e:t=>rs(e)?ys(t.slide,e):cs(ls(e),t.index))}return{mount:function(){u(),n(ca,h),n([ta,ca],(()=>{l.sort(((e,t)=>e.index-t.index))}))},destroy:c,update:function(){f((e=>{e.update()}))},register:d,get:p,getIn:function(e){const{Controller:n}=t,r=n.toIndex(e),o=n.hasFocus()?1:i.perPage;return g((e=>Ys(e.index,r,r+o-1)))},getAt:function(e){return g(e)[0]},add:function(e,t){us(e,(e=>{if(rs(e)&&(e=Os(e)),as(e)){const n=s[t];n?vs(e,n):ms(a,e),gs(e,i.classes.slide),function(e,t){const i=Ns(e,"img");let{length:n}=i;n?i.forEach((e=>{o(e,"load error",(()=>{--n||t()}))})):t()}(e,r.bind(null,da))}})),r(ca)},remove:function(e){Ds(g(e).map((e=>e.slide))),r(ca)},forEach:f,filter:g,style:function(e,t,i){f((n=>{n.style(e,t,i)}))},getLength:function(e){return e?s.length:l.length},isEnough:function(){return l.length>i.perPage}}},Layout:function(e,t,i){const{on:n,bind:r,emit:o}=_a(e),{Slides:s}=t,{resolve:a}=t.Direction,{root:l,track:u,list:c}=t.Elements,{getAt:h}=s;let d,p;function f(){p=null,d=i.direction===Sa,ks(l,"maxWidth",Fs(i.width)),ks(u,a("paddingLeft"),m(!1)),ks(u,a("paddingRight"),m(!0)),g()}function g(){const e=Ls(l);p&&p.width===e.width&&p.height===e.height||(ks(u,"height",function(){let e="";d&&(e=v(),Us(e,"height or heightRatio is missing."),e=`calc(${e} - ${m(!1)} - ${m(!0)})`);return e}()),s.style(a("marginRight"),Fs(i.gap)),s.style("width",(i.autoWidth?"":Fs(i.fixedWidth)||(d?"":y()))||null),s.style("height",Fs(i.fixedHeight)||(d?i.autoHeight?"":y():v())||null,!0),p=e,o(pa))}function m(e){const{padding:t}=i,n=a(e?"right":"left");return t&&Fs(t[n]||(is(t)?0:t))||"0px"}function v(){return Fs(i.height||Ls(c).width*i.heightRatio)}function y(){const e=Fs(i.gap);return`calc((100%${e&&` + ${e}`})/${i.perPage||1}${e&&` - ${e}`})`}function b(e,t){const i=h(e);if(i){const e=Ls(i.slide)[a("right")],n=Ls(c)[a("left")];return Gs(e-n)+(t?0:_())}return 0}function _(){const e=h(0);return e&&parseFloat(ks(e.slide,a("marginRight")))||0}return{mount:function(){f(),r(window,"resize load",Ta(o.bind(this,da))),n([ha,ca],f),n(da,g)},listSize:function(){return Ls(c)[a("width")]},slideSize:function(e,t){const i=h(e||0);return i?Ls(i.slide)[a("width")]+(t?0:_()):0},sliderSize:function(){return b(e.length-1,!0)-b(-1,!0)},totalSize:b,getPadding:function(e){return parseFloat(ks(u,a("padding"+(e?"Right":"Left"))))||0}}},Clones:function(e,t,i){const{on:n,emit:r}=_a(e),{Elements:o,Slides:s}=t,{resolve:a}=t.Direction,l=[];let u;function c(){(u=f())&&(!function(t){const n=s.get().slice(),{length:r}=n;if(r){for(;n.length<t;)hs(n,n);hs(n.slice(-t),n.slice(0,t)).forEach(((a,u)=>{const c=u<t,h=function(t,n){const r=t.cloneNode(!0);return gs(r,i.classes.clone),r.id=`${e.root.id}-clone${Zs(n+1)}`,r}(a.slide,u);c?vs(h,n[0].slide):ms(o.list,h),hs(l,h),s.register(h,u-t+(c?0:r),a.index)}))}}(u),r(da))}function h(){Ds(l),ts(l)}function d(){h(),c()}function p(){u<f()&&r(ca)}function f(){let{clones:t}=i;if(e.is(ol)){if(!t){const n=function(e,t){if(rs(t)){const i=Cs("div",{style:`width: ${t}; position: absolute;`},e);t=Ls(i).width,Ds(i)}return t}(o.list,i[a("fixedWidth")]);t=(n&&Ws(Ls(o.track)[a("width")]/n)||i[a("autoWidth")]&&e.length||i.perPage)*(i.drag?(i.flickMaxPages||1)+1:2)}}else t=0;return t}return{mount:function(){c(),n(ca,d),n([ha,da],p)},destroy:h}},Move:function(e,t,i){const{on:n,emit:r}=_a(e),{slideSize:o,getPadding:s,totalSize:a,listSize:l,sliderSize:u}=t.Layout,{resolve:c,orient:h}=t.Direction,{list:d,track:p}=t.Elements;let f;function g(){T()||(t.Scroll.cancel(),m(e.index),r(fa))}function m(e){v(b(e,!0))}function v(t,i){if(!e.is(sl)){const n=i?t:function(t){if(e.is(ol)){const e=h(t-_()),i=S(!1,t)&&e<0,n=S(!0,t)&&e>0;(i||n)&&(t=y(t,n))}return t}(t);d.style.transform=`translate${c("X")}(${n}px)`,t!==n&&r(oa)}}function y(e,t){const i=e-w(t),n=u();return e-=h(n*(Ws(Gs(i)/n)||1))*(t?1:-1)}function b(t,n){const r=h(a(t-1)-function(e){const{focus:t}=i;return"center"===t?(l()-o(e,!0))/2:+t*o(e)||0}(t));return n?function(t){i.trimSpace&&e.is(rl)&&(t=Xs(t,0,h(u()-l())));return t}(r):r}function _(){const e=c("left");return Ls(d)[e]-Ls(p)[e]+h(s(!1))}function w(e){return b(e?t.Controller.getEnd():0,!!i.trimSpace)}function T(){return e.state.is(4)&&i.waitForTransition}function S(e,t){t=os(t)?_():t;const i=!0!==e&&h(t)<h(w(!1)),n=!1!==e&&h(t)>h(w(!0));return i||n}return{mount:function(){f=t.Transition,n([ta,pa,ha,ca],g)},destroy:function(){Es(d,"style")},move:function(n,o,s,a){if(!T()){const{set:l}=e.state,u=_();n!==o&&(f.cancel(),v(y(u,n>o),!0)),l(4),r(na,o,s,n),f.start(o,(()=>{l(3),r(ra,o,s,n),"move"===i.trimSpace&&n!==s&&u===_()?t.Controller.go(n>s?">":"<",!1,a):a&&a()}))}},jump:m,translate:v,shift:y,cancel:function(){v(_()),f.cancel()},toIndex:function(e){const i=t.Slides.get();let n=0,r=1/0;for(let t=0;t<i.length;t++){const o=i[t].index,s=Gs(b(o,!0)-e);if(!(s<=r))break;r=s,n=o}return n},toPosition:b,getPosition:_,getLimit:w,isBusy:T,exceededLimit:S}},Controller:function(e,t,i){const{on:n}=_a(e),{Move:r}=t,{getPosition:o,getLimit:s}=r,{isEnough:a,getLength:l}=t.Slides,u=e.is(ol),c=e.is(rl);let h,d,p,f=i.start||0,g=f;function m(){h=l(!0),d=i.perMove,p=i.perPage,f=Xs(f,0,h-1)}function v(e,i,n,o,s){const a=i?e:C(e);t.Scroll.scroll(i||n?r.toPosition(a,!0):e,o,(()=>{k(r.toIndex(r.getPosition())),s&&s()}))}function y(e){return _(!1,e)}function b(e){return _(!0,e)}function _(e,t){const i=d||(P()?1:p),n=w(f+i*(e?-1:1),f);return-1!==n||!c||(r=o(),a=s(!e),l=1,Gs(r-a)<l)?t?n:S(n):e?0:T();var r,a,l}function w(e,t,n){if(a()){const r=T();e<0||e>r?e=Ys(0,e,t,!0)||Ys(r,t,e,!0)?E(x(e)):u?d||P()?e:e<0?-(h%p||p):h:i.rewind?e<0?r:0:-1:n||e===t||(e=d?e:E(x(t)+(e<t?-1:1)))}else e=-1;return e}function T(){let e=h-p;return(P()||u&&d)&&(e=h-1),qs(e,0)}function S(e){return u?a()?e%h+(e<0?h:0):-1:e}function E(e){return Xs(P()?e:p*e,0,T())}function x(e){return P()||(e=Ys(e,h-p,h-1)?h-1:e,e=Vs(e/p)),e}function C(e){const t=r.toIndex(e);return c?Xs(t,0,T()):t}function k(e){e!==f&&(g=f,f=e)}function P(){return!os(i.focus)||i.isNavigation}return{mount:function(){m(),n([ha,ca],m,9)},go:function(e,t,n){const o=function(e){let t=f;if(rs(e)){const[,i,n]=e.match(/([+\-<>])(\d+)?/)||[];"+"===i||"-"===i?t=w(f+ +`${i}${+n||1}`,f,!0):">"===i?t=n?E(+n):y(!0):"<"===i&&(t=b(!0))}else t=u?e:Xs(e,0,T());return t}(e);if(i.useScroll)v(o,!0,!0,i.speed,n);else{const e=S(o);e>-1&&!r.isBusy()&&(t||e!==f)&&(k(e),r.move(o,e,g,n))}},scroll:v,getNext:y,getPrev:b,getAdjacent:_,getEnd:T,setIndex:k,getIndex:function(e){return e?g:f},toIndex:E,toPage:x,toDest:C,hasFocus:P}},Arrows:function(e,t,i){const{on:n,bind:r,emit:o}=_a(e),{classes:s,i18n:a}=i,{Elements:l,Controller:u}=t;let c,h=l.arrows,d=l.prev,p=l.next;const f={};function g(){if(i.arrows&&(d&&p||(h=Cs("div",s.arrows),d=m(!0),p=m(!1),c=!0,ms(h,[d,p]),vs(h,_s("slider"===i.arrows&&l.slider||e.root)))),d&&p)if(f.prev)Ps(h,!1===i.arrows?"none":"");else{const{id:e}=l.track;xs(d,Qa,e),xs(p,Qa,e),f.prev=d,f.next=p,function(){const{go:e}=u;n([ta,ra,ha,ca,ma],v),r(p,"click",(()=>{e(">",!0)})),r(d,"click",(()=>{e("<",!0)}))}(),o("arrows:mounted",d,p)}}function m(e){return Os(`<button class="${s.arrow} ${e?s.prev:s.next}" type="button"><svg xmlns="${ll}" viewBox="0 0 40 40" width="40" height="40"><path d="${i.arrowPath||ul}" />`)}function v(){const t=e.index,i=u.getPrev(),n=u.getNext(),r=i>-1&&t<i?a.last:a.prev,s=n>-1&&t>n?a.first:a.next;d.disabled=i<0,p.disabled=n<0,xs(d,Ja,r),xs(p,Ja,s),o("arrows:updated",d,p,i,n)}return{arrows:f,mount:function(){g(),n(ha,g)},destroy:function(){c?Ds(h):(Es(d,nl),Es(p,nl))}}},Autoplay:function(e,t,i){const{on:n,bind:r,emit:o}=_a(e),s=wa(i.interval,e.go.bind(e,">"),(function(e){const{bar:t}=l;t&&ks(t,"width",100*e+"%"),o("autoplay:playing",e)})),{isPaused:a}=s,{Elements:l}=t;let u,c,h;function d(e){const t=e?"pause":"play",n=l[t];n&&(xs(n,Qa,l.track.id),xs(n,Ja,i.i18n[t]),r(n,"click",e?f:p))}function p(){a()&&t.Slides.isEnough()&&(s.start(!i.resetProgress),c=u=h=!1,o("autoplay:play"))}function f(e=!0){a()||(s.pause(),o("autoplay:pause")),h=e}function g(){h||(u||c?f(!1):p())}function m(){const n=t.Slides.getAt(e.index);s.set(n&&+As(n.slide,cl)||i.interval)}return{mount:function(){const{autoplay:e}=i;e&&(d(!0),d(!1),function(){const{root:e}=l;i.pauseOnHover&&r(e,"mouseenter mouseleave",(e=>{u="mouseenter"===e.type,g()}));i.pauseOnFocus&&r(e,"focusin focusout",(e=>{c="focusin"===e.type,g()}));n([na,ga,ca],s.rewind),n(na,m)}(),"pause"!==e&&p())},destroy:s.cancel,play:p,pause:f,isPaused:a}},Cover:function(e,t,i){const{on:n}=_a(e);function r(e){t.Slides.forEach((t=>{const i=_s(t.container||t.slide,"img");i&&i.src&&o(e,i,t)}))}function o(e,t,i){i.style("background",e?`center/cover no-repeat url("${t.src}")`:"",!0),Ps(t,e?"none":"")}return{mount:function(){i.cover&&(n(ba,((e,t)=>{o(!0,e,t)})),n([ta,ha,ca],r.bind(null,!0)))},destroy:function(){r(!1)}}},Scroll:function(e,t,i){const{on:n,emit:r}=_a(e),{Move:o}=t,{getPosition:s,getLimit:a,exceededLimit:l}=o;let u,c;function h(t,n,f,g){const m=s();let v=1;var y;n=n||(y=Gs(t-m),qs(y/1.5,800)),c=f,p(),u=wa(n,d,(n=>{const r=s(),u=(m+(t-m)*function(e){const{easingFunc:t}=i;return t?t(e):1-Math.pow(1-e,4)}(n)-s())*v;var c;o.translate(r+u),e.is(rl)&&!g&&l()&&(v*=.6,Gs(u)<10&&(c=l(!1),h(a(!c),600,null,!0)))}),1),r(ga),u.start()}function d(){const t=s(),i=o.toIndex(t);Ys(i,0,e.length-1)||o.translate(o.shift(t,i>0),!0),c&&c(),r(ma)}function p(){u&&u.cancel()}function f(){u&&!u.isPaused()&&(p(),d())}return{mount:function(){n(na,p),n([ha,ca],f)},destroy:p,scroll:h,cancel:f}},Drag:function(e,t,i){const{on:n,emit:r,bind:o,unbind:s}=_a(e),{Move:a,Scroll:l,Controller:u}=t,{track:c}=t.Elements,{resolve:h,orient:d}=t.Direction,{getPosition:p,exceededLimit:f}=a;let g,m,v,y,b,_,w,T,S,E=!1;function x(){const{drag:e}=i;M(!e),b="free"===e}function C(e){if(!T){const{noDrag:t}=i,n=R(e),r=!t||!ys(e.target,t);w=!1,!r||!n&&e.button||(a.isBusy()?Rs(e,!0):(S=n?c:window,v=null,y=null,o(S,dl,k,hl),o(S,pl,P,hl),a.cancel(),l.cancel(),A(e)))}}function k(t){if(y||r("drag"),y=t,t.cancelable){const n=D(t)-D(m);if(_){a.translate(g+function(t){return t/(E&&e.is(rl)?5:1)}(n));const i=O(t)-O(m)>200,o=E!==(E=f());(i||o)&&A(t),r("dragging"),w=!0,Rs(t)}else{let{dragMinThreshold:e}=i;e=is(e)?e:{mouse:0,touch:+e||10},_=Gs(n)>(R(t)?e.touch:e.mouse),L()&&Rs(t)}}}function P(n){s(S,dl,k),s(S,pl,P);const{index:o}=e;if(y){if(_||n.cancelable&&L()){const r=function(t){if(e.is(ol)||!E){const e=m===y&&v||m,i=D(y)-D(e),n=O(t)-O(e),r=O(t)-O(y)<200;if(n&&r)return i/n}return 0}(n),s=function(e){return p()+Ks(e)*zs(Gs(e)*(i.flickPower||600),b?1/0:t.Layout.listSize()*(i.flickMaxPages||1))}(r);b?u.scroll(s):e.is(sl)?u.go(o+d(Ks(r))):u.go(u.toDest(s),!0),Rs(n)}r("dragged")}else b||p()===a.toPosition(o)||u.go(o,!0);_=!1}function A(e){v=m,m=e,g=p()}function I(e){!T&&w&&Rs(e,!0)}function L(){return Gs(D(y)-D(m))>Gs(D(y,!0)-D(m,!0))}function D(e,t){return(R(e)?e.touches[0]:e)[`page${h(t?"Y":"X")}`]}function O(e){return e.timeStamp}function R(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function M(e){T=e}return{mount:function(){o(c,dl,Hs,hl),o(c,pl,Hs,hl),o(c,"touchstart mousedown",C,hl),o(c,"click",I,{capture:!0}),o(c,"dragstart",Rs),n([ta,ha],x)},disable:M,isDragging:function(){return _}}},Keyboard:function(e,t,i){const{on:n,bind:r,unbind:o}=_a(e),{root:s}=e,{resolve:a}=t.Direction;let l,u;function c(){const{keyboard:e}=i;e&&("focused"===e?(l=s,xs(s,tl,0)):l=window,r(l,gl,f))}function h(){o(l,gl),as(l)&&Es(l,tl)}function d(){const e=u;u=!0,$s((()=>{u=e}))}function p(){h(),c()}function f(t){if(!u){const{key:i}=t,n=cs(fl,i)?`Arrow${i}`:i;n===a("ArrowLeft")?e.go("<"):n===a("ArrowRight")&&e.go(">")}}return{mount:function(){c(),n(ha,p),n(na,d)},destroy:h,disable:function(e){u=e}}},LazyLoad:function(e,t,i){const{on:n,off:r,bind:o,emit:s}=_a(e),a="sequential"===i.lazyLoad;let l=[],u=0;function c(){d(),h()}function h(){t.Slides.forEach((e=>{Ns(e.slide,yl).forEach((t=>{const n=As(t,ml),r=As(t,vl);if(n!==t.src||r!==t.srcset){const o=i.classes.spinner,s=t.parentElement,a=_s(s,`.${o}`)||Cs("span",o,s);xs(a,Ka,"presentation"),l.push({_img:t,_Slide:e,src:n,srcset:r,_spinner:a}),!t.src&&Ps(t,"none")}}))})),a&&g()}function d(){u=0,l=[]}function p(){l=l.filter((t=>{const n=i.perPage*((i.preloadPages||1)+1)-1;return!t._Slide.isWithin(e.index,n)||f(t)})),l.length||r(ra)}function f(e){const{_img:t}=e;gs(e._Slide.slide,Ga),o(t,"load error",(t=>{!function(e,t){const{_Slide:i}=e;Bs(i.slide,Ga),t||(Ds(e._spinner),Ps(e._img,""),s(ba,e._img,i),s(da));a&&g()}(e,"error"===t.type)})),["srcset","src"].forEach((i=>{e[i]&&(xs(t,i,e[i]),Es(t,"src"===i?ml:vl))}))}function g(){u<l.length&&f(l[u++])}return{mount:function(){i.lazyLoad&&(h(),n(ca,c),a||n([ta,ca,ra,ma],p))},destroy:d}},Pagination:function(e,t,i){const{on:n,emit:r,bind:o,unbind:s}=_a(e),{Slides:a,Elements:l,Controller:u}=t,{hasFocus:c,getIndex:h}=u,d=[];let p;function f(){g(),i.pagination&&a.isEnough()&&(!function(){const{length:t}=e,{classes:n,i18n:r,perPage:s}=i,u="slider"===i.pagination&&l.slider||l.root,h=c()?t:Ws(t/s);p=Cs("ul",n.pagination,u);for(let e=0;e<h;e++){const t=Cs("li",null,p),i=Cs("button",{class:n.page,type:"button"},t),l=a.getIn(e).map((e=>e.slide.id)),u=!c()&&s>1?r.pageX:r.slideX;o(i,"click",m.bind(null,e)),xs(i,Qa,l.join(" ")),xs(i,Ja,Qs(u,e+1)),d.push({li:t,button:i,page:e})}}(),r("pagination:mounted",{list:p,items:d},v(e.index)),y())}function g(){p&&(Ds(p),d.forEach((e=>{s(e.button,"click")})),ts(d),p=null)}function m(e){u.go(`>${e}`,!0,(()=>{const t=a.getAt(u.toIndex(e));var i;t&&((i=t.slide).setActive&&i.setActive()||i.focus({preventScroll:!0}))}))}function v(e){return d[u.toPage(e)]}function y(){const e=v(h(!0)),t=v(h());e&&(Bs(e.button,za),Es(e.button,Za)),t&&(gs(t.button,za),xs(t.button,Za,!0)),r("pagination:updated",{list:p,items:d},e,t)}return{items:d,mount:function(){f(),n([ha,ca],f),n([na,ma],y)},destroy:g,getAt:v,update:y}},Sync:function(e,t,i){const{list:n}=t.Elements,r=[];function o(){e.splides.forEach((t=>{var i;!t.isParent&&(i=t.splide,[e,i].forEach((t=>{const n=_a(t),o=t===e?i:e;n.on(na,((e,t,i)=>{o.go(o.is(ol)?i:e)})),r.push(n)})))})),i.isNavigation&&function(){const t=_a(e),{on:i}=t;i(sa,l),i(ua,u),i([ta,ha],a),xs(n,Ka,"menu"),r.push(t),t.emit(ya,e.splides)}()}function s(){Es(n,nl),r.forEach((e=>{e.destroy()})),ts(r)}function a(){xs(n,il,i.direction!==Sa?"horizontal":null)}function l(t){e.go(t.index)}function u(e,t){cs(bl,t.key)&&(l(e),Rs(t))}return{mount:o,destroy:s,remount:function(){s(),o()}}},Wheel:function(e,t,i){const{bind:n}=_a(e);function r(n){if(n.cancelable){const{deltaY:r}=n;if(r){const o=r<0;e.go(o?"<":">"),function(n){return!i.releaseWheel||e.state.is(4)||-1!==t.Controller.getAdjacent(n)}(o)&&Rs(n)}}}return{mount:function(){i.wheel&&n(t.Elements.track,"wheel",r,hl)}}}});const wl={type:"slide",speed:400,waitForTransition:!0,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,keyboard:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",slideFocus:!0,trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",classes:Xa,i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay"}};function Tl(e,t,i){const{on:n}=_a(e);return{mount:function(){n([ta,ca],(()=>{$s((()=>{t.Slides.style("transition",`opacity ${i.speed}ms ${i.easing}`)}))}))},start:function(e,i){const{track:n}=t.Elements;ks(n,"height",Fs(Ls(n).height)),$s((()=>{i(),ks(n,"height","")}))},cancel:Hs}}function Sl(e,t,i){const{bind:n}=_a(e),{Move:r,Controller:o}=t,{list:s}=t.Elements;let a;function l(){u("")}function u(e){ks(s,"transition",e)}return{mount:function(){n(s,"transitionend",(e=>{e.target===s&&a&&(l(),a())}))},start:function(t,n){const s=r.toPosition(t,!0),l=r.getPosition(),c=function(t){const{rewindSpeed:n}=i;if(e.is(rl)&&n){const e=o.getIndex(!0),i=o.getEnd();if(0===e&&t>=i||e>=i&&0===t)return n}return i.speed}(t);Gs(s-l)>=1&&c>=1?(u(`transform ${c}ms ${i.easing}`),r.translate(s,!0),a=n):(r.jump(t),n())},cancel:l}}const El=class{constructor(e,t){this.event=function(){let e={};function t(t,n){i(t,((t,i)=>{const r=e[t];e[t]=r&&r.filter((e=>e._key?e._key!==n:n||e._namespace!==i))}))}function i(e,t){ls(e).join(" ").split(" ").forEach((e=>{const i=e.split(".");t(i[0],i[1])}))}return{on:function(t,n,r,o=10){i(t,((t,i)=>{e[t]=e[t]||[],hs(e[t],{_event:t,_callback:n,_namespace:i,_priority:o,_key:r}).sort(((e,t)=>e._priority-t._priority))}))},off:t,offBy:function(i){ws(e,((e,n)=>{t(n,i)}))},emit:function(t){(e[t]||[]).forEach((e=>{e._callback.apply(e,ps(arguments,1))}))},destroy:function(){e={}}}}(),this.Components={},this.state=function(e){let t=e;return{set:function(e){t=e},is:function(e){return cs(ls(e),t)}}}(1),this.splides=[],this._options={},this._Extensions={};const i=rs(e)?Ms(document,e):e;Us(i,`${i} is invalid.`),this.root=i,Ss(wl,El.defaults),Ss(Ss(this._options,wl),t||{})}mount(e,t){const{state:i,Components:n}=this;Us(i.is([1,5]),"Already mounted!"),i.set(1),this._Components=n,this._Transition=t||this._Transition||(this.is(sl)?Tl:Sl),this._Extensions=e||this._Extensions;return ws(Ts({},_l,this._Extensions,{Transition:this._Transition}),((e,t)=>{const i=e(this,n,this._options);n[t]=i,i.setup&&i.setup()})),ws(n,(e=>{e.mount&&e.mount()})),this.emit(ta),gs(this.root,"is-initialized"),i.set(3),this.emit(ia),this}sync(e){return this.splides.push({splide:e}),e.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._Components.Sync.remount(),e.Components.Sync.remount()),this}go(e){return this._Components.Controller.go(e),this}on(e,t){return this.event.on(e,t,null,20),this}off(e){return this.event.off(e),this}emit(e){return this.event.emit(e,...ps(arguments,1)),this}add(e,t){return this._Components.Slides.add(e,t),this}remove(e){return this._Components.Slides.remove(e),this}is(e){return this._options.type===e}refresh(){return this.emit(ca),this}destroy(e=!0){const{event:t,state:i}=this;return i.is(1)?t.on(ia,this.destroy.bind(this,e),this):(ws(this._Components,(t=>{t.destroy&&t.destroy(e)}),!0),t.emit(va),t.destroy(),e&&ts(this.splides),i.set(5)),this}get options(){return this._options}set options(e){const{_options:t}=this;Ss(t,e),this.state.is(1)||this.emit(ha,t)}get length(){return this._Components.Slides.getLength(!0)}get index(){return this._Components.Controller.getIndex()}};let xl=El;xl.defaults={},xl.STATES=es;const Cl=(0,s.createBehavior)("CarouselThumbnail",{initCarousel:function(){this.$thumbsCarousel.mount(),this.$mainCarousel.sync(this.$thumbsCarousel).mount()},destroyCarousel:function(){this.$carousel&&(this.$thumbsCarousel.destroy(!0),this.$mainCarousel.destroy(!0))}},{init:function(){this.$main=this.getChild("main"),this.$thumbs=this.getChild("thumbs"),this.$thumbsCarousel=new xl(this.$thumbs,{fixedWidth:96,height:96,gap:24,cover:!1,isNavigation:!0,pagination:!1,arrows:!1,trimSpace:!0,breakpoints:{768:{fixedWidth:96,height:96,gap:16}}}),this.$mainCarousel=new xl(this.$main,{type:"fade",pagination:!1,arrows:!1,cover:!0}),this.initCarousel(),this.$mainCarousel.on("move",(function(e){document.dispatchEvent(new CustomEvent("artwork-viewer:update",{detail:{index:e}}))}))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.destroyCarousel()}});const kl=(0,s.createBehavior)("CheckboxLink",{toggle:function(){this.isChecked=!this.isChecked,this.$node.classList.toggle("checkbox-link--checked",this.isChecked)}},{init:function(){this.isChecked=this.$node.classList.contains("checkbox-link--checked"),this.$node.addEventListener("click",this.toggle,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$node.removeEventListener("click",this.toggle)}});var Pl=(0,s.createBehavior)("CheckboxToggle",{toggleElements:function(){var e=this;this.$hideElements.forEach((function(t){t.classList.toggle("force-hidden",e.$checkbox.checked)})),this.$showElements.forEach((function(t){t.classList.toggle("force-hidden",!e.$checkbox.checked)})),this.$requiredElements.forEach((function(t){e.$checkbox.checked?e.setRequired(t):e.setOptional(t)})),this.$optionalElements.forEach((function(t){e.$checkbox.checked?e.setOptional(t):e.setRequired(t)}))},setRequired:function(e){var t=e.querySelector("[data-form-optional-tag]");t&&t.remove()},setOptional:function(e){var t=e.querySelector("label"),i=document.createElement("span");i.classList.add("f-ui-6","text-secondary"),i.setAttribute("data-form-optional-tag",""),i.textContent="(optional)",t&&t.appendChild(i)}},{init:function(){this.$checkbox=this.$node.querySelector('input[type="checkbox"]'),this.$showElements=document.querySelectorAll("[data-checkboxtoggle-show]"),this.$hideElements=document.querySelectorAll("[data-checkboxtoggle-hide]"),this.$requiredElements=document.querySelectorAll("[data-checkboxtoggle-required]"),this.$optionalElements=document.querySelectorAll("[data-checkboxtoggle-optional]"),this.toggleElements(),this.$checkbox.addEventListener("change",this.toggleElements,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$checkbox.removeEventListener("change",this.toggleElements)}});const Al=Pl;const Il=(0,s.createBehavior)("DateInput",{handleNewDateSelect:function(e){""!==e.detail?(document.dispatchEvent(new CustomEvent("FilterDropdown:closeAll")),this.updateValue(e.detail)):this.updateValue()},updateValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$field.value=e||"",this.$label.innerText=e?this.formatValue(e):this.defaultLabel},formatValue:function(e){return new String(e).replace("|"," to ")}},{init:function(){this.$field=this.getChild("field"),this.$picker=this.$node.querySelector("[data-behavior*=FilterDatepicker]"),this.$label=this.$node.querySelector("[data-filterdropdown-trigger] > span"),this.defaultLabel=this.$label.innerText,this.$picker.addEventListener("newDateSelect",this.handleNewDateSelect,!0),this.$field.value&&this.updateValue(this.$field.value)},destroy:function(){this.$picker.removeEventListener("newDateSelect",this.handleNewDateSelect)}});const Ll=(0,s.createBehavior)("Discount",{showDiscountInput:function(e){e&&e.preventDefault(),this.$form.classList.remove("hidden"),this.$addBtn.classList.add("hidden")},hideDiscountInput:function(e){e.preventDefault(),this.$form.classList.add("hidden"),this.$addBtn.classList.remove("hidden")}},{init:function(){var e;(this.$addBtn=this.getChild("addBtn"),this.$removeBtn=this.getChild("removeBtn"),this.$form=this.getChild("form"),this.$inputWrapper=this.getChild("input"),this.$inputWrapper)&&(this.$input=this.$inputWrapper.querySelector("input"),null!==(e=this.$input)&&void 0!==e&&e.value&&this.showDiscountInput(),this.$addBtn.addEventListener("click",this.showDiscountInput,!1),this.$removeBtn.addEventListener("click",this.hideDiscountInput,!1))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$addBtn.removeEventListener("click",this.showDiscountInput),this.$removeBtn.removeEventListener("click",this.hideDiscountInput)}});var Dl=(0,s.createBehavior)("Donation",{handleRadioSelect:function(e,t){e.preventDefault(),e.stopPropagation(),t.checked=!t.checked,this.$inputField.value=""},uncheckRadios:function(){this.$radios.forEach((function(e){e.querySelector("input").checked=!1}))}},{init:function(){var e=this;this.$radios=this.getChildren("radio"),this.$radios.forEach((function(t){var i=t.querySelector("label"),n=t.querySelector("input");i.addEventListener("click",(function(t){e.handleRadioSelect(t,n)}),!1)})),this.$input=this.getChild("input"),this.$input&&(this.$inputField=this.$input.querySelector("input"),this.$inputField.addEventListener("input",this.uncheckRadios,!1))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){}});const Ol=Dl;function Rl(e,t,i){var n;if(e&&i){var r=t.getBoundingClientRect().height,o=i.getBoundingClientRect().height;e.classList.remove("left-0","right-0");var s=e.getBoundingClientRect(),a=[];e.style.top="".concat(r+o-8,"px"),s.right>=window.innerWidth-50?a.push("right-0"):a.push("left-0"),(n=e.classList).add.apply(n,a)}}function Ml(e,t,i,n){return e&&(e.classList.add("button-filter--open"),e.setAttribute("aria-expanded","true")),t&&t.classList.add("trans-show-hide--active"),i&&i.classList.add("z-10"),n&&n.classList.add("rotate-180"),!0}function Nl(e,t,i,n){return e&&(e.classList.remove("button-filter--open"),e.setAttribute("aria-expanded","false")),t&&t.classList.remove("trans-show-hide--active"),n&&n.classList.remove("rotate-180"),i&&i.classList.remove("z-10"),!1}function Bl(e,t){e&&t&&(e.innerText=t)}function Fl(e,t){e&&t&&(t?e.classList.remove("hidden"):e.classList.add("hidden"))}function Ul(e){e.forEach((function(e){e.classList.add("hidden")}))}var $l=(0,s.createBehavior)("Dropdown",{toggle:function(e){e.preventDefault(),e.stopPropagation(),this.isOpen?this.close():this.open()},handleDropdownKeypress:function(e){null!=e&&e.key&&(["Space","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].indexOf(e.code)>-1&&e.preventDefault(),"ArrowDown"===e.key&&this.handleNextListItemHighlight(),"ArrowUp"===e.key&&this.handlePrevListItemHighlight(),"Enter"===e.key&&this.handleItemSelect(),"Escape"===e.key&&this.close())},handleNextListItemHighlight:function(){if(!this.$activeListItem)return this.$activeListItem=this.$listItems[0],void this.$activeListItem.classList.add("bg-primary");this.$activeListItem.classList.remove("bg-primary"),this.$activeListItem=this.getActiveItemIndex()+1<=this.$listItems.length-1?this.$listItems[this.getActiveItemIndex()+1]:this.$listItems[0],this.$activeListItem.classList.add("bg-primary")},handlePrevListItemHighlight:function(){if(!this.$activeListItem)return this.$activeListItem=this.$listItems[this.$listItems.length-1],void this.$activeListItem.classList.add("bg-primary");this.$activeListItem.classList.remove("bg-primary"),this.$activeListItem=this.getActiveItemIndex()-1<0?this.$listItems[this.$listItems.length-1]:this.$listItems[this.getActiveItemIndex()-1],this.$activeListItem.classList.add("bg-primary")},handleItemSelect:function(){var e,t=null===(e=this.$activeListItem)||void 0===e?void 0:e.dataset,i=t.label,n=t.value;this.$activeListItem.click(),this.selectItem(null,i,n)},resetActiveListItem:function(){this.$activeListItem&&(this.$activeListItem.classList.remove("bg-primary"),this.$activeListItem=null)},getActiveItemIndex:function(){return Array.from(this.$listItems).indexOf(this.$activeListItem)},open:function(){document.dispatchEvent(new CustomEvent("dropdown:closeAll")),Rl(this.$list,this.$label,this.$trigger),this.isOpen=Ml(this.$trigger,this.$list,this.$node,this.$icon),document.addEventListener("keydown",this.handleDropdownKeypress,!1)},close:function(e){e&&e.stopPropagation(),this.isOpen&&(this.isOpen=Nl(this.$trigger,this.$list,this.$node,this.$icon),this.$node.dispatchEvent(new CustomEvent("dropdown:close"))),this.resetActiveListItem(),document.removeEventListener("keydown",this.handleDropdownKeypress)},selectItem:function(e,t,i){if(e){var n;e.preventDefault(),e.stopPropagation();var r=null===(n=e.target)||void 0===n?void 0:n.dataset;r.label,r.value}i&&(this.$hiddenSelect.value=i,Bl(this.$triggerLabel,t),Ul(this.$itemSelectItems),Fl(this.findItemToSelect(i),!0)),this.close()},findItemToSelect:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.options.selectedvalue;return this.$itemSelectItems.find((function(t){var i;return(null===(i=t.dataset)||void 0===i?void 0:i.dropdownSelectItem)===e}))},setPrefillState:function(){var e,t=null===(e=this.$hiddenSelect)||void 0===e||null===(e=e.selectedOptions[0])||void 0===e?void 0:e.label;Bl(this.$triggerLabel,t),Fl(this.findItemToSelect(),!0)}},{init:function(){var e,t=this;this.isOpen=!1,this.$label=this.getChild("label"),this.$trigger=this.getChild("trigger"),this.$list=this.getChild("list");var i=this.$trigger.querySelectorAll("svg");this.$icon=i[i.length-1],this.$triggerLabel=this.$trigger.querySelector("span"),this.$hiddenSelect=this.getChild("hidden-select"),this.$itemSelectItems=Array.from(this.getChildren("select-item")),this.$listItems=this.$list.querySelectorAll("li"),this.$activeListItem=null,null!==(e=this.options)&&void 0!==e&&e.selectedvalue&&this.setPrefillState(),this.$trigger.addEventListener("click",this.toggle,!1),Array.from(this.$listItems).forEach((function(e){e.addEventListener("click",t.selectItem)})),document.addEventListener("click",this.close),document.addEventListener("dropdown:closeAll",this.close,!1)},enabled:function(){},resized:function(){Rl(this.$list,this.$label,this.$trigger)},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){document.removeEventListener("dropdown:closeAll",this.close)}});const Hl=$l;function jl(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zl,ql,Vl,Wl,Gl,Yl,Xl,Kl,Ql,Zl,Jl,eu,tu,iu=function(){return zl||"undefined"!=typeof window&&(zl=window.gsap)&&zl.registerPlugin&&zl},nu=1,ru=[],ou=[],su=[],au=Date.now,lu=function(e,t){return t},uu=function(e,t){return~su.indexOf(e)&&su[su.indexOf(e)+1][t]},cu=function(e){return!!~Zl.indexOf(e)},hu=function(e,t,i,n,r){return e.addEventListener(t,i,{passive:!1!==n,capture:!!r})},du=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},pu="scrollLeft",fu="scrollTop",gu=function(){return Jl&&Jl.isPressed||ou.cache++},mu=function(e,t){var i=function i(n){if(n||0===n){nu&&(Vl.history.scrollRestoration="manual");var r=Jl&&Jl.isPressed;n=i.v=Math.round(n)||(Jl&&Jl.iOS?1:0),e(n),i.cacheID=ou.cache,r&&lu("ss",n)}else(t||ou.cache!==i.cacheID||lu("ref"))&&(i.cacheID=ou.cache,i.v=e());return i.v+i.offset};return i.offset=0,e&&i},vu={s:pu,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:mu((function(e){return arguments.length?Vl.scrollTo(e,yu.sc()):Vl.pageXOffset||Wl[pu]||Gl[pu]||Yl[pu]||0}))},yu={s:fu,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:vu,sc:mu((function(e){return arguments.length?Vl.scrollTo(vu.sc(),e):Vl.pageYOffset||Wl[fu]||Gl[fu]||Yl[fu]||0}))},bu=function(e,t){return(t&&t._ctx&&t._ctx.selector||zl.utils.toArray)(e)[0]||("string"==typeof e&&!1!==zl.config().nullTargetWarn?console.warn("Element not found:",e):null)},_u=function(e,t){var i=t.s,n=t.sc;cu(e)&&(e=Wl.scrollingElement||Gl);var r=ou.indexOf(e),o=n===yu.sc?1:2;!~r&&(r=ou.push(e)-1),ou[r+o]||hu(e,"scroll",gu);var s=ou[r+o],a=s||(ou[r+o]=mu(uu(e,i),!0)||(cu(e)?n:mu((function(t){return arguments.length?e[i]=t:e[i]}))));return a.target=e,s||(a.smooth="smooth"===zl.getProperty(e,"scrollBehavior")),a},wu=function(e,t,i){var n=e,r=e,o=au(),s=o,a=t||50,l=Math.max(500,3*a),u=function(e,t){var l=au();t||l-o>a?(r=n,n=e,s=o,o=l):i?n+=e:n=r+(e-r)/(l-s)*(o-s)};return{update:u,reset:function(){r=n=i?0:n,s=o=0},getVelocity:function(e){var t=s,a=r,c=au();return(e||0===e)&&e!==n&&u(e),o===s||c-s>l?0:(n+(i?a:-a))/((i?c:o)-t)*1e3}}},Tu=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Su=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},Eu=function(){var e,t,i,n;(Ql=zl.core.globals().ScrollTrigger)&&Ql.core&&(e=Ql.core,t=e.bridge||{},i=e._scrollers,n=e._proxies,i.push.apply(i,ou),n.push.apply(n,su),ou=i,su=n,lu=function(e,i){return t[e](i)})},xu=function(e){return zl=e||iu(),!ql&&zl&&"undefined"!=typeof document&&document.body&&(Vl=window,Wl=document,Gl=Wl.documentElement,Yl=Wl.body,Zl=[Vl,Wl,Gl,Yl],zl.utils.clamp,tu=zl.core.context||function(){},Kl="onpointerenter"in Yl?"pointer":"mouse",Xl=Cu.isTouch=Vl.matchMedia&&Vl.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Vl||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,eu=Cu.eventTypes=("ontouchstart"in Gl?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Gl?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return nu=0}),500),Eu(),ql=1),ql};vu.op=yu,ou.cache=0;var Cu=function(){function e(e){this.init(e)}var t,i,n;return e.prototype.init=function(e){ql||xu(zl)||console.warn("Please gsap.registerPlugin(Observer)"),Ql||Eu();var t=e.tolerance,i=e.dragMinimum,n=e.type,r=e.target,o=e.lineHeight,s=e.debounce,a=e.preventDefault,l=e.onStop,u=e.onStopDelay,c=e.ignore,h=e.wheelSpeed,d=e.event,p=e.onDragStart,f=e.onDragEnd,g=e.onDrag,m=e.onPress,v=e.onRelease,y=e.onRight,b=e.onLeft,_=e.onUp,w=e.onDown,T=e.onChangeX,S=e.onChangeY,E=e.onChange,x=e.onToggleX,C=e.onToggleY,k=e.onHover,P=e.onHoverEnd,A=e.onMove,I=e.ignoreCheck,L=e.isNormalizer,D=e.onGestureStart,O=e.onGestureEnd,R=e.onWheel,M=e.onEnable,N=e.onDisable,B=e.onClick,F=e.scrollSpeed,U=e.capture,$=e.allowClicks,H=e.lockAxis,j=e.onLockAxis;this.target=r=bu(r)||Gl,this.vars=e,c&&(c=zl.utils.toArray(c)),t=t||1e-9,i=i||0,h=h||1,F=F||1,n=n||"wheel,touch,pointer",s=!1!==s,o||(o=parseFloat(Vl.getComputedStyle(Yl).lineHeight)||22);var z,q,V,W,G,Y,X,K=this,Q=0,Z=0,J=e.passive||!a&&!1!==e.passive,ee=_u(r,vu),te=_u(r,yu),ie=ee(),ne=te(),re=~n.indexOf("touch")&&!~n.indexOf("pointer")&&"pointerdown"===eu[0],oe=cu(r),se=r.ownerDocument||Wl,ae=[0,0,0],le=[0,0,0],ue=0,ce=function(){return ue=au()},he=function(e,t){return(K.event=e)&&c&&~c.indexOf(e.target)||t&&re&&"touch"!==e.pointerType||I&&I(e,t)},de=function(){var e=K.deltaX=Su(ae),i=K.deltaY=Su(le),n=Math.abs(e)>=t,r=Math.abs(i)>=t;E&&(n||r)&&E(K,e,i,ae,le),n&&(y&&K.deltaX>0&&y(K),b&&K.deltaX<0&&b(K),T&&T(K),x&&K.deltaX<0!=Q<0&&x(K),Q=K.deltaX,ae[0]=ae[1]=ae[2]=0),r&&(w&&K.deltaY>0&&w(K),_&&K.deltaY<0&&_(K),S&&S(K),C&&K.deltaY<0!=Z<0&&C(K),Z=K.deltaY,le[0]=le[1]=le[2]=0),(W||V)&&(A&&A(K),V&&(p&&1===V&&p(K),g&&g(K),V=0),W=!1),Y&&!(Y=!1)&&j&&j(K),G&&(R(K),G=!1),z=0},pe=function(e,t,i){ae[i]+=e,le[i]+=t,K._vx.update(e),K._vy.update(t),s?z||(z=requestAnimationFrame(de)):de()},fe=function(e,t){H&&!X&&(K.axis=X=Math.abs(e)>Math.abs(t)?"x":"y",Y=!0),"y"!==X&&(ae[2]+=e,K._vx.update(e,!0)),"x"!==X&&(le[2]+=t,K._vy.update(t,!0)),s?z||(z=requestAnimationFrame(de)):de()},ge=function(e){if(!he(e,1)){var t=(e=Tu(e,a)).clientX,n=e.clientY,r=t-K.x,o=n-K.y,s=K.isDragging;K.x=t,K.y=n,(s||(r||o)&&(Math.abs(K.startX-t)>=i||Math.abs(K.startY-n)>=i))&&(V=s?2:1,s||(K.isDragging=!0),fe(r,o))}},me=K.onPress=function(e){he(e,1)||e&&e.button||(K.axis=X=null,q.pause(),K.isPressed=!0,e=Tu(e),Q=Z=0,K.startX=K.x=e.clientX,K.startY=K.y=e.clientY,K._vx.reset(),K._vy.reset(),hu(L?r:se,eu[1],ge,J,!0),K.deltaX=K.deltaY=0,m&&m(K))},ve=K.onRelease=function(e){if(!he(e,1)){du(L?r:se,eu[1],ge,!0);var t=!isNaN(K.y-K.startY),i=K.isDragging,n=i&&(Math.abs(K.x-K.startX)>3||Math.abs(K.y-K.startY)>3),o=Tu(e);!n&&t&&(K._vx.reset(),K._vy.reset(),a&&$&&zl.delayedCall(.08,(function(){if(au()-ue>300&&!e.defaultPrevented)if(e.target.click)e.target.click();else if(se.createEvent){var t=se.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,Vl,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}}))),K.isDragging=K.isGesturing=K.isPressed=!1,l&&i&&!L&&q.restart(!0),V&&de(),f&&i&&f(K),v&&v(K,n)}},ye=function(e){return e.touches&&e.touches.length>1&&(K.isGesturing=!0)&&D(e,K.isDragging)},be=function(){return(K.isGesturing=!1)||O(K)},_e=function(e){if(!he(e)){var t=ee(),i=te();pe((t-ie)*F,(i-ne)*F,1),ie=t,ne=i,l&&q.restart(!0)}},we=function(e){if(!he(e)){e=Tu(e,a),R&&(G=!0);var t=(1===e.deltaMode?o:2===e.deltaMode?Vl.innerHeight:1)*h;pe(e.deltaX*t,e.deltaY*t,0),l&&!L&&q.restart(!0)}},Te=function(e){if(!he(e)){var t=e.clientX,i=e.clientY,n=t-K.x,r=i-K.y;K.x=t,K.y=i,W=!0,l&&q.restart(!0),(n||r)&&fe(n,r)}},Se=function(e){K.event=e,k(K)},Ee=function(e){K.event=e,P(K)},xe=function(e){return he(e)||Tu(e,a)&&B(K)};q=K._dc=zl.delayedCall(u||.25,(function(){K._vx.reset(),K._vy.reset(),q.pause(),l&&l(K)})).pause(),K.deltaX=K.deltaY=0,K._vx=wu(0,50,!0),K._vy=wu(0,50,!0),K.scrollX=ee,K.scrollY=te,K.isDragging=K.isGesturing=K.isPressed=!1,tu(this),K.enable=function(e){return K.isEnabled||(hu(oe?se:r,"scroll",gu),n.indexOf("scroll")>=0&&hu(oe?se:r,"scroll",_e,J,U),n.indexOf("wheel")>=0&&hu(r,"wheel",we,J,U),(n.indexOf("touch")>=0&&Xl||n.indexOf("pointer")>=0)&&(hu(r,eu[0],me,J,U),hu(se,eu[2],ve),hu(se,eu[3],ve),$&&hu(r,"click",ce,!0,!0),B&&hu(r,"click",xe),D&&hu(se,"gesturestart",ye),O&&hu(se,"gestureend",be),k&&hu(r,Kl+"enter",Se),P&&hu(r,Kl+"leave",Ee),A&&hu(r,Kl+"move",Te)),K.isEnabled=!0,K.isDragging=K.isGesturing=K.isPressed=W=V=!1,K._vx.reset(),K._vy.reset(),ie=ee(),ne=te(),e&&e.type&&me(e),M&&M(K)),K},K.disable=function(){K.isEnabled&&(ru.filter((function(e){return e!==K&&cu(e.target)})).length||du(oe?se:r,"scroll",gu),K.isPressed&&(K._vx.reset(),K._vy.reset(),du(L?r:se,eu[1],ge,!0)),du(oe?se:r,"scroll",_e,U),du(r,"wheel",we,U),du(r,eu[0],me,U),du(se,eu[2],ve),du(se,eu[3],ve),du(r,"click",ce,!0),du(r,"click",xe),du(se,"gesturestart",ye),du(se,"gestureend",be),du(r,Kl+"enter",Se),du(r,Kl+"leave",Ee),du(r,Kl+"move",Te),K.isEnabled=K.isPressed=K.isDragging=!1,N&&N(K))},K.kill=K.revert=function(){K.disable();var e=ru.indexOf(K);e>=0&&ru.splice(e,1),Jl===K&&(Jl=0)},ru.push(K),L&&cu(r)&&(Jl=K),K.enable(d)},t=e,(i=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}])&&jl(t.prototype,i),n&&jl(t,n),e}();Cu.version="3.12.7",Cu.create=function(e){return new Cu(e)},Cu.register=xu,Cu.getAll=function(){return ru.slice()},Cu.getById=function(e){return ru.filter((function(t){return t.vars.id===e}))[0]},iu()&&zl.registerPlugin(Cu);var ku,Pu,Au,Iu,Lu,Du,Ou,Ru,Mu,Nu,Bu,Fu,Uu,$u,Hu,ju,zu,qu,Vu,Wu,Gu,Yu,Xu,Ku,Qu,Zu,Ju,ec,tc,ic,nc,rc,oc,sc,ac,lc,uc,cc,hc=1,dc=Date.now,pc=dc(),fc=0,gc=0,mc=function(e,t,i){var n=Ic(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=n,n?e.substr(6,e.length-7):e},vc=function(e,t){return!t||Ic(e)&&"clamp("===e.substr(0,6)?e:"clamp("+e+")"},yc=function e(){return gc&&requestAnimationFrame(e)},bc=function(){return $u=1},_c=function(){return $u=0},wc=function(e){return e},Tc=function(e){return Math.round(1e5*e)/1e5||0},Sc=function(){return"undefined"!=typeof window},Ec=function(){return ku||Sc()&&(ku=window.gsap)&&ku.registerPlugin&&ku},xc=function(e){return!!~Ou.indexOf(e)},Cc=function(e){return("Height"===e?nc:Au["inner"+e])||Lu["client"+e]||Du["client"+e]},kc=function(e){return uu(e,"getBoundingClientRect")||(xc(e)?function(){return $h.width=Au.innerWidth,$h.height=nc,$h}:function(){return Jc(e)})},Pc=function(e,t){var i=t.s,n=t.d2,r=t.d,o=t.a;return Math.max(0,(i="scroll"+n)&&(o=uu(e,i))?o()-kc(e)()[r]:xc(e)?(Lu[i]||Du[i])-Cc(n):e[i]-e["offset"+n])},Ac=function(e,t){for(var i=0;i<Vu.length;i+=3)(!t||~t.indexOf(Vu[i+1]))&&e(Vu[i],Vu[i+1],Vu[i+2])},Ic=function(e){return"string"==typeof e},Lc=function(e){return"function"==typeof e},Dc=function(e){return"number"==typeof e},Oc=function(e){return"object"==typeof e},Rc=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},Mc=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add((function(){return t(e)})):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},Nc=Math.abs,Bc="left",Fc="right",Uc="bottom",$c="width",Hc="height",jc="Right",zc="Left",qc="Top",Vc="Bottom",Wc="padding",Gc="margin",Yc="Width",Xc="Height",Kc="px",Qc=function(e){return Au.getComputedStyle(e)},Zc=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Jc=function(e,t){var i=t&&"matrix(1, 0, 0, 1, 0, 0)"!==Qc(e)[Hu]&&ku.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=e.getBoundingClientRect();return i&&i.progress(0).kill(),n},eh=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},th=function(e){var t,i=[],n=e.labels,r=e.duration();for(t in n)i.push(n[t]/r);return i},ih=function(e){var t=ku.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort((function(e,t){return e-t}));return i?function(e,n,r){var o;if(void 0===r&&(r=.001),!n)return t(e);if(n>0){for(e-=r,o=0;o<i.length;o++)if(i[o]>=e)return i[o];return i[o-1]}for(o=i.length,e+=r;o--;)if(i[o]<=e)return i[o];return i[0]}:function(i,n,r){void 0===r&&(r=.001);var o=t(i);return!n||Math.abs(o-i)<r||o-i<0==n<0?o:t(n<0?i-e:i+e)}},nh=function(e,t,i,n){return i.split(",").forEach((function(i){return e(t,i,n)}))},rh=function(e,t,i,n,r){return e.addEventListener(t,i,{passive:!n,capture:!!r})},oh=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},sh=function(e,t,i){(i=i&&i.wheelHandler)&&(e(t,"wheel",i),e(t,"touchmove",i))},ah={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},lh={toggleActions:"play",anticipatePin:0},uh={top:0,left:0,center:.5,bottom:1,right:1},ch=function(e,t){if(Ic(e)){var i=e.indexOf("="),n=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(n*=t/100),e=e.substr(0,i-1)),e=n+(e in uh?uh[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},hh=function(e,t,i,n,r,o,s,a){var l=r.startColor,u=r.endColor,c=r.fontSize,h=r.indent,d=r.fontWeight,p=Iu.createElement("div"),f=xc(i)||"fixed"===uu(i,"pinType"),g=-1!==e.indexOf("scroller"),m=f?Du:i,v=-1!==e.indexOf("start"),y=v?l:u,b="border-color:"+y+";font-size:"+c+";color:"+y+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((g||a)&&f?"fixed;":"absolute;"),(g||a||!f)&&(b+=(n===yu?Fc:Uc)+":"+(o+parseFloat(h))+"px;"),s&&(b+="box-sizing:border-box;text-align:left;width:"+s.offsetWidth+"px;"),p._isStart=v,p.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),p.style.cssText=b,p.innerText=t||0===t?e+"-"+t:e,m.children[0]?m.insertBefore(p,m.children[0]):m.appendChild(p),p._offset=p["offset"+n.op.d2],dh(p,0,n,v),p},dh=function(e,t,i,n){var r={display:"block"},o=i[n?"os2":"p2"],s=i[n?"p2":"os2"];e._isFlipped=n,r[i.a+"Percent"]=n?-100:0,r[i.a]=n?"1px":0,r["border"+o+Yc]=1,r["border"+s+Yc]=0,r[i.p]=t+"px",ku.set(e,r)},ph=[],fh={},gh=function(){return dc()-fc>34&&(ac||(ac=requestAnimationFrame(Oh)))},mh=function(){(!Xu||!Xu.isPressed||Xu.startX>Du.clientWidth)&&(ou.cache++,Xu?ac||(ac=requestAnimationFrame(Oh)):Oh(),fc||Th("scrollStart"),fc=dc())},vh=function(){Zu=Au.innerWidth,Qu=Au.innerHeight},yh=function(e){ou.cache++,(!0===e||!Uu&&!Yu&&!Iu.fullscreenElement&&!Iu.webkitFullscreenElement&&(!Ku||Zu!==Au.innerWidth||Math.abs(Au.innerHeight-Qu)>.25*Au.innerHeight))&&Ru.restart(!0)},bh={},_h=[],wh=function e(){return oh(Gh,"scrollEnd",e)||Ih(!0)},Th=function(e){return bh[e]&&bh[e].map((function(e){return e()}))||_h},Sh=[],Eh=function(e){for(var t=0;t<Sh.length;t+=5)(!e||Sh[t+4]&&Sh[t+4].query===e)&&(Sh[t].style.cssText=Sh[t+1],Sh[t].getBBox&&Sh[t].setAttribute("transform",Sh[t+2]||""),Sh[t+3].uncache=1)},xh=function(e,t){var i;for(ju=0;ju<ph.length;ju++)!(i=ph[ju])||t&&i._ctx!==t||(e?i.kill(1):i.revert(!0,!0));rc=!0,t&&Eh(t),t||Th("revert")},Ch=function(e,t){ou.cache++,(t||!lc)&&ou.forEach((function(e){return Lc(e)&&e.cacheID++&&(e.rec=0)})),Ic(e)&&(Au.history.scrollRestoration=tc=e)},kh=0,Ph=function(){Du.appendChild(ic),nc=!Xu&&ic.offsetHeight||Au.innerHeight,Du.removeChild(ic)},Ah=function(e){return Mu(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach((function(t){return t.style.display=e?"none":"block"}))},Ih=function(e,t){if(Lu=Iu.documentElement,Du=Iu.body,Ou=[Au,Iu,Lu,Du],!fc||e||rc){Ph(),lc=Gh.isRefreshing=!0,ou.forEach((function(e){return Lc(e)&&++e.cacheID&&(e.rec=e())}));var i=Th("refreshInit");Wu&&Gh.sort(),t||xh(),ou.forEach((function(e){Lc(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))})),ph.slice(0).forEach((function(e){return e.refresh()})),rc=!1,ph.forEach((function(e){if(e._subPinOffset&&e.pin){var t=e.vars.horizontal?"offsetWidth":"offsetHeight",i=e.pin[t];e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-i),e.refresh()}})),oc=1,Ah(!0),ph.forEach((function(e){var t=Pc(e.scroller,e._dir),i="max"===e.vars.end||e._endClamp&&e.end>t,n=e._startClamp&&e.start>=t;(i||n)&&e.setPositions(n?t-1:e.start,i?Math.max(n?t:e.start+1,t):e.end,!0)})),Ah(!1),oc=0,i.forEach((function(e){return e&&e.render&&e.render(-1)})),ou.forEach((function(e){Lc(e)&&(e.smooth&&requestAnimationFrame((function(){return e.target.style.scrollBehavior="smooth"})),e.rec&&e(e.rec))})),Ch(tc,1),Ru.pause(),kh++,lc=2,Oh(2),ph.forEach((function(e){return Lc(e.vars.onRefresh)&&e.vars.onRefresh(e)})),lc=Gh.isRefreshing=!1,Th("refresh")}else rh(Gh,"scrollEnd",wh)},Lh=0,Dh=1,Oh=function(e){if(2===e||!lc&&!rc){Gh.isUpdating=!0,cc&&cc.update(0);var t=ph.length,i=dc(),n=i-pc>=50,r=t&&ph[0].scroll();if(Dh=Lh>r?-1:1,lc||(Lh=r),n&&(fc&&!$u&&i-fc>200&&(fc=0,Th("scrollEnd")),Bu=pc,pc=i),Dh<0){for(ju=t;ju-- >0;)ph[ju]&&ph[ju].update(0,n);Dh=1}else for(ju=0;ju<t;ju++)ph[ju]&&ph[ju].update(0,n);Gh.isUpdating=!1}ac=0},Rh=[Bc,"top",Uc,Fc,Gc+Vc,Gc+jc,Gc+qc,Gc+zc,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Mh=Rh.concat([$c,Hc,"boxSizing","max"+Yc,"max"+Xc,"position",Gc,Wc,Wc+qc,Wc+jc,Wc+Vc,Wc+zc]),Nh=function(e,t,i,n){if(!e._gsap.swappedIn){for(var r,o=Rh.length,s=t.style,a=e.style;o--;)s[r=Rh[o]]=i[r];s.position="absolute"===i.position?"absolute":"relative","inline"===i.display&&(s.display="inline-block"),a[Uc]=a[Fc]="auto",s.flexBasis=i.flexBasis||"auto",s.overflow="visible",s.boxSizing="border-box",s[$c]=eh(e,vu)+Kc,s[Hc]=eh(e,yu)+Kc,s[Wc]=a[Gc]=a.top=a[Bc]="0",Fh(n),a[$c]=a["max"+Yc]=i[$c],a[Hc]=a["max"+Xc]=i[Hc],a[Wc]=i[Wc],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},Bh=/([A-Z])/g,Fh=function(e){if(e){var t,i,n=e.t.style,r=e.length,o=0;for((e.t._gsap||ku.core.getCache(e.t)).uncache=1;o<r;o+=2)i=e[o+1],t=e[o],i?n[t]=i:n[t]&&n.removeProperty(t.replace(Bh,"-$1").toLowerCase())}},Uh=function(e){for(var t=Mh.length,i=e.style,n=[],r=0;r<t;r++)n.push(Mh[r],i[Mh[r]]);return n.t=e,n},$h={left:0,top:0},Hh=function(e,t,i,n,r,o,s,a,l,u,c,h,d,p){Lc(e)&&(e=e(a)),Ic(e)&&"max"===e.substr(0,3)&&(e=h+("="===e.charAt(4)?ch("0"+e.substr(3),i):0));var f,g,m,v=d?d.time():0;if(d&&d.seek(0),isNaN(e)||(e=+e),Dc(e))d&&(e=ku.utils.mapRange(d.scrollTrigger.start,d.scrollTrigger.end,0,h,e)),s&&dh(s,i,n,!0);else{Lc(t)&&(t=t(a));var y,b,_,w,T=(e||"0").split(" ");m=bu(t,a)||Du,(y=Jc(m)||{})&&(y.left||y.top)||"none"!==Qc(m).display||(w=m.style.display,m.style.display="block",y=Jc(m),w?m.style.display=w:m.style.removeProperty("display")),b=ch(T[0],y[n.d]),_=ch(T[1]||"0",i),e=y[n.p]-l[n.p]-u+b+r-_,s&&dh(s,_,n,i-_<20||s._isStart&&_>20),i-=i-_}if(p&&(a[p]=e||-.001,e<0&&(e=0)),o){var S=e+i,E=o._isStart;f="scroll"+n.d2,dh(o,S,n,E&&S>20||!E&&(c?Math.max(Du[f],Lu[f]):o.parentNode[f])<=S+1),c&&(l=Jc(s),c&&(o.style[n.op.p]=l[n.op.p]-n.op.m-o._offset+Kc))}return d&&m&&(f=Jc(m),d.seek(h),g=Jc(m),d._caScrollDist=f[n.p]-g[n.p],e=e/d._caScrollDist*h),d&&d.seek(v),d?e:Math.round(e)},jh=/(webkit|moz|length|cssText|inset)/i,zh=function(e,t,i,n){if(e.parentNode!==t){var r,o,s=e.style;if(t===Du){for(r in e._stOrig=s.cssText,o=Qc(e))+r||jh.test(r)||!o[r]||"string"!=typeof s[r]||"0"===r||(s[r]=o[r]);s.top=i,s.left=n}else s.cssText=e._stOrig;ku.core.getCache(e).uncache=1,t.appendChild(e)}},qh=function(e,t,i){var n=t,r=n;return function(t){var o=Math.round(e());return o!==n&&o!==r&&Math.abs(o-n)>3&&Math.abs(o-r)>3&&(t=o,i&&i()),r=n,n=Math.round(t)}},Vh=function(e,t,i){var n={};n[t.p]="+="+i,ku.set(e,n)},Wh=function(e,t){var i=_u(e,t),n="_scroll"+t.p2,r=function t(r,o,s,a,l){var u=t.tween,c=o.onComplete,h={};s=s||i();var d=qh(i,s,(function(){u.kill(),t.tween=0}));return l=a&&l||0,a=a||r-s,u&&u.kill(),o[n]=r,o.inherit=!1,o.modifiers=h,h[n]=function(){return d(s+a*u.ratio+l*u.ratio*u.ratio)},o.onUpdate=function(){ou.cache++,t.tween&&Oh()},o.onComplete=function(){t.tween=0,c&&c.call(u)},u=t.tween=ku.to(e,o)};return e[n]=i,i.wheelHandler=function(){return r.tween&&r.tween.kill()&&(r.tween=0)},rh(e,"wheel",i.wheelHandler),Gh.isTouch&&rh(e,"touchmove",i.wheelHandler),r},Gh=function(){function e(t,i){Pu||e.register(ku)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ec(this),this.init(t,i)}return e.prototype.init=function(t,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),gc){var n,r,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,_,w,T,S,E,x,C,k,P,A,I,L,D,O,R,M,N,B,F,U,$,H,j,z,q,V=t=Zc(Ic(t)||Dc(t)||t.nodeType?{trigger:t}:t,lh),W=V.onUpdate,G=V.toggleClass,Y=V.id,X=V.onToggle,K=V.onRefresh,Q=V.scrub,Z=V.trigger,J=V.pin,ee=V.pinSpacing,te=V.invalidateOnRefresh,ie=V.anticipatePin,ne=V.onScrubComplete,re=V.onSnapComplete,oe=V.once,se=V.snap,ae=V.pinReparent,le=V.pinSpacer,ue=V.containerAnimation,ce=V.fastScrollEnd,he=V.preventOverlaps,de=t.horizontal||t.containerAnimation&&!1!==t.horizontal?vu:yu,pe=!Q&&0!==Q,fe=bu(t.scroller||Au),ge=ku.core.getCache(fe),me=xc(fe),ve="fixed"===("pinType"in t?t.pinType:uu(fe,"pinType")||me&&"fixed"),ye=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],be=pe&&t.toggleActions.split(" "),_e="markers"in t?t.markers:lh.markers,we=me?0:parseFloat(Qc(fe)["border"+de.p2+Yc])||0,Te=this,Se=t.onRefreshInit&&function(){return t.onRefreshInit(Te)},Ee=function(e,t,i){var n=i.d,r=i.d2,o=i.a;return(o=uu(e,"getBoundingClientRect"))?function(){return o()[n]}:function(){return(t?Cc(r):e["client"+r])||0}}(fe,me,de),xe=function(e,t){return!t||~su.indexOf(e)?kc(e):function(){return $h}}(fe,me),Ce=0,ke=0,Pe=0,Ae=_u(fe,de);if(Te._startClamp=Te._endClamp=!1,Te._dir=de,ie*=45,Te.scroller=fe,Te.scroll=ue?ue.time.bind(ue):Ae,s=Ae(),Te.vars=t,i=i||t.animation,"refreshPriority"in t&&(Wu=1,-9999===t.refreshPriority&&(cc=Te)),ge.tweenScroll=ge.tweenScroll||{top:Wh(fe,yu),left:Wh(fe,vu)},Te.tweenTo=n=ge.tweenScroll[de.p],Te.scrubDuration=function(e){(M=Dc(e)&&e)?R?R.duration(e):R=ku.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:M,paused:!0,onComplete:function(){return ne&&ne(Te)}}):(R&&R.progress(1).kill(),R=0)},i&&(i.vars.lazy=!1,i._initted&&!Te.isReverted||!1!==i.vars.immediateRender&&!1!==t.immediateRender&&i.duration()&&i.render(0,!0,!0),Te.animation=i.pause(),i.scrollTrigger=Te,Te.scrubDuration(Q),D=0,Y||(Y=i.vars.id)),se&&(Oc(se)&&!se.push||(se={snapTo:se}),"scrollBehavior"in Du.style&&ku.set(me?[Du,Lu]:fe,{scrollBehavior:"auto"}),ou.forEach((function(e){return Lc(e)&&e.target===(me?Iu.scrollingElement||Lu:fe)&&(e.smooth=!1)})),o=Lc(se.snapTo)?se.snapTo:"labels"===se.snapTo?function(e){return function(t){return ku.utils.snap(th(e),t)}}(i):"labelsDirectional"===se.snapTo?(j=i,function(e,t){return ih(th(j))(e,t.direction)}):!1!==se.directional?function(e,t){return ih(se.snapTo)(e,dc()-ke<500?0:t.direction)}:ku.utils.snap(se.snapTo),N=se.duration||{min:.1,max:2},N=Oc(N)?Nu(N.min,N.max):Nu(N,N),B=ku.delayedCall(se.delay||M/2||.1,(function(){var e=Ae(),t=dc()-ke<500,r=n.tween;if(!(t||Math.abs(Te.getVelocity())<10)||r||$u||Ce===e)Te.isActive&&Ce!==e&&B.restart(!0);else{var s,a,c=(e-l)/m,h=i&&!pe?i.totalProgress():c,d=t?0:(h-O)/(dc()-Bu)*1e3||0,p=ku.utils.clamp(-c,1-c,Nc(d/2)*d/.185),f=c+(!1===se.inertia?0:p),g=se,v=g.onStart,y=g.onInterrupt,b=g.onComplete;if(s=o(f,Te),Dc(s)||(s=f),a=Math.max(0,Math.round(l+s*m)),e<=u&&e>=l&&a!==e){if(r&&!r._initted&&r.data<=Nc(a-e))return;!1===se.inertia&&(p=s-c),n(a,{duration:N(Nc(.185*Math.max(Nc(f-h),Nc(s-h))/d/.05||0)),ease:se.ease||"power3",data:Nc(a-e),onInterrupt:function(){return B.restart(!0)&&y&&y(Te)},onComplete:function(){Te.update(),Ce=Ae(),i&&!pe&&(R?R.resetTo("totalProgress",s,i._tTime/i._tDur):i.progress(s)),D=O=i&&!pe?i.totalProgress():Te.progress,re&&re(Te),b&&b(Te)}},e,p*m,a-e-p*m),v&&v(Te,n.tween)}}})).pause()),Y&&(fh[Y]=Te),(H=(Z=Te.trigger=bu(Z||!0!==J&&J))&&Z._gsap&&Z._gsap.stRevert)&&(H=H(Te)),J=!0===J?Z:bu(J),Ic(G)&&(G={targets:Z,className:G}),J&&(!1===ee||ee===Gc||(ee=!(!ee&&J.parentNode&&J.parentNode.style&&"flex"===Qc(J.parentNode).display)&&Wc),Te.pin=J,(r=ku.core.getCache(J)).spacer?v=r.pinState:(le&&((le=bu(le))&&!le.nodeType&&(le=le.current||le.nativeElement),r.spacerIsNative=!!le,le&&(r.spacerState=Uh(le))),r.spacer=_=le||Iu.createElement("div"),_.classList.add("pin-spacer"),Y&&_.classList.add("pin-spacer-"+Y),r.pinState=v=Uh(J)),!1!==t.force3D&&ku.set(J,{force3D:!0}),Te.spacer=_=r.spacer,L=Qc(J),C=L[ee+de.os2],T=ku.getProperty(J),S=ku.quickSetter(J,de.a,Kc),Nh(J,_,L),b=Uh(J)),_e){f=Oc(_e)?Zc(_e,ah):ah,d=hh("scroller-start",Y,fe,de,f,0),p=hh("scroller-end",Y,fe,de,f,0,d),w=d["offset"+de.op.d2];var Ie=bu(uu(fe,"content")||fe);c=this.markerStart=hh("start",Y,Ie,de,f,w,0,ue),h=this.markerEnd=hh("end",Y,Ie,de,f,w,0,ue),ue&&($=ku.quickSetter([c,h],de.a,Kc)),ve||su.length&&!0===uu(fe,"fixedMarkers")||(q=Qc(z=me?Du:fe).position,z.style.position="absolute"===q||"fixed"===q?q:"relative",ku.set([d,p],{force3D:!0}),P=ku.quickSetter(d,de.a,Kc),I=ku.quickSetter(p,de.a,Kc))}if(ue){var Le=ue.vars.onUpdate,De=ue.vars.onUpdateParams;ue.eventCallback("onUpdate",(function(){Te.update(0,0,1),Le&&Le.apply(ue,De||[])}))}if(Te.previous=function(){return ph[ph.indexOf(Te)-1]},Te.next=function(){return ph[ph.indexOf(Te)+1]},Te.revert=function(e,t){if(!t)return Te.kill(!0);var n=!1!==e||!Te.enabled,r=Uu;n!==Te.isReverted&&(n&&(F=Math.max(Ae(),Te.scroll.rec||0),Pe=Te.progress,U=i&&i.progress()),c&&[c,h,d,p].forEach((function(e){return e.style.display=n?"none":"block"})),n&&(Uu=Te,Te.update(n)),!J||ae&&Te.isActive||(n?function(e,t,i){Fh(i);var n=e._gsap;if(n.spacerIsNative)Fh(n.spacerState);else if(e._gsap.swappedIn){var r=t.parentNode;r&&(r.insertBefore(e,t),r.removeChild(t))}e._gsap.swappedIn=!1}(J,_,v):Nh(J,_,Qc(J),k)),n||Te.update(n),Uu=r,Te.isReverted=n)},Te.refresh=function(r,o,f,w){if(!Uu&&Te.enabled||o)if(J&&r&&fc)rh(e,"scrollEnd",wh);else{!lc&&Se&&Se(Te),Uu=Te,n.tween&&!f&&(n.tween.kill(),n.tween=0),R&&R.pause(),te&&i&&i.revert({kill:!1}).invalidate(),Te.isReverted||Te.revert(!0,!0),Te._subPinOffset=!1;var S,C,P,I,L,D,O,M,N,$,H,j,z,q=Ee(),V=xe(),W=ue?ue.duration():Pc(fe,de),G=m<=.01,Y=0,X=w||0,Q=Oc(f)?f.end:t.end,ie=t.endTrigger||Z,ne=Oc(f)?f.start:t.start||(0!==t.start&&Z?J?"0 0":"0 100%":0),re=Te.pinnedContainer=t.pinnedContainer&&bu(t.pinnedContainer,Te),oe=Z&&Math.max(0,ph.indexOf(Te))||0,se=oe;for(_e&&Oc(f)&&(j=ku.getProperty(d,de.p),z=ku.getProperty(p,de.p));se-- >0;)(D=ph[se]).end||D.refresh(0,1)||(Uu=Te),!(O=D.pin)||O!==Z&&O!==J&&O!==re||D.isReverted||($||($=[]),$.unshift(D),D.revert(!0,!0)),D!==ph[se]&&(oe--,se--);for(Lc(ne)&&(ne=ne(Te)),ne=mc(ne,"start",Te),l=Hh(ne,Z,q,de,Ae(),c,d,Te,V,we,ve,W,ue,Te._startClamp&&"_startClamp")||(J?-.001:0),Lc(Q)&&(Q=Q(Te)),Ic(Q)&&!Q.indexOf("+=")&&(~Q.indexOf(" ")?Q=(Ic(ne)?ne.split(" ")[0]:"")+Q:(Y=ch(Q.substr(2),q),Q=Ic(ne)?ne:(ue?ku.utils.mapRange(0,ue.duration(),ue.scrollTrigger.start,ue.scrollTrigger.end,l):l)+Y,ie=Z)),Q=mc(Q,"end",Te),u=Math.max(l,Hh(Q||(ie?"100% 0":W),ie,q,de,Ae()+Y,h,p,Te,V,we,ve,W,ue,Te._endClamp&&"_endClamp"))||-.001,Y=0,se=oe;se--;)(O=(D=ph[se]).pin)&&D.start-D._pinPush<=l&&!ue&&D.end>0&&(S=D.end-(Te._startClamp?Math.max(0,D.start):D.start),(O===Z&&D.start-D._pinPush<l||O===re)&&isNaN(ne)&&(Y+=S*(1-D.progress)),O===J&&(X+=S));if(l+=Y,u+=Y,Te._startClamp&&(Te._startClamp+=Y),Te._endClamp&&!lc&&(Te._endClamp=u||-.001,u=Math.min(u,Pc(fe,de))),m=u-l||(l-=.01)&&.001,G&&(Pe=ku.utils.clamp(0,1,ku.utils.normalize(l,u,F))),Te._pinPush=X,c&&Y&&((S={})[de.a]="+="+Y,re&&(S[de.p]="-="+Ae()),ku.set([c,h],S)),!J||oc&&Te.end>=Pc(fe,de)){if(Z&&Ae()&&!ue)for(C=Z.parentNode;C&&C!==Du;)C._pinOffset&&(l-=C._pinOffset,u-=C._pinOffset),C=C.parentNode}else S=Qc(J),I=de===yu,P=Ae(),E=parseFloat(T(de.a))+X,!W&&u>1&&(H={style:H=(me?Iu.scrollingElement||Lu:fe).style,value:H["overflow"+de.a.toUpperCase()]},me&&"scroll"!==Qc(Du)["overflow"+de.a.toUpperCase()]&&(H.style["overflow"+de.a.toUpperCase()]="scroll")),Nh(J,_,S),b=Uh(J),C=Jc(J,!0),M=ve&&_u(fe,I?vu:yu)(),ee?((k=[ee+de.os2,m+X+Kc]).t=_,(se=ee===Wc?eh(J,de)+m+X:0)&&(k.push(de.d,se+Kc),"auto"!==_.style.flexBasis&&(_.style.flexBasis=se+Kc)),Fh(k),re&&ph.forEach((function(e){e.pin===re&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)})),ve&&Ae(F)):(se=eh(J,de))&&"auto"!==_.style.flexBasis&&(_.style.flexBasis=se+Kc),ve&&((L={top:C.top+(I?P-l:M)+Kc,left:C.left+(I?M:P-l)+Kc,boxSizing:"border-box",position:"fixed"})[$c]=L["max"+Yc]=Math.ceil(C.width)+Kc,L[Hc]=L["max"+Xc]=Math.ceil(C.height)+Kc,L[Gc]=L[Gc+qc]=L[Gc+jc]=L[Gc+Vc]=L[Gc+zc]="0",L[Wc]=S[Wc],L[Wc+qc]=S[Wc+qc],L[Wc+jc]=S[Wc+jc],L[Wc+Vc]=S[Wc+Vc],L[Wc+zc]=S[Wc+zc],y=function(e,t,i){for(var n,r=[],o=e.length,s=i?8:0;s<o;s+=2)n=e[s],r.push(n,n in t?t[n]:e[s+1]);return r.t=e.t,r}(v,L,ae),lc&&Ae(0)),i?(N=i._initted,Gu(1),i.render(i.duration(),!0,!0),x=T(de.a)-E+m+X,A=Math.abs(m-x)>1,ve&&A&&y.splice(y.length-2,2),i.render(0,!0,!0),N||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),Gu(0)):x=m,H&&(H.value?H.style["overflow"+de.a.toUpperCase()]=H.value:H.style.removeProperty("overflow-"+de.a));$&&$.forEach((function(e){return e.revert(!1,!0)})),Te.start=l,Te.end=u,s=a=lc?F:Ae(),ue||lc||(s<F&&Ae(F),Te.scroll.rec=0),Te.revert(!1,!0),ke=dc(),B&&(Ce=-1,B.restart(!0)),Uu=0,i&&pe&&(i._initted||U)&&i.progress()!==U&&i.progress(U||0,!0).render(i.time(),!0,!0),(G||Pe!==Te.progress||ue||te||i&&!i._initted)&&(i&&!pe&&i.totalProgress(ue&&l<-.001&&!Pe?ku.utils.normalize(l,u,0):Pe,!0),Te.progress=G||(s-l)/m===Pe?0:Pe),J&&ee&&(_._pinOffset=Math.round(Te.progress*x)),R&&R.invalidate(),isNaN(j)||(j-=ku.getProperty(d,de.p),z-=ku.getProperty(p,de.p),Vh(d,de,j),Vh(c,de,j-(w||0)),Vh(p,de,z),Vh(h,de,z-(w||0))),G&&!lc&&Te.update(),!K||lc||g||(g=!0,K(Te),g=!1)}},Te.getVelocity=function(){return(Ae()-a)/(dc()-Bu)*1e3||0},Te.endAnimation=function(){Rc(Te.callbackAnimation),i&&(R?R.progress(1):i.paused()?pe||Rc(i,Te.direction<0,1):Rc(i,i.reversed()))},Te.labelToScroll=function(e){return i&&i.labels&&(l||Te.refresh()||l)+i.labels[e]/i.duration()*m||0},Te.getTrailing=function(e){var t=ph.indexOf(Te),i=Te.direction>0?ph.slice(0,t).reverse():ph.slice(t+1);return(Ic(e)?i.filter((function(t){return t.vars.preventOverlaps===e})):i).filter((function(e){return Te.direction>0?e.end<=l:e.start>=u}))},Te.update=function(e,t,r){if(!ue||r||e){var o,c,h,p,f,g,v,w=!0===lc?F:Te.scroll(),T=e?0:(w-l)/m,k=T<0?0:T>1?1:T||0,L=Te.progress;if(t&&(a=s,s=ue?Ae():w,se&&(O=D,D=i&&!pe?i.totalProgress():k)),ie&&J&&!Uu&&!hc&&fc&&(!k&&l<w+(w-a)/(dc()-Bu)*ie?k=1e-4:1===k&&u>w+(w-a)/(dc()-Bu)*ie&&(k=.9999)),k!==L&&Te.enabled){if(p=(f=(o=Te.isActive=!!k&&k<1)!==(!!L&&L<1))||!!k!=!!L,Te.direction=k>L?1:-1,Te.progress=k,p&&!Uu&&(c=k&&!L?0:1===k?1:1===L?2:3,pe&&(h=!f&&"none"!==be[c+1]&&be[c+1]||be[c],v=i&&("complete"===h||"reset"===h||h in i))),he&&(f||v)&&(v||Q||!i)&&(Lc(he)?he(Te):Te.getTrailing(he).forEach((function(e){return e.endAnimation()}))),pe||(!R||Uu||hc?i&&i.totalProgress(k,!(!Uu||!ke&&!e)):(R._dp._time-R._start!==R._time&&R.render(R._dp._time-R._start),R.resetTo?R.resetTo("totalProgress",k,i._tTime/i._tDur):(R.vars.totalProgress=k,R.invalidate().restart()))),J)if(e&&ee&&(_.style[ee+de.os2]=C),ve){if(p){if(g=!e&&k>L&&u+1>w&&w+1>=Pc(fe,de),ae)if(e||!o&&!g)zh(J,_);else{var M=Jc(J,!0),N=w-l;zh(J,Du,M.top+(de===yu?N:0)+Kc,M.left+(de===yu?0:N)+Kc)}Fh(o||g?y:b),A&&k<1&&o||S(E+(1!==k||g?0:x))}}else S(Tc(E+x*k));se&&!n.tween&&!Uu&&!hc&&B.restart(!0),G&&(f||oe&&k&&(k<1||!sc))&&Mu(G.targets).forEach((function(e){return e.classList[o||oe?"add":"remove"](G.className)})),W&&!pe&&!e&&W(Te),p&&!Uu?(pe&&(v&&("complete"===h?i.pause().totalProgress(1):"reset"===h?i.restart(!0).pause():"restart"===h?i.restart(!0):i[h]()),W&&W(Te)),!f&&sc||(X&&f&&Mc(Te,X),ye[c]&&Mc(Te,ye[c]),oe&&(1===k?Te.kill(!1,1):ye[c]=0),f||ye[c=1===k?1:3]&&Mc(Te,ye[c])),ce&&!o&&Math.abs(Te.getVelocity())>(Dc(ce)?ce:2500)&&(Rc(Te.callbackAnimation),R?R.progress(1):Rc(i,"reverse"===h?1:!k,1))):pe&&W&&!Uu&&W(Te)}if(I){var U=ue?w/ue.duration()*(ue._caScrollDist||0):w;P(U+(d._isFlipped?1:0)),I(U)}$&&$(-w/ue.duration()*(ue._caScrollDist||0))}},Te.enable=function(t,i){Te.enabled||(Te.enabled=!0,rh(fe,"resize",yh),me||rh(fe,"scroll",mh),Se&&rh(e,"refreshInit",Se),!1!==t&&(Te.progress=Pe=0,s=a=Ce=Ae()),!1!==i&&Te.refresh())},Te.getTween=function(e){return e&&n?n.tween:R},Te.setPositions=function(e,t,i,n){if(ue){var r=ue.scrollTrigger,o=ue.duration(),s=r.end-r.start;e=r.start+s*e/o,t=r.start+s*t/o}Te.refresh(!1,!1,{start:vc(e,i&&!!Te._startClamp),end:vc(t,i&&!!Te._endClamp)},n),Te.update()},Te.adjustPinSpacing=function(e){if(k&&e){var t=k.indexOf(de.d)+1;k[t]=parseFloat(k[t])+e+Kc,k[1]=parseFloat(k[1])+e+Kc,Fh(k)}},Te.disable=function(t,i){if(Te.enabled&&(!1!==t&&Te.revert(!0,!0),Te.enabled=Te.isActive=!1,i||R&&R.pause(),F=0,r&&(r.uncache=1),Se&&oh(e,"refreshInit",Se),B&&(B.pause(),n.tween&&n.tween.kill()&&(n.tween=0)),!me)){for(var o=ph.length;o--;)if(ph[o].scroller===fe&&ph[o]!==Te)return;oh(fe,"resize",yh),me||oh(fe,"scroll",mh)}},Te.kill=function(e,n){Te.disable(e,n),R&&!n&&R.kill(),Y&&delete fh[Y];var o=ph.indexOf(Te);o>=0&&ph.splice(o,1),o===ju&&Dh>0&&ju--,o=0,ph.forEach((function(e){return e.scroller===Te.scroller&&(o=1)})),o||lc||(Te.scroll.rec=0),i&&(i.scrollTrigger=null,e&&i.revert({kill:!1}),n||i.kill()),c&&[c,h,d,p].forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),cc===Te&&(cc=0),J&&(r&&(r.uncache=1),o=0,ph.forEach((function(e){return e.pin===J&&o++})),o||(r.spacer=0)),t.onKill&&t.onKill(Te)},ph.push(Te),Te.enable(!1,!1),H&&H(Te),i&&i.add&&!m){var Oe=Te.update;Te.update=function(){Te.update=Oe,ou.cache++,l||u||Te.refresh()},ku.delayedCall(.01,Te.update),m=.01,l=u=0}else Te.refresh();J&&function(){if(uc!==kh){var e=uc=kh;requestAnimationFrame((function(){return e===kh&&Ih(!0)}))}}()}else this.update=this.refresh=this.kill=wc},e.register=function(t){return Pu||(ku=t||Ec(),Sc()&&window.document&&e.enable(),Pu=gc),Pu},e.defaults=function(e){if(e)for(var t in e)lh[t]=e[t];return lh},e.disable=function(e,t){gc=0,ph.forEach((function(i){return i[t?"kill":"disable"](e)})),oh(Au,"wheel",mh),oh(Iu,"scroll",mh),clearInterval(Fu),oh(Iu,"touchcancel",wc),oh(Du,"touchstart",wc),nh(oh,Iu,"pointerdown,touchstart,mousedown",bc),nh(oh,Iu,"pointerup,touchend,mouseup",_c),Ru.kill(),Ac(oh);for(var i=0;i<ou.length;i+=3)sh(oh,ou[i],ou[i+1]),sh(oh,ou[i],ou[i+2])},e.enable=function(){if(Au=window,Iu=document,Lu=Iu.documentElement,Du=Iu.body,ku&&(Mu=ku.utils.toArray,Nu=ku.utils.clamp,ec=ku.core.context||wc,Gu=ku.core.suppressOverwrites||wc,tc=Au.history.scrollRestoration||"auto",Lh=Au.pageYOffset||0,ku.core.globals("ScrollTrigger",e),Du)){gc=1,(ic=document.createElement("div")).style.height="100vh",ic.style.position="absolute",Ph(),yc(),Cu.register(ku),e.isTouch=Cu.isTouch,Ju=Cu.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Ku=1===Cu.isTouch,rh(Au,"wheel",mh),Ou=[Au,Iu,Lu,Du],ku.matchMedia?(e.matchMedia=function(e){var t,i=ku.matchMedia();for(t in e)i.add(t,e[t]);return i},ku.addEventListener("matchMediaInit",(function(){return xh()})),ku.addEventListener("matchMediaRevert",(function(){return Eh()})),ku.addEventListener("matchMedia",(function(){Ih(0,1),Th("matchMedia")})),ku.matchMedia().add("(orientation: portrait)",(function(){return vh(),vh}))):console.warn("Requires GSAP 3.11.0 or later"),vh(),rh(Iu,"scroll",mh);var t,i,n=Du.hasAttribute("style"),r=Du.style,o=r.borderTopStyle,s=ku.core.Animation.prototype;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",t=Jc(Du),yu.m=Math.round(t.top+yu.sc())||0,vu.m=Math.round(t.left+vu.sc())||0,o?r.borderTopStyle=o:r.removeProperty("border-top-style"),n||(Du.setAttribute("style",""),Du.removeAttribute("style")),Fu=setInterval(gh,250),ku.delayedCall(.5,(function(){return hc=0})),rh(Iu,"touchcancel",wc),rh(Du,"touchstart",wc),nh(rh,Iu,"pointerdown,touchstart,mousedown",bc),nh(rh,Iu,"pointerup,touchend,mouseup",_c),Hu=ku.utils.checkPrefix("transform"),Mh.push(Hu),Pu=dc(),Ru=ku.delayedCall(.2,Ih).pause(),Vu=[Iu,"visibilitychange",function(){var e=Au.innerWidth,t=Au.innerHeight;Iu.hidden?(zu=e,qu=t):zu===e&&qu===t||yh()},Iu,"DOMContentLoaded",Ih,Au,"load",Ih,Au,"resize",yh],Ac(rh),ph.forEach((function(e){return e.enable(0,1)})),i=0;i<ou.length;i+=3)sh(oh,ou[i],ou[i+1]),sh(oh,ou[i],ou[i+2])}},e.config=function(t){"limitCallbacks"in t&&(sc=!!t.limitCallbacks);var i=t.syncInterval;i&&clearInterval(Fu)||(Fu=i)&&setInterval(gh,i),"ignoreMobileResize"in t&&(Ku=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(Ac(oh)||Ac(rh,t.autoRefreshEvents||"none"),Yu=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var i=bu(e),n=ou.indexOf(i),r=xc(i);~n&&ou.splice(n,r?6:2),t&&(r?su.unshift(Au,t,Du,t,Lu,t):su.unshift(i,t))},e.clearMatchMedia=function(e){ph.forEach((function(t){return t._ctx&&t._ctx.query===e&&t._ctx.kill(!0,!0)}))},e.isInViewport=function(e,t,i){var n=(Ic(e)?bu(e):e).getBoundingClientRect(),r=n[i?$c:Hc]*t||0;return i?n.right-r>0&&n.left+r<Au.innerWidth:n.bottom-r>0&&n.top+r<Au.innerHeight},e.positionInViewport=function(e,t,i){Ic(e)&&(e=bu(e));var n=e.getBoundingClientRect(),r=n[i?$c:Hc],o=null==t?r/2:t in uh?uh[t]*r:~t.indexOf("%")?parseFloat(t)*r/100:parseFloat(t)||0;return i?(n.left+o)/Au.innerWidth:(n.top+o)/Au.innerHeight},e.killAll=function(e){if(ph.slice(0).forEach((function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()})),!0!==e){var t=bh.killAll||[];bh={},t.forEach((function(e){return e()}))}},e}();Gh.version="3.12.7",Gh.saveStyles=function(e){return e?Mu(e).forEach((function(e){if(e&&e.style){var t=Sh.indexOf(e);t>=0&&Sh.splice(t,5),Sh.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),ku.core.getCache(e),ec())}})):Sh},Gh.revert=function(e,t){return xh(!e,t)},Gh.create=function(e,t){return new Gh(e,t)},Gh.refresh=function(e){return e?yh(!0):(Pu||Gh.register())&&Ih(!0)},Gh.update=function(e){return++ou.cache&&Oh(!0===e?2:0)},Gh.clearScrollMemory=Ch,Gh.maxScroll=function(e,t){return Pc(e,t?vu:yu)},Gh.getScrollFunc=function(e,t){return _u(bu(e),t?vu:yu)},Gh.getById=function(e){return fh[e]},Gh.getAll=function(){return ph.filter((function(e){return"ScrollSmoother"!==e.vars.id}))},Gh.isScrolling=function(){return!!fc},Gh.snapDirectional=ih,Gh.addEventListener=function(e,t){var i=bh[e]||(bh[e]=[]);~i.indexOf(t)||i.push(t)},Gh.removeEventListener=function(e,t){var i=bh[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},Gh.batch=function(e,t){var i,n=[],r={},o=t.interval||.016,s=t.batchMax||1e9,a=function(e,t){var i=[],n=[],r=ku.delayedCall(o,(function(){t(i,n),i=[],n=[]})).pause();return function(e){i.length||r.restart(!0),i.push(e.trigger),n.push(e),s<=i.length&&r.progress(1)}};for(i in t)r[i]="on"===i.substr(0,2)&&Lc(t[i])&&"onRefreshInit"!==i?a(0,t[i]):t[i];return Lc(s)&&(s=s(),rh(Gh,"refresh",(function(){return s=t.batchMax()}))),Mu(e).forEach((function(e){var t={};for(i in r)t[i]=r[i];t.trigger=e,n.push(Gh.create(t))})),n};var Yh,Xh=function(e,t,i,n){return t>n?e(n):t<0&&e(0),i>n?(n-t)/(i-t):i<0?t/(t-i):1},Kh=function e(t,i){!0===i?t.style.removeProperty("touch-action"):t.style.touchAction=!0===i?"auto":i?"pan-"+i+(Cu.isTouch?" pinch-zoom":""):"none",t===Lu&&e(Du,i)},Qh={auto:1,scroll:1},Zh=function(e){var t,i=e.event,n=e.target,r=e.axis,o=(i.changedTouches?i.changedTouches[0]:i).target,s=o._gsap||ku.core.getCache(o),a=dc();if(!s._isScrollT||a-s._isScrollT>2e3){for(;o&&o!==Du&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!Qh[(t=Qc(o)).overflowY]&&!Qh[t.overflowX]);)o=o.parentNode;s._isScroll=o&&o!==n&&!xc(o)&&(Qh[(t=Qc(o)).overflowY]||Qh[t.overflowX]),s._isScrollT=a}(s._isScroll||"x"===r)&&(i.stopPropagation(),i._gsapAllow=!0)},Jh=function(e,t,i,n){return Cu.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:n=n&&Zh,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&rh(Iu,Cu.eventTypes[0],td,!1,!0)},onDisable:function(){return oh(Iu,Cu.eventTypes[0],td,!0)}})},ed=/(input|label|select|textarea)/i,td=function(e){var t=ed.test(e.target.tagName);(t||Yh)&&(e._gsapAllow=!0,Yh=t)},id=function(e){Oc(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,i,n,r,o,s,a,l,u=e,c=u.normalizeScrollX,h=u.momentum,d=u.allowNestedScroll,p=u.onRelease,f=bu(e.target)||Lu,g=ku.core.globals().ScrollSmoother,m=g&&g.get(),v=Ju&&(e.content&&bu(e.content)||m&&!1!==e.content&&!m.smooth()&&m.content()),y=_u(f,yu),b=_u(f,vu),_=1,w=(Cu.isTouch&&Au.visualViewport?Au.visualViewport.scale*Au.visualViewport.width:Au.outerWidth)/Au.innerWidth,T=0,S=Lc(h)?function(){return h(t)}:function(){return h||2.8},E=Jh(f,e.type,!0,d),x=function(){return r=!1},C=wc,k=wc,P=function(){i=Pc(f,yu),k=Nu(Ju?1:0,i),c&&(C=Nu(0,Pc(f,vu))),n=kh},A=function(){v._gsap.y=Tc(parseFloat(v._gsap.y)+y.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},I=function(){P(),o.isActive()&&o.vars.scrollY>i&&(y()>i?o.progress(1)&&y(i):o.resetTo("scrollY",i))};return v&&ku.set(v,{y:"+=0"}),e.ignoreCheck=function(e){return Ju&&"touchmove"===e.type&&function(){if(r){requestAnimationFrame(x);var e=Tc(t.deltaY/2),i=k(y.v-e);if(v&&i!==y.v+y.offset){y.offset=i-y.v;var n=Tc((parseFloat(v&&v._gsap.y)||0)-y.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+n+", 0, 1)",v._gsap.y=n+"px",y.cacheID=ou.cache,Oh()}return!0}y.offset&&A(),r=!0}()||_>1.05&&"touchstart"!==e.type||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){r=!1;var e=_;_=Tc((Au.visualViewport&&Au.visualViewport.scale||1)/w),o.pause(),e!==_&&Kh(f,_>1.01||!c&&"x"),s=b(),a=y(),P(),n=kh},e.onRelease=e.onGestureStart=function(e,t){if(y.offset&&A(),t){ou.cache++;var n,r,s=S();c&&(r=(n=b())+.05*s*-e.velocityX/.227,s*=Xh(b,n,r,Pc(f,vu)),o.vars.scrollX=C(r)),r=(n=y())+.05*s*-e.velocityY/.227,s*=Xh(y,n,r,Pc(f,yu)),o.vars.scrollY=k(r),o.invalidate().duration(s).play(.01),(Ju&&o.vars.scrollY>=i||n>=i-1)&&ku.to({},{onUpdate:I,duration:s})}else l.restart(!0);p&&p(e)},e.onWheel=function(){o._ts&&o.pause(),dc()-T>1e3&&(n=0,T=dc())},e.onChange=function(e,t,i,r,o){if(kh!==n&&P(),t&&c&&b(C(r[2]===t?s+(e.startX-e.x):b()+t-r[1])),i){y.offset&&A();var l=o[2]===i,u=l?a+e.startY-e.y:y()+i-o[1],h=k(u);l&&u!==h&&(a+=h-u),y(h)}(i||t)&&Oh()},e.onEnable=function(){Kh(f,!c&&"x"),Gh.addEventListener("refresh",I),rh(Au,"resize",I),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=b.smooth=!1),E.enable()},e.onDisable=function(){Kh(f,!0),oh(Au,"resize",I),Gh.removeEventListener("refresh",I),E.kill()},e.lockAxis=!1!==e.lockAxis,(t=new Cu(e)).iOS=Ju,Ju&&!y()&&y(1),Ju&&ku.ticker.add(wc),l=t._dc,o=ku.to(t,{ease:"power4",paused:!0,inherit:!1,scrollX:c?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:qh(y,y(),(function(){return o.pause()}))},onUpdate:Oh,onComplete:l.vars.onComplete}),t};Gh.sort=function(e){if(Lc(e))return ph.sort(e);var t=Au.pageYOffset||0;return Gh.getAll().forEach((function(e){return e._sortY=e.trigger?t+e.trigger.getBoundingClientRect().top:e.start+Au.innerHeight})),ph.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+(e.vars.containerAnimation?1e6:e._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+-1e6*(t.vars.refreshPriority||0))})},Gh.observe=function(e){return new Cu(e)},Gh.normalizeScroll=function(e){if(void 0===e)return Xu;if(!0===e&&Xu)return Xu.enable();if(!1===e)return Xu&&Xu.kill(),void(Xu=e);var t=e instanceof Cu?e:id(e);return Xu&&Xu.target===t.target&&Xu.kill(),xc(t.target)&&(Xu=t),t},Gh.core={_getVelocityProp:wu,_inputObserver:Jh,_scrollers:ou,_proxies:su,bridge:{ss:function(){fc||Th("scrollStart"),fc=dc()},ref:function(){return Uu}}},Ec()&&ku.registerPlugin(Gh);const nd=(0,s.createBehavior)("EditorialHero",{initTimeline:function(){var e=this.$node.offsetHeight,t=0;if(this.$caption){var i=window.getComputedStyle(this.$caption);t=["height","padding-top","padding-bottom","margin-top","margin-bottom"].map((function(e){return parseInt(i.getPropertyValue(e),10)})).reduce((function(e,t){return e+t}))}bo.set(this.$node,{marginBottom:e+t}),bo.set(this.$backdrop,{opacity:.7,autoAlpha:1}),bo.set(null,{scrollTrigger:{trigger:this.$node,start:"top top",end:"bottom top",pin:this.$image}}),bo.to([this.$backdrop,this.$content],{scrollTrigger:{trigger:this.$node,start:"top top",end:"bottom top",pin:this.$backdrop,scrub:.35},opacity:0})}},{init:function(){bo.registerPlugin(Gh),this.$image=this.getChild("image"),this.$backdrop=this.getChild("backdrop"),this.$content=this.getChild("content"),this.$caption=this.$image.querySelector("figcaption"),"complete"===document.readyState?this.initTimeline():window.addEventListener("load",this.initTimeline,!1)},enabled:function(){},resized:function(){Gh.refresh()},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){window.removeEventListener("load",this.initTimeline)}});const rd=(0,s.createBehavior)("FileUpload",{isAdvancedUpload:function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window},enterFileDrop:function(){this.$button.classList.add("bg-primary-medium")},leaveFileDrop:function(){this.$button.classList.remove("bg-primary-medium")},handleFileDrop:function(e){var t,i;this.$fileLabel.innerText=null===(t=e.srcElement)||void 0===t||null===(t=t.files)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.name,this.$result.classList.replace("hidden","flex"),this.$button.classList.add("hidden"),(null===(i=e.srcElement)||void 0===i||null===(i=i.files)||void 0===i?void 0:i[0].size)/1024/1024>this.fileSizeLimit&&(this.showFileError(),this.$input.value="")},resetFileDrop:function(e){e.preventDefault(),this.$fileLabel.innerText="",this.$input.value="",this.$result.classList.replace("flex","hidden"),this.$button.classList.remove("hidden"),this.$errorMessage.classList.replace("text-error","text-secondary"),this.$errorMessage.classList.replace("flex","hidden"),this.$resultErrorIcon.classList.add("hidden"),this.$resultSuccessIcon.classList.remove("hidden")},showFileError:function(){this.$errorMessage.innerText=this.$errorMessage.dataset.fileuploadErrorMessage,this.$errorMessage.classList.replace("text-secondary","text-error"),this.$errorMessage.classList.replace("hidden","flex"),this.$resultErrorIcon.classList.remove("hidden"),this.$resultSuccessIcon.classList.add("hidden")}},{init:function(){var e;console.log("test"),this.isAdvancedUpload=this.isAdvancedUpload(),this.$input=this.getChild("input"),this.$button=this.getChild("button"),this.$result=this.getChild("result"),this.$fileLabel=this.getChild("fileLabel"),this.$remove=this.getChild("remove"),this.$dropArea=this.getChild("drop-area"),this.$errorMessage=this.getChild("error-message"),this.$resultErrorIcon=this.getChild("result-error-icon"),this.$resultSuccessIcon=this.getChild("result-success-icon"),this.fileSizeLimit=(null===(e=this.$input)||void 0===e||null===(e=e.dataset)||void 0===e?void 0:e.fileuploadFileSize)||2,this.$input.addEventListener("change",this.handleFileDrop,!1),this.$remove.addEventListener("click",this.resetFileDrop,!1),this.isAdvancedUpload&&(this.$dropArea.addEventListener("dragenter",this.enterFileDrop,!1),this.$dropArea.addEventListener("dragover",this.enterFileDrop,!1),this.$dropArea.addEventListener("dragleave",this.leaveFileDrop,!1),this.$dropArea.addEventListener("dragend",this.leaveFileDrop,!1),this.$dropArea.addEventListener("drop",this.leaveFileDrop,!1))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$input.removeEventListener("change",this.handleFileDrop),this.$remove.removeEventListener("click",this.reset),this.$dropArea.removeEventListener("dragenter",this.enterFileDrop),this.$dropArea.removeEventListener("dragover",this.enterFileDrop),this.$dropArea.removeEventListener("dragleave",this.leaveFileDrop),this.$dropArea.removeEventListener("dragend",this.leaveFileDrop),this.$dropArea.removeEventListener("drop",this.leaveFileDrop)}});var od=n(2543);function sd(e){return function(e){if(Array.isArray(e))return ad(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ad(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ad(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var ld=(0,s.createBehavior)("FilterableItems",{matchItems:function(){var e=this,t=this.normalizeText(this.$input.value).split(" ");return sd(this.$items).filter((function(i){var n=e.getChildren("field",i);return t.every((function(t){return sd(n).some((function(i){var n=i.dataset.filterableitemsMatchType||"includes",r=e.normalizeText(i.innerText);return"startsWith"===n?r.startsWith(t):r.includes(t)}))}))}))},normalizeText:function(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/^0+/,"").replace(/[\s\u00A0]+/g," ").trim()},filterItems:function(e){var t=this;this.$swup&&(this.$swup.ariaLive="off"),this.$items.forEach((function(e){e.classList.add("hidden")})),e.forEach((function(e){e.classList.remove("hidden")})),this.$status.innerText="",e.length?(this.$noResults.classList.add("hidden"),this.$status.innerText=this.options["text-status"]):(this.$noResults.classList.remove("hidden"),this.$status.innerText=this.options["text-no-results"]),this.$itemsWrapper.dispatchEvent(this.itemUpdateEvent),setTimeout((function(){t.$swup&&(t.$swup.ariaLive="polite")}),1e3)}},{init:function(){var e=this;this.$swup=document.querySelector("#swup"),this.$itemsWrapper=this.getChild("items"),this.$items=this.getChildren("item"),this.$form=this.getChild("filter"),this.$input=this.getChild("filter").querySelector("input"),this.$noResults=this.getChild("no-results"),this.$status=this.getChild("status"),this.$tour=this.$node.querySelector("[data-tour]"),window.dataLayer=window.dataLayer||[],this.itemUpdateEvent=new CustomEvent("updateItems",{bubbles:!1}),this.$form.addEventListener("submit",(function(t){t.preventDefault(),e.filterItems(e.matchItems())})),this.$input.addEventListener("input",(0,od.debounce)((function(){var t;(e.filterItems(e.matchItems()),e.$tour)&&window.dataLayer.push({event:"search_audio_list",audioListName:null!==(t=e.$tour.dataset.playlistTitle)&&void 0!==t?t:"",audioListLength:e.$tour.childElementCount})}),300))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){}});const ud=ld;const cd=(0,s.createBehavior)("FilterBar",{toggle:function(e){e.preventDefault(),e.stopPropagation(),this.isOpen=!this.isOpen,this.$trigger.querySelector("span").innerText=this.isOpen?this.hideText:this.showText,this.isOpen?this.open():this.close()},open:function(){var e=this.$contentInner.clientHeight;this.$content.classList.add("trans-show-hide--active"),this.$content.style.height="".concat(e,"px"),this.$trigger.classList.add("button-filter--open"),this.$trigger.setAttribute("aria-expanded","true")},close:function(){document.dispatchEvent(new CustomEvent("FilterDropdown:closeAll")),this.$content.classList.remove("trans-show-hide--active"),this.$content.classList.add("overflow-hidden"),this.$content.style.height=0,this.$trigger.classList.remove("button-filter--open"),this.$trigger.setAttribute("aria-expanded","false")},afterOpen:function(){this.isOpen&&this.$content.classList.remove("overflow-hidden")}},{init:function(){this.isOpen=!1,this.mobileText=this.options["text-mobile"],this.showText=this.options["text-show"],this.hideText=this.options["text-hide"],this.$trigger=this.getChild("trigger"),this.$triggerIcon=this.$trigger.querySelector("svg"),this.$content=this.getChild("content"),this.$contentInner=this.getChild("content-inner"),this.$trigger.addEventListener("click",this.toggle,!1),this.$node.addEventListener("transitionend",this.afterOpen)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$trigger.removeEventListener("click",this.toggle)}});const hd=(0,s.createBehavior)("FilterCheckbox",{toggle:function(e){e.preventDefault(),this.$input.checked?this.searchParams.set(this.filterName,this.filterValue):this.searchParams.delete(this.filterName),window.A17.pjax?window.A17.pjax.loadPage({url:"".concat(this.baseUrl,"?").concat(this.searchParams.toString()),customTransition:"filters"}):console.info("pjax not initialized")}},{init:function(){this.baseUrl=window.location.origin+window.location.pathname,this.searchParams=new URLSearchParams(window.location.search),this.$input=this.$node.querySelector("input"),this.filterName=this.$input.name,this.filterValue=this.$input.value,this.$input.addEventListener("change",this.toggle,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$input.removeEventListener("change",this.toggle)}});var dd=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],pd={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var i=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},fd={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const gd=fd;var md=function(e,t){return void 0===t&&(t=2),("000"+e).slice(-1*t)},vd=function(e){return!0===e?1:0};function yd(e,t){var i;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout((function(){return e.apply(n,r)}),t)}}var bd=function(e){return e instanceof Array?e:[e]};function _d(e,t,i){if(!0===i)return e.classList.add(t);e.classList.remove(t)}function wd(e,t,i){var n=window.document.createElement(e);return t=t||"",i=i||"",n.className=t,void 0!==i&&(n.textContent=i),n}function Td(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Sd(e,t){return t(e)?e:e.parentNode?Sd(e.parentNode,t):void 0}function Ed(e,t){var i=wd("div","numInputWrapper"),n=wd("input","numInput "+e),r=wd("span","arrowUp"),o=wd("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?n.type="number":(n.type="text",n.pattern="\\d*"),void 0!==t)for(var s in t)n.setAttribute(s,t[s]);return i.appendChild(n),i.appendChild(r),i.appendChild(o),i}function xd(e){try{return"function"==typeof e.composedPath?e.composedPath()[0]:e.target}catch(t){return e.target}}var Cd=function(){},kd=function(e,t,i){return i.months[t?"shorthand":"longhand"][e]},Pd={D:Cd,F:function(e,t,i){e.setMonth(i.months.longhand.indexOf(t))},G:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,i){e.setHours(e.getHours()%12+12*vd(new RegExp(i.amPM[1],"i").test(t)))},M:function(e,t,i){e.setMonth(i.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t,i){var n=parseInt(t),r=new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0);return r.setDate(r.getDate()-r.getDay()+i.firstDayOfWeek),r},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:Cd,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:Cd,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},Ad={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Id={Z:function(e){return e.toISOString()},D:function(e,t,i){return t.weekdays.shorthand[Id.w(e,t,i)]},F:function(e,t,i){return kd(Id.n(e,t,i)-1,!1,t)},G:function(e,t,i){return md(Id.h(e,t,i))},H:function(e){return md(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[vd(e.getHours()>11)]},M:function(e,t){return kd(e.getMonth(),!0,t)},S:function(e){return md(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,i){return i.getWeek(e)},Y:function(e){return md(e.getFullYear(),4)},d:function(e){return md(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return md(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return md(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},Ld=function(e){var t=e.config,i=void 0===t?pd:t,n=e.l10n,r=void 0===n?fd:n,o=e.isMobile,s=void 0!==o&&o;return function(e,t,n){var o=n||r;return void 0===i.formatDate||s?t.split("").map((function(t,n,r){return Id[t]&&"\\"!==r[n-1]?Id[t](e,o,i):"\\"!==t?t:""})).join(""):i.formatDate(e,t,o)}},Dd=function(e){var t=e.config,i=void 0===t?pd:t,n=e.l10n,r=void 0===n?fd:n;return function(e,t,n,o){if(0===e||e){var s,a=o||r,l=e;if(e instanceof Date)s=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)s=new Date(e);else if("string"==typeof e){var u=t||(i||pd).dateFormat,c=String(e).trim();if("today"===c)s=new Date,n=!0;else if(i&&i.parseDate)s=i.parseDate(e,u);else if(/Z$/.test(c)||/GMT$/.test(c))s=new Date(e);else{for(var h=void 0,d=[],p=0,f=0,g="";p<u.length;p++){var m=u[p],v="\\"===m,y="\\"===u[p-1]||v;if(Ad[m]&&!y){g+=Ad[m];var b=new RegExp(g).exec(e);b&&(h=!0)&&d["Y"!==m?"push":"unshift"]({fn:Pd[m],val:b[++f]})}else v||(g+=".")}s=i&&i.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),d.forEach((function(e){var t=e.fn,i=e.val;return s=t(s,i,a)||s})),s=h?s:void 0}}if(s instanceof Date&&!isNaN(s.getTime()))return!0===n&&s.setHours(0,0,0,0),s;i.errorHandler(new Error("Invalid date provided: "+l))}}};function Od(e,t,i){return void 0===i&&(i=!0),!1!==i?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var Rd=function(e,t,i){return 3600*e+60*t+i},Md=864e5;function Nd(e){var t=e.defaultHour,i=e.defaultMinute,n=e.defaultSeconds;if(void 0!==e.minDate){var r=e.minDate.getHours(),o=e.minDate.getMinutes(),s=e.minDate.getSeconds();t<r&&(t=r),t===r&&i<o&&(i=o),t===r&&i===o&&n<s&&(n=e.minDate.getSeconds())}if(void 0!==e.maxDate){var a=e.maxDate.getHours(),l=e.maxDate.getMinutes();(t=Math.min(t,a))===a&&(i=Math.min(l,i)),t===a&&i===l&&(n=e.maxDate.getSeconds())}return{hours:t,minutes:i,seconds:n}}n(5990);var Bd=function(){return Bd=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Bd.apply(this,arguments)},Fd=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n};function Ud(e,t){var i={config:Bd(Bd({},pd),Hd.defaultConfig),l10n:gd};function n(){var e;return(null===(e=i.calendarContainer)||void 0===e?void 0:e.getRootNode()).activeElement||document.activeElement}function r(e){return e.bind(i)}function o(){var e=i.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==i.calendarContainer&&(i.calendarContainer.style.visibility="hidden",i.calendarContainer.style.display="block"),void 0!==i.daysContainer){var t=(i.days.offsetWidth+1)*e.showMonths;i.daysContainer.style.width=t+"px",i.calendarContainer.style.width=t+(void 0!==i.weekWrapper?i.weekWrapper.offsetWidth:0)+"px",i.calendarContainer.style.removeProperty("visibility"),i.calendarContainer.style.removeProperty("display")}}))}function s(e){if(0===i.selectedDates.length){var t=void 0===i.config.minDate||Od(new Date,i.config.minDate)>=0?new Date:new Date(i.config.minDate.getTime()),n=Nd(i.config);t.setHours(n.hours,n.minutes,n.seconds,t.getMilliseconds()),i.selectedDates=[t],i.latestSelectedDateObj=t}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var t="keydown"===e.type,n=xd(e),r=n;void 0!==i.amPM&&n===i.amPM&&(i.amPM.textContent=i.l10n.amPM[vd(i.amPM.textContent===i.l10n.amPM[0])]);var o=parseFloat(r.getAttribute("min")),s=parseFloat(r.getAttribute("max")),a=parseFloat(r.getAttribute("step")),l=parseInt(r.value,10),u=e.delta||(t?38===e.which?1:-1:0),c=l+a*u;if(void 0!==r.value&&2===r.value.length){var h=r===i.hourElement,d=r===i.minuteElement;c<o?(c=s+c+vd(!h)+(vd(h)&&vd(!i.amPM)),d&&g(void 0,-1,i.hourElement)):c>s&&(c=r===i.hourElement?c-s-vd(!i.amPM):o,d&&g(void 0,1,i.hourElement)),i.amPM&&h&&(1===a?c+l===23:Math.abs(c-l)>a)&&(i.amPM.textContent=i.l10n.amPM[vd(i.amPM.textContent===i.l10n.amPM[0])]),r.value=md(c)}}(e);var r=i._input.value;a(),J(),i._input.value!==r&&i._debouncedChange()}function a(){if(void 0!==i.hourElement&&void 0!==i.minuteElement){var e,t,n=(parseInt(i.hourElement.value.slice(-2),10)||0)%24,r=(parseInt(i.minuteElement.value,10)||0)%60,o=void 0!==i.secondElement?(parseInt(i.secondElement.value,10)||0)%60:0;void 0!==i.amPM&&(e=n,t=i.amPM.textContent,n=e%12+12*vd(t===i.l10n.amPM[1]));var s=void 0!==i.config.minTime||i.config.minDate&&i.minDateHasTime&&i.latestSelectedDateObj&&0===Od(i.latestSelectedDateObj,i.config.minDate,!0),a=void 0!==i.config.maxTime||i.config.maxDate&&i.maxDateHasTime&&i.latestSelectedDateObj&&0===Od(i.latestSelectedDateObj,i.config.maxDate,!0);if(void 0!==i.config.maxTime&&void 0!==i.config.minTime&&i.config.minTime>i.config.maxTime){var l=Rd(i.config.minTime.getHours(),i.config.minTime.getMinutes(),i.config.minTime.getSeconds()),c=Rd(i.config.maxTime.getHours(),i.config.maxTime.getMinutes(),i.config.maxTime.getSeconds()),h=Rd(n,r,o);if(h>c&&h<l){var d=function(e){var t=Math.floor(e/3600),i=(e-3600*t)/60;return[t,i,e-3600*t-60*i]}(l);n=d[0],r=d[1],o=d[2]}}else{if(a){var p=void 0!==i.config.maxTime?i.config.maxTime:i.config.maxDate;(n=Math.min(n,p.getHours()))===p.getHours()&&(r=Math.min(r,p.getMinutes())),r===p.getMinutes()&&(o=Math.min(o,p.getSeconds()))}if(s){var f=void 0!==i.config.minTime?i.config.minTime:i.config.minDate;(n=Math.max(n,f.getHours()))===f.getHours()&&r<f.getMinutes()&&(r=f.getMinutes()),r===f.getMinutes()&&(o=Math.max(o,f.getSeconds()))}}u(n,r,o)}}function l(e){var t=e||i.latestSelectedDateObj;t&&t instanceof Date&&u(t.getHours(),t.getMinutes(),t.getSeconds())}function u(e,t,n){void 0!==i.latestSelectedDateObj&&i.latestSelectedDateObj.setHours(e%24,t,n||0,0),i.hourElement&&i.minuteElement&&!i.isMobile&&(i.hourElement.value=md(i.config.time_24hr?e:(12+e)%12+12*vd(e%12==0)),i.minuteElement.value=md(t),void 0!==i.amPM&&(i.amPM.textContent=i.l10n.amPM[vd(e>=12)]),void 0!==i.secondElement&&(i.secondElement.value=md(n)))}function c(e){var t=xd(e),i=parseInt(t.value)+(e.delta||0);(i/1e3>1||"Enter"===e.key&&!/[^\d]/.test(i.toString()))&&I(i)}function h(e,t,n,r){return t instanceof Array?t.forEach((function(t){return h(e,t,n,r)})):e instanceof Array?e.forEach((function(e){return h(e,t,n,r)})):(e.addEventListener(t,n,r),void i._handlers.push({remove:function(){return e.removeEventListener(t,n,r)}}))}function d(){Y("onChange")}function p(e,t){var n=void 0!==e?i.parseDate(e):i.latestSelectedDateObj||(i.config.minDate&&i.config.minDate>i.now?i.config.minDate:i.config.maxDate&&i.config.maxDate<i.now?i.config.maxDate:i.now),r=i.currentYear,o=i.currentMonth;try{void 0!==n&&(i.currentYear=n.getFullYear(),i.currentMonth=n.getMonth())}catch(e){e.message="Invalid date supplied: "+n,i.config.errorHandler(e)}t&&i.currentYear!==r&&(Y("onYearChange"),T()),!t||i.currentYear===r&&i.currentMonth===o||Y("onMonthChange"),i.redraw()}function f(e){var t=xd(e);~t.className.indexOf("arrow")&&g(e,t.classList.contains("arrowUp")?1:-1)}function g(e,t,i){var n=e&&xd(e),r=i||n&&n.parentNode&&n.parentNode.firstChild,o=X("increment");o.delta=t,r&&r.dispatchEvent(o)}function m(e,t,n,r){var o=L(t,!0),s=wd("span",e,t.getDate().toString());return s.dateObj=t,s.$i=r,s.setAttribute("aria-label",i.formatDate(t,i.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===Od(t,i.now)&&(i.todayDateElem=s,s.classList.add("today"),s.setAttribute("aria-current","date")),o?(s.tabIndex=-1,K(t)&&(s.classList.add("selected"),i.selectedDateElem=s,"range"===i.config.mode&&(_d(s,"startRange",i.selectedDates[0]&&0===Od(t,i.selectedDates[0],!0)),_d(s,"endRange",i.selectedDates[1]&&0===Od(t,i.selectedDates[1],!0)),"nextMonthDay"===e&&s.classList.add("inRange")))):s.classList.add("flatpickr-disabled"),"range"===i.config.mode&&function(e){return!("range"!==i.config.mode||i.selectedDates.length<2)&&(Od(e,i.selectedDates[0])>=0&&Od(e,i.selectedDates[1])<=0)}(t)&&!K(t)&&s.classList.add("inRange"),i.weekNumbers&&1===i.config.showMonths&&"prevMonthDay"!==e&&r%7==6&&i.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+i.config.getWeek(t)+"</span>"),Y("onDayCreate",s),s}function v(e){e.focus(),"range"===i.config.mode&&M(e)}function y(e){for(var t=e>0?0:i.config.showMonths-1,n=e>0?i.config.showMonths:-1,r=t;r!=n;r+=e)for(var o=i.daysContainer.children[r],s=e>0?0:o.children.length-1,a=e>0?o.children.length:-1,l=s;l!=a;l+=e){var u=o.children[l];if(-1===u.className.indexOf("hidden")&&L(u.dateObj))return u}}function b(e,t){var r=n(),o=D(r||document.body),s=void 0!==e?e:o?r:void 0!==i.selectedDateElem&&D(i.selectedDateElem)?i.selectedDateElem:void 0!==i.todayDateElem&&D(i.todayDateElem)?i.todayDateElem:y(t>0?1:-1);void 0===s?i._input.focus():o?function(e,t){for(var n=-1===e.className.indexOf("Month")?e.dateObj.getMonth():i.currentMonth,r=t>0?i.config.showMonths:-1,o=t>0?1:-1,s=n-i.currentMonth;s!=r;s+=o)for(var a=i.daysContainer.children[s],l=n-i.currentMonth===s?e.$i+t:t<0?a.children.length-1:0,u=a.children.length,c=l;c>=0&&c<u&&c!=(t>0?u:-1);c+=o){var h=a.children[c];if(-1===h.className.indexOf("hidden")&&L(h.dateObj)&&Math.abs(e.$i-c)>=Math.abs(t))return v(h)}i.changeMonth(o),b(y(o),0)}(s,t):v(s)}function _(e,t){for(var n=(new Date(e,t,1).getDay()-i.l10n.firstDayOfWeek+7)%7,r=i.utils.getDaysInMonth((t-1+12)%12,e),o=i.utils.getDaysInMonth(t,e),s=window.document.createDocumentFragment(),a=i.config.showMonths>1,l=a?"prevMonthDay hidden":"prevMonthDay",u=a?"nextMonthDay hidden":"nextMonthDay",c=r+1-n,h=0;c<=r;c++,h++)s.appendChild(m("flatpickr-day "+l,new Date(e,t-1,c),0,h));for(c=1;c<=o;c++,h++)s.appendChild(m("flatpickr-day",new Date(e,t,c),0,h));for(var d=o+1;d<=42-n&&(1===i.config.showMonths||h%7!=0);d++,h++)s.appendChild(m("flatpickr-day "+u,new Date(e,t+1,d%o),0,h));var p=wd("div","dayContainer");return p.appendChild(s),p}function w(){if(void 0!==i.daysContainer){Td(i.daysContainer),i.weekNumbers&&Td(i.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<i.config.showMonths;t++){var n=new Date(i.currentYear,i.currentMonth,1);n.setMonth(i.currentMonth+t),e.appendChild(_(n.getFullYear(),n.getMonth()))}i.daysContainer.appendChild(e),i.days=i.daysContainer.firstChild,"range"===i.config.mode&&1===i.selectedDates.length&&M()}}function T(){if(!(i.config.showMonths>1||"dropdown"!==i.config.monthSelectorType)){var e=function(e){return!(void 0!==i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&e<i.config.minDate.getMonth())&&!(void 0!==i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()&&e>i.config.maxDate.getMonth())};i.monthsDropdownContainer.tabIndex=-1,i.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++)if(e(t)){var n=wd("option","flatpickr-monthDropdown-month");n.value=new Date(i.currentYear,t).getMonth().toString(),n.textContent=kd(t,i.config.shorthandCurrentMonth,i.l10n),n.tabIndex=-1,i.currentMonth===t&&(n.selected=!0),i.monthsDropdownContainer.appendChild(n)}}}function S(){var e,t=wd("div","flatpickr-month"),n=window.document.createDocumentFragment();i.config.showMonths>1||"static"===i.config.monthSelectorType?e=wd("span","cur-month"):(i.monthsDropdownContainer=wd("select","flatpickr-monthDropdown-months"),i.monthsDropdownContainer.setAttribute("aria-label",i.l10n.monthAriaLabel),h(i.monthsDropdownContainer,"change",(function(e){var t=xd(e),n=parseInt(t.value,10);i.changeMonth(n-i.currentMonth),Y("onMonthChange")})),T(),e=i.monthsDropdownContainer);var r=Ed("cur-year",{tabindex:"-1"}),o=r.getElementsByTagName("input")[0];o.setAttribute("aria-label",i.l10n.yearAriaLabel),i.config.minDate&&o.setAttribute("min",i.config.minDate.getFullYear().toString()),i.config.maxDate&&(o.setAttribute("max",i.config.maxDate.getFullYear().toString()),o.disabled=!!i.config.minDate&&i.config.minDate.getFullYear()===i.config.maxDate.getFullYear());var s=wd("div","flatpickr-current-month");return s.appendChild(e),s.appendChild(r),n.appendChild(s),t.appendChild(n),{container:t,yearElement:o,monthElement:e}}function E(){Td(i.monthNav),i.monthNav.appendChild(i.prevMonthNav),i.config.showMonths&&(i.yearElements=[],i.monthElements=[]);for(var e=i.config.showMonths;e--;){var t=S();i.yearElements.push(t.yearElement),i.monthElements.push(t.monthElement),i.monthNav.appendChild(t.container)}i.monthNav.appendChild(i.nextMonthNav)}function x(){i.weekdayContainer?Td(i.weekdayContainer):i.weekdayContainer=wd("div","flatpickr-weekdays");for(var e=i.config.showMonths;e--;){var t=wd("div","flatpickr-weekdaycontainer");i.weekdayContainer.appendChild(t)}return C(),i.weekdayContainer}function C(){if(i.weekdayContainer){var e=i.l10n.firstDayOfWeek,t=Fd(i.l10n.weekdays.shorthand);e>0&&e<t.length&&(t=Fd(t.splice(e,t.length),t.splice(0,e)));for(var n=i.config.showMonths;n--;)i.weekdayContainer.children[n].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function k(e,t){void 0===t&&(t=!0);var n=t?e:e-i.currentMonth;n<0&&!0===i._hidePrevMonthArrow||n>0&&!0===i._hideNextMonthArrow||(i.currentMonth+=n,(i.currentMonth<0||i.currentMonth>11)&&(i.currentYear+=i.currentMonth>11?1:-1,i.currentMonth=(i.currentMonth+12)%12,Y("onYearChange"),T()),w(),Y("onMonthChange"),Q())}function P(e){return i.calendarContainer.contains(e)}function A(e){if(i.isOpen&&!i.config.inline){var t=xd(e),n=P(t),r=!(t===i.input||t===i.altInput||i.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(i.input)||~e.path.indexOf(i.altInput)))&&!n&&!P(e.relatedTarget),o=!i.config.ignoredFocusElements.some((function(e){return e.contains(t)}));r&&o&&(i.config.allowInput&&i.setDate(i._input.value,!1,i.config.altInput?i.config.altFormat:i.config.dateFormat),void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement&&""!==i.input.value&&void 0!==i.input.value&&s(),i.close(),i.config&&"range"===i.config.mode&&1===i.selectedDates.length&&i.clear(!1))}}function I(e){if(!(!e||i.config.minDate&&e<i.config.minDate.getFullYear()||i.config.maxDate&&e>i.config.maxDate.getFullYear())){var t=e,n=i.currentYear!==t;i.currentYear=t||i.currentYear,i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth=Math.min(i.config.maxDate.getMonth(),i.currentMonth):i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&(i.currentMonth=Math.max(i.config.minDate.getMonth(),i.currentMonth)),n&&(i.redraw(),Y("onYearChange"),T())}}function L(e,t){var n;void 0===t&&(t=!0);var r=i.parseDate(e,void 0,t);if(i.config.minDate&&r&&Od(r,i.config.minDate,void 0!==t?t:!i.minDateHasTime)<0||i.config.maxDate&&r&&Od(r,i.config.maxDate,void 0!==t?t:!i.maxDateHasTime)>0)return!1;if(!i.config.enable&&0===i.config.disable.length)return!0;if(void 0===r)return!1;for(var o=!!i.config.enable,s=null!==(n=i.config.enable)&&void 0!==n?n:i.config.disable,a=0,l=void 0;a<s.length;a++){if("function"==typeof(l=s[a])&&l(r))return o;if(l instanceof Date&&void 0!==r&&l.getTime()===r.getTime())return o;if("string"==typeof l){var u=i.parseDate(l,void 0,!0);return u&&u.getTime()===r.getTime()?o:!o}if("object"==typeof l&&void 0!==r&&l.from&&l.to&&r.getTime()>=l.from.getTime()&&r.getTime()<=l.to.getTime())return o}return!o}function D(e){return void 0!==i.daysContainer&&(-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&i.daysContainer.contains(e))}function O(e){var t=e.target===i._input,n=i._input.value.trimEnd()!==Z();!t||!n||e.relatedTarget&&P(e.relatedTarget)||i.setDate(i._input.value,!0,e.target===i.altInput?i.config.altFormat:i.config.dateFormat)}function R(t){var r=xd(t),o=i.config.wrap?e.contains(r):r===i._input,l=i.config.allowInput,u=i.isOpen&&(!l||!o),c=i.config.inline&&o&&!l;if(13===t.keyCode&&o){if(l)return i.setDate(i._input.value,!0,r===i.altInput?i.config.altFormat:i.config.dateFormat),i.close(),r.blur();i.open()}else if(P(r)||u||c){var h=!!i.timeContainer&&i.timeContainer.contains(r);switch(t.keyCode){case 13:h?(t.preventDefault(),s(),j()):z(t);break;case 27:t.preventDefault(),j();break;case 8:case 46:o&&!i.config.allowInput&&(t.preventDefault(),i.clear());break;case 37:case 39:if(h||o)i.hourElement&&i.hourElement.focus();else{t.preventDefault();var d=n();if(void 0!==i.daysContainer&&(!1===l||d&&D(d))){var p=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),k(p),b(y(1),0)):b(void 0,p)}}break;case 38:case 40:t.preventDefault();var f=40===t.keyCode?1:-1;i.daysContainer&&void 0!==r.$i||r===i.input||r===i.altInput?t.ctrlKey?(t.stopPropagation(),I(i.currentYear-f),b(y(1),0)):h||b(void 0,7*f):r===i.currentYearElement?I(i.currentYear-f):i.config.enableTime&&(!h&&i.hourElement&&i.hourElement.focus(),s(t),i._debouncedChange());break;case 9:if(h){var g=[i.hourElement,i.minuteElement,i.secondElement,i.amPM].concat(i.pluginElements).filter((function(e){return e})),m=g.indexOf(r);if(-1!==m){var v=g[m+(t.shiftKey?-1:1)];t.preventDefault(),(v||i._input).focus()}}else!i.config.noCalendar&&i.daysContainer&&i.daysContainer.contains(r)&&t.shiftKey&&(t.preventDefault(),i._input.focus())}}if(void 0!==i.amPM&&r===i.amPM)switch(t.key){case i.l10n.amPM[0].charAt(0):case i.l10n.amPM[0].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[0],a(),J();break;case i.l10n.amPM[1].charAt(0):case i.l10n.amPM[1].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[1],a(),J()}(o||P(r))&&Y("onKeyDown",t)}function M(e,t){if(void 0===t&&(t="flatpickr-day"),1===i.selectedDates.length&&(!e||e.classList.contains(t)&&!e.classList.contains("flatpickr-disabled"))){for(var n=e?e.dateObj.getTime():i.days.firstElementChild.dateObj.getTime(),r=i.parseDate(i.selectedDates[0],void 0,!0).getTime(),o=Math.min(n,i.selectedDates[0].getTime()),s=Math.max(n,i.selectedDates[0].getTime()),a=!1,l=0,u=0,c=o;c<s;c+=Md)L(new Date(c),!0)||(a=a||c>o&&c<s,c<r&&(!l||c>l)?l=c:c>r&&(!u||c<u)&&(u=c));Array.from(i.rContainer.querySelectorAll("*:nth-child(-n+"+i.config.showMonths+") > ."+t)).forEach((function(t){var o,s,c,h=t.dateObj.getTime(),d=l>0&&h<l||u>0&&h>u;if(d)return t.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach((function(e){t.classList.remove(e)}));a&&!d||(["startRange","inRange","endRange","notAllowed"].forEach((function(e){t.classList.remove(e)})),void 0!==e&&(e.classList.add(n<=i.selectedDates[0].getTime()?"startRange":"endRange"),r<n&&h===r?t.classList.add("startRange"):r>n&&h===r&&t.classList.add("endRange"),h>=l&&(0===u||h<=u)&&(s=r,c=n,(o=h)>Math.min(s,c)&&o<Math.max(s,c))&&t.classList.add("inRange")))}))}}function N(){!i.isOpen||i.config.static||i.config.inline||$()}function B(e){return function(t){var n=i.config["_"+e+"Date"]=i.parseDate(t,i.config.dateFormat),r=i.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(i["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),i.selectedDates&&(i.selectedDates=i.selectedDates.filter((function(e){return L(e)})),i.selectedDates.length||"min"!==e||l(n),J()),i.daysContainer&&(H(),void 0!==n?i.currentYearElement[e]=n.getFullYear().toString():i.currentYearElement.removeAttribute(e),i.currentYearElement.disabled=!!r&&void 0!==n&&r.getFullYear()===n.getFullYear())}}function F(){return i.config.wrap?e.querySelector("[data-input]"):e}function U(){"object"!=typeof i.config.locale&&void 0===Hd.l10ns[i.config.locale]&&i.config.errorHandler(new Error("flatpickr: invalid locale "+i.config.locale)),i.l10n=Bd(Bd({},Hd.l10ns.default),"object"==typeof i.config.locale?i.config.locale:"default"!==i.config.locale?Hd.l10ns[i.config.locale]:void 0),Ad.D="("+i.l10n.weekdays.shorthand.join("|")+")",Ad.l="("+i.l10n.weekdays.longhand.join("|")+")",Ad.M="("+i.l10n.months.shorthand.join("|")+")",Ad.F="("+i.l10n.months.longhand.join("|")+")",Ad.K="("+i.l10n.amPM[0]+"|"+i.l10n.amPM[1]+"|"+i.l10n.amPM[0].toLowerCase()+"|"+i.l10n.amPM[1].toLowerCase()+")",void 0===Bd(Bd({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr&&void 0===Hd.defaultConfig.time_24hr&&(i.config.time_24hr=i.l10n.time_24hr),i.formatDate=Ld(i),i.parseDate=Dd({config:i.config,l10n:i.l10n})}function $(e){if("function"!=typeof i.config.position){if(void 0!==i.calendarContainer){Y("onPreCalendarPosition");var t=e||i._positionElement,n=Array.prototype.reduce.call(i.calendarContainer.children,(function(e,t){return e+t.offsetHeight}),0),r=i.calendarContainer.offsetWidth,o=i.config.position.split(" "),s=o[0],a=o.length>1?o[1]:null,l=t.getBoundingClientRect(),u=window.innerHeight-l.bottom,c="above"===s||"below"!==s&&u<n&&l.top>n,h=window.pageYOffset+l.top+(c?-n-2:t.offsetHeight+2);if(_d(i.calendarContainer,"arrowTop",!c),_d(i.calendarContainer,"arrowBottom",c),!i.config.inline){var d=window.pageXOffset+l.left,p=!1,f=!1;"center"===a?(d-=(r-l.width)/2,p=!0):"right"===a&&(d-=r-l.width,f=!0),_d(i.calendarContainer,"arrowLeft",!p&&!f),_d(i.calendarContainer,"arrowCenter",p),_d(i.calendarContainer,"arrowRight",f);var g=window.document.body.offsetWidth-(window.pageXOffset+l.right),m=d+r>window.document.body.offsetWidth,v=g+r>window.document.body.offsetWidth;if(_d(i.calendarContainer,"rightMost",m),!i.config.static)if(i.calendarContainer.style.top=h+"px",m)if(v){var y=function(){for(var e=null,t=0;t<document.styleSheets.length;t++){var i=document.styleSheets[t];if(i.cssRules){try{i.cssRules}catch(e){continue}e=i;break}}return null!=e?e:function(){var e=document.createElement("style");return document.head.appendChild(e),e.sheet}()}();if(void 0===y)return;var b=window.document.body.offsetWidth,_=Math.max(0,b/2-r/2),w=y.cssRules.length,T="{left:"+l.left+"px;right:auto;}";_d(i.calendarContainer,"rightMost",!1),_d(i.calendarContainer,"centerMost",!0),y.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+T,w),i.calendarContainer.style.left=_+"px",i.calendarContainer.style.right="auto"}else i.calendarContainer.style.left="auto",i.calendarContainer.style.right=g+"px";else i.calendarContainer.style.left=d+"px",i.calendarContainer.style.right="auto"}}}else i.config.position(i,e)}function H(){i.config.noCalendar||i.isMobile||(T(),Q(),w())}function j(){i._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(i.close,0):i.close()}function z(e){e.preventDefault(),e.stopPropagation();var t=Sd(xd(e),(function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")}));if(void 0!==t){var n=t,r=i.latestSelectedDateObj=new Date(n.dateObj.getTime()),o=(r.getMonth()<i.currentMonth||r.getMonth()>i.currentMonth+i.config.showMonths-1)&&"range"!==i.config.mode;if(i.selectedDateElem=n,"single"===i.config.mode)i.selectedDates=[r];else if("multiple"===i.config.mode){var s=K(r);s?i.selectedDates.splice(parseInt(s),1):i.selectedDates.push(r)}else"range"===i.config.mode&&(2===i.selectedDates.length&&i.clear(!1,!1),i.latestSelectedDateObj=r,i.selectedDates.push(r),0!==Od(r,i.selectedDates[0],!0)&&i.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()})));if(a(),o){var l=i.currentYear!==r.getFullYear();i.currentYear=r.getFullYear(),i.currentMonth=r.getMonth(),l&&(Y("onYearChange"),T()),Y("onMonthChange")}if(Q(),w(),J(),o||"range"===i.config.mode||1!==i.config.showMonths?void 0!==i.selectedDateElem&&void 0===i.hourElement&&i.selectedDateElem&&i.selectedDateElem.focus():v(n),void 0!==i.hourElement&&void 0!==i.hourElement&&i.hourElement.focus(),i.config.closeOnSelect){var u="single"===i.config.mode&&!i.config.enableTime,c="range"===i.config.mode&&2===i.selectedDates.length&&!i.config.enableTime;(u||c)&&j()}d()}}i.parseDate=Dd({config:i.config,l10n:i.l10n}),i._handlers=[],i.pluginElements=[],i.loadedPlugins=[],i._bind=h,i._setHoursFromDate=l,i._positionCalendar=$,i.changeMonth=k,i.changeYear=I,i.clear=function(e,t){void 0===e&&(e=!0);void 0===t&&(t=!0);i.input.value="",void 0!==i.altInput&&(i.altInput.value="");void 0!==i.mobileInput&&(i.mobileInput.value="");i.selectedDates=[],i.latestSelectedDateObj=void 0,!0===t&&(i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth());if(!0===i.config.enableTime){var n=Nd(i.config);u(n.hours,n.minutes,n.seconds)}i.redraw(),e&&Y("onChange")},i.close=function(){i.isOpen=!1,i.isMobile||(void 0!==i.calendarContainer&&i.calendarContainer.classList.remove("open"),void 0!==i._input&&i._input.classList.remove("active"));Y("onClose")},i.onMouseOver=M,i._createElement=wd,i.createDay=m,i.destroy=function(){void 0!==i.config&&Y("onDestroy");for(var e=i._handlers.length;e--;)i._handlers[e].remove();if(i._handlers=[],i.mobileInput)i.mobileInput.parentNode&&i.mobileInput.parentNode.removeChild(i.mobileInput),i.mobileInput=void 0;else if(i.calendarContainer&&i.calendarContainer.parentNode)if(i.config.static&&i.calendarContainer.parentNode){var t=i.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else i.calendarContainer.parentNode.removeChild(i.calendarContainer);i.altInput&&(i.input.type="text",i.altInput.parentNode&&i.altInput.parentNode.removeChild(i.altInput),delete i.altInput);i.input&&(i.input.type=i.input._type,i.input.classList.remove("flatpickr-input"),i.input.removeAttribute("readonly"));["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(e){try{delete i[e]}catch(e){}}))},i.isEnabled=L,i.jumpToDate=p,i.updateValue=J,i.open=function(e,t){void 0===t&&(t=i._positionElement);if(!0===i.isMobile){if(e){e.preventDefault();var n=xd(e);n&&n.blur()}return void 0!==i.mobileInput&&(i.mobileInput.focus(),i.mobileInput.click()),void Y("onOpen")}if(i._input.disabled||i.config.inline)return;var r=i.isOpen;i.isOpen=!0,r||(i.calendarContainer.classList.add("open"),i._input.classList.add("active"),Y("onOpen"),$(t));!0===i.config.enableTime&&!0===i.config.noCalendar&&(!1!==i.config.allowInput||void 0!==e&&i.timeContainer.contains(e.relatedTarget)||setTimeout((function(){return i.hourElement.select()}),50))},i.redraw=H,i.set=function(e,t){if(null!==e&&"object"==typeof e)for(var n in Object.assign(i.config,e),e)void 0!==q[n]&&q[n].forEach((function(e){return e()}));else i.config[e]=t,void 0!==q[e]?q[e].forEach((function(e){return e()})):dd.indexOf(e)>-1&&(i.config[e]=bd(t));i.redraw(),J(!0)},i.setDate=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=i.config.dateFormat);if(0!==e&&!e||e instanceof Array&&0===e.length)return i.clear(t);V(e,n),i.latestSelectedDateObj=i.selectedDates[i.selectedDates.length-1],i.redraw(),p(void 0,t),l(),0===i.selectedDates.length&&i.clear(!1);J(t),t&&Y("onChange")},i.toggle=function(e){if(!0===i.isOpen)return i.close();i.open(e)};var q={locale:[U,C],showMonths:[E,o,x],minDate:[p],maxDate:[p],positionElement:[G],clickOpens:[function(){!0===i.config.clickOpens?(h(i._input,"focus",i.open),h(i._input,"click",i.open)):(i._input.removeEventListener("focus",i.open),i._input.removeEventListener("click",i.open))}]};function V(e,t){var n=[];if(e instanceof Array)n=e.map((function(e){return i.parseDate(e,t)}));else if(e instanceof Date||"number"==typeof e)n=[i.parseDate(e,t)];else if("string"==typeof e)switch(i.config.mode){case"single":case"time":n=[i.parseDate(e,t)];break;case"multiple":n=e.split(i.config.conjunction).map((function(e){return i.parseDate(e,t)}));break;case"range":n=e.split(i.l10n.rangeSeparator).map((function(e){return i.parseDate(e,t)}))}else i.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));i.selectedDates=i.config.allowInvalidPreload?n:n.filter((function(e){return e instanceof Date&&L(e,!1)})),"range"===i.config.mode&&i.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()}))}function W(e){return e.slice().map((function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?i.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:i.parseDate(e.from,void 0),to:i.parseDate(e.to,void 0)}:e})).filter((function(e){return e}))}function G(){i._positionElement=i.config.positionElement||i._input}function Y(e,t){if(void 0!==i.config){var n=i.config[e];if(void 0!==n&&n.length>0)for(var r=0;n[r]&&r<n.length;r++)n[r](i.selectedDates,i.input.value,i,t);"onChange"===e&&(i.input.dispatchEvent(X("change")),i.input.dispatchEvent(X("input")))}}function X(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function K(e){for(var t=0;t<i.selectedDates.length;t++){var n=i.selectedDates[t];if(n instanceof Date&&0===Od(n,e))return""+t}return!1}function Q(){i.config.noCalendar||i.isMobile||!i.monthNav||(i.yearElements.forEach((function(e,t){var n=new Date(i.currentYear,i.currentMonth,1);n.setMonth(i.currentMonth+t),i.config.showMonths>1||"static"===i.config.monthSelectorType?i.monthElements[t].textContent=kd(n.getMonth(),i.config.shorthandCurrentMonth,i.l10n)+" ":i.monthsDropdownContainer.value=n.getMonth().toString(),e.value=n.getFullYear().toString()})),i._hidePrevMonthArrow=void 0!==i.config.minDate&&(i.currentYear===i.config.minDate.getFullYear()?i.currentMonth<=i.config.minDate.getMonth():i.currentYear<i.config.minDate.getFullYear()),i._hideNextMonthArrow=void 0!==i.config.maxDate&&(i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth+1>i.config.maxDate.getMonth():i.currentYear>i.config.maxDate.getFullYear()))}function Z(e){var t=e||(i.config.altInput?i.config.altFormat:i.config.dateFormat);return i.selectedDates.map((function(e){return i.formatDate(e,t)})).filter((function(e,t,n){return"range"!==i.config.mode||i.config.enableTime||n.indexOf(e)===t})).join("range"!==i.config.mode?i.config.conjunction:i.l10n.rangeSeparator)}function J(e){void 0===e&&(e=!0),void 0!==i.mobileInput&&i.mobileFormatStr&&(i.mobileInput.value=void 0!==i.latestSelectedDateObj?i.formatDate(i.latestSelectedDateObj,i.mobileFormatStr):""),i.input.value=Z(i.config.dateFormat),void 0!==i.altInput&&(i.altInput.value=Z(i.config.altFormat)),!1!==e&&Y("onValueUpdate")}function ee(e){var t=xd(e),n=i.prevMonthNav.contains(t),r=i.nextMonthNav.contains(t);n||r?k(n?-1:1):i.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?i.changeYear(i.currentYear+1):t.classList.contains("arrowDown")&&i.changeYear(i.currentYear-1)}return function(){i.element=i.input=e,i.isOpen=!1,function(){var n=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],o=Bd(Bd({},JSON.parse(JSON.stringify(e.dataset||{}))),t),s={};i.config.parseDate=o.parseDate,i.config.formatDate=o.formatDate,Object.defineProperty(i.config,"enable",{get:function(){return i.config._enable},set:function(e){i.config._enable=W(e)}}),Object.defineProperty(i.config,"disable",{get:function(){return i.config._disable},set:function(e){i.config._disable=W(e)}});var a="time"===o.mode;if(!o.dateFormat&&(o.enableTime||a)){var l=Hd.defaultConfig.dateFormat||pd.dateFormat;s.dateFormat=o.noCalendar||a?"H:i"+(o.enableSeconds?":S":""):l+" H:i"+(o.enableSeconds?":S":"")}if(o.altInput&&(o.enableTime||a)&&!o.altFormat){var u=Hd.defaultConfig.altFormat||pd.altFormat;s.altFormat=o.noCalendar||a?"h:i"+(o.enableSeconds?":S K":" K"):u+" h:i"+(o.enableSeconds?":S":"")+" K"}Object.defineProperty(i.config,"minDate",{get:function(){return i.config._minDate},set:B("min")}),Object.defineProperty(i.config,"maxDate",{get:function(){return i.config._maxDate},set:B("max")});var c=function(e){return function(t){i.config["min"===e?"_minTime":"_maxTime"]=i.parseDate(t,"H:i:S")}};Object.defineProperty(i.config,"minTime",{get:function(){return i.config._minTime},set:c("min")}),Object.defineProperty(i.config,"maxTime",{get:function(){return i.config._maxTime},set:c("max")}),"time"===o.mode&&(i.config.noCalendar=!0,i.config.enableTime=!0);Object.assign(i.config,s,o);for(var h=0;h<n.length;h++)i.config[n[h]]=!0===i.config[n[h]]||"true"===i.config[n[h]];dd.filter((function(e){return void 0!==i.config[e]})).forEach((function(e){i.config[e]=bd(i.config[e]||[]).map(r)})),i.isMobile=!i.config.disableMobile&&!i.config.inline&&"single"===i.config.mode&&!i.config.disable.length&&!i.config.enable&&!i.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(h=0;h<i.config.plugins.length;h++){var d=i.config.plugins[h](i)||{};for(var p in d)dd.indexOf(p)>-1?i.config[p]=bd(d[p]).map(r).concat(i.config[p]):void 0===o[p]&&(i.config[p]=d[p])}o.altInputClass||(i.config.altInputClass=F().className+" "+i.config.altInputClass);Y("onParseConfig")}(),U(),function(){if(i.input=F(),!i.input)return void i.config.errorHandler(new Error("Invalid input element specified"));i.input._type=i.input.type,i.input.type="text",i.input.classList.add("flatpickr-input"),i._input=i.input,i.config.altInput&&(i.altInput=wd(i.input.nodeName,i.config.altInputClass),i._input=i.altInput,i.altInput.placeholder=i.input.placeholder,i.altInput.disabled=i.input.disabled,i.altInput.required=i.input.required,i.altInput.tabIndex=i.input.tabIndex,i.altInput.type="text",i.input.setAttribute("type","hidden"),!i.config.static&&i.input.parentNode&&i.input.parentNode.insertBefore(i.altInput,i.input.nextSibling));i.config.allowInput||i._input.setAttribute("readonly","readonly");G()}(),function(){i.selectedDates=[],i.now=i.parseDate(i.config.now)||new Date;var e=i.config.defaultDate||("INPUT"!==i.input.nodeName&&"TEXTAREA"!==i.input.nodeName||!i.input.placeholder||i.input.value!==i.input.placeholder?i.input.value:null);e&&V(e,i.config.dateFormat);i._initialDate=i.selectedDates.length>0?i.selectedDates[0]:i.config.minDate&&i.config.minDate.getTime()>i.now.getTime()?i.config.minDate:i.config.maxDate&&i.config.maxDate.getTime()<i.now.getTime()?i.config.maxDate:i.now,i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth(),i.selectedDates.length>0&&(i.latestSelectedDateObj=i.selectedDates[0]);void 0!==i.config.minTime&&(i.config.minTime=i.parseDate(i.config.minTime,"H:i"));void 0!==i.config.maxTime&&(i.config.maxTime=i.parseDate(i.config.maxTime,"H:i"));i.minDateHasTime=!!i.config.minDate&&(i.config.minDate.getHours()>0||i.config.minDate.getMinutes()>0||i.config.minDate.getSeconds()>0),i.maxDateHasTime=!!i.config.maxDate&&(i.config.maxDate.getHours()>0||i.config.maxDate.getMinutes()>0||i.config.maxDate.getSeconds()>0)}(),i.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=i.currentMonth),void 0===t&&(t=i.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:i.l10n.daysInMonth[e]}},i.isMobile||function(){var e=window.document.createDocumentFragment();if(i.calendarContainer=wd("div","flatpickr-calendar"),i.calendarContainer.tabIndex=-1,!i.config.noCalendar){if(e.appendChild((i.monthNav=wd("div","flatpickr-months"),i.yearElements=[],i.monthElements=[],i.prevMonthNav=wd("span","flatpickr-prev-month"),i.prevMonthNav.innerHTML=i.config.prevArrow,i.nextMonthNav=wd("span","flatpickr-next-month"),i.nextMonthNav.innerHTML=i.config.nextArrow,E(),Object.defineProperty(i,"_hidePrevMonthArrow",{get:function(){return i.__hidePrevMonthArrow},set:function(e){i.__hidePrevMonthArrow!==e&&(_d(i.prevMonthNav,"flatpickr-disabled",e),i.__hidePrevMonthArrow=e)}}),Object.defineProperty(i,"_hideNextMonthArrow",{get:function(){return i.__hideNextMonthArrow},set:function(e){i.__hideNextMonthArrow!==e&&(_d(i.nextMonthNav,"flatpickr-disabled",e),i.__hideNextMonthArrow=e)}}),i.currentYearElement=i.yearElements[0],Q(),i.monthNav)),i.innerContainer=wd("div","flatpickr-innerContainer"),i.config.weekNumbers){var t=function(){i.calendarContainer.classList.add("hasWeeks");var e=wd("div","flatpickr-weekwrapper");e.appendChild(wd("span","flatpickr-weekday",i.l10n.weekAbbreviation));var t=wd("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),n=t.weekWrapper,r=t.weekNumbers;i.innerContainer.appendChild(n),i.weekNumbers=r,i.weekWrapper=n}i.rContainer=wd("div","flatpickr-rContainer"),i.rContainer.appendChild(x()),i.daysContainer||(i.daysContainer=wd("div","flatpickr-days"),i.daysContainer.tabIndex=-1),w(),i.rContainer.appendChild(i.daysContainer),i.innerContainer.appendChild(i.rContainer),e.appendChild(i.innerContainer)}i.config.enableTime&&e.appendChild(function(){i.calendarContainer.classList.add("hasTime"),i.config.noCalendar&&i.calendarContainer.classList.add("noCalendar");var e=Nd(i.config);i.timeContainer=wd("div","flatpickr-time"),i.timeContainer.tabIndex=-1;var t=wd("span","flatpickr-time-separator",":"),n=Ed("flatpickr-hour",{"aria-label":i.l10n.hourAriaLabel});i.hourElement=n.getElementsByTagName("input")[0];var r=Ed("flatpickr-minute",{"aria-label":i.l10n.minuteAriaLabel});i.minuteElement=r.getElementsByTagName("input")[0],i.hourElement.tabIndex=i.minuteElement.tabIndex=-1,i.hourElement.value=md(i.latestSelectedDateObj?i.latestSelectedDateObj.getHours():i.config.time_24hr?e.hours:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(e.hours)),i.minuteElement.value=md(i.latestSelectedDateObj?i.latestSelectedDateObj.getMinutes():e.minutes),i.hourElement.setAttribute("step",i.config.hourIncrement.toString()),i.minuteElement.setAttribute("step",i.config.minuteIncrement.toString()),i.hourElement.setAttribute("min",i.config.time_24hr?"0":"1"),i.hourElement.setAttribute("max",i.config.time_24hr?"23":"12"),i.hourElement.setAttribute("maxlength","2"),i.minuteElement.setAttribute("min","0"),i.minuteElement.setAttribute("max","59"),i.minuteElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(n),i.timeContainer.appendChild(t),i.timeContainer.appendChild(r),i.config.time_24hr&&i.timeContainer.classList.add("time24hr");if(i.config.enableSeconds){i.timeContainer.classList.add("hasSeconds");var o=Ed("flatpickr-second");i.secondElement=o.getElementsByTagName("input")[0],i.secondElement.value=md(i.latestSelectedDateObj?i.latestSelectedDateObj.getSeconds():e.seconds),i.secondElement.setAttribute("step",i.minuteElement.getAttribute("step")),i.secondElement.setAttribute("min","0"),i.secondElement.setAttribute("max","59"),i.secondElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(wd("span","flatpickr-time-separator",":")),i.timeContainer.appendChild(o)}i.config.time_24hr||(i.amPM=wd("span","flatpickr-am-pm",i.l10n.amPM[vd((i.latestSelectedDateObj?i.hourElement.value:i.config.defaultHour)>11)]),i.amPM.title=i.l10n.toggleTitle,i.amPM.tabIndex=-1,i.timeContainer.appendChild(i.amPM));return i.timeContainer}());_d(i.calendarContainer,"rangeMode","range"===i.config.mode),_d(i.calendarContainer,"animate",!0===i.config.animate),_d(i.calendarContainer,"multiMonth",i.config.showMonths>1),i.calendarContainer.appendChild(e);var o=void 0!==i.config.appendTo&&void 0!==i.config.appendTo.nodeType;if((i.config.inline||i.config.static)&&(i.calendarContainer.classList.add(i.config.inline?"inline":"static"),i.config.inline&&(!o&&i.element.parentNode?i.element.parentNode.insertBefore(i.calendarContainer,i._input.nextSibling):void 0!==i.config.appendTo&&i.config.appendTo.appendChild(i.calendarContainer)),i.config.static)){var s=wd("div","flatpickr-wrapper");i.element.parentNode&&i.element.parentNode.insertBefore(s,i.element),s.appendChild(i.element),i.altInput&&s.appendChild(i.altInput),s.appendChild(i.calendarContainer)}i.config.static||i.config.inline||(void 0!==i.config.appendTo?i.config.appendTo:window.document.body).appendChild(i.calendarContainer)}(),function(){i.config.wrap&&["open","close","toggle","clear"].forEach((function(e){Array.prototype.forEach.call(i.element.querySelectorAll("[data-"+e+"]"),(function(t){return h(t,"click",i[e])}))}));if(i.isMobile)return void function(){var e=i.config.enableTime?i.config.noCalendar?"time":"datetime-local":"date";i.mobileInput=wd("input",i.input.className+" flatpickr-mobile"),i.mobileInput.tabIndex=1,i.mobileInput.type=e,i.mobileInput.disabled=i.input.disabled,i.mobileInput.required=i.input.required,i.mobileInput.placeholder=i.input.placeholder,i.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",i.selectedDates.length>0&&(i.mobileInput.defaultValue=i.mobileInput.value=i.formatDate(i.selectedDates[0],i.mobileFormatStr));i.config.minDate&&(i.mobileInput.min=i.formatDate(i.config.minDate,"Y-m-d"));i.config.maxDate&&(i.mobileInput.max=i.formatDate(i.config.maxDate,"Y-m-d"));i.input.getAttribute("step")&&(i.mobileInput.step=String(i.input.getAttribute("step")));i.input.type="hidden",void 0!==i.altInput&&(i.altInput.type="hidden");try{i.input.parentNode&&i.input.parentNode.insertBefore(i.mobileInput,i.input.nextSibling)}catch(e){}h(i.mobileInput,"change",(function(e){i.setDate(xd(e).value,!1,i.mobileFormatStr),Y("onChange"),Y("onClose")}))}();var e=yd(N,50);i._debouncedChange=yd(d,300),i.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&h(i.daysContainer,"mouseover",(function(e){"range"===i.config.mode&&M(xd(e))}));h(i._input,"keydown",R),void 0!==i.calendarContainer&&h(i.calendarContainer,"keydown",R);i.config.inline||i.config.static||h(window,"resize",e);void 0!==window.ontouchstart?h(window.document,"touchstart",A):h(window.document,"mousedown",A);h(window.document,"focus",A,{capture:!0}),!0===i.config.clickOpens&&(h(i._input,"focus",i.open),h(i._input,"click",i.open));void 0!==i.daysContainer&&(h(i.monthNav,"click",ee),h(i.monthNav,["keyup","increment"],c),h(i.daysContainer,"click",z));if(void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement){var t=function(e){return xd(e).select()};h(i.timeContainer,["increment"],s),h(i.timeContainer,"blur",s,{capture:!0}),h(i.timeContainer,"click",f),h([i.hourElement,i.minuteElement],["focus","click"],t),void 0!==i.secondElement&&h(i.secondElement,"focus",(function(){return i.secondElement&&i.secondElement.select()})),void 0!==i.amPM&&h(i.amPM,"click",(function(e){s(e)}))}i.config.allowInput&&h(i._input,"blur",O)}(),(i.selectedDates.length||i.config.noCalendar)&&(i.config.enableTime&&l(i.config.noCalendar?i.latestSelectedDateObj:void 0),J(!1)),o();var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!i.isMobile&&n&&$(),Y("onReady")}(),i}function $d(e,t){for(var i=Array.prototype.slice.call(e).filter((function(e){return e instanceof HTMLElement})),n=[],r=0;r<i.length;r++){var o=i[r];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=Ud(o,t||{}),n.push(o._flatpickr)}catch(e){console.error(e)}}return 1===n.length?n[0]:n}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return $d(this,e)},HTMLElement.prototype.flatpickr=function(e){return $d([this],e)});var Hd=function(e,t){return"string"==typeof e?$d(window.document.querySelectorAll(e),t):e instanceof Node?$d([e],t):$d(e,t)};Hd.defaultConfig={},Hd.l10ns={en:Bd({},gd),default:Bd({},gd)},Hd.localize=function(e){Hd.l10ns.default=Bd(Bd({},Hd.l10ns.default),e)},Hd.setDefaults=function(e){Hd.defaultConfig=Bd(Bd({},Hd.defaultConfig),e)},Hd.parseDate=Dd({}),Hd.formatDate=Ld({}),Hd.compareDates=Od,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return $d(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=Hd);const jd=Hd;function zd(e){return zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(e)}function qd(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Vd(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=zd(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=zd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zd(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Wd=function(e,t){return jd(e,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?qd(Object(i),!0).forEach((function(t){Vd(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qd(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({mode:"range",dateFormat:"Y-m-d",defaultDate:t,monthSelectorType:"static",yearSelectorType:"static",inline:!0,minDate:"today",locale:{weekdays:{shorthand:["S","M","T","W","T","F","S"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},prevArrow:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 12H21" stroke="currentColor" stroke-width="1.5" stroke-linecap="square" stroke-linejoin="round"/><path d="M10 5L3 12L10 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="square"/></svg>',nextArrow:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 12H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="square" stroke-linejoin="round"/><path d="M14 5L21 12L14 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="square"/></svg>'},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}))},Gd=function(e){var t={from:null,to:null};return e[0]?t.from=jd.formatDate(e[0],"m/d/Y"):t.from=null,e[1]?t.to=jd.formatDate(e[1],"m/d/Y"):t.to=null,t},Yd=function(e){var t="";if(e.from){var i=jd.parseDate(e.from,"m/d/Y");t+="".concat(jd.formatDate(i,"m-d-Y"))}if(e.to){var n=jd.parseDate(e.to,"m/d/Y");t+="|".concat(jd.formatDate(n,"m-d-Y"))}return t};const Xd=(0,s.createBehavior)("FilterDatepicker",{buildDatepicker:function(){this.fp=Wd(this.$container,[this.dates.from,this.dates.to],this.config),this.fp.config.onChange.push(this.onDateChangeHandler)},onDateChangeHandler:function(e,t,i){this.dates=Gd(e),this.$applyButton&&(this.$applyButton.disabled="")},applyDates:function(e){var t;if(e&&this.config.buttonPreventDefault&&e.preventDefault(),this.dates.from&&this.dates.to){var i=Yd(this.dates);this.searchParams.set(this.filterName,i)}else this.options["reset-dates"]?this.searchParams.set(this.filterName,this.options["reset-dates"]):this.searchParams.delete(this.filterName);null!==(t=this.options)&&void 0!==t&&t.dispatch?this.dispatchNewDate():window.A17.pjax.loadPage({url:"".concat(this.baseUrl,"?").concat(this.searchParams.toString()),customTransition:"filters"})},clearDates:function(e){e&&this.config.buttonPreventDefault&&e.preventDefault(),this.dates.from=null,this.dates.to=null,this.fp.setDate([this.dates.from,this.dates.to],!0,"Y-m-d"),this.applyDates()},resetDatepicker:function(){this.dates.from=this.originalDates.from,this.dates.to=this.originalDates.to,this.fp.setDate([this.originalDates.from,this.originalDates.to],!0,"Y-m-d")},dispatchNewDate:function(){var e;null!==(e=this.config)&&void 0!==e&&e.dispatchToSelf?this.$node.dispatchEvent(new CustomEvent("newDateSelect",{detail:Yd(this.dates)})):dispatchEvent(new CustomEvent("newDateSelect",{detail:Yd(this.dates)}))}},{init:function(){var e,t,i,n,r,o=this.options.dates?this.options.dates.split("|"):[null,null];this.dates={from:o[0],to:o[1]},this.config={mode:(null===(e=this.options)||void 0===e?void 0:e.mode)||"range",buttonPreventDefault:Boolean(null===(t=this.options)||void 0===t?void 0:t.buttonpreventdefault),dispatchToSelf:Boolean(null===(i=this.options)||void 0===i?void 0:i.dispatchtoself)};var s=JSON.parse(null===(n=this.options)||void 0===n?void 0:n.enableddates),a=JSON.parse(null===(r=this.options)||void 0===r?void 0:r.disableddates);s&&(this.config.enable=s),a&&(this.config.disable=a),this.filterName=this.options.name||"dates",this.$container=this.getChild("container"),this.$clearButton=this.getChild("clear"),this.$applyButton=this.getChild("apply"),this.baseUrl=window.location.origin+window.location.pathname,this.searchParams=new URLSearchParams(window.location.search),this.originalDates=JSON.parse(JSON.stringify(this.dates)),this.$node.addEventListener("FilterDropdown:close",this.resetDatepicker,!1),this.$applyButton&&this.$applyButton.addEventListener("click",this.applyDates,!1),this.$clearButton&&this.$clearButton.addEventListener("click",this.clearDates,!1),this.buildDatepicker()},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.fp.destroy(),this.$node.removeEventListener("FilterDropdown:close",this.resetDatepicker),this.$clearButton.removeEventListener("click",this.clearDates),this.$applyButton.removeEventListener("click",this.applyDates)}}),Kd={toObject(e){if("string"!=typeof e)return{};var t={};return(e&&e.indexOf("?")>-1?e.split("?")[1]:location.search).replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),(function(e,i,n,r){t[i]=r})),t},fromObject(e){var t="",i=0;if(Object.getOwnPropertyNames(e).length>0)for(var n in t="?",e)e.hasOwnProperty(n)&&(t+=(i>0?"&":"")+n+"="+encodeURIComponent(e[n]).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)})),i++);return t},updateParameter(e,t,i){var n=new RegExp("([?&])"+t+"=.*?(&|#|$)","i");if(e.match(n))return e.replace(n,"$1"+t+"="+i+"$2");var r="";-1!==e.indexOf("#")&&(r=e.replace(/.*#/,"#"),e=e.replace(/#.*/,""));var o=-1!==e.indexOf("?")?"&":"?";return e+o+t+"="+i+r}},Qd=Kd,Zd=function(e){var t=e,i=new XMLHttpRequest,n=t.url;if(t.queryString="",void 0!==t.data&&!t.sendJSON){if(!Qd.fromObject)throw new ReferenceError("Missing: queryStringHandler.fromObject");t.queryString=Qd.fromObject(t.data)}if("POST"!==t.type&&(n+=n.indexOf("?")>0?t.queryString.replace("?","&"):t.queryString),i.open(t.type,n,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===t.type&&i.setRequestHeader("Content-Type",t.sendJSON?"application/json":"application/x-www-form-urlencoded; charset=UTF-8"),void 0!==t.requestHeaders&&t.requestHeaders.length>0)for(var r=0;r<t.requestHeaders.length;r++){var o=t.requestHeaders[r].header,s=t.requestHeaders[r].value;void 0!==o&&void 0!==s&&i.setRequestHeader(o,s)}return i.onload=function(){i.status>=200&&i.status<400?"function"===(typeof t.onSuccess).toLowerCase()&&t.onSuccess.call(this,i.responseText,i.status):("function"===(typeof t.onError).toLowerCase()&&t.onError.call(this,i.responseText,i.status),console.log("We reached our target server, but it returned an error: "+i.statusText))},i.onerror=function(){console.log("There was a connection error of some sort"),"function"===(typeof t.onError).toLowerCase()&&t.onError.call(this,i.responseText,i.status)},i.send("POST"===t.type?t.sendJSON?t.data:t.queryString.replace("?",""):""),i},Jd=function(e,t=!1){return"string"==typeof e?t?e.replace(/\p{C}/gmu,"").replace(/\n\r/gmu,"\n").replace(/\p{Zl}/gmu,"\n").replace(/\p{Zp}/gmu,"\n").replace(/\p{Zs}/gmu," "):e.replace(/\p{C}/gmu,"").replace(/\n\r/gmu,"").replace(/\p{Zl}/gmu,"\n").replace(/\p{Zp}/gmu,"").replace(/(?! )\p{Zs}/gmu,""):(console.log("Warning - removeNonePrintableCharacters - no string passed"),"")},ep=function(e){return"string"==typeof e?e.normalize("NFD").replace(/\p{Diacritic}/gmu,""):(console.log("Warning - replaceAccentedCharacters - no string passed"),"")};const tp=function(e){return e=e.toString(),e=Jd(e),e=(e=(e=ep(e)).replace(/[^0-9a-zA-Z ]/gim,"")).trim()};function ip(e){return function(e){if(Array.isArray(e))return np(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return np(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?np(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function np(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var rp=(0,s.createBehavior)("FilterDropdown",{toggle:function(e){e.preventDefault(),e.stopPropagation(),this.isOpen?this.close():this.open()},open:function(){document.dispatchEvent(new CustomEvent("FilterDropdown:closeAll")),this.setListPosition(),this.isOpen=!0,this.$trigger.classList.add("button-filter--open"),this.$trigger.setAttribute("aria-expanded","true"),this.$list.classList.add("trans-show-hide--active"),this.$node.classList.add("z-10"),this.options["icon-static"]||this.$icon.classList.add("rotate-180")},close:function(e){e&&e.stopPropagation(),this.isOpen&&(this.isOpen=!1,this.$node.dispatchEvent(new CustomEvent("FilterDropdown:close")),this.resetCheckboxes(),this.$trigger.classList.remove("button-filter--open"),this.$trigger.setAttribute("aria-expanded","false"),this.$list.classList.remove("trans-show-hide--active"),this.options["icon-static"]||this.$icon.classList.remove("rotate-180"))},setListPosition:function(){var e,t;this.$list.classList.remove("top-full","bottom-full","left-0","right-0");var i=null===(e=document.querySelector("#global-header"))||void 0===e?void 0:e.clientHeight,n=this.$trigger.getBoundingClientRect(),r=this.$list.getBoundingClientRect(),o=[],s=n.top-r.height>i+8,a=r.bottom>=window.innerHeight-50;if(s&&a)o.push("bottom-full");else{o.push("top-full");var l=r.bottom-window.innerHeight;l>0&&window.scrollTo({top:window.scrollY+l+10,behavior:"smooth"})}r.right>=window.innerWidth-50?o.push("right-0"):o.push("left-0"),(t=this.$list.classList).add.apply(t,o)},handleEsc:function(e){"Escape"===e.key&&this.close(e)},afterClose:function(){this.isOpen||this.$node.classList.remove("z-10")},clickList:function(e){e.stopPropagation()},handleCheckbox:function(){this.setValues(),this.values.sort().join("|")===this.originalValues.sort().join("|")?this.$applyButton.disabled="disabled":this.$applyButton.disabled=""},setValues:function(){var e=this;this.values=[],this.$checkboxes.forEach((function(t){var i=t.querySelector("input");i.checked&&e.values.push(i.value)}))},searchQuery:function(){return(this.$searchInput?tp(this.$searchInput.value):"").length>0&&!this.searchParams.has("q")?"q=".concat(this.$searchInput.value.trim(),"&"):""},applyFilters:function(){this.values.length>0?this.searchParams.set(this.filterName,this.values.join("|")):this.searchParams.delete(this.filterName),this.searchParams.delete("page"),window.A17.pjax.loadPage({url:this.baseUrl+"?"+this.searchQuery()+this.searchParams.toString(),customTransition:"filters"}),this.close()},clearFilters:function(){this.$checkboxes.forEach((function(e){e.querySelector("input").checked=!1})),this.values=[],this.searchParams.delete(this.filterName),window.A17.pjax.loadPage({url:"".concat(this.baseUrl,"?").concat(this.searchParams.toString()),customTransition:"filters"})},resetCheckboxes:function(){var e=this;if(this.options.multiple){var t=this.searchParams.get(this.filterName);this.values=t?t.split("|"):[],this.$checkboxes.forEach((function(t){var i=t.querySelector("input");i.checked=e.values.includes(i.value)}))}},handleScroll:function(){var e=this.$list.scrollTop,t=this.$list.clientHeight,i=this.$listUl.clientHeight;!this.hasTriggeredAjax&&e+t>i-100&&(this.hasTriggeredAjax=!0,this.ajaxItems({type:"loadmore"}))},ajaxItems:function(e){var t,i=this;try{this.ajaxReq.abort()}catch(e){}this.ajaxReq=Zd({url:this.endpoint,type:"GET",data:{selectedFilters:null===(t=new URLSearchParams(window.location.search).get(this.filterName))||void 0===t?void 0:t.toString(),page:this.page++,search:this.filterInputValue},onSuccess:function(t){if(t){var n=JSON.parse(t);i.updateList(n.items,e),n.isLastPage&&(i.$listUl.classList.remove("loading"),i.$list.removeEventListener("scroll",i.handleScroll))}},onError:function(e){console.error(e)}})},updateList:function(e,t){var i,n=this,r=document.createElement("div");r.innerHTML=e;var o=ip(r.querySelectorAll("[data-FilterDropdown-checkbox]")).map((function(e){var t=document.createElement("li");return t.append(e),t}));(i=this.$listUl).append.apply(i,ip(o)),setTimeout((function(){t.type&&"loadmore"===t.type&&o[0].querySelector("[data-FilterDropdown-checkbox]").focus(),n.hasTriggeredAjax=!1,n.addCheckboxHandlers()}),1)},addCheckboxHandlers:function(){var e=this;this.$checkboxes=this.getChildren("checkbox"),this.$checkboxes&&(this.setValues(),this.$checkboxes.forEach((function(t){var i=t.querySelector("input");i.dataset.listener||i.addEventListener("change",e.handleCheckbox,!1),i.dataset.listener=!0})),this.originalValues=JSON.parse(JSON.stringify(this.values)))},newSearchTerm:function(){try{this.ajaxReq.abort()}catch(e){}this.$listUl.classList.add("loading"),this.$list.removeEventListener("scroll",this.handleScroll),this.$list.addEventListener("scroll",this.handleScroll,!1),this.$listUl.innerHTML="",this.page=0,this.filterInputValue=this.$filterInput?tp(this.$filterInput.value):"",this.ajaxItems({type:"search"}),this.$filterInputClear&&(this.filterInputValue.length>0?(this.$filterInputClear.removeAttribute("hidden"),this.$filterInputClear.removeAttribute("inert")):(this.$filterInputClear.setAttribute("hidden","hidden"),this.$filterInputClear.setAttribute("inert","inert")))},filterSearch:function(){try{clearTimeout(this.filterSearchDebouncer)}catch(e){}this.filterSearchDebouncer=window.setTimeout(this.newSearchTerm,250)},filterSearchClear:function(){this.$filterInput.value="",this.filterInputValue="",this.newSearchTerm()}},{init:function(){this.isOpen=!1,this.$trigger=this.getChild("trigger"),this.$list=this.getChild("list"),this.$filterInput=this.getChild("input"),this.$filterInputClear=this.getChild("inputclear"),this.$listUl=this.$list.querySelector("ul"),this.$icon=this.$trigger.querySelector("svg"),this.$searchInput=document.querySelector("form[data-artworksearch-form] input"),this.totalPages=this.options.pages||1,this.endpoint=this.options.endpoint,this.page=2,this.filterInputValue="",this.$trigger.addEventListener("click",this.toggle,!1),this.$node.addEventListener("transitionend",this.afterClose),this.$list.addEventListener("click",this.clickList,!1),document.addEventListener("keyup",this.handleEsc,!1),document.addEventListener("click",this.close),document.addEventListener("FilterDropdown:closeAll",this.close,!1),this.hasTriggeredAjax=!1,this.ajaxReq=null,this.filterSearchDebouncer,this.totalPages>1&&(this.$listUl.classList.add("loading"),this.$list.addEventListener("scroll",this.handleScroll,!1)),this.options.multiple&&(this.addCheckboxHandlers(),this.$clearButton=this.getChild("clear"),this.$applyButton=this.getChild("apply"),this.baseUrl=window.location.origin+window.location.pathname,this.searchParams=new URLSearchParams(window.location.search),this.filterName=this.options.name,this.$checkboxes&&(this.setValues(),this.originalValues=JSON.parse(JSON.stringify(this.values))),this.$applyButton.addEventListener("click",this.applyFilters,!1),this.$clearButton.addEventListener("click",this.clearFilters,!1)),this.$filterInput&&this.$filterInput.addEventListener("input",this.filterSearch,!1),this.$filterInputClear&&this.$filterInputClear.addEventListener("click",this.filterSearchClear,!1)},enabled:function(){},resized:function(){this.setListPosition()},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){var e=this;this.$trigger.removeEventListener("click",this.toggle),this.$node.removeEventListener("transitionend",this.afterClose),this.$list.removeEventListener("click",this.clickList),document.removeEventListener("keyup",this.handleEsc),document.removeEventListener("click",this.close),document.removeEventListener("FilterDropdown:closeAll",this.close),this.totalPages>1&&this.$list.removeEventListener("scroll",this.handleScroll),this.options.multiple&&(this.$clearButton.removeEventListener("click",this.clearFilters),this.$applyButton.removeEventListener("click",this.applyFilters),this.$checkboxes&&this.$checkboxes.forEach((function(t){t.querySelector("input").removeEventListener("change",e.handleCheckbox,!1)}))),this.$filterInput&&this.$filterInput.removeEventListener("input",this.filterSearch,!1),this.$filterInputClear&&this.$filterInputClear.removeEventListener("click",this.filterSearchClear,!1)}});const op=rp;function sp(e){return sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(e)}function ap(e){return function(e){if(Array.isArray(e))return lp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return lp(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?lp(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lp(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function up(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function cp(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?up(Object(i),!0).forEach((function(t){hp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):up(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function hp(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=sp(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=sp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sp(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var dp=(0,s.createBehavior)("FilterLoadMore",{ajaxItems:function(e){var t,i=this;try{this.ajaxReq.abort()}catch(e){}this.$list.classList.add("loading"),document.dispatchEvent(new CustomEvent("Accordion:update")),this.ajaxReq=Zd({url:this.endpoint,type:"get",data:cp(cp({},this.data),{},{selectedFilters:null===(t=new URLSearchParams(window.location.search).get(this.data.name))||void 0===t?void 0:t.toString(),page:this.page++,search:this.filterInputValue}),onSuccess:function(t){if(t){var n=JSON.parse(t);i.updateList(n.items,e),n.isLastPage?(i.$trigger.setAttribute("disabled","disabled"),i.$trigger.setAttribute("inert",!0),i.$trigger.setAttribute("hidden",!0)):(i.$trigger.removeAttribute("disabled"),i.$trigger.removeAttribute("hidden"),i.$trigger.removeAttribute("inert"))}},onError:function(e){console.log(e)}})},handleClick:function(e){e.preventDefault(),this.ajaxItems({type:"loadmore"})},updateList:function(e,t){var i,n=document.createElement("div");n.innerHTML=e;var r=n.querySelectorAll("[data-FilterLoadMore-item]");(i=this.$list).append.apply(i,ap(r)),this.$list.style.minHeight="".concat(this.listMinHeight,"px"),this.$list.classList.remove("loading"),setTimeout((function(){t.type&&"loadmore"===t.type&&r[0].querySelector(["a","input"]).focus(),document.dispatchEvent(new CustomEvent("Accordion:update")),document.dispatchEvent(new CustomEvent("FilterModal:updateCheckboxes"))}),1)},newSearchTerm:function(){try{this.ajaxReq.abort()}catch(e){}this.$list.classList.add("loading");var e=this.$list.offsetHeight;this.$list.style.minHeight="".concat(e>this.listMinHeight?e:this.listMinHeight,"px"),this.$list.innerHTML="",this.page=0,this.filterInputValue=this.$filterInput?tp(this.$filterInput.value):"",this.ajaxItems({type:"search"}),this.$filterInputClear&&(this.filterInputValue.length>0?(this.$filterInputClear.removeAttribute("hidden"),this.$filterInputClear.removeAttribute("inert")):(this.$filterInputClear.setAttribute("hidden",!0),this.$filterInputClear.setAttribute("inert",!0))),this.$trigger.setAttribute("disabled","disabled"),this.$trigger.setAttribute("inert",!0),this.$trigger.setAttribute("hidden",!0)},filterSearch:function(){try{clearTimeout(this.filterSearchDebouncer)}catch(e){}this.filterSearchDebouncer=window.setTimeout(this.newSearchTerm,250)},filterSearchClear:function(){this.$filterInput.value="",this.filterInputValue="",this.newSearchTerm()}},{init:function(){this.$list=this.getChild("list"),this.$trigger=this.getChild("trigger"),this.$filterInput=this.getChild("input"),this.$filterInputClear=this.getChild("inputclear"),this.endpoint=this.options.endpoint,this.data=JSON.parse(this.options.data),this.page=2,this.ajaxReq=null,this.filterSearchDebouncer,this.listMinHeight=100,this.filterInputValue="",this.$trigger.addEventListener("click",this.handleClick,!1),this.$filterInput&&this.$filterInput.addEventListener("input",this.filterSearch,!1),this.$filterInputClear&&this.$filterInputClear.addEventListener("click",this.filterSearchClear,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$trigger.removeEventListener("click",this.handleClick),this.$filterInput&&this.$filterInput.removeEventListener("input",this.filterSearch,!1),this.$filterInputClear&&this.$filterInputClear.removeEventListener("click",this.filterSearchClear,!1)}});const pp=dp;function fp(e){return function(e){if(Array.isArray(e))return gp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gp(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?gp(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var mp=(0,s.createBehavior)("FilterModal",{buildDatepicker:function(e){var t=this,i={from:null,to:null},n=e.querySelector("[data-FilterModal-datepicker-container]"),r=e.querySelector("[data-FilterModal-datepicker-reset]"),o=e.getAttribute("data-name"),s=e.getAttribute("data-dates"),a=e.getAttribute("data-reset-dates"),l=!!s&&s.split("|"),u=Wd(n,l);u.config.onChange.push((function(e,n,r){if((i=Gd(e)).from&&i.to){var s=Yd(i);t.values[o]=[s],t.searchParams.set(o,t.values[o])}else a?(t.values[o]=[a],t.searchParams.set(o,a)):(t.values[o]=[],t.searchParams.delete(o));t.updateButtonState()})),r.addEventListener("click",(function(){i.from=null,i.to=null,t.values[o]=[],u.setDate([i.from,i.to],!0,"d/m/Y")}),!1)},handleCheckbox:function(e){var t=e.target;if(t.checked)this.values[t.name]?this.values[t.name].push(t.value):this.values[t.name]=[t.value];else{var i=this.values[t.name].indexOf(t.value);i>-1&&this.values[t.name].splice(i,1)}Array.isArray(this.values[t.name])&&this.values[t.name].length?this.searchParams.set(t.name,this.values[t.name].join("|")):this.searchParams.delete(t.name),console.log(this.searchParams.toString()),this.updateButtonState()},handleSort:function(e){e.preventDefault();var t=e.currentTarget;t.classList.contains("filter-active")||(this.$sortbyButtons.forEach((function(e){e.classList.remove("filter-active"),e.querySelector("svg").classList.remove("trans-show-hide--active")})),this.values.sort=t?[t.getAttribute("data-value")]:[],t.classList.add("filter-active"),t.querySelector("svg").classList.add("trans-show-hide--active"),this.$sortby.querySelector("[data-FilterDropdown-trigger]").innerText="Sort by: ".concat(t.innerText),this.searchParams.set("sort",this.values.sort),this.updateButtonState())},updateButtonState:function(){JSON.stringify(this.values)===JSON.stringify(this.originalValues)?this.$applyButton.disabled="disabled":this.$applyButton.disabled=""},setCheckboxValues:function(){var e=this;this.$checkboxes.forEach((function(t){var i=t.querySelector("input");if(i.checked)e.values[i.name]?e.values[i.name].push(i.value):e.values[i.name]=[i.value];else{var n=e.values[i.name].indexOf(i.value);n>-1&&e.values[i.name].splice(n,1)}}))},applyFilters:function(){window.A17.pjax.loadPage({url:"".concat(this.baseUrl,"?").concat(this.searchParams.toString()),customTransition:"filters"})},clearFilters:function(){window.A17.pjax.loadPage({url:this.baseUrl,customTransition:"filters"})},initDatepickers:function(){var e=this;this.$datepickers&&this.$datepickers.forEach((function(t){var i=t.getAttribute("data-name"),n=t.getAttribute("data-dates");e.values[i]=[n],e.buildDatepicker(t)}))},initCheckboxes:function(){var e=this;this.$checkboxes=this.getChildren("checkbox"),this.$checkboxes&&(this.baseUrl=window.location.origin+window.location.pathname,this.searchParams=new URLSearchParams(window.location.search),this.$checkboxes&&(this.$checkboxes.forEach((function(t){var i=t.querySelector("input");e.values[i.name]=[],i.dataset.listener||(i.addEventListener("change",e.handleCheckbox,!1),i.dataset.listener=!0)})),this.setCheckboxValues()))},initGlobalCheckboxes:function(){var e=this;this.$globalCheckboxes&&this.$globalCheckboxes.forEach((function(t){var i=t.querySelector("input");e.values[i.name]=i.checked?[i.value]:[],i.addEventListener("change",e.handleCheckbox,!1)}))},initSortBy:function(){var e=this;if(this.$sortby){this.$sortbyButtons=this.$sortby.querySelectorAll("[data-filterdropdown-list] button");var t=fp(this.$sortbyButtons).filter((function(e){return e.classList.contains("filter-active")}));this.values.sort=t[0]?[t[0].getAttribute("data-value")]:[],this.$sortbyButtons.forEach((function(t){t.addEventListener("click",e.handleSort,!1)}))}}},{init:function(){this.values={},this.$clearButton=this.getChild("clear"),this.$applyButton=this.getChild("apply"),this.$globalCheckboxes=this.getChildren("global-checkbox"),this.$sortby=this.getChild("sortby"),this.$checkboxes=this.getChildren("checkbox"),this.$datepickers=this.getChildren("datepicker"),this.$applyButton.addEventListener("click",this.applyFilters,!1),this.$clearButton.addEventListener("click",this.clearFilters,!1),this.initDatepickers(),this.initCheckboxes(),this.initGlobalCheckboxes(),this.initSortBy(),this.originalValues=JSON.parse(JSON.stringify(this.values)),document.addEventListener("FilterModal:updateCheckboxes",this.initCheckboxes,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){if(!["xs","sm"].includes(window.A17.currentMediaQuery)){var e=this.options.id;e&&document.querySelector("#".concat(e)).dispatchEvent(new CustomEvent("Modal:close"))}},disabled:function(){},destroy:function(){var e=this;this.$clearButton.removeEventListener("click",this.clearFilters),this.$applyButton.removeEventListener("click",this.applyFilters),document.removeEventListener("FilterModal:updateCheckboxes",this.initCheckboxes),this.$sortbyButtons&&this.$sortbyButtons.forEach((function(t){t.removeEventListener("click",e.handleSort)})),this.$globalCheckboxes&&this.$globalCheckboxes.forEach((function(t){t.removeEventListener("click",e.handleSort)})),this.$checkboxes&&this.$checkboxes&&this.$checkboxes.forEach((function(t){t.querySelector("input").removeEventListener("change",e.handleCheckbox)}))}});const vp=mp;const yp=(0,s.createBehavior)("FormCaptcha",{loadReCaptchaScript:function(){var e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js?render="+this.options.sitekey;var t=this.$node;e.onload=function(){console.log("Captcha loaded successfully")},e.onerror=function(){console.log("Captcha not loaded successfully")},t.appendChild(e)},removeReCaptchaBadge:function(){for(var e=document.getElementsByClassName("grecaptcha-badge");e.length>0;)e[0].parentNode.removeChild(e[0]);console.log("Captcha badge removed successfully")},handleSubmit:function(e){e.preventDefault();var t=this.options.sitekey,i=this.$node;grecaptcha.ready((function(){grecaptcha.execute(t,{action:"submit"}).then((function(e){document.getElementById("g-recaptcha-response").value=e,i.submit()}))}))}},{init:function(){this.loadReCaptchaScript(),this.$node.addEventListener("submit",this.handleSubmit)},destroy:function(){this.removeReCaptchaBadge(),this.$node.removeEventListener("submit",this.hideAlert)}});function bp(e){return bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(e)}function _p(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=bp(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=bp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bp(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const wp=(0,s.createBehavior)("Gallery",{initCarousel:function(){this.$gallery.mount()},destroyCarousel:function(){this.$gallery&&this.$gallery.destroy(!0)}},{init:function(){this.$gallery=new xl(this.$node,{pagination:!1,gap:"64px",breakpoints:_p(_p({},parseInt(window.A17.structure.breakpoints.md),{gap:"32px"}),parseInt(window.A17.structure.breakpoints.sm),{gap:"20px"})}),this.initCarousel()},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.destroyCarousel()}});var Tp=n(6128),Sp=n.n(Tp);function Ep(e){return function(e){if(Array.isArray(e))return xp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xp(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?xp(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xp(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var Cp=(0,s.createBehavior)("GalleryLightbox",{openGallery:function(e){e.preventDefault(),this.gallery.open()}},{init:function(){var e=this;this.$triggerButton=this.getChild("trigger-button");var t=Ep(this.options.elements?JSON.parse(this.options.elements):[]),i={lightboxHTML:'\n                    <div id="glightbox-body" class="glightbox-container">\n                        <button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n\n                        <div class="gloader visible"></div>\n                        <div class="goverlay"></div>\n                        <div class="gcontainer">\n                        <div id="glightbox-slider" class="gslider"></div>\n                        <div class="gcontrols">\n                            <div class="container">\n                                <div class="gcontrols-inner">\n                                    <div class="gcontrols-count">\n                                        <span class="gcontrols-count-current"></span>\n                                        /\n                                        <span class="gcontrols-count-total"></span>\n                                    </div>\n                                    <button class="gprev gbtn" tabindex="1" aria-label="Previous">{prevSVG}</button>\n                                    <button class="gnext gbtn" tabindex="0" aria-label="Next" data-customattribute="example">{nextSVG}</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ',slideHTML:'\n                <div class="gslide">\n                    <div class="gslide-inner-content">\n                        <div class="container">\n                            <div class="ginner-container">\n                                <div class="cols-container">\n                                    <div class="gslide-media">\n                                    </div>\n                                    <div class="gslide-description">\n                                        <div class="gdesc-inner">\n                                            <h4 class="gslide-title"></h4>\n                                            <div class="gslide-desc"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ',selector:"*[data-gallerylightbox-element]",svg:{close:'<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M25.8994 25.8995L6.10042 6.10055" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/><path d="M6.10059 25.8995L25.8996 6.10055" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/></svg>',next:'<svg width="33" height="32" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.05005 16H28.2501" stroke="currentColor" stroke-width="1.5" stroke-linecap="square" stroke-linejoin="round"/><path d="M19.9166 6.66669L29.25 16L19.9166 25.3334" stroke="currentColor" stroke-width="1.5" stroke-linecap="square"/></svg>',prev:'<svg width="33" height="32" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M27.95 16H4.74995" stroke="currentColor" stroke-width="1.5" stroke-linecap="square" stroke-linejoin="round"/><path d="M13.15 6.66666L3.81669 16L13.15 25.3333" stroke="currentColor" stroke-width="1.5" stroke-linecap="square"/></svg>'}};t&&t.length>0&&(i.elements=t),this.gallery=Sp()(i),this.gallery.on("open",(function(){var t=e.gallery.modal.querySelector(".gcontrols-count-current"),i=e.gallery.modal.querySelector(".gcontrols-count-total");t.textContent=e.gallery.index+1,i.textContent=e.gallery.elements.length}));var n=function(e){return e.preventDefault()};this.gallery.on("slide_changed",(function(t){var i,r,o,s,a=t.prev,l=t.current,u=e.gallery.modal.querySelectorAll(".gslide"),c=null===(i=u[a.index])||void 0===i?void 0:i.querySelector(".gslide-media img"),h=null===(r=u[l.index])||void 0===r?void 0:r.querySelector(".gslide-media img");(null!=l&&null!==(o=l.slideConfig)&&void 0!==o&&o.protected||"true"===(null===(s=l.trigger)||void 0===s||null===(s=s.dataset)||void 0===s?void 0:s.protected))&&(null==c||c.removeEventListener("contextmenu",n),null==h||h.addEventListener("contextmenu",n))})),this.gallery.on("slide_before_change",(function(t){var i=t.current;e.gallery.modal.querySelector(".gcontrols-count-current").textContent=i.index+1})),this.$triggerButton&&this.$triggerButton.addEventListener("click",this.openGallery,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$triggerButton&&this.$triggerButton.removeEventListener("click",this.openGallery)}});const kp=Cp;const Pp=(0,s.createBehavior)("GlobalHeader",{handleScroll:function(e){var t=window.scrollY;this.oldY!==t&&(this.oldY>t?this.$node.classList.remove("-translate-y-full"):t>this.$node.clientHeight&&this.$node.classList.add("-translate-y-full")),this.oldY=t,this.rAF=window.requestAnimationFrame(this.handleScroll)}},{init:function(){this.oldY=-1,this.rAF=window.requestAnimationFrame(this.handleScroll)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){window.cancelAnimationFrame(this.rAF),this.rAF=null}});var Ap=(0,s.createBehavior)("HighlightScroll",{initTimeline:function(){var e,t,i=this;null!==(e=this.$images)&&void 0!==e&&e.length&&this.$images.forEach((function(e,t){t>0&&bo.set(e,{opacity:0}),bo.timeline({scrollTrigger:{trigger:i.$wrapper,start:"top top",pin:e,end:"bottom bottom",pinSpacing:!1,anticipatePin:!0}})})),null!==(t=this.$contents)&&void 0!==t&&t.length&&this.$contents.forEach((function(e){bo.to("#image-".concat(i.key,"-").concat(e.dataset.id),{scrollTrigger:{trigger:e,start:"top bottom",end:"top top",toggleActions:"play none none reverse"},opacity:1,duration:.35})})),this.setCaptionHeight()},setCaptionHeight:function(){if(this.$captions&&!(this.$captions.length<=0)){var e=["xs","sm","md"].includes(window.A17.currentMediaQuery)?12:16,t=0;this.$captions.forEach((function(e){t=e.offsetHeight>t?e.offsetHeight:t})),this.$node.style.paddingBottom="".concat(t+e,"px")}}},{init:function(){bo.registerPlugin(Gh,Ao),this.$wrapper=this.getChild("wrapper"),this.$images=Array.from(this.getChildren("image")),this.$captions=Array.from(this.$node.querySelectorAll("figcaption")),this.$contents=Array.from(this.getChildren("content")),this.key=this.options.key,"complete"===document.readyState?this.initTimeline():window.addEventListener("load",this.initTimeline,!1)},enabled:function(){},resized:function(){Gh.refresh(),this.setCaptionHeight()},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){window.removeEventListener("load",this.initTimeline)}});const Ip=Ap;var Lp,Dp,Op,Rp,Mp,Np,Bp,Fp,Up,$p="transform",Hp=$p+"Origin",jp=function(e){var t=e.ownerDocument||e;!($p in e.style)&&"msTransform"in e.style&&(Hp=($p="msTransform")+"Origin");for(;t.parentNode&&(t=t.parentNode););if(Dp=window,Bp=new Kp,t){Lp=t,Op=t.documentElement,Rp=t.body,(Fp=Lp.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var i=t.createElement("div"),n=t.createElement("div"),r=t&&(t.body||t.firstElementChild);r&&r.appendChild&&(r.appendChild(i),i.appendChild(n),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Up=n.offsetParent!==i,r.removeChild(i))}return t},zp=[],qp=[],Vp=function(e){return e.ownerSVGElement||("svg"===(e.tagName+"").toLowerCase()?e:null)},Wp=function e(t){return"fixed"===Dp.getComputedStyle(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)},Gp=function e(t,i){if(t.parentNode&&(Lp||jp(t))){var n=Vp(t),r=n?n.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",o=n?i?"rect":"g":"div",s=2!==i?0:100,a=3===i?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",u=Lp.createElementNS?Lp.createElementNS(r.replace(/^https/,"http"),o):Lp.createElement(o);return i&&(n?(Np||(Np=e(t)),u.setAttribute("width",.01),u.setAttribute("height",.01),u.setAttribute("transform","translate("+s+","+a+")"),Np.appendChild(u)):(Mp||((Mp=e(t)).style.cssText=l),u.style.cssText=l+"width:0.1px;height:0.1px;top:"+a+"px;left:"+s+"px",Mp.appendChild(u))),u}throw"Need document and parent."},Yp=function(e,t){var i,n,r,o,s,a,l=Vp(e),u=e===l,c=l?zp:qp,h=e.parentNode;if(e===Dp)return e;if(c.length||c.push(Gp(e,1),Gp(e,2),Gp(e,3)),i=l?Np:Mp,l)u?(r=function(e){var t,i=e.getCTM();return i||(t=e.style[$p],e.style[$p]="none",e.appendChild(Fp),i=Fp.getCTM(),e.removeChild(Fp),t?e.style[$p]=t:e.style.removeProperty($p.replace(/([A-Z])/g,"-$1").toLowerCase())),i||Bp.clone()}(e),o=-r.e/r.a,s=-r.f/r.d,n=Bp):e.getBBox?(r=e.getBBox(),n=(n=e.transform?e.transform.baseVal:{}).numberOfItems?n.numberOfItems>1?function(e){for(var t=new Kp,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t}(n):n.getItem(0).matrix:Bp,o=n.a*r.x+n.c*r.y,s=n.b*r.x+n.d*r.y):(n=new Kp,o=s=0),t&&"g"===e.tagName.toLowerCase()&&(o=s=0),(u?l:h).appendChild(i),i.setAttribute("transform","matrix("+n.a+","+n.b+","+n.c+","+n.d+","+(n.e+o)+","+(n.f+s)+")");else{if(o=s=0,Up)for(n=e.offsetParent,r=e;r&&(r=r.parentNode)&&r!==n&&r.parentNode;)(Dp.getComputedStyle(r)[$p]+"").length>4&&(o=r.offsetLeft,s=r.offsetTop,r=0);if("absolute"!==(a=Dp.getComputedStyle(e)).position&&"fixed"!==a.position)for(n=e.offsetParent;h&&h!==n;)o+=h.scrollLeft||0,s+=h.scrollTop||0,h=h.parentNode;(r=i.style).top=e.offsetTop-s+"px",r.left=e.offsetLeft-o+"px",r[$p]=a[$p],r[Hp]=a[Hp],r.position="fixed"===a.position?"fixed":"absolute",e.parentNode.appendChild(i)}return i},Xp=function(e,t,i,n,r,o,s){return e.a=t,e.b=i,e.c=n,e.d=r,e.e=o,e.f=s,e},Kp=function(){function e(e,t,i,n,r,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0),Xp(this,e,t,i,n,r,o)}var t=e.prototype;return t.inverse=function(){var e=this.a,t=this.b,i=this.c,n=this.d,r=this.e,o=this.f,s=e*n-t*i||1e-10;return Xp(this,n/s,-t/s,-i/s,e/s,(i*o-n*r)/s,-(e*o-t*r)/s)},t.multiply=function(e){var t=this.a,i=this.b,n=this.c,r=this.d,o=this.e,s=this.f,a=e.a,l=e.c,u=e.b,c=e.d,h=e.e,d=e.f;return Xp(this,a*t+u*n,a*i+u*r,l*t+c*n,l*i+c*r,o+h*t+d*n,s+h*i+d*r)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(e){var t=this.a,i=this.b,n=this.c,r=this.d,o=this.e,s=this.f;return t===e.a&&i===e.b&&n===e.c&&r===e.d&&o===e.e&&s===e.f},t.apply=function(e,t){void 0===t&&(t={});var i=e.x,n=e.y,r=this.a,o=this.b,s=this.c,a=this.d,l=this.e,u=this.f;return t.x=i*r+n*s+l||0,t.y=i*o+n*a+u||0,t},e}();function Qp(e,t,i,n){if(!e||!e.parentNode||(Lp||jp(e)).documentElement===e)return new Kp;var r=function(e){for(var t,i;e&&e!==Rp;)(i=e._gsap)&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t}(e),o=Vp(e)?zp:qp,s=Yp(e,i),a=o[0].getBoundingClientRect(),l=o[1].getBoundingClientRect(),u=o[2].getBoundingClientRect(),c=s.parentNode,h=!n&&Wp(e),d=new Kp((l.left-a.left)/100,(l.top-a.top)/100,(u.left-a.left)/100,(u.top-a.top)/100,a.left+(h?0:Dp.pageXOffset||Lp.scrollLeft||Op.scrollLeft||Rp.scrollLeft||0),a.top+(h?0:Dp.pageYOffset||Lp.scrollTop||Op.scrollTop||Rp.scrollTop||0));if(c.removeChild(s),r)for(a=r.length;a--;)(l=r[a]).scaleX=l.scaleY=0,l.renderTransform(1,l);return t?d.inverse():d}function Zp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Jp,ef,tf,nf,rf,of,sf,af,lf,uf,cf,hf,df,pf,ff,gf,mf,vf,yf,bf,_f,wf,Tf=0,Sf=function(){return"undefined"!=typeof window},Ef=function(){return Jp||Sf()&&(Jp=window.gsap)&&Jp.registerPlugin&&Jp},xf=function(e){return"function"==typeof e},Cf=function(e){return"object"==typeof e},kf=function(e){return void 0===e},Pf=function(){return!1},Af="transform",If="transformOrigin",Lf=function(e){return Math.round(1e4*e)/1e4},Df=Array.isArray,Of=function(e,t){var i=tf.createElementNS?tf.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):tf.createElement(e);return i.style?i:tf.createElement(e)},Rf=180/Math.PI,Mf=1e20,Nf=new Kp,Bf=Date.now||function(){return(new Date).getTime()},Ff=[],Uf={},$f=0,Hf=/^(?:a|input|textarea|button|select)$/i,jf=0,zf={},qf={},Vf=function(e,t){var i,n={};for(i in e)n[i]=t?e[i]*t:e[i];return n},Wf=function e(t,i){for(var n,r=t.length;r--;)i?t[r].style.touchAction=i:t[r].style.removeProperty("touch-action"),(n=t[r].children)&&n.length&&e(n,i)},Gf=function(){return Ff.forEach((function(e){return e()}))},Yf=function(){return!Ff.length&&Jp.ticker.remove(Gf)},Xf=function(e){for(var t=Ff.length;t--;)Ff[t]===e&&Ff.splice(t,1);Jp.to(Yf,{overwrite:!0,delay:15,duration:0,onComplete:Yf,data:"_draggable"})},Kf=function(e,t,i,n){if(e.addEventListener){var r=df[t];n=n||(cf?{passive:!1}:null),e.addEventListener(r||t,i,n),r&&t!==r&&e.addEventListener(t,i,n)}},Qf=function(e,t,i,n){if(e.removeEventListener){var r=df[t];e.removeEventListener(r||t,i,n),r&&t!==r&&e.removeEventListener(t,i,n)}},Zf=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},Jf=function e(t){pf=t.touches&&Tf<t.touches.length,Qf(t.target,"touchend",e)},eg=function(e){pf=e.touches&&Tf<e.touches.length,Kf(e.target,"touchend",Jf)},tg=function(e){return ef.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},ig=function(e){return ef.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},ng=function e(t,i){Kf(t,"scroll",i),og(t.parentNode)||e(t.parentNode,i)},rg=function e(t,i){Qf(t,"scroll",i),og(t.parentNode)||e(t.parentNode,i)},og=function(e){return!(e&&e!==nf&&9!==e.nodeType&&e!==tf.body&&e!==ef&&e.nodeType&&e.parentNode)},sg=function(e,t){var i="x"===t?"Width":"Height",n="scroll"+i,r="client"+i;return Math.max(0,og(e)?Math.max(nf[n],rf[n])-(ef["inner"+i]||nf[r]||rf[r]):e[n]-e[r])},ag=function e(t,i){var n=sg(t,"x"),r=sg(t,"y");og(t)?t=qf:e(t.parentNode,i),t._gsMaxScrollX=n,t._gsMaxScrollY=r,i||(t._gsScrollX=t.scrollLeft||0,t._gsScrollY=t.scrollTop||0)},lg=function(e,t,i){var n=e.style;n&&(kf(n[t])&&(t=lf(t,e)||t),null==i?n.removeProperty&&n.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):n[t]=i)},ug=function(e){return ef.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},cg={},hg=function(e){if(e===ef)return cg.left=cg.top=0,cg.width=cg.right=nf.clientWidth||e.innerWidth||rf.clientWidth||0,cg.height=cg.bottom=(e.innerHeight||0)-20<nf.clientHeight?nf.clientHeight:e.innerHeight||rf.clientHeight||0,cg;var t=e.ownerDocument||tf,i=kf(e.pageX)?e.nodeType||kf(e.left)||kf(e.top)?uf(e)[0].getBoundingClientRect():e:{left:e.pageX-ig(t),top:e.pageY-tg(t),right:e.pageX-ig(t)+1,bottom:e.pageY-tg(t)+1};return kf(i.right)&&!kf(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):kf(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},dg=function(e,t,i){var n,r=e.vars,o=r[i],s=e._listeners[t];return xf(o)&&(n=o.apply(r.callbackScope||e,r[i+"Params"]||[e.pointerEvent])),s&&!1===e.dispatchEvent(t)&&(n=!1),n},pg=function(e,t){var i,n,r,o=uf(e)[0];return o.nodeType||o===ef?gg(o,t):kf(e.left)?{left:n=e.min||e.minX||e.minRotation||0,top:i=e.min||e.minY||0,width:(e.max||e.maxX||e.maxRotation||0)-n,height:(e.max||e.maxY||0)-i}:(r={x:0,y:0},{left:e.left-r.x,top:e.top-r.y,width:e.width,height:e.height})},fg={},gg=function(e,t){t=uf(t)[0];var i,n,r,o,s,a,l,u,c,h,d,p,f,g=e.getBBox&&e.ownerSVGElement,m=e.ownerDocument||tf;if(e===ef)r=tg(m),n=(i=ig(m))+(m.documentElement.clientWidth||e.innerWidth||m.body.clientWidth||0),o=r+((e.innerHeight||0)-20<m.documentElement.clientHeight?m.documentElement.clientHeight:e.innerHeight||m.body.clientHeight||0);else{if(t===ef||kf(t))return e.getBoundingClientRect();i=r=0,g?(d=(h=e.getBBox()).width,p=h.height):(e.viewBox&&(h=e.viewBox.baseVal)&&(i=h.x||0,r=h.y||0,d=h.width,p=h.height),d||(h="border-box"===(f=ug(e)).boxSizing,d=(parseFloat(f.width)||e.clientWidth||0)+(h?0:parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth)),p=(parseFloat(f.height)||e.clientHeight||0)+(h?0:parseFloat(f.borderTopWidth)+parseFloat(f.borderBottomWidth)))),n=d,o=p}return e===t?{left:i,top:r,width:n-i,height:o-r}:(a=(s=Qp(t,!0).multiply(Qp(e))).apply({x:i,y:r}),l=s.apply({x:n,y:r}),u=s.apply({x:n,y:o}),c=s.apply({x:i,y:o}),{left:i=Math.min(a.x,l.x,u.x,c.x),top:r=Math.min(a.y,l.y,u.y,c.y),width:Math.max(a.x,l.x,u.x,c.x)-i,height:Math.max(a.y,l.y,u.y,c.y)-r})},mg=function(e,t,i,n,r,o){var s,a,l,u={};if(t)if(1!==r&&t instanceof Array){if(u.end=s=[],l=t.length,Cf(t[0]))for(a=0;a<l;a++)s[a]=Vf(t[a],r);else for(a=0;a<l;a++)s[a]=t[a]*r;i+=1.1,n-=1.1}else xf(t)?u.end=function(i){var n,o,s=t.call(e,i);if(1!==r)if(Cf(s)){for(o in n={},s)n[o]=s[o]*r;s=n}else s*=r;return s}:u.end=t;return(i||0===i)&&(u.max=i),(n||0===n)&&(u.min=n),o&&(u.velocity=0),u},vg=function e(t){var i;return!(!t||!t.getAttribute||t===rf)&&(!("true"!==(i=t.getAttribute("data-clickable"))&&("false"===i||!Hf.test(t.nodeName+"")&&"true"!==t.getAttribute("contentEditable")))||e(t.parentNode))},yg=function(e,t){for(var i,n=e.length;n--;)(i=e[n]).ondragstart=i.onselectstart=t?null:Pf,Jp.set(i,{lazy:!0,userSelect:t?"text":"none"})},bg=function e(t){return"fixed"===ug(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)},_g=function(e,t){e=Jp.utils.toArray(e)[0],t=t||{};var i,n,r,o,s,a,l=document.createElement("div"),u=l.style,c=e.firstChild,h=0,d=0,p=e.scrollTop,f=e.scrollLeft,g=e.scrollWidth,m=e.scrollHeight,v=0,y=0,b=0;_f&&!1!==t.force3D?(s="translate3d(",a="px,0px)"):Af&&(s="translate(",a="px)"),this.scrollTop=function(e,t){if(!arguments.length)return-this.top();this.top(-e,t)},this.scrollLeft=function(e,t){if(!arguments.length)return-this.left();this.left(-e,t)},this.left=function(i,n){if(!arguments.length)return-(e.scrollLeft+d);var r=e.scrollLeft-f,o=d;if((r>2||r<-2)&&!n)return f=e.scrollLeft,Jp.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-f),void(t.onKill&&t.onKill());(i=-i)<0?(d=i-.5|0,i=0):i>y?(d=i-y|0,i=y):d=0,(d||o)&&(this._skip||(u[Af]=s+-d+"px,"+-h+a),d+v>=0&&(u.paddingRight=d+v+"px")),e.scrollLeft=0|i,f=e.scrollLeft},this.top=function(i,n){if(!arguments.length)return-(e.scrollTop+h);var r=e.scrollTop-p,o=h;if((r>2||r<-2)&&!n)return p=e.scrollTop,Jp.killTweensOf(this,{top:1,scrollTop:1}),this.top(-p),void(t.onKill&&t.onKill());(i=-i)<0?(h=i-.5|0,i=0):i>b?(h=i-b|0,i=b):h=0,(h||o)&&(this._skip||(u[Af]=s+-d+"px,"+-h+a)),e.scrollTop=0|i,p=e.scrollTop},this.maxScrollTop=function(){return b},this.maxScrollLeft=function(){return y},this.disable=function(){for(c=l.firstChild;c;)o=c.nextSibling,e.appendChild(c),c=o;e===l.parentNode&&e.removeChild(l)},this.enable=function(){if((c=e.firstChild)!==l){for(;c;)o=c.nextSibling,l.appendChild(c),c=o;e.appendChild(l),this.calibrate()}},this.calibrate=function(t){var o,s,a,c=e.clientWidth===i;p=e.scrollTop,f=e.scrollLeft,c&&e.clientHeight===n&&l.offsetHeight===r&&g===e.scrollWidth&&m===e.scrollHeight&&!t||((h||d)&&(s=this.left(),a=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),o=ug(e),c&&!t||(u.display="block",u.width="auto",u.paddingRight="0px",(v=Math.max(0,e.scrollWidth-e.clientWidth))&&(v+=parseFloat(o.paddingLeft)+(wf?parseFloat(o.paddingRight):0))),u.display="inline-block",u.position="relative",u.overflow="visible",u.verticalAlign="top",u.boxSizing="content-box",u.width="100%",u.paddingRight=v+"px",wf&&(u.paddingBottom=o.paddingBottom),i=e.clientWidth,n=e.clientHeight,g=e.scrollWidth,m=e.scrollHeight,y=e.scrollWidth-i,b=e.scrollHeight-n,r=l.offsetHeight,u.display="block",(s||a)&&(this.left(s),this.top(a)))},this.content=l,this.element=e,this._skip=!1,this.enable()},wg=function(e){if(Sf()&&document.body){var t=window&&window.navigator;ef=window,tf=document,nf=tf.documentElement,rf=tf.body,of=Of("div"),vf=!!window.PointerEvent,(sf=Of("div")).style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",mf="grab"===sf.style.cursor?"grab":"move",ff=t&&-1!==t.userAgent.toLowerCase().indexOf("android"),hf="ontouchstart"in nf&&"orientation"in ef||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),wf=function(){var e,t=Of("div"),i=Of("div"),n=i.style,r=rf;return n.display="inline-block",n.position="relative",t.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",t.appendChild(i),r.appendChild(t),e=i.offsetHeight+18>t.scrollHeight,r.removeChild(t),e}(),df=function(e){for(var t=e.split(","),i=(("onpointerdown"in of?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in of?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":e).split(",")),n={},r=4;--r>-1;)n[t[r]]=i[r],n[i[r]]=t[r];try{nf.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){cf=1}}))}catch(e){}return n}("touchstart,touchmove,touchend,touchcancel"),Kf(tf,"touchcancel",Pf),Kf(ef,"touchmove",Pf),rf&&rf.addEventListener("touchstart",Pf),Kf(tf,"contextmenu",(function(){for(var e in Uf)Uf[e].isPressed&&Uf[e].endDrag()})),Jp=af=Ef()}Jp?(gf=Jp.plugins.inertia,yf=Jp.core.context||function(){},lf=Jp.utils.checkPrefix,Af=lf(Af),If=lf(If),uf=Jp.utils.toArray,bf=Jp.core.getStyleSaver,_f=!!lf("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},Tg=function(){function e(e){this._listeners={},this.target=e||this}var t=e.prototype;return t.addEventListener=function(e,t){var i=this._listeners[e]||(this._listeners[e]=[]);~i.indexOf(t)||i.push(t)},t.removeEventListener=function(e,t){var i=this._listeners[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},t.dispatchEvent=function(e){var t,i=this;return(this._listeners[e]||[]).forEach((function(n){return!1===n.call(i,{type:e,target:i.target})&&(t=!1)})),t},e}(),Sg=function(e){var t,i;function n(t,i){var r;r=e.call(this)||this,af||wg(1),t=uf(t)[0],r.styles=bf&&bf(t,"transform,left,top"),gf||(gf=Jp.plugins.inertia),r.vars=i=Vf(i||{}),r.target=t,r.x=r.y=r.rotation=0,r.dragResistance=parseFloat(i.dragResistance)||0,r.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,r.lockAxis=i.lockAxis,r.autoScroll=i.autoScroll||0,r.lockedAxis=null,r.allowEventDefault=!!i.allowEventDefault,Jp.getProperty(t,"x");var o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,_,w,T,S,E,x,C,k,P,A,I,L,D,O,R,M,N,B,F=(i.type||"x,y").toLowerCase(),U=~F.indexOf("x")||~F.indexOf("y"),$=-1!==F.indexOf("rotation"),H=$?"rotation":U?"x":"left",j=U?"y":"top",z=!(!~F.indexOf("x")&&!~F.indexOf("left")&&"scroll"!==F),q=!(!~F.indexOf("y")&&!~F.indexOf("top")&&"scroll"!==F),V=i.minimumMovement||2,W=Zp(r),G=uf(i.trigger||i.handle||t),Y={},X=0,K=!1,Q=i.autoScrollMarginTop||40,Z=i.autoScrollMarginRight||40,J=i.autoScrollMarginBottom||40,ee=i.autoScrollMarginLeft||40,te=i.clickableTest||vg,ie=0,ne=t._gsap||Jp.core.getCache(t),re=bg(t),oe=function(e,i){return parseFloat(ne.get(t,e,i))},se=t.ownerDocument||tf,ae=function(e){return Zf(e),e.stopImmediatePropagation&&e.stopImmediatePropagation(),!1},le=function e(i){if(W.autoScroll&&W.isDragging&&(K||w)){var n,r,o,a,l,u,c,h,p=t,f=15*W.autoScroll;for(K=!1,qf.scrollTop=null!=ef.pageYOffset?ef.pageYOffset:null!=se.documentElement.scrollTop?se.documentElement.scrollTop:se.body.scrollTop,qf.scrollLeft=null!=ef.pageXOffset?ef.pageXOffset:null!=se.documentElement.scrollLeft?se.documentElement.scrollLeft:se.body.scrollLeft,a=W.pointerX-qf.scrollLeft,l=W.pointerY-qf.scrollTop;p&&!r;)n=(r=og(p.parentNode))?qf:p.parentNode,o=r?{bottom:Math.max(nf.clientHeight,ef.innerHeight||0),right:Math.max(nf.clientWidth,ef.innerWidth||0),left:0,top:0}:n.getBoundingClientRect(),u=c=0,q&&((h=n._gsMaxScrollY-n.scrollTop)<0?c=h:l>o.bottom-J&&h?(K=!0,c=Math.min(h,f*(1-Math.max(0,o.bottom-l)/J)|0)):l<o.top+Q&&n.scrollTop&&(K=!0,c=-Math.min(n.scrollTop,f*(1-Math.max(0,l-o.top)/Q)|0)),c&&(n.scrollTop+=c)),z&&((h=n._gsMaxScrollX-n.scrollLeft)<0?u=h:a>o.right-Z&&h?(K=!0,u=Math.min(h,f*(1-Math.max(0,o.right-a)/Z)|0)):a<o.left+ee&&n.scrollLeft&&(K=!0,u=-Math.min(n.scrollLeft,f*(1-Math.max(0,a-o.left)/ee)|0)),u&&(n.scrollLeft+=u)),r&&(u||c)&&(ef.scrollTo(n.scrollLeft,n.scrollTop),we(W.pointerX+u,W.pointerY+c)),p=n}if(w){var g=W.x,m=W.y;$?(W.deltaX=g-parseFloat(ne.rotation),W.rotation=g,ne.rotation=g+"deg",ne.renderTransform(1,ne)):s?(q&&(W.deltaY=m-s.top(),s.top(m)),z&&(W.deltaX=g-s.left(),s.left(g))):U?(q&&(W.deltaY=m-parseFloat(ne.y),ne.y=m+"px"),z&&(W.deltaX=g-parseFloat(ne.x),ne.x=g+"px"),ne.renderTransform(1,ne)):(q&&(W.deltaY=m-parseFloat(t.style.top||0),t.style.top=m+"px"),z&&(W.deltaX=g-parseFloat(t.style.left||0),t.style.left=g+"px")),!d||i||D||(D=!0,!1===dg(W,"drag","onDrag")&&(z&&(W.x-=W.deltaX),q&&(W.y-=W.deltaY),e(!0)),D=!1)}w=!1},ue=function(e,i){var n,r,o=W.x,a=W.y;t._gsap||(ne=Jp.core.getCache(t)),ne.uncache&&Jp.getProperty(t,"x"),U?(W.x=parseFloat(ne.x),W.y=parseFloat(ne.y)):$?W.x=W.rotation=parseFloat(ne.rotation):s?(W.y=s.top(),W.x=s.left()):(W.y=parseFloat(t.style.top||(r=ug(t))&&r.top)||0,W.x=parseFloat(t.style.left||(r||{}).left)||0),(S||E||x)&&!i&&(W.isDragging||W.isThrowing)&&(x&&(zf.x=W.x,zf.y=W.y,(n=x(zf)).x!==W.x&&(W.x=n.x,w=!0),n.y!==W.y&&(W.y=n.y,w=!0)),S&&(n=S(W.x))!==W.x&&(W.x=n,$&&(W.rotation=n),w=!0),E&&((n=E(W.y))!==W.y&&(W.y=n),w=!0)),w&&le(!0),e||(W.deltaX=W.x-o,W.deltaY=W.y-a,dg(W,"throwupdate","onThrowUpdate"))},ce=function(e,t,i,n){return null==t&&(t=-Mf),null==i&&(i=Mf),xf(e)?function(r){var o=W.isPressed?1-W.edgeResistance:1;return e.call(W,(r>i?i+(r-i)*o:r<t?t+(r-t)*o:r)*n)*n}:Df(e)?function(n){for(var r,o,s=e.length,a=0,l=Mf;--s>-1;)(o=(r=e[s])-n)<0&&(o=-o),o<l&&r>=t&&r<=i&&(a=s,l=o);return e[a]}:isNaN(e)?function(e){return e}:function(){return e*n}},he=function(){var e,n,r,o;h=!1,s?(s.calibrate(),W.minX=g=-s.maxScrollLeft(),W.minY=v=-s.maxScrollTop(),W.maxX=f=W.maxY=m=0,h=!0):i.bounds&&(e=pg(i.bounds,t.parentNode),$?(W.minX=g=e.left,W.maxX=f=e.left+e.width,W.minY=v=W.maxY=m=0):kf(i.bounds.maxX)&&kf(i.bounds.maxY)?(n=pg(t,t.parentNode),W.minX=g=Math.round(oe(H,"px")+e.left-n.left),W.minY=v=Math.round(oe(j,"px")+e.top-n.top),W.maxX=f=Math.round(g+(e.width-n.width)),W.maxY=m=Math.round(v+(e.height-n.height))):(e=i.bounds,W.minX=g=e.minX,W.minY=v=e.minY,W.maxX=f=e.maxX,W.maxY=m=e.maxY),g>f&&(W.minX=f,W.maxX=f=g,g=W.minX),v>m&&(W.minY=m,W.maxY=m=v,v=W.minY),$&&(W.minRotation=g,W.maxRotation=f),h=!0),i.liveSnap&&(r=!0===i.liveSnap?i.snap||{}:i.liveSnap,o=Df(r)||xf(r),$?(S=ce(o?r:r.rotation,g,f,1),E=null):r.points?x=function(e,t,i,n,r,o,s){return o=o&&o<Mf?o*o:Mf,xf(e)?function(a){var l,u,c,h=W.isPressed?1-W.edgeResistance:1,d=a.x,p=a.y;return a.x=d=d>i?i+(d-i)*h:d<t?t+(d-t)*h:d,a.y=p=p>r?r+(p-r)*h:p<n?n+(p-n)*h:p,(l=e.call(W,a))!==a&&(a.x=l.x,a.y=l.y),1!==s&&(a.x*=s,a.y*=s),o<Mf&&(u=a.x-d)*u+(c=a.y-p)*c>o&&(a.x=d,a.y=p),a}:Df(e)?function(t){for(var i,n,r,s,a=e.length,l=0,u=Mf;--a>-1;)(s=(i=(r=e[a]).x-t.x)*i+(n=r.y-t.y)*n)<u&&(l=a,u=s);return u<=o?e[l]:t}:function(e){return e}}(o?r:r.points,g,f,v,m,r.radius,s?-1:1):(z&&(S=ce(o?r:r.x||r.left||r.scrollLeft,g,f,s?-1:1)),q&&(E=ce(o?r:r.y||r.top||r.scrollTop,v,m,s?-1:1))))},de=function(){W.isThrowing=!1,dg(W,"throwcomplete","onThrowComplete")},pe=function(){W.isThrowing=!1},fe=function(e,n){var r,o,a,l;e&&gf?(!0===e&&(r=i.snap||i.liveSnap||{},o=Df(r)||xf(r),e={resistance:(i.throwResistance||i.resistance||1e3)/($?10:1)},$?e.rotation=mg(W,o?r:r.rotation,f,g,1,n):(z&&(e[H]=mg(W,o?r:r.points||r.x||r.left,f,g,s?-1:1,n||"x"===W.lockedAxis)),q&&(e[j]=mg(W,o?r:r.points||r.y||r.top,m,v,s?-1:1,n||"y"===W.lockedAxis)),(r.points||Df(r)&&Cf(r[0]))&&(e.linkedProps=H+","+j,e.radius=r.radius))),W.isThrowing=!0,l=isNaN(i.overshootTolerance)?1===i.edgeResistance?0:1-W.edgeResistance+.2:i.overshootTolerance,e.duration||(e.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?0===l||Cf(e)&&e.resistance>1e3?0:.5:i.minDuration,overshoot:l}),W.tween=a=Jp.to(s||t,{inertia:e,data:"_draggable",inherit:!1,onComplete:de,onInterrupt:pe,onUpdate:i.fastMode?dg:ue,onUpdateParams:i.fastMode?[W,"onthrowupdate","onThrowUpdate"]:r&&r.radius?[!1,!0]:[]}),i.fastMode||(s&&(s._skip=!0),a.render(1e9,!0,!0),ue(!0,!0),W.endX=W.x,W.endY=W.y,$&&(W.endRotation=W.x),a.play(0),ue(!0,!0),s&&(s._skip=!1))):h&&W.applyBounds()},ge=function(e){var i,n=P;P=Qp(t.parentNode,!0),e&&W.isPressed&&!P.equals(n||new Kp)&&(i=n.inverse().apply({x:a,y:l}),P.apply(i,i),a=i.x,l=i.y),P.equals(Nf)&&(P=null)},me=function(){var e,i,n,r=1-W.edgeResistance,o=re?ig(se):0,d=re?tg(se):0;U&&(ne.x=oe(H,"px")+"px",ne.y=oe(j,"px")+"px",ne.renderTransform()),ge(!1),fg.x=W.pointerX-o,fg.y=W.pointerY-d,P&&P.apply(fg,fg),a=fg.x,l=fg.y,w&&(we(W.pointerX,W.pointerY),le(!0)),N=Qp(t),s?(he(),c=s.top(),u=s.left()):(ve()?(ue(!0,!0),he()):W.applyBounds(),$?(e=t.ownerSVGElement?[ne.xOrigin-t.getBBox().x,ne.yOrigin-t.getBBox().y]:(ug(t)[If]||"0 0").split(" "),_=W.rotationOrigin=Qp(t).apply({x:parseFloat(e[0])||0,y:parseFloat(e[1])||0}),ue(!0,!0),i=W.pointerX-_.x-o,n=_.y-W.pointerY+d,u=W.x,c=W.y=Math.atan2(n,i)*Rf):(c=oe(j,"px"),u=oe(H,"px"))),h&&r&&(u>f?u=f+(u-f)/r:u<g&&(u=g-(g-u)/r),$||(c>m?c=m+(c-m)/r:c<v&&(c=v-(v-c)/r))),W.startX=u=Lf(u),W.startY=c=Lf(c)},ve=function(){return W.tween&&W.tween.isActive()},ye=function(){!sf.parentNode||ve()||W.isDragging||sf.parentNode.removeChild(sf)},be=function(e,r){var u;if(!o||W.isPressed||!e||!("mousedown"!==e.type&&"pointerdown"!==e.type||r)&&Bf()-ie<30&&df[W.pointerEvent.type])M&&e&&o&&Zf(e);else{if(A=ve(),B=!1,W.pointerEvent=e,df[e.type]?(k=~e.type.indexOf("touch")?e.currentTarget||e.target:se,Kf(k,"touchend",Te),Kf(k,"touchmove",_e),Kf(k,"touchcancel",Te),Kf(se,"touchstart",eg)):(k=null,Kf(se,"mousemove",_e)),L=null,vf&&k||(Kf(se,"mouseup",Te),e&&e.target&&Kf(e.target,"mouseup",Te)),C=te.call(W,e.target)&&!1===i.dragClickables&&!r)return Kf(e.target,"change",Te),dg(W,"pressInit","onPressInit"),dg(W,"press","onPress"),yg(G,!0),void(M=!1);var c;if(I=!(!k||z===q||!1===W.vars.allowNativeTouchScrolling||W.vars.allowContextMenu&&e&&(e.ctrlKey||e.which>2))&&(z?"y":"x"),(M=!I&&!W.allowEventDefault)&&(Zf(e),Kf(ef,"touchforcechange",Zf)),e.changedTouches?(e=y=e.changedTouches[0],b=e.identifier):e.pointerId?b=e.pointerId:y=b=null,Tf++,c=le,Ff.push(c),1===Ff.length&&Jp.ticker.add(Gf),l=W.pointerY=e.pageY,a=W.pointerX=e.pageX,dg(W,"pressInit","onPressInit"),(I||W.autoScroll)&&ag(t.parentNode),!t.parentNode||!W.autoScroll||s||$||!t.parentNode._gsMaxScrollX||sf.parentNode||t.getBBox||(sf.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(sf)),me(),W.tween&&W.tween.kill(),W.isThrowing=!1,Jp.killTweensOf(s||t,Y,!0),s&&Jp.killTweensOf(t,{scrollTo:1},!0),W.tween=W.lockedAxis=null,(i.zIndexBoost||!$&&!s&&!1!==i.zIndexBoost)&&(t.style.zIndex=n.zIndex++),W.isPressed=!0,d=!(!i.onDrag&&!W._listeners.drag),p=!(!i.onMove&&!W._listeners.move),!1!==i.cursor||i.activeCursor)for(u=G.length;--u>-1;)Jp.set(G[u],{cursor:i.activeCursor||i.cursor||("grab"===mf?"grabbing":mf)});dg(W,"press","onPress")}},_e=function(e){var i,n,r,s,u,c,h=e;if(o&&!pf&&W.isPressed&&e){if(W.pointerEvent=e,i=e.changedTouches){if((e=i[0])!==y&&e.identifier!==b){for(s=i.length;--s>-1&&(e=i[s]).identifier!==b&&e.target!==t;);if(s<0)return}}else if(e.pointerId&&b&&e.pointerId!==b)return;k&&I&&!L&&(fg.x=e.pageX-(re?ig(se):0),fg.y=e.pageY-(re?tg(se):0),P&&P.apply(fg,fg),n=fg.x,r=fg.y,((u=Math.abs(n-a))!==(c=Math.abs(r-l))&&(u>V||c>V)||ff&&I===L)&&(L=u>c&&z?"x":"y",I&&L!==I&&Kf(ef,"touchforcechange",Zf),!1!==W.vars.lockAxisOnTouchScroll&&z&&q&&(W.lockedAxis="x"===L?"y":"x",xf(W.vars.onLockAxis)&&W.vars.onLockAxis.call(W,h)),ff&&I===L))?Te(h):(W.allowEventDefault||I&&(!L||I===L)||!1===h.cancelable?M&&(M=!1):(Zf(h),M=!0),W.autoScroll&&(K=!0),we(e.pageX,e.pageY,p))}else M&&e&&o&&Zf(e)},we=function(e,t,i){var n,r,o,s,d,p,y=1-W.dragResistance,b=1-W.edgeResistance,T=W.pointerX,C=W.pointerY,k=c,A=W.x,I=W.y,L=W.endX,D=W.endY,O=W.endRotation,R=w;W.pointerX=e,W.pointerY=t,re&&(e-=ig(se),t-=tg(se)),$?(s=Math.atan2(_.y-t,e-_.x)*Rf,(d=W.y-s)>180?(c-=360,W.y=s):d<-180&&(c+=360,W.y=s),W.x!==u||Math.max(Math.abs(a-e),Math.abs(l-t))>V?(W.y=s,o=u+(c-s)*y):o=u):(P&&(p=e*P.a+t*P.c+P.e,t=e*P.b+t*P.d+P.f,e=p),(r=t-l)<V&&r>-V&&(r=0),(n=e-a)<V&&n>-V&&(n=0),(W.lockAxis||W.lockedAxis)&&(n||r)&&((p=W.lockedAxis)||(W.lockedAxis=p=z&&Math.abs(n)>Math.abs(r)?"y":q?"x":null,p&&xf(W.vars.onLockAxis)&&W.vars.onLockAxis.call(W,W.pointerEvent)),"y"===p?r=0:"x"===p&&(n=0)),o=Lf(u+n*y),s=Lf(c+r*y)),(S||E||x)&&(W.x!==o||W.y!==s&&!$)&&(x&&(zf.x=o,zf.y=s,p=x(zf),o=Lf(p.x),s=Lf(p.y)),S&&(o=Lf(S(o))),E&&(s=Lf(E(s)))),h&&(o>f?o=f+Math.round((o-f)*b):o<g&&(o=g+Math.round((o-g)*b)),$||(s>m?s=Math.round(m+(s-m)*b):s<v&&(s=Math.round(v+(s-v)*b)))),(W.x!==o||W.y!==s&&!$)&&($?(W.endRotation=W.x=W.endX=o,w=!0):(q&&(W.y=W.endY=s,w=!0),z&&(W.x=W.endX=o,w=!0)),i&&!1===dg(W,"move","onMove")?(W.pointerX=T,W.pointerY=C,c=k,W.x=A,W.y=I,W.endX=L,W.endY=D,W.endRotation=O,w=R):!W.isDragging&&W.isPressed&&(W.isDragging=B=!0,dg(W,"dragstart","onDragStart")))},Te=function e(n,r){if(o&&W.isPressed&&(!n||null==b||r||!(n.pointerId&&n.pointerId!==b&&n.target!==t||n.changedTouches&&!function(e,t){for(var i=e.length;i--;)if(e[i].identifier===t)return!0}(n.changedTouches,b)))){W.isPressed=!1;var s,a,l,u,c,h=n,d=W.isDragging,p=W.vars.allowContextMenu&&n&&(n.ctrlKey||n.which>2),f=Jp.delayedCall(.001,ye);if(k?(Qf(k,"touchend",e),Qf(k,"touchmove",_e),Qf(k,"touchcancel",e),Qf(se,"touchstart",eg)):Qf(se,"mousemove",_e),Qf(ef,"touchforcechange",Zf),vf&&k||(Qf(se,"mouseup",e),n&&n.target&&Qf(n.target,"mouseup",e)),w=!1,d&&(X=jf=Bf(),W.isDragging=!1),Xf(le),C&&!p)return n&&(Qf(n.target,"change",e),W.pointerEvent=h),yg(G,!1),dg(W,"release","onRelease"),dg(W,"click","onClick"),void(C=!1);for(a=G.length;--a>-1;)lg(G[a],"cursor",i.cursor||(!1!==i.cursor?mf:null));if(Tf--,n){if((s=n.changedTouches)&&(n=s[0])!==y&&n.identifier!==b){for(a=s.length;--a>-1&&(n=s[a]).identifier!==b&&n.target!==t;);if(a<0&&!r)return}W.pointerEvent=h,W.pointerX=n.pageX,W.pointerY=n.pageY}return p&&h?(Zf(h),M=!0,dg(W,"release","onRelease")):h&&!d?(M=!1,A&&(i.snap||i.bounds)&&fe(i.inertia||i.throwProps),dg(W,"release","onRelease"),ff&&"touchmove"===h.type||-1!==h.type.indexOf("cancel")||(dg(W,"click","onClick"),Bf()-ie<300&&dg(W,"doubleclick","onDoubleClick"),u=h.target||t,ie=Bf(),c=function(){ie===O||!W.enabled()||W.isPressed||h.defaultPrevented||(u.click?u.click():se.createEvent&&((l=se.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,ef,1,W.pointerEvent.screenX,W.pointerEvent.screenY,W.pointerX,W.pointerY,!1,!1,!1,!1,0,null),u.dispatchEvent(l)))},ff||h.defaultPrevented||Jp.delayedCall(.05,c))):(fe(i.inertia||i.throwProps),W.allowEventDefault||!h||!1===i.dragClickables&&te.call(W,h.target)||!d||I&&(!L||I!==L)||!1===h.cancelable?M=!1:(M=!0,Zf(h)),dg(W,"release","onRelease")),ve()&&f.duration(W.tween.duration()),d&&dg(W,"dragend","onDragEnd"),!0}M&&n&&o&&Zf(n)},Se=function(e){if(e&&W.isDragging&&!s){var i=e.target||t.parentNode,n=i.scrollLeft-i._gsScrollX,r=i.scrollTop-i._gsScrollY;(n||r)&&(P?(a-=n*P.a+r*P.c,l-=r*P.d+n*P.b):(a-=n,l-=r),i._gsScrollX+=n,i._gsScrollY+=r,we(W.pointerX,W.pointerY))}},Ee=function(e){var t=Bf(),i=t-ie<100,n=t-X<50,r=i&&O===ie,o=W.pointerEvent&&W.pointerEvent.defaultPrevented,s=i&&R===ie,a=e.isTrusted||null==e.isTrusted&&i&&r;if((r||n&&!1!==W.vars.suppressClickOnDrag)&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),i&&(!W.pointerEvent||!W.pointerEvent.defaultPrevented)&&(!r||a&&!s))return a&&r&&(R=ie),void(O=ie);(W.isPressed||n||i)&&(a&&e.detail&&i&&!o||Zf(e)),i||n||B||(e&&e.target&&(W.pointerEvent=e),dg(W,"click","onClick"))},xe=function(e){return P?{x:e.x*P.a+e.y*P.c+P.e,y:e.x*P.b+e.y*P.d+P.f}:{x:e.x,y:e.y}};return(T=n.get(t))&&T.kill(),r.startDrag=function(e,i){var n,r,o,s;be(e||W.pointerEvent,!0),i&&!W.hitTest(e||W.pointerEvent)&&(n=hg(e||W.pointerEvent),r=hg(t),o=xe({x:n.left+n.width/2,y:n.top+n.height/2}),s=xe({x:r.left+r.width/2,y:r.top+r.height/2}),a-=o.x-s.x,l-=o.y-s.y),W.isDragging||(W.isDragging=B=!0,dg(W,"dragstart","onDragStart"))},r.drag=_e,r.endDrag=function(e){return Te(e||W.pointerEvent,!0)},r.timeSinceDrag=function(){return W.isDragging?0:(Bf()-X)/1e3},r.timeSinceClick=function(){return(Bf()-ie)/1e3},r.hitTest=function(e,t){return n.hitTest(W.target,e,t)},r.getDirection=function(e,i){var n,r,o,s,a,l,h="velocity"===e&&gf?e:Cf(e)&&!$?"element":"start";return"element"===h&&(a=hg(W.target),l=hg(e)),n="start"===h?W.x-u:"velocity"===h?gf.getVelocity(t,H):a.left+a.width/2-(l.left+l.width/2),$?n<0?"counter-clockwise":"clockwise":(i=i||2,r="start"===h?W.y-c:"velocity"===h?gf.getVelocity(t,j):a.top+a.height/2-(l.top+l.height/2),s=(o=Math.abs(n/r))<1/i?"":n<0?"left":"right",o<i&&(""!==s&&(s+="-"),s+=r<0?"up":"down"),s)},r.applyBounds=function(e,n){var r,o,s,a,l,u;if(e&&i.bounds!==e)return i.bounds=e,W.update(!0,n);if(ue(!0),he(),h&&!ve()){if(r=W.x,o=W.y,r>f?r=f:r<g&&(r=g),o>m?o=m:o<v&&(o=v),(W.x!==r||W.y!==o)&&(s=!0,W.x=W.endX=r,$?W.endRotation=r:W.y=W.endY=o,w=!0,le(!0),W.autoScroll&&!W.isDragging))for(ag(t.parentNode),a=t,qf.scrollTop=null!=ef.pageYOffset?ef.pageYOffset:null!=se.documentElement.scrollTop?se.documentElement.scrollTop:se.body.scrollTop,qf.scrollLeft=null!=ef.pageXOffset?ef.pageXOffset:null!=se.documentElement.scrollLeft?se.documentElement.scrollLeft:se.body.scrollLeft;a&&!u;)l=(u=og(a.parentNode))?qf:a.parentNode,q&&l.scrollTop>l._gsMaxScrollY&&(l.scrollTop=l._gsMaxScrollY),z&&l.scrollLeft>l._gsMaxScrollX&&(l.scrollLeft=l._gsMaxScrollX),a=l;W.isThrowing&&(s||W.endX>f||W.endX<g||W.endY>m||W.endY<v)&&fe(i.inertia||i.throwProps,s)}return W},r.update=function(e,i,n){if(i&&W.isPressed){var r=Qp(t),o=N.apply({x:W.x-u,y:W.y-c}),s=Qp(t.parentNode,!0);s.apply({x:r.e-o.x,y:r.f-o.y},o),W.x-=o.x-s.e,W.y-=o.y-s.f,le(!0),me()}var a=W.x,l=W.y;return ge(!i),e?W.applyBounds():(w&&n&&le(!0),ue(!0)),i&&(we(W.pointerX,W.pointerY),w&&le(!0)),W.isPressed&&!i&&(z&&Math.abs(a-W.x)>.01||q&&Math.abs(l-W.y)>.01&&!$)&&me(),W.autoScroll&&(ag(t.parentNode,W.isDragging),K=W.isDragging,le(!0),rg(t,Se),ng(t,Se)),W},r.enable=function(e){var n,r,a,l={lazy:!0};if(!1!==i.cursor&&(l.cursor=i.cursor||mf),Jp.utils.checkPrefix("touchCallout")&&(l.touchCallout="none"),"soft"!==e){for(Wf(G,z===q?"none":i.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||i.allowEventDefault?"manipulation":z?"pan-y":"pan-x"),r=G.length;--r>-1;)a=G[r],vf||Kf(a,"mousedown",be),Kf(a,"touchstart",be),Kf(a,"click",Ee,!0),Jp.set(a,l),a.getBBox&&a.ownerSVGElement&&z!==q&&Jp.set(a.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":z?"pan-y":"pan-x"}),i.allowContextMenu||Kf(a,"contextmenu",ae);yg(G,!1)}return ng(t,Se),o=!0,gf&&"soft"!==e&&gf.track(s||t,U?"x,y":$?"rotation":"top,left"),t._gsDragID=n=t._gsDragID||"d"+$f++,Uf[n]=W,s&&(s.enable(),s.element._gsDragID=n),(i.bounds||$)&&me(),i.bounds&&W.applyBounds(),W},r.disable=function(e){for(var i,n=W.isDragging,r=G.length;--r>-1;)lg(G[r],"cursor",null);if("soft"!==e){for(Wf(G,null),r=G.length;--r>-1;)i=G[r],lg(i,"touchCallout",null),Qf(i,"mousedown",be),Qf(i,"touchstart",be),Qf(i,"click",Ee,!0),Qf(i,"contextmenu",ae);yg(G,!0),k&&(Qf(k,"touchcancel",Te),Qf(k,"touchend",Te),Qf(k,"touchmove",_e)),Qf(se,"mouseup",Te),Qf(se,"mousemove",_e)}return rg(t,Se),o=!1,gf&&"soft"!==e&&(gf.untrack(s||t,U?"x,y":$?"rotation":"top,left"),W.tween&&W.tween.kill()),s&&s.disable(),Xf(le),W.isDragging=W.isPressed=C=!1,n&&dg(W,"dragend","onDragEnd"),W},r.enabled=function(e,t){return arguments.length?e?W.enable(t):W.disable(t):o},r.kill=function(){return W.isThrowing=!1,W.tween&&W.tween.kill(),W.disable(),Jp.set(G,{clearProps:"userSelect"}),delete Uf[t._gsDragID],W},r.revert=function(){this.kill(),this.styles&&this.styles.revert()},~F.indexOf("scroll")&&(s=r.scrollProxy=new _g(t,function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e}({onKill:function(){W.isPressed&&Te(null)}},i)),t.style.overflowY=q&&!hf?"auto":"hidden",t.style.overflowX=z&&!hf?"auto":"hidden",t=s.content),$?Y.rotation=1:(z&&(Y[H]=1),q&&(Y[j]=1)),ne.force3D=!("force3D"in i)||i.force3D,yf(Zp(r)),r.enable(),r}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n.register=function(e){Jp=e,wg()},n.create=function(e,t){return af||wg(!0),uf(e).map((function(e){return new n(e,t)}))},n.get=function(e){return Uf[(uf(e)[0]||{})._gsDragID]},n.timeSinceDrag=function(){return(Bf()-jf)/1e3},n.hitTest=function(e,t,i){if(e===t)return!1;var n,r,o,s=hg(e),a=hg(t),l=s.top,u=s.left,c=s.right,h=s.bottom,d=s.width,p=s.height,f=a.left>c||a.right<u||a.top>h||a.bottom<l;return f||!i?!f:(o=-1!==(i+"").indexOf("%"),i=parseFloat(i)||0,(n={left:Math.max(u,a.left),top:Math.max(l,a.top)}).width=Math.min(c,a.right)-n.left,n.height=Math.min(h,a.bottom)-n.top,!(n.width<0||n.height<0)&&(o?(i*=.01,(r=n.width*n.height)>=d*p*i||r>=a.width*a.height*i):n.width>i&&n.height>i))},n}(Tg);!function(e,t){for(var i in t)i in e||(e[i]=t[i])}(Sg.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),Sg.zIndex=1e3,Sg.version="3.12.7",Ef()&&Jp.registerPlugin(Sg);const Eg=(0,s.createBehavior)("ImageComparisonSlider",{onDrag:function(){var e=this.$node.getBoundingClientRect().width;bo.set(this.$clipped,{clipPath:"inset(0px ".concat(e-this.$draggable.x,"px 0px 0px)")}),this.ratio=this.$draggable.x/e},onResize:function(){var e=this.$node.getBoundingClientRect().width,t=this.ratio*e;bo.set(this.$handle,{x:t}),bo.set(this.$clipped,{clipPath:"inset(0px ".concat(e-t,"px 0px 0px)")}),this.$draggable.update(!0)}},{init:function(){bo.registerPlugin(Sg),this.$clipped=this.getChild("clipped"),this.$handle=this.getChild("handle"),this.ratio=.5,this.$draggable=new Sg(this.$handle,{type:"x",bounds:this.$node,edgeResistance:.95,onDrag:this.onDrag}),window.addEventListener("resize",this.onResize,!1),this.onResize()},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){window.removeEventListener("resize",this.onResize)}});var xg=(0,s.createBehavior)("InputHandler",{selectAllInput:function(){var e=this;setTimeout((function(){e.$node.select(),e.$node.removeEventListener("click",e.selectAllInput)}),0)}},{init:function(){var e;((null===(e=this.options)||void 0===e?void 0:e.resetonselect)||!1)&&this.$node.addEventListener("click",this.selectAllInput,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$node.removeEventListener("click",this.selectAllInput)}});const Cg=xg;function kg(e){return kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(e)}function Pg(e){return function(e){if(Array.isArray(e))return Ag(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ag(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ag(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function Ig(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Lg(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ig(Object(i),!0).forEach((function(t){Dg(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ig(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Dg(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=kg(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=kg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kg(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Og=(0,s.createBehavior)("ItemizedAudio",{initializePlayer:function(){var e,t,i,n,r,o,s,a;this.audioLength=parseInt(this.$player.duration,10),this.duration=parseInt(this.$player.duration),this.$progressBar.setAttribute("max",parseInt(this.$player.duration)),this.$duration.innerText=this.formatTime(this.duration),this.audioFileName=this.$player.currentSrc.split("/").pop(),this.setSkipButtonStates(),this.progressMilestones=this.computeProgressMilestones(this.duration),this.baseTrackingData={artworkTitle:null!==(e=this.artworkTitle)&&void 0!==e?e:"",artworkArtist:null!==(t=this.artworkArtist)&&void 0!==t?t:"",audioLocation:null!==(i=this.audioLocation)&&void 0!==i?i:"",audioListName:null!==(n=this.playlistTitle)&&void 0!==n?n:"",audioListLength:null!==(r=this.playlistLength)&&void 0!==r?r:"",audioPosition:null!==(o=this.playlistPosition)&&void 0!==o?o:"",audioName:null!==(s=this.audioFileName)&&void 0!==s?s:"",audioLength:null!==(a=this.audioLength)&&void 0!==a?a:""},this.trackImpressions([this.$playToggle,this.$collectionCta,this.$transcriptButton,this.$labelButton])},setSkipButtonStates:function(){this.$playlist&&(this.$skipNext.disabled=!0,this.$skipPrevious.disabled=!0,this.$previousAudioSibling&&(this.$skipPrevious.disabled=!1),this.$nextAudioSibling&&(this.$skipNext.disabled=!1))},togglePlay:function(){this.isPlaying?this.$player.pause():this.$player.play()},play:function(){if(this.stopAll(),this.$player.play(),this.isPlaying=!0,this.$node.dataset.isPlaying=this.isPlaying,this.$node.classList.add("m-itemized-audio--playing"),this.$playToggle.setAttribute("aria-hidden",!0),this.$playToggle.setAttribute("aria-label",this.buttonText.pause),this.$playToggle.setAttribute("aria-hidden",!1),this.$playIcon.classList.add("hidden"),this.$pauseIcon.classList.remove("hidden"),this.collapseAllPlaylistControls(),this.expandControls(),this.$playlist){var e;if(this.$node.previousElementSibling&&this.$node.previousElementSibling.offsetParent)e=this.$node.previousElementSibling.getBoundingClientRect().top+window.scrollY-144;else e=this.$node.getBoundingClientRect().top+window.scrollY-144;window.scrollTo({top:e,behavior:"smooth"})}this.isPlaying&&window.dataLayer.push(Lg(Lg({},this.baseTrackingData),{},{event:"audio_start"}))},pause:function(){this.$player.pause(),this.isPlaying=!1,this.$node.dataset.isPlaying=this.isPlaying,this.$node.classList.remove("m-itemized-audio--playing"),this.$playToggle.setAttribute("aria-label",this.buttonText.play),this.$playIcon.classList.remove("hidden"),this.$pauseIcon.classList.add("hidden")},stop:function(){this.pause(),this.seekTo(0)},stopAll:function(){var e=this;document.querySelectorAll("[data-behavior='ItemizedAudio']").forEach((function(t){if(t!==e.$node){var i=e.getChild("player",t);i.pause(),i.currentTime=0}}))},handleEnd:function(){var e;this.pause(),window.dataLayer.push(Lg(Lg({},this.baseTrackingData),{},{event:"audio_finish"})),void 0!==(null===(e=this.$playlist)||void 0===e?void 0:e.dataset.continuousPlayback)&&this.skipTo(this.$nextAudioSibling)},handleUpdateTime:function(){this.currentSeconds=parseInt(this.$player.currentTime),this.percentComplete=parseInt(this.currentSeconds/this.duration*100);var e=10*Math.round(this.percentComplete/10);this.$timeCurrent.innerText=this.formatTime(this.currentSeconds),this.updateProgressBar(),e>=10&&!this.progressMilestones[e].met&&this.meetProgressMilestone(e)},handleSeek:function(e){this.seekTo(e.target.value)},seekTo:function(e){this.currentSeconds=Math.max(0,Math.min(this.duration,e)),this.$player.currentTime=this.currentSeconds},seekBy:function(e){this.currentSeconds=Math.max(0,Math.min(this.duration,this.currentSeconds+e)),this.$player.currentTime=this.currentSeconds},formatTime:function(e){var t=Math.floor(e/60)||0,i=Math.floor(e-60*t)||0;return"".concat(t,":").concat(i<10?"0":"").concat(i)},updateProgressBar:function(){var e=this.formatTime(this.currentSeconds),t=this.formatTime(this.duration);this.$progressBar.value=this.currentSeconds,this.$progressBar.setAttribute("aria-valuetext","".concat(e," of ").concat(t)),this.$progressBar.style.setProperty("--value",Math.max(2,this.percentComplete))},handleProgressBarKeyUp:function(e){[13,32].includes(e.keyCode)&&this.togglePlay()},skipTo:function(e){"ItemizedAudio"===(null==e?void 0:e.dataset.behavior)&&(this.getChild("player",e).play(),this.$expandedView.classList.add("hidden"),this.getChild("play-toggle",e).focus())},expandControls:function(){this.$expandedView.classList.remove("hidden")},collapseAllPlaylistControls:function(){var e=this;this.$playlist&&this.$playlist.querySelectorAll("[data-behavior='ItemizedAudio']").forEach((function(t){t!==e.$node&&e.getChild("expanded-view",t).classList.add("hidden")}))},getAudioSibling:function(e,t){for(var i="next"===t?e.nextElementSibling:e.previousElementSibling;i;){if("ItemizedAudio"===i.dataset.behavior&&!i.classList.contains("hidden"))return i;i="next"===t?i.nextElementSibling:i.previousElementSibling}return null},computeProgressMilestones:function(e){for(var t={},i=10;i<=100;i+=10)t[i]={met:!1,time:e*(i/100)};return t},meetProgressMilestone:function(e){var t;this.progressMilestones[e].met=!0,window.dataLayer.push(Lg(Lg({},this.baseTrackingData),{},{event:"audio_progress",audioCurrentTime:null!==(t=this.currentSeconds)&&void 0!==t?t:"",audioProgress:"".concat(e,"%")}))},trackImpressions:function(e){var t=this,i=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&(e.target.dataset.impressionLabel&&window.dataLayer.push(Lg(Lg({},t.baseTrackingData),{},{event:e.target.dataset.impressionLabel})),i.unobserve(e.target))}))}),{threshold:.1});e.forEach((function(e){e&&i.observe(e)}))}},{init:function(){var e,t,i,n=this;this.duration=0,this.percentComplete=0,this.currentSeconds=0,this.isPlaying=!1,this.buttonText={play:this.options["text-play"],pause:this.options["text-pause"]},this.$player=this.getChild("player"),this.$playToggle=this.getChild("play-toggle"),this.$playIcon=this.getChild("play-icon"),this.$pauseIcon=this.getChild("pause-icon"),this.$timeCurrent=this.getChild("time-current"),this.$duration=this.getChild("duration"),this.$progressBar=this.getChild("progress"),this.$skipSecondsBwd=this.getChild("skip-s-bwd"),this.$skipSecondsFwd=this.getChild("skip-s-fwd"),this.$skipPrevious=this.getChild("skip-previous"),this.$skipNext=this.getChild("skip-next"),this.$expandedView=this.getChild("expanded-view"),this.$previousAudioSibling=this.getAudioSibling(this.$node,"previous"),this.$nextAudioSibling=this.getAudioSibling(this.$node,"next"),this.$playlist=this.$player.closest("[data-playlist]"),this.$tour=this.$player.closest("[data-tour]"),this.$collectionCta=this.getChild("collection-cta"),this.$transcriptButton=this.getChild("transcript-button"),this.$labelButton=this.getChild("label-button"),this.playlistTitle=null,this.playlistPosition=null,this.audioLength=null,this.artworkTitle=this.$node.dataset.artworkTitle,this.artworkArtist=this.$node.dataset.artworkArtist,this.audioLocation=(this.$tour?"tour":this.$playlist&&"playlist")||"embed",this.baseTrackingData={},window.dataLayer=window.dataLayer||[],null===(e=this.$collectionCta)||void 0===e||e.addEventListener("click",(function(){window.dataLayer.push(Lg(Lg({},n.baseTrackingData),{},{event:"click_view_collection"}))})),null===(t=this.$transcriptButton)||void 0===t||t.addEventListener("click",(function(){window.dataLayer.push(Lg(Lg({},n.baseTrackingData),{},{event:"click_transcript"}))})),null===(i=this.$labelButton)||void 0===i||i.addEventListener("click",(function(){window.dataLayer.push(Lg(Lg({},n.baseTrackingData),{},{event:"click_label"}))})),this.$player.addEventListener("play",this.play),this.$player.addEventListener("pause",this.pause),this.$playToggle.addEventListener("click",this.togglePlay),this.$progressBar.addEventListener("keyup",this.handleProgressBarKeyUp),this.$progressBar.addEventListener("change",this.handleSeek),this.$progressBar.addEventListener("click",this.handleSeek),this.$skipSecondsBwd.addEventListener("click",(function(){n.seekBy(-10)})),this.$skipSecondsFwd.addEventListener("click",(function(){n.seekBy(10)})),this.$playlist&&(this.playlistTitle=this.$playlist.dataset.playlistTitle,this.playlistLength=this.$playlist.childElementCount,this.playlistPosition=Pg(this.$playlist.children).indexOf(this.$node)+1,this.$skipPrevious.addEventListener("click",(function(){n.skipTo(n.$previousAudioSibling)})),this.$skipNext.addEventListener("click",(function(){n.skipTo(n.$nextAudioSibling)})),this.$playlist.addEventListener("updateItems",(function(){n.$previousAudioSibling=n.getAudioSibling(n.$node,"previous"),n.$nextAudioSibling=n.getAudioSibling(n.$node,"next"),n.setSkipButtonStates()}))),this.$player.readyState>=2&&this.initializePlayer(),this.$player.addEventListener("loadeddata",this.initializePlayer),this.$player.addEventListener("ended",this.handleEnd),this.$player.addEventListener("timeupdate",this.handleUpdateTime)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){}});const Rg=Og;var Mg=(0,s.createBehavior)("JumpLinks",{handleScroll:function(){var e=this,t=window.scrollY;this.oldY!==t&&this.$node&&(this.$node.classList.toggle("w-full",this.topPos<=t),this.$node.classList.toggle("lg:overflow-x-auto",this.topPos<=t),this.$node.classList.toggle("lg:rounded-2xl",this.topPos>t),this.$node.classList.toggle("lg:w-contained",this.topPos>t),this.$node.classList.toggle("overflow-hidden",this.topPos>t),this.$cta&&this.$cta.classList.toggle("trans-show-hide--active",this.topPos<=t),setTimeout((function(){e.header&&!e.header.classList.contains("-translate-y-full")?e.$node.style.top="".concat(e.header.offsetHeight,"px"):e.$node.style.top=0}),0)),this.oldY=t,this.rAF=window.requestAnimationFrame(this.handleScroll)},scrollToSection:function(e){e.preventDefault(),e.currentTarget.blur();var t=e.currentTarget.getAttribute("href");bo.to(window,{duration:1,scrollTo:{y:t,offsetY:80}})},watchSections:function(){var e=this;this.linkIds=[],this.$links.length>0&&(this.linkIds=Array.from(this.$links).map((function(e){return e.getAttribute("href")}))),this.linkIds.length>0&&Array.from(this.linkIds).forEach((function(t,i){var n="#"!==t.trim()?document.querySelector(t):null;n&&Gh.create({id:"jumplinks".concat(i),trigger:n.closest("[data-JumpLinks-section]"),start:"top+=300 center",end:"bottom+=300 center",onEnter:function(){bo.to(e.getScrollElement(),{duration:1,scrollTo:{x:'[data-JumpLinks-link][href="'.concat(t,'"]'),offsetX:32}})},onEnterBack:function(){bo.to(e.getScrollElement(),{duration:1,scrollTo:{x:'[data-JumpLinks-link][href="'.concat(t,'"]'),offsetX:32}})},toggleClass:{targets:'[data-JumpLinks-link][href="'.concat(t,'"]'),className:"jump-link-active"}})}))},update:function(){this.getTopPos(),Gh.refresh()},getTopPos:function(){this.$node.classList.remove("sticky"),this.topPos=this.$node.offsetTop,this.$node.classList.add("sticky")},getScrollElement:function(){return["xs","sm","md"].includes(window.A17.currentMediaQuery)?this.$mobileScroll:this.$node}},{init:function(){var e=this;bo.registerPlugin(Gh,Ao),this.header=document.getElementById("global-header"),this.$links=this.getChildren("link"),this.$desktopScroll=this.getChild("desktop-scroll"),this.$mobileScroll=this.getChild("mobile-scroll"),this.$cta=this.getChild("cta"),this.oldY=-1,this.getTopPos(),this.rAF=window.requestAnimationFrame(this.handleScroll),this.$links.forEach((function(t){t.addEventListener("click",e.scrollToSection,!1)})),"complete"===document.readyState?this.watchSections():window.addEventListener("load",this.watchSections,!1),document.addEventListener("TextExpander:update",this.update,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){this.update()},disabled:function(){},destroy:function(){var e=this;Array.from(this.linkIds).forEach((function(e,t){var i;"#"!==e.trim()&&(null===(i=Gh.getById("jumplinks".concat(t)))||void 0===i||i.kill(!0))})),window.cancelAnimationFrame(this.rAF),this.rAF=null,this.$links.forEach((function(t){t.removeEventListener("click",e.scrollToSection)})),window.removeEventListener("load",this.watchSections),document.removeEventListener("TextExpander:update",this.update),window.removeEventListener("scroll",this.handleScroll)}});const Ng=Mg;var Bg=(0,s.createBehavior)("LanguageSwitcher",{navigate:function(e){window.swup?window.swup.loadPage({url:e}):window.location.assign(e)}},{init:function(){var e=this;this.$node.addEventListener("change",(function(){e.navigate(e.$node.value)}))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){}});const Fg=Bg;const Ug=(0,s.createBehavior)("ListingFade",{toggle:function(){}},{init:function(){bo.registerPlugin(Gh),bo.utils.toArray("ul",this.$node).forEach((function(e){var t=bo.utils.toArray("li",e),i=bo.timeline({scrollTrigger:{trigger:e,start:"top 90%"}});t.forEach((function(e,t){i.fromTo(e,{opacity:0},{opacity:1,duration:.5,ease:Kn.easeInOut},"-=0.4")}))}))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){}});const $g=(0,s.createBehavior)("LocationInput",{setPrefillState:function(){var e,t=null===(e=this.$countrySelect)||void 0===e?void 0:e.value;t&&this.onCountrySelect(null,t)},onCountrySelect:function(e,t){t||(t=null==e?void 0:e.detail),this.switchInputFields(t.toLowerCase()&&t.toLowerCase()!==this.textInputIfNot.toLowerCase())},switchInputFields:function(e){var t,i;e?(this.$state.classList.replace("flex","hidden"),this.$stateText.classList.replace("hidden","flex"),null===(t=this.$zip)||void 0===t||t.classList.remove("hidden")):(this.$state.classList.replace("hidden","flex"),this.$stateText.classList.replace("flex","hidden"),null===(i=this.$zip)||void 0===i||i.classList.add("hidden"))}},{init:function(){var e;this.$country=this.getChild("country"),this.$countrySelect=this.$country.querySelector("select"),this.$state=this.getChild("state"),this.$stateText=this.getChild("state-text"),this.$zip=document.querySelector(".customer-info-zip [data-form-optional-tag]"),this.dispatchName=null===(e=this.options)||void 0===e?void 0:e.dispatchname,this.textInputIfNot=this.options.textinputifnot,this.setPrefillState(),window.addEventListener(this.dispatchName,this.onCountrySelect,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){window.removeEventListener(this.dispatchName,this.onCountrySelect,!1)}});var Hg=(0,s.createBehavior)("MediaExpander2up",{handleClick:function(e){this.$items.forEach((function(e){["w-8-cols","w-4-cols"].map((function(t){e.classList.toggle(t)}))})),this.$triggers.forEach((function(e){return e.classList.toggle("trans-show-hide--active")})),e.preventDefault()}},{init:function(){var e=this;this.$items=this.getChildren("item"),this.$triggers=this.getChildren("trigger"),this.$triggers.forEach((function(t){t.addEventListener("click",e.handleClick,!1)}))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){var e=this;this.$triggers.forEach((function(t){t.removeEventListener("click",e.handleClick)}))}});const jg=Hg;const zg=(0,s.createBehavior)("MediaHandler",{mediaLoaded:function(){this.$twillImgWrapper&&(this.$twillImgWrapper.style.backgroundColor=""),this.$twillImgPlaceholder&&(this.$twillImgPlaceholder.style.backgroundColor="")}},{init:function(){this.$twillImgWrapper=this.$node.querySelector(".twill-image-wrapper"),this.$twillImgMain=this.$node.querySelector("[data-main-image]"),this.$twillImgPlaceholder=this.$node.querySelector("[data-placeholder-image]"),this.$twillImgMain&&this.$twillImgMain.addEventListener("twill-image:loaded",this.mediaLoaded,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$twillImgMain&&this.$twillImgMain.removeEventListener("twill-image:loaded",this.mediaLoaded)}});var qg=(0,s.createBehavior)("MobileSearch",{toggle:function(e){e.preventDefault(),this._data.isActive?this.close():this.open()},close:function(){this._data.isActive&&(this.$node.classList.remove("g-mobile-search--active"),this.$focusTrap.deactivate(),this._data.isActive=!1,this.$mobileNavInner.style.overflow="",S(this.$node))},open:function(){var e=this;this._data.isActive=!0,this.$node.classList.add("g-mobile-search--active"),this.$mobileNavInner.style.overflow="visible",setTimeout((function(){e.$focusTrap.activate(),T(e.$node)}),300)},updateSelectors:function(){this.$close=this.getChild("close"),this.$inner=this.getChild("inner"),this.$initialFocus=this.getChild("focus"),this.$mobileNav=document.querySelector("#mobileNavModal"),this.$mobileNavInner=this.$mobileNav.querySelector(".a17-modal__wrapper"),this.$triggers=document.querySelectorAll("[data-mobilesearch-trigger]")},addEvents:function(){var e=this;this.$close.addEventListener("click",this.close,!1),this.$triggers.forEach((function(t){t.addEventListener("click",e.toggle,!1)})),this.$focusTrap=J(this.$inner,{})},destroyEvents:function(){var e=this;this.$close.removeEventListener("click",this.close),this.$triggers.forEach((function(t){t.removeEventListener("click",e.toggle)}))},refresh:function(){this.updateSelectors(),this.destroyEvents(),this.addEvents()}},{init:function(){this.isActive=!1,this.updateSelectors(),this.addEvents(),document.addEventListener("page:updated",this.refresh,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){["xs","sm","md"].includes(window.A17.currentMediaQuery)||this.close()},disabled:function(){},destroy:function(){document.removeEventListener("page:updated",this.updateSelectors),this.destroyEvents()}});const Vg=qg;var Wg=function(e,t){var i,n=e.length;for(i=0;i<n;i++)e[i].addEventListener("click",t,!1)},Gg=function(e,t){var i,n=e.length;for(i=0;i<n;i++)e[i].removeEventListener("click",t)};function Yg(e){return function(e){if(Array.isArray(e))return Xg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xg(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Xg(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xg(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var Kg=(0,s.createBehavior)("Modal",{toggle:function(e){e.preventDefault(),this._data.isActive?this.close():this.open()},close:function(){var e;this._data.isActive&&((e=this.$node.classList).remove.apply(e,Yg(this._data.activeClasses)),this._data.focusTrap.deactivate(),this._data.isActive=!1,S(this.$focusTrap),this.$node.dispatchEvent(new CustomEvent("Modal:closed")))},open:function(){var e,t=this;document.dispatchEvent(new CustomEvent("Modal:closeAll")),(e=this.$node.classList).add.apply(e,Yg(this._data.activeClasses)),this._data.isActive=!0,this.$node.dispatchEvent(new CustomEvent("Modal:opened")),setTimeout((function(){t._data.focusTrap.activate(),T(t.$focusTrap)}),300)},handleEsc:function(e){"Escape"===e.key&&this.close()},handleClickOutside:function(e){e.target.id===this.$node.id&&this.close(e)},initTriggers:function(){var e=this.$node.getAttribute("id");this.$triggers=document.querySelectorAll('[data-modal-target="#'.concat(e,'"]')),this.$triggers&&this.$triggers.length>0&&Wg(this.$triggers,this.toggle)}},{init:function(){this.$focusTrap=this.getChild("focus-trap"),this.$closeButtons=this.getChildren("close-trigger"),this.$initialFocus=this.getChild("initial-focus"),this.$initialFocus||console.warn("No initial focus element found. Add a `h1` with the attribute `data-Modal-initial-focus`. The `h1` should also have an id that matches the modal id with `_title` appended"),this._data.focusTrap=J(this.$focusTrap,{initialFocus:this.$initialFocus,clickOutsideDeactivates:this.options.panel}),this._data.isActive=!1,this._data.activeClasses=["a17-modal--active"],this.$closeButtons&&Wg(this.$closeButtons,this.close),this.$node.addEventListener("Modal:toggle",this.toggle,!1),this.$node.addEventListener("Modal:open",this.open),this.$node.addEventListener("Modal:close",this.close,!1),document.addEventListener("Modal:closeAll",this.close,!1),document.addEventListener("keyup",this.handleEsc,!1),document.addEventListener("pjax:clickLink",this.close,!1),document.addEventListener("page:updated",this.initTriggers,!1),this.initTriggers(),this.options.panel&&this.$node.addEventListener("click",this.handleClickOutside,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.close(),this.$closeButtons&&Gg(this.$closeButtons,this.close),this.$node.removeEventListener("Modal:toggle",this.toggle),this.$node.removeEventListener("Modal:open",this.open),this.$node.removeEventListener("Modal:close",this.close),this.$node.removeEventListener("click",this.handleClickOutside),document.removeEventListener("Modal:closeAll",this.close),document.removeEventListener("pjax:clickLink",this.close),document.removeEventListener("page:updated",this.initTriggers),document.removeEventListener("keyup",this.handleEsc),Gg(this.$triggers,this.toggle)}});const Qg=Kg;var Zg=(0,s.createBehavior)("NavDropdown",{handleTriggerClick:function(e){e.preventDefault(),this.setPanelHeight(),this.closeAllNavPanels(e.currentTarget),this.isOpen?this.close(e):this.open(e)},open:function(e){this.isMobile?this.openMobile(e):this.openDesktop(e)},close:function(e){this.isMobile?this.closeMobile(e):this.closeDesktop(e)},openMobile:function(){var e=this;this.$panel.classList.remove("hidden"),setTimeout((function(){var t=e.$panelInner.offsetHeight;e.$panel.style.height="".concat(t,"px"),e.$trigger.setAttribute("aria-expanded","true"),e.$panel.setAttribute("aria-hidden","false"),e.$icon.classList.add("rotate-180")}),1),this.isOpen=!0},closeMobile:function(){this.$panel.style.height="0px",this.$trigger.setAttribute("aria-expanded","false"),this.$panel.setAttribute("aria-hidden","true"),this.$icon.classList.remove("rotate-180"),this.isOpen=!1},openDesktop:function(){this.setTopValue(),this.$globalHeader.classList.remove("xl:bg-primary"),this.$globalHeader.classList.add("xl:bg-secondary"),this.$panel.classList.add("xl:trans-show-hide--active"),this.$trigger.classList.remove("underline-transparent"),this.$trigger.classList.add("underline-inherit"),this.$trigger.setAttribute("aria-expanded","true"),this.$icon.classList.add("rotate-180"),this.isOpen=!0},closeDesktop:function(){this.$globalHeader.classList.add("xl:bg-primary"),this.$globalHeader.classList.remove("xl:bg-secondary"),this.$panel.classList.remove("xl:trans-show-hide--active"),this.$trigger.classList.add("underline-transparent"),this.$trigger.classList.remove("underline-inherit"),this.$trigger.setAttribute("aria-expanded","false"),this.$icon.classList.remove("rotate-180"),this.isOpen=!1},handlePanelClick:function(e){this.$panel===e.target&&this.close()},setPanelHeight:function(){this.isMobile?this.$panel.style.height="":(this.$globalHeader?this.panelHeight=window.innerHeight-this.$globalHeader.clientHeight:this.panelHeight=window.innerHeight,this.$panel.style.height="".concat(this.panelHeight,"px"))},setTopValue:function(){this.isMobile?this.$panel.style.top="":(this.topValue=this.$globalHeader.clientHeight,this.$panel.style.top="".concat(this.topValue,"px"))},handleEsc:function(e){"Escape"===e.key&&this.close(e)},closeAllNavPanels:function(e){document.dispatchEvent(new CustomEvent("nav-dropdown:close",{detail:{target:e}}))},handleCloseAll:function(e){e.detail.target!==this.$trigger&&this.close(e)},checkBreakpoint:function(){this.isMobile=["xs","sm","md","lg"].includes(window.A17.currentMediaQuery)}},{init:function(){this.isMobile=!1,this.isOpen=!1,this.topValue=0,this.$globalHeader=document.querySelector("[data-global-header]"),this.$trigger=this.getChild("trigger"),this.$icon=this.$trigger.querySelector("svg"),this.$panel=this.getChild("panel"),this.$panelInner=this.getChild("panel-inner"),this.$trigger.addEventListener("click",this.handleTriggerClick,!1),this.$panel.addEventListener("click",this.handlePanelClick,!1),document.addEventListener("nav-dropdown:close",this.handleCloseAll,!1),document.addEventListener("pjax:clickLink",this.close,!1),document.addEventListener("keyup",this.handleEsc,!1),window.addEventListener("scroll",this.close,!1),this.setPanelHeight(),this.setTopValue(),this.checkBreakpoint()},enabled:function(){},resized:function(){this.setPanelHeight(),this.setTopValue()},mediaQueryUpdated:function(){this.checkBreakpoint()},disabled:function(){},destroy:function(){this.$trigger.removeEventListener("click",this.handleTriggerClick),this.$panel.removeEventListener("click",this.handlePanelClick),document.removeEventListener("pjax:clickLink",this.close),document.removeEventListener("keyup",this.handleEsc),document.removeEventListener("nav-dropdown:close",this.handleCloseAll),window.removeEventListener("scroll",this.close)}});const Jg=Zg;var em=(0,s.createBehavior)("NavigationSidebar",{initMenuBar:function(){bo.set(this.$navbar,{y:"-100%",autoAlpha:1})},showMenuBar:function(){bo.to(this.$navbar,{y:0,ease:"power4",duration:.375})},hideMenuBar:function(){bo.to(this.$navbar,{y:"-100%",ease:"power4",duration:.375})},initSidebar:function(){this.$sidebarItems[0]&&this.$sidebarItems[0].lastElementChild.classList.add("underline")},repositionSidebar:function(){this.isOpen||bo.set(this.$sidebar,{x:this.ww>this.breakpoint?"-100%":0,y:this.ww>this.breakpoint?0:"100%"})},openSidebar:function(){this.isOpen=!0;var e=bo.timeline();e.to(this.$backdrop,{autoAlpha:.7,duration:.375}),e.to(this.$sidebar,{x:0,y:0,ease:"power4",duration:.75})},closeSidebar:function(){this.isOpen=!1;var e=bo.timeline(),t={ease:"power4",duration:.75};this.ww>this.breakpoint?t.x="-100%":t.y="100%",e.to(this.$sidebar,t),e.to(this.$backdrop,{autoAlpha:0,duration:.375})},scrollToSection:function(e){var t,i,n,r,o,s,a=this;e.stopPropagation(),e.preventDefault();var l=null!==(t=e.target)&&void 0!==t&&null!==(t=t.classList)&&void 0!==t&&t.contains("group")?null===(i=e.target)||void 0===i||null===(i=i.dataset)||void 0===i?void 0:i.navigationsidebarSidebaritem:null===(n=e.target)||void 0===n||null===(n=n.parentElement)||void 0===n||null===(n=n.dataset)||void 0===n?void 0:n.navigationsidebarSidebaritem,u=null!==(r=e.target)&&void 0!==r&&null!==(r=r.classList)&&void 0!==r&&r.contains("group")?null===(o=e.target)||void 0===o||null===(o=o.dataset)||void 0===o?void 0:o.navigationsidebarOffset:null===(s=e.target)||void 0===s||null===(s=s.parentElement)||void 0===s||null===(s=s.dataset)||void 0===s?void 0:s.navigationsidebarOffset;this.closeSidebar(),setTimeout((function(){bo.to(window,{duration:.75,scrollTo:{y:"#".concat(l),offsetY:u||a.navBarHeight+32},ease:"power3"})}),550)},removeActiveStates:function(){this.$sidebarItems.forEach((function(e){return e.lastElementChild.classList.remove("underline")}))},setActiveStateBasedOnIndex:function(e){this.$sidebarItems[e]&&(this.$sidebarItems[e].lastElementChild.classList.add("underline"),this.$navbarTitle.innerText=this.$sidebarItems[e].lastElementChild.innerText)},handleActiveSection:function(){var e=this,t=this.$sections[0].getBoundingClientRect().top;window.pageYOffset<=t?(this.removeActiveStates(),this.setActiveStateBasedOnIndex(0),this.hideMenuBar()):this.showMenuBar(),this.$sections.forEach((function(t,i){t.getBoundingClientRect().top<=64+e.navBarHeight&&(e.removeActiveStates(),e.setActiveStateBasedOnIndex(i))}))}},{init:function(){var e,t,i=this;bo.registerPlugin(Ao),this.$navbar=this.getChild("navbar"),this.$navbarTitle=this.getChild("navbarTitle"),this.$sidebarItems=this.getChildren("sidebarItem"),this.$backdrop=this.getChild("backdrop"),this.$sidebar=this.getChild("menu"),this.$closeBtn=this.getChild("closeBtn"),this.$triggers=document.querySelectorAll(".sidebarTrigger"),this.$sections=document.querySelectorAll(".navigationSidebarSection"),this.ww=window.innerWidth,this.breakpoint=1024,this.isOpen=!1,this.navBarHeight=(null===(e=this.$navbar)||void 0===e?void 0:e.clientHeight)||92,this.$triggers.forEach((function(e){e.addEventListener("click",i.openSidebar,!1)})),this.$sidebarItems.forEach((function(e){e.addEventListener("click",i.scrollToSection,!1)})),this.$closeBtn.addEventListener("click",this.closeSidebar,!1),window.addEventListener("scroll",function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];clearTimeout(t),t=setTimeout((function(){e.apply(void 0,r)}),i)}}(this.handleActiveSection,100),!1),this.initMenuBar(),this.initSidebar(),null!==(t=this.options)&&void 0!==t&&t.visible&&(this.openSidebar(),this.showMenuBar())},enabled:function(){},resized:function(){this.ww=window.innerWidth,this.repositionSidebar()},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){var e=this;this.$triggers.forEach((function(t){t.removeEventListener("click",e.openSidebar)})),this.$sidebarItems.forEach((function(t){t.removeEventListener("click",e.scrollToSection)})),this.$closeBtn.removeEventListener("click",this.closeSidebar),window.removeEventListener("scroll",this.handleActiveSection)}});const tm=em;const im=(0,s.createBehavior)("PageTools",{zoom:function(e){e.preventDefault()},print:function(e){e.preventDefault(),window.print()},download:function(e){e.preventDefault();var t=document.createElement("a");t.style.display="none",t.target="_blank",t.href=this.$downloadUrl,t.download="artwork.jpg",document.body.appendChild(t),t.click(),setTimeout((function(){t.parentNode.removeChild(t)}),0)},share:function(e){e.preventDefault(),navigator.share&&["xs","sm","md"].includes(window.A17.currentMediaQuery)?navigator.share({title:document.title,url:window.location.href}).then((function(){})).catch(console.error):(e.stopPropagation(),this.$shareTrigger.setAttribute("aria-expanded","true"),this.$shareDropdown.classList.toggle("trans-show-hide--active"))},closeShare:function(e){e&&e.stopPropagation(),this.$shareTrigger.setAttribute("aria-expanded","false"),this.$shareDropdown.classList.remove("trans-show-hide--active")},handleEsc:function(e){"Escape"===e.key&&this.closeShare()}},{init:function(){this.$zoomTrigger=this.getChild("zoom-trigger"),this.$printTrigger=this.getChild("print-trigger"),this.$downloadTrigger=this.getChild("download-trigger"),this.$shareTrigger=this.getChild("share-trigger"),this.$shareDropdown=this.getChild("share-dropdown"),this.$zoomTrigger&&this.$zoomTrigger.addEventListener("click",this.zoom,!1),this.$printTrigger&&this.$printTrigger.addEventListener("click",this.print,!1),this.$downloadTrigger&&(this.$downloadTrigger.addEventListener("click",this.download,!1),this.$downloadUrl=this.$downloadTrigger.getAttribute("data-PageTools-download-url")),this.$shareTrigger.addEventListener("click",this.share,!1),document.addEventListener("keyup",this.handleEsc,!1),document.addEventListener("click",this.closeShare)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$zoomTrigger&&this.$zoomTrigger.removeEventListener("click",this.zoom),this.$printTrigger&&this.$printTrigger.removeEventListener("click",this.print),this.$downloadTrigger&&this.$downloadTrigger.removeEventListener("click",this.download),this.$shareTrigger.removeEventListener("click",this.share),document.removeEventListener("keyup",this.handleEsc,!1),document.removeEventListener("click",this.closeShare)}});const nm=(0,s.createBehavior)("PaginationInput",{handleSubmit:function(e){e.preventDefault();var t=this.$input.value;t<this.minValue||t>this.maxValue||(this.searchParams.set("page",t),window.A17.pjax.loadPage({url:"".concat(this.baseUrl,"?").concat(this.searchParams.toString()),customTransition:"filters"}))}},{init:function(){this.$input=this.getChild("input"),this.minValue=parseInt(this.$input.getAttribute("min")),this.maxValue=parseInt(this.$input.getAttribute("max")),this.baseUrl=window.location.origin+window.location.pathname,this.searchParams=new URLSearchParams(window.location.search),this.$node.addEventListener("submit",this.handleSubmit,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$node.removeEventListener("submit",this.handleSubmit)}});const rm=(0,s.createBehavior)("PasswordReveal",{toggle:function(e){e.preventDefault(),this.isActive?this.hide():this.show()},show:function(){this.$input.setAttribute("type","text"),this.$trigger.setAttribute("aria-label",this.labels.hide),this.$iconShow.classList.add("hidden"),this.$iconHide.classList.remove("hidden"),this.isActive=!0},hide:function(){this.$input.setAttribute("type","password"),this.$trigger.setAttribute("aria-label",this.labels.show),this.$iconShow.classList.remove("hidden"),this.$iconHide.classList.add("hidden"),this.isActive=!1}},{init:function(){this.isActive=!1,this.labels={show:this.options["label-show"],hide:this.options["label-hide"]},this.$trigger=this.getChild("trigger"),this.$iconShow=this.getChild("icon-show"),this.$iconHide=this.getChild("icon-hide"),this.$input=this.$node.querySelector('input[type="password"]'),this.$trigger&&this.$input&&this.$trigger.addEventListener("click",this.toggle,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$trigger&&this.$input&&this.$trigger.removeEventListener("click",this.toggle)}});var om="password",sm='input[type="radio"]',am='input[type="radio"][value="password"]',lm=(0,s.createBehavior)("RegisterForm",{handleOnChange:function(e){var t=e.target,i=t.checked,n=t.value,r=i&&n===om;this.togglePasswordFields(r)},togglePasswordFields:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$password.style.display=e?"block":"none"},setInitialState:function(){var e=this.$radio.querySelector(am);this.togglePasswordFields(e.checked)}},{init:function(){var e=this;this.$radio=this.getChild("radio"),this.$password=this.getChild("password"),this.handleOnChange=this.handleOnChange.bind(this),this.$radio.querySelectorAll(sm).forEach((function(t){t.addEventListener("change",e.handleOnChange)})),this.setInitialState()},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){var e=this;this.$radio.querySelectorAll(sm).forEach((function(t){t.removeEventListener("change",e.handleOnChange)}))}});const um=lm;const cm=(0,s.createBehavior)("RemoteClick",{remoteClick:function(e){e.preventDefault(),this.$remoteClickElement.click()}},{init:function(){var e;this.remoteTarget=null===(e=this.options)||void 0===e?void 0:e.targetid,this.remoteTarget&&(this.$remoteClickElement=document.getElementById(this.remoteTarget),this.$node.addEventListener("click",this.remoteClick,!1))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$node.removeEventListener("click",this.remoteClick)}});const hm=(0,s.createBehavior)("SectionAngle",{},{init:function(){bo.registerPlugin(Gh),this.offset=bo.getProperty("html","--angle-offset");var e="bottom"===this.options.position?"bottom bottom":"top 80%",t="both"===this.options.position?"bottom 20%":"80% 80%",i=bo.timeline({scrollTrigger:{id:"gsapAngle",trigger:this.$node,start:e,end:t,scrub:1,invalidateOnResize:!0}});i.fromTo(this.$node,{"--skewVar":"".concat(this.offset/window.innerWidth*-100,"deg")},{"--skewVar":"".concat(this.offset/window.innerWidth*100,"deg")}),"both"===this.options.position&&(i.to(this.$node,{"--skewVar":"".concat(this.offset/window.innerWidth*-100,"deg")}),i.to(this.$node,{"--skewVar":"".concat(this.offset/window.innerWidth*100,"deg")}))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){this.offset=bo.getProperty("html","--angle-offset")},disabled:function(){},destroy:function(){Gh.getById("gsapAngle").kill(!0)}});var dm=(0,s.createBehavior)("SectionExpander",{toggle:function(e){e.preventDefault(),this.isOpen=!this.isOpen,e.currentTarget.querySelector("span").innerText=this.isOpen?this.showLessText:this.showMoreText,this.isOpen?this.open():this.close()},open:function(){var e=this,t=this.$contentInner.clientHeight;this.$content.classList.remove("invisible"),this.$content.style.height="".concat(t,"px"),this.$trigger.setAttribute("aria-expanded","true"),setTimeout((function(){e.$contentInner.focus()}),300)},close:function(){this.$content.classList.add("invisible"),this.$content.style.height=0,this.$trigger.setAttribute("aria-expanded","false")}},{init:function(){this.isOpen=!1,this.$trigger=this.getChild("trigger"),this.$content=this.getChild("content"),this.$contentInner=this.getChild("content-inner"),this.showMoreText="Show more",this.showLessText="Show less",this.close(),this.$trigger.addEventListener("click",this.toggle,!1)},enabled:function(){},resized:function(){this.isOpen?this.open():this.close()},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$trigger.removeEventListener("click",this.toggle)}});const pm=dm;const fm=(0,s.createBehavior)("Select",{onSelectChange:function(e){var t,i;console.log('dispatch value under "'.concat(this.dispatchName,'": '),null==e||null===(t=e.target)||void 0===t?void 0:t.value),dispatchEvent(new CustomEvent(this.dispatchName,{detail:null==e||null===(i=e.target)||void 0===i?void 0:i.value}))}},{init:function(){var e;this.$input=this.getChild("input"),this.$caret=this.getChild("caret"),this.dispatchName=null===(e=this.options)||void 0===e?void 0:e.dispatchname,this.dispatchName&&this.$input.addEventListener("change",this.onSelectChange,!1)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.dispatchName&&this.$input.removeEventListener("change",this.onSelectChange)}});function gm(e){return function(e){if(Array.isArray(e))return mm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mm(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?mm(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var vm=(0,s.createBehavior)("ShowVideo",{_handleClicks:function(e){e.preventDefault(),e.stopPropagation(),this.$videoPlayerWrapper.classList.remove("hidden"),this._playVideo(this.options.videotype,this.options.videoid)},_playVideo:function(e,t){this._data.videoInitialized||(this._data.params=this._handleParams(e,t),"youtube"===e?this._data.source="https://www.youtube.com/embed/".concat(t).concat(this._data.params):"vimeo"===e&&(this._data.source="https://player.vimeo.com/video/".concat(t).concat(this._data.params)),this._data.videoiFrame='<iframe data-video-player title="Video Player" src="'.concat(this._data.source,'" mozallowfullscreen webkitallowfullscreen allowfullscreen allow="autoplay" class="w-full h-full bg-black"></iframe>'),this.$videoPlayer.innerHTML=this._data.videoiFrame,this._data.videoInitialized=!0,!parseInt(this.options.sticky)&&"true"!==this.options.sticky||this.stickyHidden||this.isMobile()||this.initSticky())},_showIframe:function(){this._data.videoInitialized||(this.$videoPlayerWrapper.classList.remove("hidden"),this._playVideo(this.options.videotype,this.options.videoid,!1,!1))},_checkParams:function(){!1!==this.options.autoplay&&window.location.search.indexOf("playvideo")>-1&&(this.$node.classList.add("is-active"),this._playVideo(this.options.videotype,this.options.videoid,!0))},_handleParams:function(e,t){var i={};return"youtube"===e&&(i.rel=0,i.fs=1,i.modestbranding=1,i.playsinline=1,i.showinfo=0,i.enablejsapi=1),"vimeo"===e&&(i.color="05d192",i.title=0,i.byline=0,i.portrait=0),this.options.loop&&(i.loop=1,"youtube"===e&&(i.playlist=t)),this.options.autoplay?(i.autoplay=1,"youtube"===e&&(i.mute=1),"vimeo"===e&&(i.muted=1)):this.isMobile()||(i.autoplay=1),Qd.fromObject(i)},_init:function(){this.$videoPlayerWrapper=this.getChild("player-wrapper"),this.$videoPlayer=this.getChild("player"),this.$trigger=this.getChild("media-container"),this.$stickyClose=this.getChild("close-button"),this._data.source,this._data.params,this._data.videoiFrame,this.options.autoplay="1"===this.options.autoplay||1===this.options.autoplay||"true"===this.options.autoplay,this.options.loop="1"===this.options.loop||1===this.options.loop||"true"===this.options.loop,this.options.hasposter="1"===this.options.hasposter||1===this.options.hasposter||"true"===this.options.hasposter,this.options.autoplay||!this.options.hasposter?(this.$videoPlayerWrapper.classList.remove("hidden"),this._playVideo(this.options.videotype,this.options.videoid,this.options.autoplay,this.options.autoplay)):(this.$trigger.addEventListener("click",this._handleClicks,!1),this.resetPlayer())},resetPlayer:function(){this._data.videoInitialized=!1,this.$videoPlayer.innerHTML="",["xs","sm"].includes(window.A17.currentMediaQuery)&&this._showIframe()},initSticky:function(){this.stickyHidden=!1,this.oldY=-1,this.rAF=window.requestAnimationFrame(this.handleScroll),this.defaultClasses=["absolute","inset-0","w-full","h-full"],this.stickyClasses=["fixed","bottom-32","right-32","w-192","h-[108px]","xl:w-[320px]","xl:h-[180px]","animate-fade-in"],this.$stickyClose.addEventListener("click",this.hideStickyVideo)},destroySticky:function(){window.cancelAnimationFrame(this.rAF),this.rAF=null},hideStickyVideo:function(e){var t,i;e.stopPropagation(),this.$stickyClose.classList.add("hidden"),(t=this.$videoPlayerWrapper.classList).add.apply(t,gm(this.defaultClasses)),(i=this.$videoPlayerWrapper.classList).remove.apply(i,gm(this.stickyClasses)),this.stickyHidden=!0,this.resetPlayer()},isMobile:function(){return["xs","sm"].includes(window.A17.currentMediaQuery)},handleScroll:function(){var e=window.scrollY;if(!this.stickyHidden&&this.oldY!==e){var t,i,n,r,o=this.$node.getBoundingClientRect(),s=o.top,a=o.bottom;if(s>window.innerHeight||a<0)this.$stickyClose.classList.remove("hidden"),(t=this.$videoPlayerWrapper.classList).remove.apply(t,gm(this.defaultClasses)),(i=this.$videoPlayerWrapper.classList).add.apply(i,gm(this.stickyClasses));else this.$stickyClose.classList.add("hidden"),(n=this.$videoPlayerWrapper.classList).add.apply(n,gm(this.defaultClasses)),(r=this.$videoPlayerWrapper.classList).remove.apply(r,gm(this.stickyClasses))}this.oldY=e,this.rAF=window.requestAnimationFrame(this.handleScroll)}},{init:function(){this._init(),this._checkParams()},enabled:function(){},resized:function(){this.isMobile()&&this._showIframe()},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.destroySticky(),this.$trigger.removeEventListener("click",this._handleClicks)}});const ym=vm;var bm=(0,s.createBehavior)("SlashScrollPin",{toggle:function(){}},{init:function(){var e=this;bo.registerPlugin(Gh);var t=bo.utils.toArray(".has-slash",this.$node);this.offset=bo.getProperty("html","--slash-offset"),t.forEach((function(t){t.classList.add("has-slash--pinned");var i=t.classList.contains("has-slash--bottom")?"bottom bottom-=".concat(e.offset):"top bottom-=".concat(e.offset);bo.timeline({scrollTrigger:{trigger:t,start:i,scrub:1,invalidateOnResize:!0,markers:!0,pin:!0}}).fromTo(t,{"--skewVar":"0deg"},{"--skewVar":"".concat(e.offset/2/window.innerWidth*100,"deg")})})),window.addEventListener("mediaQueryUpdated",(function(){e.offset=bo.getProperty("html","--slash-offset")}))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){}});const _m=bm,wm=function(e){if("string"==typeof e){const t=document.createElement("div"),i=document.createTextNode(e.replace(/<[^>]*>?/g,""));return t.appendChild(i),encodeURIComponent(t.textContent)}return console.log("Warning - escapeString - no string passed"),""};var Tm=(0,s.createBehavior)("SocialSharing",{pageUrl:function(){var e=this.options.url;return e&&e.length>0?e:window.location.href},pageUrlEscaped:function(){return wm(this.pageUrl())},pageTitle:function(){return wm(document.title)},buildFacebookURL:function(){return"https://www.facebook.com/sharer/sharer.php?u=".concat(this.pageUrlEscaped())},buildLinkedinURL:function(){return"https://www.linkedin.com/shareArticle?mini=true&url=".concat(this.pageUrlEscaped(),"&summary=").concat(this.pageTitle())},buildTwitterURL:function(){var e=document.querySelector('meta[name="twitter:description"]'),t=e&&e.getAttribute("content"),i=t||this.pageTitle();return"https://twitter.com/intent/tweet?url="+this.pageUrlEscaped()+"&text="+i+"&via="+(this.options.twitterVia||"")},openWindow:function(e,t){var i=this;t||(t={});var n=t.width||575,r=t.height||400,o=(window.outerWidth-n)/2,s="status=1,width="+n+",height="+r+",top="+(window.outerHeight-r)/2+",left="+o;this._data.socialWindowRef&&!this._data.socialWindowRef.closed&&this._data.socialWindowRef.close(),setTimeout((function(){i._data.socialWindowRef=window.open(e,"A17",s),i._data.socialWindowRef.opener=null}),250)},addListener:function(e,t){for(var i=e.length,n=0;n<i;n++)e[n].addEventListener("click",t,!1)},removeListener:function(e,t){for(var i=e.length,n=0;n<i;n++)e[n].removeEventListener("click",t)},facebook:function(e){e.preventDefault(),e.stopPropagation();var t=this.buildFacebookURL();this.openWindow(t)},twitter:function(e){e.preventDefault(),e.stopPropagation();var t=this.buildTwitterURL();this.openWindow(t,{height:275})},linkedin:function(e){e.preventDefault(),e.stopPropagation();var t=this.buildLinkedinURL();this.openWindow(t,{height:500})},tumblr:function(e){e.preventDefault(),e.stopPropagation()},copy:function(e){var t=this;e.preventDefault(),e.stopPropagation(),navigator.clipboard.writeText(this.pageUrl()).then((function(){var e=t.getChild("copy-icon"),i=t.getChild("copy-checkmark"),n=t.getChild("copy-label"),r=t.getChild("copy-message");e.classList.add("hidden"),i.classList.remove("hidden"),r.setAttribute("role","alert"),r.setAttribute("aria-hidden","false"),r.classList.remove("sr-only"),n.setAttribute("aria-hidden","true"),n.classList.add("sr-only")}),(function(){console.warn("Copy failed")}))},permalink:function(e){e.preventDefault();try{this.setSelectionRange(0,this.value.length),this.select()}catch(e){}}},{init:function(){this._data.socialWindowRef=null,this.addListener(this.getChildren("facebook"),this.facebook),this.addListener(this.getChildren("twitter"),this.twitter),this.addListener(this.getChildren("email"),this.email),this.addListener(this.getChildren("linkedin"),this.linkedin),this.addListener(this.getChildren("tumblr"),this.tumblr),this.addListener(this.getChildren("copy"),this.copy)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.removeListener(this.getChildren("facebook"),this.facebook),this.removeListener(this.getChildren("twitter"),this.twitter),this.removeListener(this.getChildren("email"),this.email),this.removeListener(this.getChildren("linkedin"),this.linkedin),this.removeListener(this.getChildren("tumblr"),this.tumblr),this.removeListener(this.getChildren("copy"),this.copy)}});const Sm=Tm;var Em=(0,s.createBehavior)("SplitMedia",{playVideo:function(e){e.target.play()},pauseVideo:function(e){e.target.pause()}},{init:function(){var e=this;this.$players=this.getChildren("player"),this.isTouchDevice="ontouchstart"in document.documentElement,this.$players&&this.$players.forEach((function(t){e.isTouchDevice?t.play():(t.addEventListener("mouseenter",e.playVideo,!1),t.addEventListener("mouseleave",e.pauseVideo,!1))}))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){var e=this;this.$players&&!this.isTouchDevice&&this.$players.forEach((function(t){t.removeEventListener("mouseenter",e.playVideo),t.removeEventListener("mouseleave",e.pauseVideo)}))}});const xm=Em;const Cm=(0,s.createBehavior)("TextExpander",{toggle:function(e){e.preventDefault(),this.isOpen=!this.isOpen,e.currentTarget.querySelector("span").innerText=this.isOpen?this.showLessText:this.showMoreText,this.isOpen?this.open():this.close()},open:function(){if(this.canExpand){var e=this.$contentInner.clientHeight;this.$content.style.height="".concat(e,"px"),this.$trigger.setAttribute("aria-expanded","true"),this.allParas[this.paraIndex].nextElementSibling.focus(),this.$triggerIcon.classList.add("rotate-45"),this.$node.dataset.textexpanderState="open"}},close:function(){if(this.canExpand){var e=this.stopPara.offsetTop+this.stopPara.clientHeight;this.$content.style.height="".concat(e,"px"),this.$trigger.setAttribute("aria-expanded","false"),this.$triggerIcon.classList.remove("rotate-45"),this.$node.dataset.textexpanderState="closed"}}},{init:function(){this.isOpen=!1,this.$trigger=this.getChild("trigger"),this.$triggerIcon=this.$trigger.querySelector("svg"),this.$content=this.getChild("content"),this.$contentInner=this.getChild("content-inner"),this.showParagraphs=parseInt(this.options["show-paragraphs"]),this.showMoreText=this.options["text-more"],this.showLessText=this.options["text-less"],this.allParas=this.$contentInner.querySelectorAll("p"),this.paraIndex=this.showParagraphs-1,this.stopPara=this.allParas[this.paraIndex],this.canExpand=this.allParas.length>this.showParagraphs&&this.allParas[this.paraIndex].nextElementSibling,this.canExpand?(this.$trigger.classList.remove("hidden"),this.$node.dataset.textexpanderState="closed",this.close(),this.$trigger.addEventListener("click",this.toggle,!1),this.$content.addEventListener("transitionend",(function(){document.dispatchEvent(new CustomEvent("TextExpander:update"))}))):this.$node.dataset.textexpanderState="open"},enabled:function(){},resized:function(){this.isOpen?this.open():this.close()},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$trigger.removeEventListener("click",this.toggle)}});const km=(0,s.createBehavior)("TextExpanderLines",{toggle:function(e){e.preventDefault(),this.isOpen=!this.isOpen,e.currentTarget.querySelector("span").innerText=this.isOpen?this.showLessText:this.showMoreText,this.isOpen?this.open():this.close()},open:function(){if(this.canExpand){var e=this.$contentInner.clientHeight;this.$content.style.height="".concat(e,"px"),this.$trigger.setAttribute("aria-expanded","true"),this.firstPara.focus(),this.$triggerIcon.classList.add("rotate-45"),this.$node.dataset.textexpanderlinesState="open"}},close:function(){this.canExpand&&(this.$content.style.height="".concat(this.closeHeight,"px"),this.$trigger.setAttribute("aria-expanded","false"),this.$triggerIcon.classList.remove("rotate-45"),this.$node.dataset.textexpanderlinesState="closed")}},{init:function(){this.isOpen=!1,this.$trigger=this.getChild("trigger"),this.$triggerIcon=this.$trigger.querySelector("svg"),this.$content=this.getChild("content"),this.$contentInner=this.getChild("content-inner"),this.showLines=parseInt(this.options["show-lines"]),this.showMoreText=this.options["text-more"],this.showLessText=this.options["text-less"],this.allParas=this.$contentInner.querySelectorAll("p"),this.firstPara=this.allParas[0],this.lineHeight=parseInt(getComputedStyle(this.firstPara).lineHeight),this.canExpand=this.$contentInner.clientHeight>this.lineHeight*this.showLines,this.closeHeight=this.lineHeight*parseInt(this.showLines),this.canExpand?(this.$trigger.classList.remove("hidden"),this.$node.dataset.textexpanderlinesState="closed",this.close(),this.$trigger.addEventListener("click",this.toggle,!1),this.$content.addEventListener("transitionend",(function(){document.dispatchEvent(new CustomEvent("TextExpanderLines:update"))}))):this.$node.dataset.textexpanderlinesState="open"},enabled:function(){},resized:function(){this.lineHeight=parseInt(getComputedStyle(this.firstPara).lineHeight),this.closeHeight=this.lineHeight*parseInt(this.showLines),this.isOpen?this.open():this.close()},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$trigger.removeEventListener("click",this.toggle)}});const Pm=(0,s.createBehavior)("TicketDateSelect",{selectDate:function(e){var t,i,n;(e.preventDefault(),console.log("Dispatch event triggered after selecting a date. Eventlistener used in TicketDateSelect.js. No action configured"),null!==(t=e.currentTarget)&&void 0!==t&&t.value)?(console.log("Handle date: ",null===(i=e.currentTarget)||void 0===i?void 0:i.value),this.redirectToDate(null===(n=e.currentTarget)||void 0===n?void 0:n.value)):null!=e&&e.detail&&(console.log("Handle Date: ",e.detail),this.redirectToDate(e.detail))},redirectToDate:function(e){var t=e.split("-");e="".concat(t[2],"-").concat(t[0],"-").concat(t[1]),e=new Date(e).toISOString().slice(0,10),this.$dateUrls&&Object.prototype.hasOwnProperty.call(this.$dateUrls,e)&&window.A17.pjax.loadPage({url:this.$dateUrls[e],customTransition:"ticket-select-date"})}},{init:function(){this.$today=this.getChild("today"),this.$tomorrow=this.getChild("tomorrow"),this.$dateUrls=JSON.parse(this.options.dateurls),this.$today&&this.$today.addEventListener("click",this.selectDate),this.$tomorrow&&this.$tomorrow.addEventListener("click",this.selectDate),window.addEventListener("newDateSelect",this.selectDate)},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){window.removeEventListener("newDateSelect",null)}});const Am=(0,s.createBehavior)("TicketSelectList",{updateSumAmount:function(e){var t,i=parseInt(e.detail);if(null!==(t=this.options)&&void 0!==t&&t.caption){var n=JSON.parse(this.options.caption);if(i&&0!==i?this.$button.removeAttribute("disabled"):(this.$button.innerText=n.zero,this.$button.setAttribute("disabled",!0)),1===i&&(this.$button.innerText=n.one),i>1){var r=n.more.replace(/{.*}/,i.toString());this.$button.innerText=r}}}},{init:function(){var e=this.options.buttonlabeltarget||null;e&&(this.$button=document.getElementById(e),window.addEventListener("ticketAmountUpdated",this.updateSumAmount))},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){window.removeEventListener("ticketAmountUpdated",null)}});const Im=(0,s.createBehavior)("TicketTimeSelect",{handleTimeSelect:function(e){null!=e&&e.detail&&window.A17.pjax.loadPage({url:e.detail,customTransition:"ticket-select-time"})}},{init:function(){window.addEventListener("ticketTimeSelected",this.handleTimeSelect,!1)},destroy:function(){window.removeEventListener("ticketTimeSelected",this.handleTimeSelect)}});var Lm=(0,s.createBehavior)("TimePicker",{updateToSelect:function(e){if(e.target.value){var t=new Date("July 21, 1983 ".concat(e.target.value)).getTime();this.removeToOptions(),this.addToOptions(t),this.enableSelect(this.$to)}},resetSelect:function(e){e.value=null,e.selectedIndex=0},disableSelect:function(e){e.classList.add("opacity-30"),e.classList.add("pointer-events-none")},enableSelect:function(e){e.classList.remove("opacity-30"),e.classList.remove("pointer-events-none")},removeToOptions:function(e){for(var t=this.$toSelect.querySelector("option:disabled");this.$toSelect.options.length>0;)this.$toSelect.remove(0);this.$toSelect.add(t),e&&this.resetSelect(this.$toSelect)},formatLabel:function(e){var t=e.getHours(),i=e.getMinutes(),n=t>=12?"PM":"AM";return t=t%12?t%12:12,i=i<10?"0".concat(i):i,"".concat(t,":").concat(i," ").concat(n)},formatValue:function(e){var t;return[String(e.getHours()),null===(t=String(e.getMinutes()))||void 0===t?void 0:t.padStart(2,"0")].join(":")},addToOptions:function(e,t){var i=this;this.originalToOptions.reduce((function(t,i){return e<i&&t.push(new Date(i)),t}),[]).forEach((function(e){var n=i.formatLabel(e),r=i.formatValue(e);i.$toSelect.add(new Option(n,r,null,t===r))}))},setDefaultTimes:function(e,t,i){t=t||30;for(var n=Math.floor(1440/t),r=0;r<n;r++){var o=new Date("July 21, 1983 00:00"),s=new Date(o.setMinutes(o.getMinutes()+r*t)),a=this.formatLabel(s),l=this.formatValue(s);e.add(new Option(a,l,!1,i===l))}}},{init:function(){if(this.$from=this.getChild("from"),this.$to=this.getChild("to"),this.$from||this.$to){var e;if(this.$fromSelect=this.$from.querySelector("select"),this.$fromSelect.options.length<=1)this.setDefaultTimes(this.$fromSelect,30,null===(e=this.options)||void 0===e?void 0:e.initialfromvalue);if(this.$to){var t;if(this.$toSelect=this.$to.querySelector("select"),this.$toSelect.options.length<=1)this.setDefaultTimes(this.$toSelect,30,null===(t=this.options)||void 0===t?void 0:t.initialtovalue);if(this.toOptions=this.$toSelect.querySelectorAll("option"),this.originalToOptions=Array.from(this.toOptions).map((function(e){return new Date("July 21, 1983 ".concat(e.value)).getTime()})),this.$fromSelect.value||(this.resetSelect(this.$toSelect),this.disableSelect(this.$to)),this.$fromSelect.value){var i,n=new Date("July 21, 1983 ".concat(this.$fromSelect.value)).getTime();this.removeToOptions(),this.addToOptions(n,null===(i=this.options)||void 0===i?void 0:i.initialtovalue)}this.$fromSelect.addEventListener("change",this.updateToSelect,!1)}}},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){this.$fromSelect.removeEventListener("change",this.updateToSelect)}});const Dm=Lm;const Om=(0,s.createBehavior)("TopLink",{handleScroll:function(){var e=window.scrollY;e<100?(this.scrollingToTop=!1,this.$node.classList.add("translate-y-full")):this.oldY!==e&&(this.oldY>e?this.$node.classList.remove("translate-y-full"):e>this.$node.clientHeight&&this.$node.classList.add("translate-y-full")),this.oldY=!0===this.scrollingToTop?-1:e,this.rAF=window.requestAnimationFrame(this.handleScroll)},pageTransitionStart:function(){window.cancelAnimationFrame(this.rAF),this.$node.classList.add("translate-y-full")},pageTransitionEnd:function(){this.oldY=-1,this.rAF=window.requestAnimationFrame(this.handleScroll)},handleClick:function(e){e.preventDefault(),this.scrollingToTop=!0,window.requestAnimationFrame((function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}))}},{init:function(){this.oldY=-1,this.rAF=window.requestAnimationFrame(this.handleScroll),this.scrollingToTop=!1,this.$btn=this.getChild("btn"),this.$node.classList.add("translate-y-full"),this.$btn.addEventListener("click",this.handleClick,!1),document.addEventListener("pjax:transitionStart",this.pageTransitionStart,!1),document.addEventListener("pjax:transitionEnd",this.pageTransitionEnd,!1)},destroy:function(){window.cancelAnimationFrame(this.rAF),this.rAF=null,this.$btn.removeEventListener("click",this.handleClick,!1),document.removeEventListener("pjax:transitionStart",this.pageTransitionStart,!1),document.removeEventListener("pjax:transitionEnd",this.pageTransitionEnd,!1)}});var Rm=n(9840),Mm=n.n(Rm),Nm=n(9697),Bm=n.n(Nm);function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Fm.apply(null,arguments)}var Um=n(6545),$m=n.n(Um);function Hm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jm(e,t){return jm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jm(e,t)}function zm(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,jm(e,t)}var qm=n(8865),Vm=n.n(qm),Wm=n(1036),Gm=n.n(Wm),Ym=n(4784),Xm=n.n(Ym);function Km(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Km=function(){return!!e})()}function Qm(e,t,i){if(Km())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var r=new(e.bind.apply(e,n));return i&&jm(r,i.prototype),r}var Zm=n(7842),Jm=n.n(Zm),ev="http://example.com";const tv=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Mm().location&&Mm().location.href||"");var i="function"==typeof Mm().URL,n=/^\/\//.test(e),r=!Mm().location&&!/\/\//i.test(e);if(i?e=new(Mm().URL)(e,Mm().location||ev):/\/\//i.test(e)||(e=Jm().buildAbsoluteURL(Mm().location&&Mm().location.href||"",e)),i){var o=new URL(t,e);return r?o.href.slice(18):n?o.href.slice(o.protocol.length):o.href}return Jm().buildAbsoluteURL(e,t)};var iv=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),o=t.length,s=0;s<o;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),nv=n(8287).hp;function rv(e){for(var t,i=(t=e,Mm().atob?Mm().atob(t):nv.from(t,"base64").toString("binary")),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}var ov,sv,av,lv=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return zm(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(iv),uv=String.fromCharCode(9),cv=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),i={};return t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),i},hv=function(e){for(var t,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((t=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},dv=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}zm(t,e);var i=t.prototype;return i.push=function(e){var t,i,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,i){var n=i(e);return n===e?t:t.concat([n])}),[e]).forEach((function(e){for(var r=0;r<n.customParsers.length;r++)if(n.customParsers[r].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void n.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void n.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void n.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return i=Fm(cv(t[1]),{type:"tag",tagType:"byterange"}),void n.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"map"},t[1]){var o=hv(t[1]);o.URI&&(i.uri=o.URI),o.BYTERANGE&&(i.byterange=cv(o.BYTERANGE))}n.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=hv(t[1]),i.attributes.RESOLUTION){var s=i.attributes.RESOLUTION.split("x"),a={};s[0]&&(a.width=parseInt(s[0],10)),s[1]&&(a.height=parseInt(s[1],10)),i.attributes.RESOLUTION=a}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}n.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=hv(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void n.trigger("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=hv(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void n.trigger("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=hv(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void n.trigger("data",i);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(i={type:"tag",tagType:"skip"}).attributes=hv(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(uv)),void n.trigger("data",i);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(i={type:"tag",tagType:"part"}).attributes=hv(t[1]),["DURATION"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=/YES/.test(i.attributes[e]))})),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=cv(i.attributes.BYTERANGE)),void n.trigger("data",i);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(i={type:"tag",tagType:"server-control"}).attributes=hv(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=/YES/.test(i.attributes[e]))})),void n.trigger("data",i);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(i={type:"tag",tagType:"part-inf"}).attributes=hv(t[1]),["PART-TARGET"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),void n.trigger("data",i);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(i={type:"tag",tagType:"preload-hint"}).attributes=hv(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(i.attributes.hasOwnProperty(e)){i.attributes[e]=parseInt(i.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[t]=i.attributes[e],delete i.attributes[e]}})),void n.trigger("data",i);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(i={type:"tag",tagType:"rendition-report"}).attributes=hv(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseInt(i.attributes[e],10))})),void n.trigger("data",i);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},i.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,o=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push((function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:o}),!0}))},i.addTagMapper=function(e){var t=e.expression,i=e.map;this.tagMappers.push((function(e){return t.test(e)?i(e):e}))},t}(iv),pv=function(e){var t={};return Object.keys(e).forEach((function(i){var n;t[(n=i,n.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()})))]=e[i]})),t},fv=function(e){var t=e.serverControl,i=e.targetDuration,n=e.partTargetDuration;if(t){var r="#EXT-X-SERVER-CONTROL",o="holdBack",s="partHoldBack",a=i&&3*i,l=n&&2*n;i&&!t.hasOwnProperty(o)&&(t[o]=a,this.trigger("info",{message:r+" defaulting HOLD-BACK to targetDuration * 3 ("+a+")."})),a&&t[o]<a&&(this.trigger("warn",{message:r+" clamping HOLD-BACK ("+t[o]+") to targetDuration * 3 ("+a+")"}),t[o]=a),n&&!t.hasOwnProperty(s)&&(t[s]=3*n,this.trigger("info",{message:r+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[s]+")."})),n&&t[s]<l&&(this.trigger("warn",{message:r+" clamping PART-HOLD-BACK ("+t[s]+") to partTargetDuration * 2 ("+l+")."}),t[s]=l)}},gv=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new lv,t.parseStream=new dv,t.lineStream.pipe(t.parseStream);var i,n,r=Hm(t),o=[],s={},a=!1,l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var h=0,d=0;return t.on("end",(function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&i&&(s.map=i),!s.key&&n&&(s.key=n),s.timeline||"number"!=typeof c||(s.timeline=c),t.manifest.preloadSegment=s)})),t.parseStream.on("data",(function(e){var t,p;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(e.offset=h)),"offset"in e&&(s.byterange=t,t.offset=e.offset),h=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:rv(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){i={},e.uri&&(i.uri=e.uri),e.byterange&&(i.byterange=e.byterange),n&&(i.key=n)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes?(s.attributes||(s.attributes={}),Fm(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var i=this.manifest.mediaGroups[e.attributes.TYPE];i[e.attributes["GROUP-ID"]]=i[e.attributes["GROUP-ID"]]||{},t=i[e.attributes["GROUP-ID"]],(p={default:/yes/i.test(e.attributes.DEFAULT)}).default?p.autoselect=!0:p.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(p.language=e.attributes.LANGUAGE),e.attributes.URI&&(p.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(p.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(p.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(p.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=p}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,fv.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data},skip:function(){this.manifest.skip=pv(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;a=!0;var i=this.manifest.segments.length,n=pv(e.attributes);s.parts=s.parts||[],s.parts.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=d),d=n.byterange.offset+n.byterange.length);var r=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+i,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,i){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+i+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var t=this.manifest.serverControl=pv(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),fv.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,i=pv(e.attributes),n=i.type&&"PART"===i.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=n?d:0,n&&(d=i.byterange.offset+i.byterange.length)));var r=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t,e.attributes,["TYPE","URI"]),i.type)for(var o=0;o<s.preloadHints.length-1;o++){var a=s.preloadHints[o];a.type&&(a.type===i.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t+" has the same TYPE "+i.type+" as preload hint #"+o}))}},"rendition-report":function(){var t=pv(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var i=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];a&&n.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+i,e.attributes,n)},"part-inf":function(){this.manifest.partInf=pv(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),fv.call(this,this.manifest)}}[e.tagType]||l).call(r)},uri:function(){s.uri=e.uri,o.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),n&&(s.key=n),s.timeline=c,i&&(s.map=i),d=0,s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}zm(t,e);var i=t.prototype;return i.warnOnMissingAttributes_=function(e,t,i){var n=[];i.forEach((function(e){t.hasOwnProperty(e)||n.push(e)})),n.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+n.join(", ")})},i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push("\n"),this.trigger("end")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(iv),mv={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},vv=["video","audio","text"],yv=["Video","Audio","Text"],bv=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})):e},_v=function(e){void 0===e&&(e="");var t=e.split(","),i=[];return t.forEach((function(e){var t;e=e.trim(),vv.forEach((function(n){var r=mv[n].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=n;var o=e.substring(0,r[1].length),s=e.replace(o,"");i.push({type:o,details:s,mediaType:n})}})),t||i.push({type:e,details:"",mediaType:"unknown"})})),i},wv=function(e){return void 0===e&&(e=""),mv.audio.test(e.trim().toLowerCase())},Tv=function(e){if(e&&"string"==typeof e){var t,i=e.toLowerCase().split(",").map((function(e){return bv(e.trim())})),n="video";1===i.length&&wv(i[0])?n="audio":1===i.length&&(void 0===(t=i[0])&&(t=""),mv.text.test(t.trim().toLowerCase()))&&(n="application");var r="mp4";return i.every((function(e){return mv.mp4.test(e)}))?r="mp4":i.every((function(e){return mv.webm.test(e)}))?r="webm":i.every((function(e){return mv.ogg.test(e)}))&&(r="ogg"),n+"/"+r+';codecs="'+e+'"'}},Sv=function(e){return void 0===e&&(e=""),Mm().MediaSource&&Mm().MediaSource.isTypeSupported&&Mm().MediaSource.isTypeSupported(Tv(e))||!1},Ev=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<yv.length;t++){if(mv["muxer"+yv[t]].test(e))return!0}return!1}))},xv="mp4a.40.2",Cv=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,kv=/^application\/dash\+xml/i,Pv=function(e){return Cv.test(e)?"hls":kv.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},Av=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Iv=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||Av(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Lv=Mm().BigInt||Number,Dv=[Lv("0x1"),Lv("0x100"),Lv("0x10000"),Lv("0x1000000"),Lv("0x100000000"),Lv("0x10000000000"),Lv("0x1000000000000"),Lv("0x100000000000000"),Lv("0x10000000000000000")],Ov=(ov=new Uint16Array([65484]),255===(sv=new Uint8Array(ov.buffer,ov.byteOffset,ov.byteLength))[0]||sv[0],function(e,t){var i=void 0===t?{}:t,n=i.signed,r=void 0!==n&&n,o=i.le,s=void 0!==o&&o;e=Iv(e);var a=s?"reduce":"reduceRight",l=(e[a]?e[a]:Array.prototype[a]).call(e,(function(t,i,n){var r=s?n:Math.abs(n+1-e.length);return t+Lv(i)*Dv[r]}),Lv(0));if(r){var u=Dv[e.length]/Lv(2)-Lv(1);(l=Lv(l))>u&&(l-=u,l-=u,l-=Lv(2))}return Number(l)}),Rv=function(e,t){var i=(void 0===t?{}:t).le,n=void 0!==i&&i;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0),e=Lv(e);for(var r,o=(r=e,Math.ceil(function(e){return e.toString(2).length}(r)/8)),s=new Uint8Array(new ArrayBuffer(o)),a=0;a<o;a++){var l=n?a:Math.abs(a+1-s.length);s[l]=Number(e/Dv[a]&Lv(255)),e<0&&(s[l]=Math.abs(~s[l]),s[l]-=0===a?1:2)}return s},Mv=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i},Nv=function(e,t,i){var n=void 0===i?{}:i,r=n.offset,o=void 0===r?0:r,s=n.mask,a=void 0===s?[]:s;e=Iv(e);var l=(t=Iv(t)).every?t.every:Array.prototype.every;return t.length&&e.length-o>=t.length&&l.call(t,(function(t,i){return t===(a[i]?a[i]&e[o+i]:e[o+i])}))},Bv=n(8978),Fv=function(e){return!!e&&"object"==typeof e},Uv=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.reduce((function(t,i){return"object"!=typeof i||Object.keys(i).forEach((function(n){Array.isArray(t[n])&&Array.isArray(i[n])?t[n]=t[n].concat(i[n]):Fv(t[n])&&Fv(i[n])?t[n]=e(t[n],i[n]):t[n]=i[n]})),t}),{})},$v=function(e){return Object.keys(e).map((function(t){return e[t]}))},Hv=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},jv=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},zv=function(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return i;return-1},qv="INVALID_NUMBER_OF_PERIOD",Vv="DASH_EMPTY_MANIFEST",Wv="DASH_INVALID_XML",Gv="NO_BASE_URL",Yv="SEGMENT_TIME_UNSPECIFIED",Xv="UNSUPPORTED_UTC_TIMING_SCHEME",Kv=function(e){var t=e.baseUrl,i=void 0===t?"":t,n=e.source,r=void 0===n?"":n,o=e.range,s=void 0===o?"":o,a=e.indexRange,l=void 0===a?"":a,u={uri:r,resolvedUri:tv(i||"",r)};if(s||l){var c,h=(s||l).split("-"),d=Mm().BigInt?Mm().BigInt(h[0]):parseInt(h[0],10),p=Mm().BigInt?Mm().BigInt(h[1]):parseInt(h[1],10);d<Number.MAX_SAFE_INTEGER&&"bigint"==typeof d&&(d=Number(d)),p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),"bigint"==typeof(c="bigint"==typeof p||"bigint"==typeof d?Mm().BigInt(p)-Mm().BigInt(d)+Mm().BigInt(1):p-d+1)&&c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),u.byterange={length:c,offset:d}}return u},Qv=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},Zv={static:function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,r=e.sourceDuration,o=e.periodDuration,s=Qv(e.endNumber),a=t/n;return"number"==typeof s?{start:0,end:s}:"number"==typeof o?{start:0,end:o/a}:{start:0,end:r/a}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,o=void 0===r?1:r,s=e.duration,a=e.periodStart,l=void 0===a?0:a,u=e.minimumUpdatePeriod,c=void 0===u?0:u,h=e.timeShiftBufferDepth,d=void 0===h?1/0:h,p=Qv(e.endNumber),f=(t+i)/1e3,g=n+l,m=f+c-g,v=Math.ceil(m*o/s),y=Math.floor((f-g-d)*o/s),b=Math.floor((f-g)*o/s);return{start:Math.max(0,y),end:"number"==typeof p?p:Math.min(v,b)}}},Jv=function(e){var t=e.type,i=e.duration,n=e.timescale,r=void 0===n?1:n,o=e.periodDuration,s=e.sourceDuration,a=Zv[t](e),l=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}(a.start,a.end).map(function(e){return function(t){var i=e.duration,n=e.timescale,r=void 0===n?1:n,o=e.periodStart,s=e.startNumber;return{number:(void 0===s?1:s)+t,duration:i/r,timeline:o,time:t*i}}}(e));if("static"===t){var u=l.length-1,c="number"==typeof o?o:s;l[u].duration=c-i/r*u}return l},ey=function(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,r=e.sourceDuration,o=e.indexRange,s=void 0===o?"":o,a=e.periodStart,l=e.presentationTime,u=e.number,c=void 0===u?0:u,h=e.duration;if(!t)throw new Error(Gv);var d=Kv({baseUrl:t,source:n.sourceURL,range:n.range}),p=Kv({baseUrl:t,source:t,indexRange:s});if(p.map=d,h){var f=Jv(e);f.length&&(p.duration=f[0].duration,p.timeline=f[0].timeline)}else r&&(p.duration=r,p.timeline=a);return p.presentationTime=l||a,p.number=c,[p]},ty=function(e,t,i){var n,r=e.sidx.map?e.sidx.map:null,o=e.sidx.duration,s=e.timeline||0,a=e.sidx.byterange,l=a.offset+a.length,u=t.timescale,c=t.references.filter((function(e){return 1!==e.referenceType})),h=[],d=e.endList?"static":"dynamic",p=e.sidx.timeline,f=p,g=e.mediaSequence||0;n="bigint"==typeof t.firstOffset?Mm().BigInt(l)+t.firstOffset:l+t.firstOffset;for(var m=0;m<c.length;m++){var v=t.references[m],y=v.referencedSize,b=v.subsegmentDuration,_=void 0;_="bigint"==typeof n?n+Mm().BigInt(y)-Mm().BigInt(1):n+y-1;var w=ey({baseUrl:i,timescale:u,timeline:s,periodStart:p,presentationTime:f,number:g,duration:b,sourceDuration:o,indexRange:n+"-"+_,type:d})[0];r&&(w.map=r),h.push(w),n+="bigint"==typeof n?Mm().BigInt(y):y,f+=b/u,g++}return e.segments=h,e},iy=["AUDIO","SUBTITLES"],ny=1/60,ry=function(e){return(t=e,i=function(e){return e.timeline},$v(t.reduce((function(e,t){return t.forEach((function(t){e[i(t)]=t})),e}),{}))).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t,i},oy=function(e){var t,i,n=[];return t=e,i=function(e,t,i,r){n=n.concat(e.playlists||[])},iy.forEach((function(e){for(var n in t.mediaGroups[e])for(var r in t.mediaGroups[e][n]){var o=t.mediaGroups[e][n][r];i(o,e,n,r)}})),n},sy=function(e){var t=e.playlist,i=e.mediaSequence;t.mediaSequence=i,t.segments.forEach((function(e,i){e.number=t.mediaSequence+i}))},ay=function(e){var t=e.oldManifest,i=e.newManifest,n=t.playlists.concat(oy(t)),r=i.playlists.concat(oy(i));return i.timelineStarts=ry([t.timelineStarts,i.timelineStarts]),function(e){var t=e.oldPlaylists,i=e.newPlaylists,n=e.timelineStarts;i.forEach((function(e){e.discontinuitySequence=zv(n,(function(t){return t.timeline===e.timeline}));var i=function(e,t){for(var i=0;i<e.length;i++)if(e[i].attributes.NAME===t)return e[i];return null}(t,e.attributes.NAME);if(i&&!e.sidx){var r=e.segments[0],o=zv(i.segments,(function(e){return Math.abs(e.presentationTime-r.presentationTime)<ny}));if(-1===o)return sy({playlist:e,mediaSequence:i.mediaSequence+i.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!i.segments.length&&e.timeline>i.timeline||i.segments.length&&e.timeline>i.segments[i.segments.length-1].timeline)&&e.discontinuitySequence--);i.segments[o].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),sy({playlist:e,mediaSequence:i.segments[o].number})}}))}({oldPlaylists:n,newPlaylists:r,timelineStarts:i.timelineStarts}),i},ly=function(e){return e&&e.uri+"-"+(t=e.byterange,i="bigint"==typeof t.offset||"bigint"==typeof t.length?Mm().BigInt(t.offset)+Mm().BigInt(t.length)-Mm().BigInt(1):t.offset+t.length-1,t.offset+"-"+i);var t,i},uy=function(e){return $v(e.reduce((function(e,t){var i=t.attributes.id+(t.attributes.lang||"");if(e[i]){var n;if(t.segments)t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[i].segments).push.apply(n,t.segments);t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)}else e[i]=t,e[i].attributes.timelineStarts=[];return e[i].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((function(e){var t,i;return e.discontinuityStarts=(t=e.segments||[],i="discontinuity",t.reduce((function(e,t,n){return t[i]&&e.push(n),e}),[])),e}))},cy=function(e,t){var i=ly(e.sidx),n=i&&t[i]&&t[i].sidx;return n&&ty(e,n,e.sidx.resolvedUri),e},hy=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var i in e)e[i]=cy(e[i],t);return e},dy=function(e){var t,i=e.attributes,n=e.segments,r=e.sidx,o=e.discontinuityStarts,s={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuityStarts:o,timelineStarts:i.timelineStarts,segments:n};return i.frameRate&&(s.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(s.contentProtection=i.contentProtection),r&&(s.sidx=r),s},py=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},fy=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},gy=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},my=function(e){return e?Object.keys(e).reduce((function(t,i){var n=e[i];return t.concat(n.playlists)}),[]):[]},vy=function(e){var t,i=e.dashPlaylists,n=e.locations,r=e.sidxMapping,o=void 0===r?{}:r,s=e.previousManifest;if(!i.length)return{};var a=i[0].attributes,l=a.sourceDuration,u=a.type,c=a.suggestedPresentationDelay,h=a.minimumUpdatePeriod,d=uy(i.filter(py)).map(dy),p=uy(i.filter(fy)),f=uy(i.filter(gy)),g=i.map((function(e){return e.attributes.captionServices})).filter(Boolean),m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:l,playlists:hy(d,o)};h>=0&&(m.minimumUpdatePeriod=1e3*h),n&&(m.locations=n),"dynamic"===u&&(m.suggestedPresentationDelay=c);var v,y,b=0===m.playlists.length,_=p.length?function(e,t,i){var n;void 0===t&&(t={}),void 0===i&&(i=!1);var r=e.reduce((function(e,r){var o=r.attributes.role&&r.attributes.role.value||"",s=r.attributes.lang||"",a=r.attributes.label||"main";if(s&&!r.attributes.label){var l=o?" ("+o+")":"";a=""+r.attributes.lang+l}e[a]||(e[a]={language:s,autoselect:!0,default:"main"===o,playlists:[],uri:""});var u=cy(function(e,t){var i,n=e.attributes,r=e.segments,o=e.sidx,s=e.mediaSequence,a=e.discontinuitySequence,l=e.discontinuityStarts,u={attributes:(i={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuitySequence:a,discontinuityStarts:l,timelineStarts:n.timelineStarts,mediaSequence:s,segments:r};return n.contentProtection&&(u.contentProtection=n.contentProtection),o&&(u.sidx=o),t&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs"),u}(r,i),t);return e[a].playlists.push(u),void 0===n&&"main"===o&&((n=r).default=!0),e}),{});return n||(r[Object.keys(r)[0]].default=!0),r}(p,o,b):null,w=f.length?function(e,t){return void 0===t&&(t={}),e.reduce((function(e,i){var n=i.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),e[n].playlists.push(cy(function(e){var t,i=e.attributes,n=e.segments,r=e.mediaSequence,o=e.discontinuityStarts,s=e.discontinuitySequence;void 0===n&&(n=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var a=((t={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,t);return i.codecs&&(a.CODECS=i.codecs),{attributes:a,uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:o,discontinuitySequence:s,mediaSequence:r,segments:n}}(i),t)),e}),{})}(f,o):null,T=d.concat(my(_),my(w)),S=T.map((function(e){return e.timelineStarts}));return m.timelineStarts=ry(S),v=T,y=m.timelineStarts,v.forEach((function(e){e.mediaSequence=0,e.discontinuitySequence=zv(y,(function(t){return t.timeline===e.timeline})),e.segments&&e.segments.forEach((function(e,t){e.number=t}))})),_&&(m.mediaGroups.AUDIO.audio=_),w&&(m.mediaGroups.SUBTITLES.subs=w),g.length&&(m.mediaGroups["CLOSED-CAPTIONS"].cc=g.reduce((function(e,t){return t?(t.forEach((function(t){var i=t.channel,n=t.language;e[n]={autoselect:!1,default:!1,instreamId:i,language:n},t.hasOwnProperty("aspectRatio")&&(e[n].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[n].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[n]["3D"]=t["3D"])})),e):e}),{})),s?ay({oldManifest:s,newManifest:m}):m},yy=function(e,t,i){var n=e.NOW,r=e.clientOffset,o=e.availabilityStartTime,s=e.timescale,a=void 0===s?1:s,l=e.periodStart,u=void 0===l?0:l,c=e.minimumUpdatePeriod,h=(n+r)/1e3+(void 0===c?0:c)-(o+u);return Math.ceil((h*a-t)/i)},by=function(e,t){for(var i=e.type,n=e.minimumUpdatePeriod,r=void 0===n?0:n,o=e.media,s=void 0===o?"":o,a=e.sourceDuration,l=e.timescale,u=void 0===l?1:l,c=e.startNumber,h=void 0===c?1:c,d=e.periodStart,p=[],f=-1,g=0;g<t.length;g++){var m=t[g],v=m.d,y=m.r||0,b=m.t||0;f<0&&(f=b),b&&b>f&&(f=b);var _=void 0;if(y<0){var w=g+1;_=w===t.length?"dynamic"===i&&r>0&&s.indexOf("$Number$")>0?yy(e,f,v):(a*u-f)/v:(t[w].t-f)/v}else _=y+1;for(var T=h+p.length+_,S=h+p.length;S<T;)p.push({number:S,duration:v/u,time:f,timeline:d}),f+=v,S++}return p},_y=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,wy=function(e,t){return e.replace(_y,function(e){return function(t,i,n,r){if("$$"===t)return"$";if(void 0===e[i])return t;var o=""+e[i];return"RepresentationID"===i?o:(r=n?parseInt(r,10):1,o.length>=r?o:""+new Array(r-o.length+1).join("0")+o)}}(t))},Ty=function(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,r=void 0===n?{sourceURL:"",range:""}:n,o=Kv({baseUrl:e.baseUrl,source:wy(r.sourceURL,i),range:r.range}),s=function(e,t){return e.duration||t?e.duration?Jv(e):by(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]}(e,t);return s.map((function(t){i.Number=t.number,i.Time=t.time;var n=wy(e.media||"",i),r=e.timescale||1,s=e.presentationTimeOffset||0,a=e.periodStart+(t.time-s)/r;return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:tv(e.baseUrl||"",n),map:o,number:t.number,presentationTime:a}}))},Sy=function(e,t){var i=e.duration,n=e.segmentUrls,r=void 0===n?[]:n,o=e.periodStart;if(!i&&!t||i&&t)throw new Error(Yv);var s,a=r.map((function(t){return function(e,t){var i=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,o=Kv({baseUrl:i,source:r.sourceURL,range:r.range}),s=Kv({baseUrl:i,source:t.media,range:t.mediaRange});return s.map=o,s}(e,t)}));return i&&(s=Jv(e)),t&&(s=by(e,t)),s.map((function(t,i){if(a[i]){var n=a[i],r=e.timescale||1,s=e.presentationTimeOffset||0;return n.timeline=t.timeline,n.duration=t.duration,n.number=t.number,n.presentationTime=o+(t.time-s)/r,n}})).filter((function(e){return e}))},Ey=function(e){var t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=Ty,t=Uv(n,r.template)):r.base?(i=ey,t=Uv(n,r.base)):r.list&&(i=Sy,t=Uv(n,r.list));var o={attributes:n};if(!i)return o;var s=i(t,r.segmentTimeline);if(t.duration){var a=t,l=a.duration,u=a.timescale,c=void 0===u?1:u;t.duration=l/c}else s.length?t.duration=s.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return o.attributes=t,o.segments=s,r.base&&t.indexRange&&(o.sidx=s[0],o.segments=[]),o},xy=function(e,t){return jv(e.childNodes).filter((function(e){return e.tagName===t}))},Cy=function(e){return e.textContent.trim()},ky=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),n=i[0],r=i[1],o=i[2],s=i[3],a=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(o||0)+3600*parseFloat(s||0)+60*parseFloat(a||0)+parseFloat(l||0)},Py={mediaPresentationDuration:function(e){return ky(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return ky(e)},suggestedPresentationDelay:function(e){return ky(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return ky(e)},start:function(e){return ky(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return function(e){return parseFloat(e.split("/").reduce((function(e,t){return e/t})))}(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?ky(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Ay=function(e){return e&&e.attributes?jv(e.attributes).reduce((function(e,t){var i=Py[t.name]||Py.DEFAULT;return e[t.name]=i(t.value),e}),{}):{}},Iy={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ly=function(e,t){return t.length?Hv(e.map((function(e){return t.map((function(t){return tv(e,Cy(t))}))}))):e},Dy=function(e){var t=xy(e,"SegmentTemplate")[0],i=xy(e,"SegmentList")[0],n=i&&xy(i,"SegmentURL").map((function(e){return Uv({tag:"SegmentURL"},Ay(e))})),r=xy(e,"SegmentBase")[0],o=i||t,s=o&&xy(o,"SegmentTimeline")[0],a=i||r||t,l=a&&xy(a,"Initialization")[0],u=t&&Ay(t);u&&l?u.initialization=l&&Ay(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,segmentTimeline:s&&xy(s,"S").map((function(e){return Ay(e)})),list:i&&Uv(Ay(i),{segmentUrls:n,initialization:Ay(l)}),base:r&&Uv(Ay(r),{initialization:Ay(l)})};return Object.keys(c).forEach((function(e){c[e]||delete c[e]})),c},Oy=function(e,t,i){return function(n){var r,o=Ay(n),s=Ly(t,xy(n,"BaseURL")),a=xy(n,"Role")[0],l={role:Ay(a)},u=Uv(e,o,l),c=xy(n,"Accessibility")[0],h="urn:scte:dash:cc:cea-608:2015"===(r=Ay(c)).schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(e){var t,i;if(i=e,/^CC\d=/.test(e)){var n=e.split("=");t=n[0],i=n[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:i}})):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var i=e.split("="),n=i[0],r=i[1],o=void 0===r?"":r;t.channel=n,t.language=e,o.split(",").forEach((function(e){var i=e.split(":"),n=i[0],r=i[1];"lang"===n?t.language=r:"er"===n?t.easyReader=Number(r):"war"===n?t.aspectRatio=Number(r):"3D"===n&&(t["3D"]=Number(r))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;h&&(u=Uv(u,{captionServices:h}));var d=xy(n,"Label")[0];if(d&&d.childNodes.length){var p=d.childNodes[0].nodeValue.trim();u=Uv(u,{label:p})}var f=xy(n,"ContentProtection").reduce((function(e,t){var i=Ay(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var n=Iy[i.schemeIdUri];if(n){e[n]={attributes:i};var r=xy(t,"cenc:pssh")[0];if(r){var o=Cy(r);e[n].pssh=o&&rv(o)}}return e}),{});Object.keys(f).length&&(u=Uv(u,{contentProtection:f}));var g=Dy(n),m=xy(n,"Representation"),v=Uv(i,g);return Hv(m.map(function(e,t,i){return function(n){var r=xy(n,"BaseURL"),o=Ly(t,r),s=Uv(e,Ay(n)),a=Dy(n);return o.map((function(e){return{segmentInfo:Uv(i,a),attributes:Uv(s,{baseUrl:e})}}))}}(u,s,v)))}},Ry=function(e,t){return function(i,n){var r=Ly(t,xy(i.node,"BaseURL")),o=Uv(e,{periodStart:i.attributes.start});"number"==typeof i.attributes.duration&&(o.periodDuration=i.attributes.duration);var s=xy(i.node,"AdaptationSet"),a=Dy(i.node);return Hv(s.map(Oy(o,r,a)))}},My=function(e){if(""===e)throw new Error(Vv);var t,i,n=new Bv.DOMParser;try{i=(t=n.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Wv);return i},Ny=function(e,t){void 0===t&&(t={});var i=function(e,t){void 0===t&&(t={});var i=t,n=i.manifestUri,r=void 0===n?"":n,o=i.NOW,s=void 0===o?Date.now():o,a=i.clientOffset,l=void 0===a?0:a,u=xy(e,"Period");if(!u.length)throw new Error(qv);var c=xy(e,"Location"),h=Ay(e),d=Ly([r],xy(e,"BaseURL"));h.type=h.type||"static",h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=s,h.clientOffset=l,c.length&&(h.locations=c.map(Cy));var p=[];return u.forEach((function(e,t){var i=Ay(e),n=p[t-1];i.start=function(e){var t=e.attributes,i=e.priorPeriodAttributes,n=e.mpdType;return"number"==typeof t.start?t.start:i&&"number"==typeof i.start&&"number"==typeof i.duration?i.start+i.duration:i||"static"!==n?null:0}({attributes:i,priorPeriodAttributes:n?n.attributes:null,mpdType:h.type}),p.push({node:e,attributes:i})})),{locations:h.locations,representationInfo:Hv(p.map(Ry(h,d)))}}(My(e),t),n=i.representationInfo.map(Ey);return vy({dashPlaylists:n,locations:i.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},By=function(e){return function(e){var t=xy(e,"UTCTiming")[0];if(!t)return null;var i=Ay(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;default:throw new Error(Xv)}return i}(My(e))},Fy=n(8962),Uy=n.n(Fy),$y=Iv([73,68,51]),Hy=function e(t,i){return void 0===i&&(i=0),(t=Iv(t)).length-i<10||!Nv(t,$y,{offset:i})?i:(i+=function(e,t){void 0===t&&(t=0);var i=(e=Iv(e))[t+5],n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&i)>>4?n+20:n+10}(t,i),e(t,i))},jy=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?Mv(e):e}),zy=function(e){e=Iv(e);for(var t=[],i=0;e.length>i;){var n=e[i],r=0,o=0,s=e[++o];for(o++;128&s;)r=(127&s)<<7,s=e[o],o++;r+=127&s;for(var a=0;a<av.length;a++){var l=av[a],u=l.id,c=l.parser;if(n===u){t.push(c(e.subarray(o,o+r)));break}}i+=r+o}return t};av=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var i=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Iv(e));try{return decodeURIComponent(escape(t))}catch(e){}return t}(e.subarray(t.size+1,t.size+1+i)),t.size+=i}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=zy(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:zy(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var qy=function e(t,i,n){void 0===n&&(n=!1),i=function(e){return Array.isArray(e)?e.map((function(e){return jy(e)})):[jy(e)]}(i),t=Iv(t);var r=[];if(!i.length)return r;for(var o=0;o<t.length;){var s=(t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3])>>>0,a=t.subarray(o+4,o+8);if(0===s)break;var l=o+s;if(l>t.length){if(n)break;l=t.length}var u=t.subarray(o+8,l);Nv(a,i[0])&&(1===i.length?r.push(u):r.push.apply(r,e(u,i.slice(1),n))),o=l}return r},Vy={EBML:Iv([26,69,223,163]),DocType:Iv([66,130]),Segment:Iv([24,83,128,103]),SegmentInfo:Iv([21,73,169,102]),Tracks:Iv([22,84,174,107]),Track:Iv([174]),TrackNumber:Iv([215]),DefaultDuration:Iv([35,227,131]),TrackEntry:Iv([174]),TrackType:Iv([131]),FlagDefault:Iv([136]),CodecID:Iv([134]),CodecPrivate:Iv([99,162]),VideoTrack:Iv([224]),AudioTrack:Iv([225]),Cluster:Iv([31,67,182,117]),Timestamp:Iv([231]),TimestampScale:Iv([42,215,177]),BlockGroup:Iv([160]),BlockDuration:Iv([155]),Block:Iv([161]),SimpleBlock:Iv([163])},Wy=[128,64,32,16,8,4,2,1],Gy=function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r=function(e){for(var t=1,i=0;i<Wy.length&&!(e&Wy[i]);i++)t++;return t}(e[t]),o=e.subarray(t,t+r);return i&&((o=Array.prototype.slice.call(e,t,t+r))[0]^=Wy[r-1]),{length:r,value:Ov(o,{signed:n}),bytes:o}},Yy=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"==typeof t?Rv(t):t},Xy=function e(t,i,n){if(n>=i.length)return i.length;var r=Gy(i,n,!1);if(Nv(t.bytes,r.bytes))return n;var o=Gy(i,n+r.length);return e(t,i,n+o.length+o.value+r.length)},Ky=function e(t,i){i=function(e){return Array.isArray(e)?e.map((function(e){return Yy(e)})):[Yy(e)]}(i),t=Iv(t);var n=[];if(!i.length)return n;for(var r=0;r<t.length;){var o=Gy(t,r,!1),s=Gy(t,r+o.length),a=r+o.length+s.length;127===s.value&&(s.value=Xy(o,t,a),s.value!==t.length&&(s.value-=a));var l=a+s.value>t.length?t.length:a+s.value,u=t.subarray(a,l);Nv(i[0],o.bytes)&&(1===i.length?n.push(u):n=n.concat(e(u,i.slice(1)))),r+=o.length+s.length+u.length}return n},Qy=Iv([0,0,0,1]),Zy=Iv([0,0,1]),Jy=Iv([0,0,3]),eb=function(e){for(var t=[],i=1;i<e.length-2;)Nv(e.subarray(i,i+3),Jy)&&(t.push(i+2),i++),i++;if(0===t.length)return e;var n=e.length-t.length,r=new Uint8Array(n),o=0;for(i=0;i<n;o++,i++)o===t[0]&&(o++,t.shift()),r[i]=e[o];return r},tb=function(e,t,i,n){void 0===n&&(n=1/0),e=Iv(e),i=[].concat(i);for(var r,o=0,s=0;o<e.length&&(s<n||r);){var a=void 0;if(Nv(e.subarray(o),Qy)?a=4:Nv(e.subarray(o),Zy)&&(a=3),a){if(s++,r)return eb(e.subarray(r,o));var l=void 0;"h264"===t?l=31&e[o+a]:"h265"===t&&(l=e[o+a]>>1&63),-1!==i.indexOf(l)&&(r=o+a),o+=a+("h264"===t?1:2)}else o++}return e.subarray(0,0)},ib={webm:Iv([119,101,98,109]),matroska:Iv([109,97,116,114,111,115,107,97]),flac:Iv([102,76,97,67]),ogg:Iv([79,103,103,83]),ac3:Iv([11,119]),riff:Iv([82,73,70,70]),avi:Iv([65,86,73]),wav:Iv([87,65,86,69]),"3gp":Iv([102,116,121,112,51,103]),mp4:Iv([102,116,121,112]),fmp4:Iv([115,116,121,112]),mov:Iv([102,116,121,112,113,116]),moov:Iv([109,111,111,118]),moof:Iv([109,111,111,102])},nb={aac:function(e){var t=Hy(e);return Nv(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Hy(e);return Nv(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Ky(e,[Vy.EBML,Vy.DocType])[0];return Nv(t,ib.webm)},mkv:function(e){var t=Ky(e,[Vy.EBML,Vy.DocType])[0];return Nv(t,ib.matroska)},mp4:function(e){return!nb["3gp"](e)&&!nb.mov(e)&&(!(!Nv(e,ib.mp4,{offset:4})&&!Nv(e,ib.fmp4,{offset:4}))||(!(!Nv(e,ib.moof,{offset:4})&&!Nv(e,ib.moov,{offset:4}))||void 0))},mov:function(e){return Nv(e,ib.mov,{offset:4})},"3gp":function(e){return Nv(e,ib["3gp"],{offset:4})},ac3:function(e){var t=Hy(e);return Nv(e,ib.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=Hy(e);return Nv(e,ib.flac,{offset:t})},ogg:function(e){return Nv(e,ib.ogg)},avi:function(e){return Nv(e,ib.riff)&&Nv(e,ib.avi,{offset:8})},wav:function(e){return Nv(e,ib.riff)&&Nv(e,ib.wav,{offset:8})},h264:function(e){return function(e,t,i){return tb(e,"h264",t,i)}(e,7,3).length},h265:function(e){return function(e,t,i){return tb(e,"h265",t,i)}(e,[32,33],3).length}},rb=Object.keys(nb).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);rb.forEach((function(e){var t=nb[e];nb[e]=function(e){return t(Iv(e))}}));var ob=nb,sb=function(e){e=Iv(e);for(var t=0;t<rb.length;t++){var i=rb[t];if(ob[i](e))return i}return""},ab=n(9622);function lb(e){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lb(e)}function ub(e){var t="function"==typeof Map?new Map:void 0;return ub=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Qm(e,arguments,lb(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),jm(i,e)},ub(e)}for(var cb,hb="7.21.7",db={},pb=function(e,t){return db[e]=db[e]||[],t&&(db[e]=db[e].concat(t)),db[e]},fb=function(e,t){var i=pb(e).indexOf(t);return!(i<=-1)&&(db[e]=db[e].slice(),db[e].splice(i,1),!0)},gb={prefixed:!0},mb=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],vb=mb[0],yb=0;yb<mb.length;yb++)if(mb[yb][1]in Bm()){cb=mb[yb];break}if(cb){for(var bb=0;bb<cb.length;bb++)gb[vb[bb]]=cb[bb];gb.prefixed=cb[0]!==vb[0]}var _b=[];var wb=function e(t){var i,n="info",r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i("log",n,t)};return i=function(e,t){return function(i,n,r){var o=t.levels[n],s=new RegExp("^("+o+")$");if("log"!==i&&r.unshift(i.toUpperCase()+":"),r.unshift(e+":"),_b){_b.push([].concat(r));var a=_b.length-1e3;_b.splice(0,a>0?a:0)}if(Mm().console){var l=Mm().console[i];l||"debug"!==i||(l=Mm().console.info||Mm().console.log),l&&o&&s.test(i)&&l[Array.isArray(r)?"apply":"call"](Mm().console,r)}}}(t,r),r.createLogger=function(i){return e(t+": "+i)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},r.level=function(e){if("string"==typeof e){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');n=e}return n},(r.history=function(){return _b?[].concat(_b):[]}).filter=function(e){return(_b||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},r.history.clear=function(){_b&&(_b.length=0)},r.history.disable=function(){null!==_b&&(_b.length=0,_b=null)},r.history.enable=function(){null===_b&&(_b=[])},r.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("error",n,t)},r.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("warn",n,t)},r.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("debug",n,t)},r}("VIDEOJS"),Tb=wb.createLogger,Sb=Object.prototype.toString,Eb=function(e){return kb(e)?Object.keys(e):[]};function xb(e,t){Eb(e).forEach((function(i){return t(e[i],i)}))}function Cb(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Object.assign?Fm.apply(void 0,[e].concat(i)):(i.forEach((function(t){t&&xb(t,(function(t,i){e[i]=t}))})),e)}function kb(e){return!!e&&"object"==typeof e}function Pb(e){return kb(e)&&"[object Object]"===Sb.call(e)&&e.constructor===Object}function Ab(e,t){if(!e||!t)return"";if("function"==typeof Mm().getComputedStyle){var i;try{i=Mm().getComputedStyle(e)}catch(e){return""}return i?i.getPropertyValue(t)||i[t]:""}return""}var Ib,Lb=Mm().navigator&&Mm().navigator.userAgent||"",Db=/AppleWebKit\/([\d.]+)/i.exec(Lb),Ob=Db?parseFloat(Db.pop()):null,Rb=/iPod/i.test(Lb),Mb=(Ib=Lb.match(/OS (\d+)_/i))&&Ib[1]?Ib[1]:null,Nb=/Android/i.test(Lb),Bb=function(){var e=Lb.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),Fb=Nb&&Bb<5&&Ob<537,Ub=/Firefox/i.test(Lb),$b=/Edg/i.test(Lb),Hb=!$b&&(/Chrome/i.test(Lb)||/CriOS/i.test(Lb)),jb=function(){var e=Lb.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),zb=function(){var e=/MSIE\s(\d+)\.\d/.exec(Lb),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Lb)&&/rv:11.0/.test(Lb)&&(t=11),t}(),qb=/Safari/i.test(Lb)&&!Hb&&!Nb&&!$b,Vb=/Windows/i.test(Lb),Wb=Boolean(e_()&&("ontouchstart"in Mm()||Mm().navigator.maxTouchPoints||Mm().DocumentTouch&&Mm().document instanceof Mm().DocumentTouch)),Gb=/iPad/i.test(Lb)||qb&&Wb&&!/iPhone/i.test(Lb),Yb=/iPhone/i.test(Lb)&&!Gb,Xb=Yb||Gb||Rb,Kb=(qb||Xb)&&!Hb,Qb=Object.freeze({__proto__:null,IS_IPOD:Rb,IOS_VERSION:Mb,IS_ANDROID:Nb,ANDROID_VERSION:Bb,IS_NATIVE_ANDROID:Fb,IS_FIREFOX:Ub,IS_EDGE:$b,IS_CHROME:Hb,CHROME_VERSION:jb,IE_VERSION:zb,IS_SAFARI:qb,IS_WINDOWS:Vb,TOUCH_ENABLED:Wb,IS_IPAD:Gb,IS_IPHONE:Yb,IS_IOS:Xb,IS_ANY_SAFARI:Kb});function Zb(e){return"string"==typeof e&&Boolean(e.trim())}function Jb(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function e_(){return Bm()===Mm().document}function t_(e){return kb(e)&&1===e.nodeType}function i_(){try{return Mm().parent!==Mm().self}catch(e){return!0}}function n_(e){return function(t,i){if(!Zb(t))return Bm()[e](null);Zb(i)&&(i=Bm().querySelector(i));var n=t_(i)?i:Bm();return n[e]&&n[e](t)}}function r_(e,t,i,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===i&&(i={});var r=Bm().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var i=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(wb.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+i+"."),r.setAttribute(e,i)):"textContent"===e?o_(r,i):r[e]===i&&"tabIndex"!==e||(r[e]=i)})),Object.getOwnPropertyNames(i).forEach((function(e){r.setAttribute(e,i[e])})),n&&E_(r,n),r}function o_(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function s_(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function a_(e,t){return Jb(t),e.classList?e.classList.contains(t):(i=t,new RegExp("(^|\\s)"+i+"($|\\s)")).test(e.className);var i}function l_(e,t){return e.classList?e.classList.add(t):a_(e,t)||(e.className=(e.className+" "+t).trim()),e}function u_(e,t){return e?(e.classList?e.classList.remove(t):(Jb(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e):(wb.warn("removeClass was called with an element that doesn't exist"),null)}function c_(e,t,i){var n=a_(e,t);if("function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!n),i!==n)return i?l_(e,t):u_(e,t),e}function h_(e,t){Object.getOwnPropertyNames(t).forEach((function(i){var n=t[i];null==n||!1===n?e.removeAttribute(i):e.setAttribute(i,!0===n?"":n)}))}function d_(e){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var o=n[r].name,s=n[r].value;"boolean"!=typeof e[o]&&-1===i.indexOf(","+o+",")||(s=null!==s),t[o]=s}return t}function p_(e,t){return e.getAttribute(t)}function f_(e,t,i){e.setAttribute(t,i)}function g_(e,t){e.removeAttribute(t)}function m_(){Bm().body.focus(),Bm().onselectstart=function(){return!1}}function v_(){Bm().onselectstart=function(){return!0}}function y_(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(i[e]=t[e])})),i.height||(i.height=parseFloat(Ab(e,"height"))),i.width||(i.width=parseFloat(Ab(e,"width"))),i}}function b_(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,i=e.offsetHeight,n=0,r=0;e.offsetParent&&e!==Bm()[gb.fullscreenElement];)n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:n,top:r,width:t,height:i}}function __(e,t){var i={x:0,y:0};if(Xb)for(var n=e;n&&"html"!==n.nodeName.toLowerCase();){var r=Ab(n,"transform");if(/^matrix/.test(r)){var o=r.slice(7,-1).split(/,\s/).map(Number);i.x+=o[4],i.y+=o[5]}else if(/^matrix3d/.test(r)){var s=r.slice(9,-1).split(/,\s/).map(Number);i.x+=s[12],i.y+=s[13]}n=n.parentNode}var a={},l=b_(t.target),u=b_(e),c=u.width,h=u.height,d=t.offsetY-(u.top-l.top),p=t.offsetX-(u.left-l.left);return t.changedTouches&&(p=t.changedTouches[0].pageX-u.left,d=t.changedTouches[0].pageY+u.top,Xb&&(p-=i.x,d-=i.y)),a.y=1-Math.max(0,Math.min(1,d/h)),a.x=Math.max(0,Math.min(1,p/c)),a}function w_(e){return kb(e)&&3===e.nodeType}function T_(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function S_(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),t_(e)||w_(e)?e:"string"==typeof e&&/\S/.test(e)?Bm().createTextNode(e):void 0})).filter((function(e){return e}))}function E_(e,t){return S_(t).forEach((function(t){return e.appendChild(t)})),e}function x_(e,t){return E_(T_(e),t)}function C_(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}var k_,P_=n_("querySelector"),A_=n_("querySelectorAll"),I_=Object.freeze({__proto__:null,isReal:e_,isEl:t_,isInFrame:i_,createEl:r_,textContent:o_,prependTo:s_,hasClass:a_,addClass:l_,removeClass:u_,toggleClass:c_,setAttributes:h_,getAttributes:d_,getAttribute:p_,setAttribute:f_,removeAttribute:g_,blockTextSelection:m_,unblockTextSelection:v_,getBoundingClientRect:y_,findPosition:b_,getPointerPosition:__,isTextNode:w_,emptyEl:T_,normalizeContent:S_,appendContent:E_,insertContent:x_,isSingleLeftClick:C_,$:P_,$$:A_}),L_=!1,D_=function(){if(!1!==k_.options.autoSetup){var e=Array.prototype.slice.call(Bm().getElementsByTagName("video")),t=Array.prototype.slice.call(Bm().getElementsByTagName("audio")),i=Array.prototype.slice.call(Bm().getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&n.length>0)for(var r=0,o=n.length;r<o;r++){var s=n[r];if(!s||!s.getAttribute){O_(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&k_(s)}else L_||O_(1)}};function O_(e,t){e_()&&(t&&(k_=t),Mm().setTimeout(D_,e))}function R_(){L_=!0,Mm().removeEventListener("load",R_)}e_()&&("complete"===Bm().readyState?R_():Mm().addEventListener("load",R_));var M_,N_=function(e){var t=Bm().createElement("style");return t.className=e,t},B_=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},F_=3;function U_(){return F_++}Mm().WeakMap||(M_=function(){function e(){this.vdata="vdata"+Math.floor(Mm().performance&&Mm().performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var i=e[this.vdata]||U_();return e[this.vdata]||(e[this.vdata]=i),this.data[i]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];wb("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var $_,H_=Mm().WeakMap?new WeakMap:new M_;function j_(e,t){if(H_.has(e)){var i=H_.get(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&H_.delete(e)}}function z_(e,t,i,n){i.forEach((function(i){e(t,i,n)}))}function q_(e){if(e.fixed_)return e;function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var n=e||Mm().event;for(var r in e={},n)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&"path"!==r&&("returnValue"===r&&n.preventDefault||(e[r]=n[r]));if(e.target||(e.target=e.srcElement||Bm()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX){var o=Bm().documentElement,s=Bm().body;e.pageX=e.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var V_=["touchstart","touchmove"];function W_(e,t,i){if(Array.isArray(t))return z_(W_,e,t,i);H_.has(e)||H_.set(e,{});var n=H_.get(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),i.guid||(i.guid=U_()),n.handlers[t].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,i){if(!n.disabled){t=q_(t);var r=n.handlers[t.type];if(r)for(var o=r.slice(0),s=0,a=o.length;s<a&&!t.isImmediatePropagationStopped();s++)try{o[s].call(e,t,i)}catch(e){wb.error(e)}}}),1===n.handlers[t].length)if(e.addEventListener){var r=!1;(function(){if("boolean"!=typeof $_){$_=!1;try{var e=Object.defineProperty({},"passive",{get:function(){$_=!0}});Mm().addEventListener("test",null,e),Mm().removeEventListener("test",null,e)}catch(e){}}return $_})()&&V_.indexOf(t)>-1&&(r={passive:!0}),e.addEventListener(t,n.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function G_(e,t,i){if(H_.has(e)){var n=H_.get(e);if(n.handlers){if(Array.isArray(t))return z_(G_,e,t,i);var r=function(e,t){n.handlers[t]=[],j_(e,t)};if(void 0!==t){var o=n.handlers[t];if(o)if(i){if(i.guid)for(var s=0;s<o.length;s++)o[s].guid===i.guid&&o.splice(s--,1);j_(e,t)}else r(e,t)}else for(var a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&r(e,a)}}}function Y_(e,t,i){var n=H_.has(e)?H_.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=q_(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles)Y_.call(null,r,t,i);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){H_.has(t.target)||H_.set(t.target,{});var o=H_.get(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function X_(e,t,i){if(Array.isArray(t))return z_(X_,e,t,i);var n=function n(){G_(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||U_(),W_(e,t,n)}function K_(e,t,i){var n=function n(){G_(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||U_(),W_(e,t,n)}var Q_,Z_=Object.freeze({__proto__:null,fixEvent:q_,on:W_,off:G_,trigger:Y_,one:X_,any:K_}),J_=30,ew=function(e,t,i){t.guid||(t.guid=U_());var n=t.bind(e);return n.guid=i?i+"_"+t.guid:t.guid,n},tw=function(e,t){var i=Mm().performance.now();return function(){var n=Mm().performance.now();n-i>=t&&(e.apply(void 0,arguments),i=n)}},iw=function(){};iw.prototype.allowedEvents_={},iw.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},W_(this,e,t),this.addEventListener=i},iw.prototype.addEventListener=iw.prototype.on,iw.prototype.off=function(e,t){G_(this,e,t)},iw.prototype.removeEventListener=iw.prototype.off,iw.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},X_(this,e,t),this.addEventListener=i},iw.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},K_(this,e,t),this.addEventListener=i},iw.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=q_(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Y_(this,e)},iw.prototype.dispatchEvent=iw.prototype.trigger,iw.prototype.queueTrigger=function(e){var t=this;Q_||(Q_=new Map);var i=e.type||e,n=Q_.get(this);n||(n=new Map,Q_.set(this,n));var r=n.get(i);n.delete(i),Mm().clearTimeout(r);var o=Mm().setTimeout((function(){n.delete(i),0===n.size&&(n=null,Q_.delete(t)),t.trigger(e)}),0);n.set(i,o)};var nw=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},rw=function(e){return e instanceof iw||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},ow=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},sw=function(e,t,i){if(!e||!e.nodeName&&!rw(e))throw new Error("Invalid target for "+nw(t)+"#"+i+"; must be a DOM node or evented object.")},aw=function(e,t,i){if(!ow(e))throw new Error("Invalid event type for "+nw(t)+"#"+i+"; must be a non-empty string or array.")},lw=function(e,t,i){if("function"!=typeof e)throw new Error("Invalid listener for "+nw(t)+"#"+i+"; must be a function.")},uw=function(e,t,i){var n,r,o,s=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return s?(n=e.eventBusEl_,t.length>=3&&t.shift(),r=t[0],o=t[1]):(n=t[0],r=t[1],o=t[2]),sw(n,e,i),aw(r,e,i),lw(o,e,i),{isTargetingSelf:s,target:n,type:r,listener:o=ew(e,o)}},cw=function(e,t,i,n){sw(e,e,t),e.nodeName?Z_[t](e,i,n):e[t](i,n)},hw={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=uw(this,i,"on"),o=r.isTargetingSelf,s=r.target,a=r.type,l=r.listener;if(cw(s,"on",a,l),!o){var u=function(){return e.off(s,a,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,cw(this,"on","dispose",u),cw(s,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=uw(this,i,"one"),o=r.isTargetingSelf,s=r.target,a=r.type,l=r.listener;if(o)cw(s,"one",a,l);else{var u=function t(){e.off(s,a,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,cw(s,"one",a,u)}},any:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=uw(this,i,"any"),o=r.isTargetingSelf,s=r.target,a=r.type,l=r.listener;if(o)cw(s,"any",a,l);else{var u=function t(){e.off(s,a,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];l.apply(null,n)};u.guid=l.guid,cw(s,"any",a,u)}},off:function(e,t,i){if(!e||ow(e))G_(this.eventBusEl_,e,t);else{var n=e,r=t;sw(n,this,"off"),aw(r,this,"off"),lw(i,this,"off"),i=ew(this,i),this.off("dispose",i),n.nodeName?(G_(n,r,i),G_(n,"dispose",i)):rw(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(e,t){sw(this.eventBusEl_,this,"trigger");var i=e&&"string"!=typeof e?e.type:e;if(!ow(i)){var n="Invalid event type for "+nw(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(n);(this.log||wb).error(n)}return Y_(this.eventBusEl_,e,t)}};function dw(e,t){void 0===t&&(t={});var i=t.eventBusKey;if(i){if(!e[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');e.eventBusEl_=e[i]}else e.eventBusEl_=r_("span",{className:"vjs-event-bus"});return Cb(e,hw),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&H_.has(e)&&H_.delete(e)})),Mm().setTimeout((function(){e.eventBusEl_=null}),0)})),e}var pw={state:{},setState:function(e){var t,i=this;return"function"==typeof e&&(e=e()),xb(e,(function(e,n){i.state[n]!==e&&((t=t||{})[n]={from:i.state[n],to:e}),i.state[n]=e})),t&&rw(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function fw(e,t){return Cb(e,pw),e.state=Cb({},e.state,t),"function"==typeof e.handleStateChanged&&rw(e)&&e.on("statechanged",e.handleStateChanged),e}var gw=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},mw=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))};function vw(){for(var e={},t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach((function(t){t&&xb(t,(function(t,i){Pb(t)?(Pb(e[i])||(e[i]={}),e[i]=vw(e[i],t)):e[i]=t}))})),e}var yw=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var i in this.map_)e.call(t,this.map_[i],i,this)},e}(),bw=Mm().Map?Mm().Map:yw,_w=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var i in this.set_)e.call(t,i,i,this)},e}(),ww=Mm().Set?Mm().Set:_w,Tw=function(){function e(e,t,i){var n=this;if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=vw({},this.options_),t=this.options_=vw(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+U_()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((function(e){return n.addClass(e)})),!1!==t.evented&&(dw(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),fw(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new ww,this.setIntervalIds_=new ww,this.rafIds_=new ww,this.namedRafs_=new bw,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=vw(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,i){return r_(e,t,i)},t.localize=function(e,t,i){void 0===i&&(i=e);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),o=r&&r[n],s=n&&n.split("-")[0],a=r&&r[s],l=i;return o&&o[e]?l=o[e]:a&&a[e]&&(l=a[e]),t&&(l=l.replace(/\{(\d+)\}/g,(function(e,i){var n=t[i-1],r=n;return void 0===n&&(r=e),r}))),l},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var n=this,r=0;r<t.length;r++)if(!(n=n.getChild(t[r]))||!n.getChild)return;return n},t.addChild=function(t,i,n){var r,o;if(void 0===i&&(i={}),void 0===n&&(n=this.children_.length),"string"==typeof t){o=mw(t);var s=i.componentClass||o;i.name=o;var a=e.getComponent(s);if(!a)throw new Error("Component "+s+" does not exist");if("function"!=typeof a)return null;r=new a(this.player_||this,i)}else r=t;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(o=o||r.name&&mw(r.name()))&&(this.childNameIndex_[o]=r,this.childNameIndex_[gw(o)]=r),"function"==typeof r.el&&r.el()){var l=null;this.children_[n+1]&&(this.children_[n+1].el_?l=this.children_[n+1].el_:t_(this.children_[n+1])&&(l=this.children_[n+1])),this.contentEl().insertBefore(r.el(),l)}return r},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[mw(e.name())]=null,this.childNameIndex_[gw(e.name())]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,i=this.options_.children;if(i){var n,r=this.options_,o=e.getComponent("Tech");(n=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter((function(e){return!n.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var n,r;return"string"==typeof e?r=i[n=e]||t.options_[n]||{}:(n=e.name,r=e),{name:n,opts:r}})).filter((function(t){var i=e.getComponent(t.opts.componentClass||mw(t.name));return i&&!o.isTech(i)})).forEach((function(e){var i=e.name,n=e.opts;if(void 0!==r[i]&&(n=r[i]),!1!==n){!0===n&&(n={}),n.playerOptions=t.options_.playerOptions;var o=t.addChild(i,n);o&&(t[i]=o)}}))}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return P_(e,t||this.contentEl())},t.$$=function(e,t){return A_(e,t||this.contentEl())},t.hasClass=function(e){return a_(this.el_,e)},t.addClass=function(e){l_(this.el_,e)},t.removeClass=function(e){u_(this.el_,e)},t.toggleClass=function(e,t){c_(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return p_(this.el_,e)},t.setAttribute=function(e,t){f_(this.el_,e,t)},t.removeAttribute=function(e){g_(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+mw(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=Ab(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var i="offset"+mw(e);t=this.el_[i]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&($m().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,i=null;this.on("touchstart",(function(n){1===n.touches.length&&(i={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},t=Mm().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(i){var n=t.touches[0].pageX-i.pageX,r=t.touches[0].pageY-i.pageY;Math.sqrt(n*n+r*r)>10&&(e=!1)}}));var n=function(){e=!1};this.on("touchleave",n),this.on("touchcancel",n),this.on("touchend",(function(n){(i=null,!0===e)&&(Mm().performance.now()-t<200&&(n.preventDefault(),this.trigger("tap")))}))},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=ew(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var i=function(i){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}},t.setTimeout=function(e,t){var i,n=this;return e=ew(this,e),this.clearTimersOnDispose_(),i=Mm().setTimeout((function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_.delete(i),e()}),t),this.setTimeoutIds_.add(i),i},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Mm().clearTimeout(e)),e},t.setInterval=function(e,t){e=ew(this,e),this.clearTimersOnDispose_();var i=Mm().setInterval(e,t);return this.setIntervalIds_.add(i),i},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Mm().clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=ew(this,e),t=Mm().requestAnimationFrame((function(){i.rafIds_.has(t)&&i.rafIds_.delete(t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var i=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=ew(this,t);var n=this.requestAnimationFrame((function(){t(),i.namedRafs_.has(e)&&i.namedRafs_.delete(e)}));return this.namedRafs_.set(e,n),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),Mm().cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var i=t[0],n=t[1];e[i].forEach((function(t,i){return e[n](i)}))})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,i){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n,r=e.getComponent("Tech"),o=r&&r.isTech(i),s=e===i||e.prototype.isPrototypeOf(i.prototype);if(o||!s)throw n=o?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+n+".");t=mw(t),e.components_||(e.components_={});var a=e.getComponent("Player");if("Player"===t&&a&&a.players){var l=a.players,u=Object.keys(l);if(l&&u.length>0&&u.map((function(e){return l[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=i,e.components_[gw(t)]=i,i},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function Sw(e,t,i,n){return function(e,t,i){if("number"!=typeof t||t<0||t>i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}(e,n,i.length-1),i[n][t]}function Ew(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Sw.bind(null,"start",0,e),end:Sw.bind(null,"end",1,e)},Mm().Symbol&&Mm().Symbol.iterator&&(t[Mm().Symbol.iterator]=function(){return(e||[]).values()}),t}function xw(e,t){return Array.isArray(e)?Ew(e):void 0===e||void 0===t?Ew():Ew([[e,t]])}function Cw(e,t){var i,n,r=0;if(!t)return 0;e&&e.length||(e=xw(0,0));for(var o=0;o<e.length;o++)i=e.start(o),(n=e.end(o))>t&&(n=t),r+=n-i;return r/t}function kw(e){if(e instanceof kw)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:kb(e)&&("number"==typeof e.code&&(this.code=e.code),Cb(this,e)),this.message||(this.message=kw.defaultMessages[this.code]||"")}Tw.prototype.supportsRaf_="function"==typeof Mm().requestAnimationFrame&&"function"==typeof Mm().cancelAnimationFrame,Tw.registerComponent("Component",Tw),kw.prototype.code=0,kw.prototype.message="",kw.prototype.status=null,kw.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],kw.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Pw=0;Pw<kw.errorTypes.length;Pw++)kw[kw.errorTypes[Pw]]=Pw,kw.prototype[kw.errorTypes[Pw]]=Pw;function Aw(e){return null!=e&&"function"==typeof e.then}function Iw(e){Aw(e)&&e.then(null,(function(e){}))}var Lw=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,i,n){return e[i]&&(t[i]=e[i]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},Dw=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,(function(e){return e.track}));return Array.prototype.map.call(t,(function(e){var t=Lw(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===i.indexOf(e)})).map(Lw))},Ow=function(e,t){return e.forEach((function(e){var i=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return i.addCue(e)}))})),t.textTracks()},Rw="vjs-modal-dialog",Mw=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).handleKeyDown_=function(e){return n.handleKeyDown(e)},n.close_=function(e){return n.close(e)},n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=r_("div",{className:Rw+"-content"},{role:"document"}),n.descEl_=r_("p",{className:Rw+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),o_(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}zm(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return Rw+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},i.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},i.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),x_(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},i.empty=function(){this.trigger("beforemodalempty"),T_(this.contentEl()),this.trigger("modalempty")},i.content=function(e){return void 0!==e&&(this.content_=e),this.content_},i.conditionalFocus_=function(){var e=Bm().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(e){if(e.stopPropagation(),$m().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if($m().isEventKey(e,"Tab")){for(var t,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){t=r;break}Bm().activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||t!==i.length-1||(i[0].focus(),e.preventDefault())}},i.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof Mm().HTMLAnchorElement||e instanceof Mm().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Mm().HTMLInputElement||e instanceof Mm().HTMLSelectElement||e instanceof Mm().HTMLTextAreaElement||e instanceof Mm().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Mm().HTMLIFrameElement||e instanceof Mm().HTMLObjectElement||e instanceof Mm().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(Tw);Mw.prototype.options_={pauseOnOpen:!0,temporary:!0},Tw.registerComponent("ModalDialog",Mw);var Nw=function(e){function t(t){var i;void 0===t&&(t=[]),(i=e.call(this)||this).tracks_=[],Object.defineProperty(Hm(i),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)i.addTrack(t[n]);return i}zm(t,e);var i=t.prototype;return i.addTrack=function(e){var t=this,i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},rw(e)&&e.addEventListener("labelchange",e.labelchange_)},i.removeTrack=function(e){for(var t,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},i.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},t}(iw);for(var Bw in Nw.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Nw.prototype.allowedEvents_)Nw.prototype["on"+Bw]=null;var Fw=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)},Uw=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].enabled){Fw(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,i}zm(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.enabled&&Fw(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){i.changing_||(i.changing_=!0,Fw(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(Nw),$w=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)},Hw=function(e){function t(t){var i;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].selected){$w(t,t[n]);break}return(i=e.call(this,t)||this).changing_=!1,Object.defineProperty(Hm(i),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}zm(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;t.selected&&$w(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){i.changing_||(i.changing_=!0,$w(i,t),i.changing_=!1,i.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(Nw),jw=function(e){function t(){return e.apply(this,arguments)||this}zm(t,e);var i=t.prototype;return i.addTrack=function(t){var i=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Nw),zw=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},t.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),qw=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,i=0,n=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(i=t;i<n;i++)r.call(this,i)},t.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},e}(),Vw={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Ww={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Gw={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Yw={disabled:"disabled",hidden:"hidden",showing:"showing"},Xw=function(e){function t(t){var i;void 0===t&&(t={}),i=e.call(this)||this;var n={id:t.id||"vjs_track_"+U_(),kind:t.kind||"",language:t.language||""},r=t.label||"",o=function(e){Object.defineProperty(Hm(i),e,{get:function(){return n[e]},set:function(){}})};for(var s in n)o(s);return Object.defineProperty(Hm(i),"label",{get:function(){return r},set:function(e){e!==r&&(r=e,this.trigger("labelchange"))}}),i}return zm(t,e),t}(iw),Kw=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=Bm().createElement("a");i.href=e;for(var n={},r=0;r<t.length;r++)n[t[r]]=i[t[r]];return"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,"")),"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=Mm().location.protocol),n.host||(n.host=Mm().location.host),n},Qw=function(e){if(!e.match(/^https?:\/\//)){var t=Bm().createElement("a");t.href=e,e=t.href}return e},Zw=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},Jw=function(e,t){void 0===t&&(t=Mm().location);var i=Kw(e);return(":"===i.protocol?t.protocol:i.protocol)+i.host!==t.protocol+t.host},eT=Object.freeze({__proto__:null,parseUrl:Kw,getAbsoluteURL:Qw,getFileExtension:Zw,isCrossOrigin:Jw}),tT=function(e,t){var i=new(Mm().WebVTT.Parser)(Mm(),Mm().vttjs,Mm().WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),n.length>0&&(Mm().console&&Mm().console.groupCollapsed&&Mm().console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach((function(e){return wb.error(e)})),Mm().console&&Mm().console.groupEnd&&Mm().console.groupEnd()),i.flush()},iT=function(e,t){var i={uri:e},n=Jw(e);n&&(i.cors=n);var r="use-credentials"===t.tech_.crossOrigin();r&&(i.withCredentials=r),Gm()(i,ew(this,(function(e,i,n){if(e)return wb.error(e,i);t.loaded_=!0,"function"!=typeof Mm().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return tT(n,t);wb.error("vttjs failed to load, stopping trying to process "+t.src)})):tT(n,t)})))},nT=function(e){function t(t){var i;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var n=vw(t,{kind:Gw[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=Yw[n.mode]||"disabled",o=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden"),(i=e.call(this,n)||this).tech_=n.tech,i.cues_=[],i.activeCues_=[],i.preload_=!1!==i.tech_.preloadTextTracks;var s=new qw(i.cues_),a=new qw(i.activeCues_),l=!1;i.timeupdateHandler=ew(Hm(i),(function(e){void 0===e&&(e={}),this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}));return i.tech_.one("dispose",(function(){i.stopTracking()})),"disabled"!==r&&i.startTracking(),Object.defineProperties(Hm(i),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return r},set:function(e){Yw[e]&&r!==e&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||iT(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return a;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(l=!0);return this.activeCues_=t,a.setCues_(this.activeCues_),a},set:function(){}}}),n.src?(i.src=n.src,i.preload_||(i.loaded_=!0),(i.preload_||"subtitles"!==n.kind&&"captions"!==n.kind)&&iT(i.src,Hm(i))):i.loaded_=!0,i}zm(t,e);var i=t.prototype;return i.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},i.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},i.addCue=function(e){var t=e;if(!("getCueAsHTML"in t)){for(var i in t=new(Mm().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},i.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(Xw);nT.prototype.allowedEvents_={cuechange:"cuechange"};var rT=function(e){function t(t){var i;void 0===t&&(t={});var n=vw(t,{kind:Ww[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(Hm(i),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return zm(t,e),t}(Xw),oT=function(e){function t(t){var i;void 0===t&&(t={});var n=vw(t,{kind:Vw[t.kind]||""});i=e.call(this,n)||this;var r=!1;return Object.defineProperty(Hm(i),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return zm(t,e),t}(Xw),sT=function(e){function t(t){var i,n;void 0===t&&(t={}),i=e.call(this)||this;var r=new nT(t);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(Hm(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=0,r.addEventListener("loadeddata",(function(){n=2,i.trigger({type:"load",target:Hm(i)})})),i}return zm(t,e),t}(iw);sT.prototype.allowedEvents_={load:"load"},sT.NONE=0,sT.LOADING=1,sT.LOADED=2,sT.ERROR=3;var aT={audio:{ListClass:Uw,TrackClass:rT,capitalName:"Audio"},video:{ListClass:Hw,TrackClass:oT,capitalName:"Video"},text:{ListClass:jw,TrackClass:nT,capitalName:"Text"}};Object.keys(aT).forEach((function(e){aT[e].getterName=e+"Tracks",aT[e].privateName=e+"Tracks_"}));var lT={remoteText:{ListClass:jw,TrackClass:nT,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:zw,TrackClass:sT,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},uT=Fm({},aT,lT);lT.names=Object.keys(lT),aT.names=Object.keys(aT),uT.names=[].concat(lT.names).concat(aT.names);var cT=function(e){function t(t,i){var n;return void 0===t&&(t={}),void 0===i&&(i=function(){}),t.reportTouchActivity=!1,(n=e.call(this,null,t,i)||this).onDurationChange_=function(e){return n.onDurationChange(e)},n.trackProgress_=function(e){return n.trackProgress(e)},n.trackCurrentTime_=function(e){return n.trackCurrentTime(e)},n.stopTrackingCurrentTime_=function(e){return n.stopTrackingCurrentTime(e)},n.disposeSourceHandler_=function(e){return n.disposeSourceHandler(e)},n.queuedHanders_=new Set,n.hasStarted_=!1,n.on("playing",(function(){this.hasStarted_=!0})),n.on("loadstart",(function(){this.hasStarted_=!1})),uT.names.forEach((function(e){var i=uT[e];t&&t[i.getterName]&&(n[i.privateName]=t[i.getterName])})),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==t.preloadTextTracks,n.autoRemoteTextTracks_=new uT.text.ListClass,n.initTrackListeners(),t.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}zm(t,e);var i=t.prototype;return i.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},i.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ew(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},i.onDurationChange=function(e){this.duration_=this.duration()},i.buffered=function(){return xw(0,0)},i.bufferedPercent=function(){return Cw(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(aT.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},i.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var i=t[e+"Tracks"]()||[],n=i.length;n--;){var r=i[n];"text"===e&&t.removeRemoteTextTrack(r),i.removeTrack(r)}}))},i.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(e){return void 0!==e&&(this.error_=new kw(e),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?xw(0,0):xw()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var e=this;aT.names.forEach((function(t){var i=aT[t],n=function(){e.trigger(t+"trackchange")},r=e[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),e.on("dispose",(function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)}))}))},i.addWebVttScript_=function(){var e=this;if(!Mm().WebVTT)if(Bm().body.contains(this.el())){if(!this.options_["vtt.js"]&&Pb(Xm())&&Object.keys(Xm()).length>0)return void this.trigger("vttjsloaded");var t=Bm().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),Mm().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){var e=this,t=this.textTracks(),i=this.remoteTextTracks(),n=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};i.on("addtrack",n),i.on("removetrack",r),this.addWebVttScript_();var o=function(){return e.trigger("texttrackchange")},s=function(){o();for(var e=0;e<t.length;e++){var i=t[e];i.removeEventListener("cuechange",o),"showing"===i.mode&&i.addEventListener("cuechange",o)}};s(),t.addEventListener("change",s),t.addEventListener("addtrack",s),t.addEventListener("removetrack",s),this.on("dispose",(function(){i.off("addtrack",n),i.off("removetrack",r),t.removeEventListener("change",s),t.removeEventListener("addtrack",s),t.removeEventListener("removetrack",s);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",o)}}))},i.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,i,n,r){void 0===r&&(r={});var o=e.textTracks();r.kind=t,i&&(r.label=i),n&&(r.language=n),r.tech=e;var s=new uT.text.TrackClass(r);return o.addTrack(s),s}(this,e,t,i)},i.createRemoteTextTrack=function(e){var t=vw(e,{tech:this});return new lT.remoteTextEl.TrackClass(t)},i.addRemoteTextTrack=function(e,t){var i=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(wb.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready((function(){return i.autoRemoteTextTracks_.addTrack(n.track)})),n},i.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var e=this.options_.Promise||Mm().Promise;if(e)return e.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.requestVideoFrameCallback=function(e){var t=this,i=U_();return!this.isReady_||this.paused()?(this.queuedHanders_.add(i),this.one("playing",(function(){t.queuedHanders_.has(i)&&(t.queuedHanders_.delete(i),e())}))):this.requestNamedAnimationFrame(i,e),i},i.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,i){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,i){if(t.techs_||(t.techs_={}),!t.isTech(i))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=mw(e),t.techs_[e]=i,t.techs_[gw(e)]=i,"Tech"!==e&&t.defaultTechOrder_.push(e),i},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=mw(e),Mm()&&Mm().videojs&&Mm().videojs[e]?(wb.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Mm().videojs[e]):void 0)},t}(Tw);uT.names.forEach((function(e){var t=uT[e];cT.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),cT.prototype.featuresVolumeControl=!0,cT.prototype.featuresMuteControl=!0,cT.prototype.featuresFullscreenResize=!1,cT.prototype.featuresPlaybackRate=!1,cT.prototype.featuresProgressEvents=!1,cT.prototype.featuresSourceset=!1,cT.prototype.featuresTimeupdateEvents=!1,cT.prototype.featuresNativeTextTracks=!1,cT.prototype.featuresVideoFrameCallback=!1,cT.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,t)},e.canPlayType=function(t){for(var i,n=e.sourceHandlers||[],r=0;r<n.length;r++)if(i=n[r].canPlayType(t))return i;return""},e.selectSourceHandler=function(t,i){for(var n=e.sourceHandlers||[],r=0;r<n.length;r++)if(n[r].canHandleSource(t,i))return n[r];return null},e.canPlaySource=function(t,i){var n=e.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""};["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);i||(e.nativeSourceHandler?i=e.nativeSourceHandler:wb.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Tw.registerComponent("Tech",cT),cT.registerTech("Tech",cT),cT.defaultTechOrder_=[];var hT={},dT={},pT={};function fT(e,t,i){e.setTimeout((function(){return _T(t,hT[t.type],i,e)}),1)}function gT(e,t,i,n){void 0===n&&(n=null);var r="call"+mw(i),o=e.reduce(bT(r),n),s=o===pT,a=s?null:t[i](o);return function(e,t,i,n){for(var r=e.length-1;r>=0;r--){var o=e[r];o[t]&&o[t](n,i)}}(e,i,a,s),a}var mT={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},vT={setCurrentTime:1,setMuted:1,setVolume:1},yT={play:1,pause:1};function bT(e){return function(t,i){return t===pT?pT:i[e]?i[e](t):t}}function _T(e,t,i,n,r,o){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===o&&(o=!1);var s=t,a=s[0],l=s.slice(1);if("string"==typeof a)_T(e,hT[a],i,n,r,o);else if(a){var u=function(e,t){var i=dT[e.id()],n=null;if(null==i)return n=t(e),dT[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var o=i[r],s=o[0],a=o[1];s===t&&(n=a)}return null===n&&(n=t(e),i.push([t,n])),n}(n,a);if(!u.setSource)return r.push(u),_T(e,l,i,n,r,o);u.setSource(Cb({},e),(function(t,s){if(t)return _T(e,l,i,n,r,o);r.push(u),_T(s,e.type===s.type?l:hT[s.type],i,n,r,o)}))}else l.length?_T(e,l,i,n,r,o):o?i(e,r):_T(e,hT["*"],i,n,r,!0)}var wT={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},TT=function(e){void 0===e&&(e="");var t=Zw(e);return wT[t.toLowerCase()]||""},ST=function e(t){if(Array.isArray(t)){var i=[];t.forEach((function(t){t=e(t),Array.isArray(t)?i=i.concat(t):kb(t)&&i.push(t)})),t=i}else t="string"==typeof t&&t.trim()?[ET({src:t})]:kb(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[ET(t)]:[];return t};function ET(e){if(!e.type){var t=TT(e.src);t&&(e.type=t)}return e}var xT=function(e){function t(t,i,n){var r,o=vw({createEl:!1},i);if(r=e.call(this,t,o,n)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)t.src(i.playerOptions.sources);else for(var s=0,a=i.playerOptions.techOrder;s<a.length;s++){var l=mw(a[s]),u=cT.getTech(l);if(l||(u=Tw.getComponent(l)),u&&u.isSupported()){t.loadTech_(l);break}}return r}return zm(t,e),t}(Tw);Tw.registerComponent("MediaLoader",xT);var CT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).options_.controlText&&n.controlText(n.options_.controlText),n.handleMouseOver_=function(e){return n.handleMouseOver(e)},n.handleMouseOut_=function(e){return n.handleMouseOut(e)},n.handleClick_=function(e){return n.handleClick(e)},n.handleKeyDown_=function(e){return n.handleKeyDown(e)},n.emitTapEvents(),n.enable(),n}zm(t,e);var i=t.prototype;return i.createEl=function(e,t,i){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===i&&(i={}),t=Cb({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&wb.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),i=Cb({role:"button"},i),this.tabIndex_=t.tabIndex;var n=r_(e,t,i);return n.appendChild(r_("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n},i.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},i.createControlTextEl=function(e){return this.controlTextEl_=r_("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,o_(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",i)},i.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(t){$m().isEventKey(t,"Space")||$m().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(Tw);Tw.registerComponent("ClickableComponent",CT);var kT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update(),n.update_=function(e){return n.update(e)},t.on("posterchange",n.update_),n}zm(t,e);var i=t.prototype;return i.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},i.createEl=function(){return r_("div",{className:"vjs-poster",tabIndex:-1})},i.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},i.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},i.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(zb||$b)&&t||this.player_.tech(!0).focus(),this.player_.paused()?Iw(this.player_.play()):this.player_.pause()}},t}(CT);Tw.registerComponent("PosterImage",kT);var PT="#222",AT={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function IT(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function LT(e,t,i){try{e.style[t]=i}catch(e){return}}var DT=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var o=function(e){return r.updateDisplay(e)};return t.on("loadstart",(function(e){return r.toggleDisplay(e)})),t.on("texttrackchange",o),t.on("loadedmetadata",(function(e){return r.preselectTrack(e)})),t.ready(ew(Hm(r),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",o),t.on("playerresize",o),Mm().addEventListener("orientationchange",o),t.on("dispose",(function(){return Mm().removeEventListener("orientationchange",o)}));for(var e=this.options_.playerOptions.tracks||[],i=0;i<e.length;i++)this.player_.addRemoteTextTrack(e[i],!0);this.preselectTrack()}}))),r}zm(t,e);var i=t.prototype;return i.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var a=r[s];o&&o.enabled&&o.language&&o.language===a.language&&a.kind in n?a.kind===o.kind?i=a:i||(i=a):o&&!o.enabled?(i=null,e=null,t=null):a.default&&("descriptions"!==a.kind||e?a.kind in n&&!t&&(t=a):e=a)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"==typeof Mm().WebVTT&&Mm().WebVTT.processCues(Mm(),[],this.el_)},i.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var i=[],n=0;n<e.length;++n){var r=e[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var o=null,s=null,a=e.length;a--;){var l=e[a];"showing"===l.mode&&("descriptions"===l.kind?o=l:s=l)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):o&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(o))}},i.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),i=e.activeCues,n=i.length;n--;){var r=i[n];if(r){var o=r.displayState;if(t.color&&(o.firstChild.style.color=t.color),t.textOpacity&&LT(o.firstChild,"color",IT(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(o.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&LT(o.firstChild,"backgroundColor",IT(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?LT(o,"backgroundColor",IT(t.windowColor,t.windowOpacity)):o.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+PT:"raised"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+PT:"depressed"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+PT:"uniform"===t.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+PT)),t.fontPercent&&1!==t.fontPercent){var s=Mm().parseFloat(o.style.fontSize);o.style.fontSize=s*t.fontPercent+"px",o.style.height="auto",o.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=AT[t.fontFamily])}}},i.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof Mm().WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],i=0;i<e.length;++i)for(var n=e[i],r=0;r<n.activeCues.length;++r)t.push(n.activeCues[r]);Mm().WebVTT.processCues(Mm(),t,this.el_);for(var o=0;o<e.length;++o){for(var s=e[o],a=0;a<s.activeCues.length;++a){var l=s.activeCues[a].displayState;l_(l,"vjs-text-track-cue"),l_(l,"vjs-text-track-cue-"+(s.language?s.language:o)),s.language&&f_(l,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},t}(Tw);Tw.registerComponent("TextTrackDisplay",DT);var OT=function(e){function t(){return e.apply(this,arguments)||this}return zm(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),n=r_("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r},t}(Tw);Tw.registerComponent("LoadingSpinner",OT);var RT=function(e){function t(){return e.apply(this,arguments)||this}zm(t,e);var i=t.prototype;return i.createEl=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={});var n=r_("button",t=Cb({className:this.buildCSSClass()},t),i=Cb({type:"button"},i));return n.appendChild(r_("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n},i.addChild=function(e,t){void 0===t&&(t={});var i=this.constructor.name;return wb.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Tw.prototype.addChild.call(this,e,t)},i.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(t){$m().isEventKey(t,"Space")||$m().isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(CT);Tw.registerComponent("Button",RT);var MT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).mouseused_=!1,n.on("mousedown",(function(e){return n.handleMouseDown(e)})),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Iw(t),void(!this.player_.tech(!0)||(zb||$b)&&i||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var o=function(){return r.focus()};Aw(t)?t.then(o,(function(){})):this.setTimeout(o,1)}else this.player_.tech(!0).focus()},i.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},i.handleMouseDown=function(e){this.mouseused_=!0},t}(RT);MT.prototype.controlText_="Play Video",Tw.registerComponent("BigPlayButton",MT);var NT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).controlText(i&&i.controlText||n.localize("Close")),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(t){$m().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(RT);Tw.registerComponent("CloseButton",NT);var BT=function(e){function t(t,i){var n;return void 0===i&&(i={}),n=e.call(this,t,i)||this,i.replay=void 0===i.replay||i.replay,n.on(t,"play",(function(e){return n.handlePlay(e)})),n.on(t,"pause",(function(e){return n.handlePause(e)})),i.replay&&n.on(t,"ended",(function(e){return n.handleEnded(e)})),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.player_.paused()?Iw(this.player_.play()):this.player_.pause()},i.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},i.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))},t}(RT);BT.prototype.controlText_="Play",Tw.registerComponent("PlayToggle",BT);var FT=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),o=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=n=i="-"),(r=r>0||s>0?r+":":"")+(n=((r||o>=10)&&n<10?"0"+n:n)+":")+(i=i<10?"0"+i:i)},UT=FT;function $T(e,t){return void 0===t&&(t=e),UT(e,t)}var HT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,["timeupdate","ended"],(function(e){return n.updateContent(e)})),n.updateTextNode_(),n}zm(t,e);var i=t.prototype;return i.createEl=function(){var t=this.buildCSSClass(),i=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),n=r_("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+" "},{role:"presentation"});return i.appendChild(n),this.contentEl_=r_("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i},i.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},i.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=$T(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,wb.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=Bm().createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}})))},i.updateContent=function(e){},t}(Tw);HT.prototype.labelText_="Time",HT.prototype.controlText_="Time",Tw.registerComponent("TimeDisplay",HT);var jT=function(e){function t(){return e.apply(this,arguments)||this}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(HT);jT.prototype.labelText_="Current Time",jT.prototype.controlText_="Current Time",Tw.registerComponent("CurrentTimeDisplay",jT);var zT=function(e){function t(t,i){var n,r=function(e){return n.updateContent(e)};return(n=e.call(this,t,i)||this).on(t,"durationchange",r),n.on(t,"loadstart",r),n.on(t,"loadedmetadata",r),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(HT);zT.prototype.labelText_="Duration",zT.prototype.controlText_="Duration",Tw.registerComponent("DurationDisplay",zT);var qT=function(e){function t(){return e.apply(this,arguments)||this}return zm(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=e.prototype.createEl.call(this,"div"),n=e.prototype.createEl.call(this,"span",{textContent:"/"});return i.appendChild(n),t.appendChild(i),t},t}(Tw);Tw.registerComponent("TimeDivider",qT);var VT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"durationchange",(function(e){return n.updateContent(e)})),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var t=e.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(r_("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},i.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(HT);VT.prototype.labelText_="Remaining Time",VT.prototype.controlText_="Remaining Time",Tw.registerComponent("RemainingTimeDisplay",VT);var WT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateShowing(),n.on(n.player(),"durationchange",(function(e){return n.updateShowing(e)})),n}zm(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=r_("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(r_("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+" "})),this.contentEl_.appendChild(Bm().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},i.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},i.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Tw);Tw.registerComponent("LiveDisplay",WT);var GT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&(n.updateLiveEdgeStatusHandler_=function(e){return n.updateLiveEdgeStatus(e)},n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatusHandler_)),n}zm(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=r_("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(RT);GT.prototype.controlText_="Seek to live, currently playing live",Tw.registerComponent("SeekToLive",GT);var YT=function(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))},XT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).handleMouseDown_=function(e){return n.handleMouseDown(e)},n.handleMouseUp_=function(e){return n.handleMouseUp(e)},n.handleKeyDown_=function(e){return n.handleKeyDown(e)},n.handleClick_=function(e){return n.handleClick(e)},n.handleMouseMove_=function(e){return n.handleMouseMove(e)},n.update_=function(e){return n.update(e)},n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}zm(t,e);var i=t.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(t,i,n){return void 0===i&&(i={}),void 0===n&&(n={}),i.className=i.className+" vjs-slider",i=Cb({tabIndex:0},i),n=Cb({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,i,n)},i.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Hb||e.preventDefault(),m_(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},i.handleMouseMove=function(e){},i.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;v_(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},i.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var i=e.vertical()?"height":"width";e.bar.el().style[i]=(100*t).toFixed(2)+"%"}))),t}},i.getProgress=function(){return Number(YT(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(e){var t=__(this.el_,e);return this.vertical()?t.y:t.x},i.handleKeyDown=function(t){$m().isEventKey(t,"Left")||$m().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):$m().isEventKey(t,"Right")||$m().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){e.stopPropagation(),e.preventDefault()},i.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Tw);Tw.registerComponent("Slider",XT);var KT=function(e,t){return YT(e/t*100,0,100).toFixed(2)+"%"},QT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).partEls_=[],n.on(t,"progress",(function(e){return n.update(e)})),n}zm(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=r_("span",{className:"vjs-control-text"}),n=r_("span",{textContent:this.localize("Loaded")}),r=Bm().createTextNode(": ");return this.percentageEl_=r_("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(this.percentageEl_),t},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},i.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,i=t.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),o=t.partEls_,s=KT(r,n);t.percent_!==s&&(t.el_.style.width=s,o_(t.percentageEl_,s),t.percent_=s);for(var a=0;a<i.length;a++){var l=i.start(a),u=i.end(a),c=o[a];c||(c=t.el_.appendChild(r_()),o[a]=c),c.dataset.start===l&&c.dataset.end===u||(c.dataset.start=l,c.dataset.end=u,c.style.left=KT(l,r),c.style.width=KT(u-l,r))}for(var h=o.length;h>i.length;h--)t.el_.removeChild(o[h-1]);o.length=i.length}))},t}(Tw);Tw.registerComponent("LoadProgressBar",QT);var ZT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=tw(ew(Hm(n),n.update),J_),n}zm(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(e,t,i){var n=b_(this.el_),r=y_(this.player_.el()),o=e.width*t;if(r&&n){var s=e.left-r.left+o,a=e.width-o+(r.right-e.right),l=n.width/2;s<l?l+=l-s:a<l&&(l=a),l<0?l=0:l>n.width&&(l=n.width),l=Math.round(l),this.el_.style.right="-"+l+"px",this.write(i)}},i.write=function(e){o_(this.el_,e)},i.updateTime=function(e,t,i,n){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var o,s=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var a=r.player_.liveTracker.liveWindow(),l=a-t*a;o=(l<1?"":"-")+$T(l,a)}else o=$T(i,s);r.update(e,t,o),n&&n()}))},t}(Tw);Tw.registerComponent("TimeTooltip",ZT);var JT=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=tw(ew(Hm(n),n.update),J_),n}zm(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(e,t){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,n)}},t}(Tw);JT.prototype.options_={children:[]},Xb||Nb||JT.prototype.options_.children.push("timeTooltip"),Tw.registerComponent("PlayProgressBar",JT);var eS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=tw(ew(Hm(n),n.update),J_),n}zm(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,t){var i=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,(function(){i.el_.style.left=e.width*t+"px"}))},t}(Tw);eS.prototype.options_={children:["timeTooltip"]},Tw.registerComponent("MouseTimeDisplay",eS);var tS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).setEventHandlers_(),n}zm(t,e);var i=t.prototype;return i.setEventHandlers_=function(){var e=this;this.update_=ew(this,this.update),this.update=tw(this.update_,J_),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Bm()&&"visibilityState"in Bm()&&this.on(Bm(),"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(e){"hidden"===Bm().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,J_))},i.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(t){var i=this;if("hidden"!==Bm().visibilityState){var n=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=i.player_.ended()?i.player_.duration():i.getCurrentTime_(),t=i.player_.liveTracker,r=i.player_.duration();t&&t.isLive()&&(r=i.player_.liveTracker.liveCurrentTime()),i.percent_!==n&&(i.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),i.percent_=n),i.currentTime_===e&&i.duration_===r||(i.el_.setAttribute("aria-valuetext",i.localize("progress bar timing: currentTime={1} duration={2}",[$T(e,r),$T(r,r)],"{1} of {2}")),i.currentTime_=e,i.duration_=r),i.bar&&i.bar.update(y_(i.el()),i.getProgress())})),n}},i.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var e,t=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},i.handleMouseDown=function(t){C_(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},i.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),C_(e)){var i;t||this.player_.scrubbing()||this.player_.scrubbing(!0);var n=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(n>=.99)return void r.seekToLiveEdge();var o=r.seekableStart(),s=r.liveCurrentTime();if((i=o+n*r.liveWindow())>=s&&(i=s),i<=o&&(i=o+.1),i===1/0)return}else(i=n*this.player_.duration())===this.player_.duration()&&(i-=.1);this.userSeek_(i)}},i.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},i.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},i.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Iw(this.player_.play()):this.update_()},i.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},i.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},i.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(t){var i=this.player_.liveTracker;if($m().isEventKey(t,"Space")||$m().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if($m().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if($m().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test($m()(t))){t.preventDefault(),t.stopPropagation();var n=10*($m().codes[$m()(t)]-$m().codes[0])/100;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else $m().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):$m().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Bm()&&"visibilityState"in Bm()&&this.off(Bm(),"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(XT);tS.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Xb||Nb||tS.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Tw.registerComponent("SeekBar",tS);var iS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).handleMouseMove=tw(ew(Hm(n),n.handleMouseMove),J_),n.throttledHandleMouseSeek=tw(ew(Hm(n),n.handleMouseSeek),J_),n.handleMouseUpHandler_=function(e){return n.handleMouseUp(e)},n.handleMouseDownHandler_=function(e){return n.handleMouseDown(e)},n.enable(),n}zm(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(i||n){var r=t.el(),o=b_(r),s=__(r,e).x;s=YT(s,0,1),n&&n.update(o,s),i&&i.update(o,t.getProgress())}}},i.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},i.enabled=function(){return this.enabled_},i.disable=function(){if(this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Iw(this.player_.play())}},i.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},i.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(Tw);iS.prototype.options_={children:["seekBar"]},Tw.registerComponent("ProgressControl",iS);var nS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],(function(e){return n.handlePictureInPictureChange(e)})),n.on(t,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return n.handlePictureInPictureEnabledChange(e)})),n.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),n.hide()):n.show()})),n.disable(),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){Bm().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},i.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(RT);nS.prototype.controlText_="Picture-in-Picture",Tw.registerComponent("PictureInPictureToggle",nS);var rS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"fullscreenchange",(function(e){return n.handleFullscreenChange(e)})),!1===Bm()[t.fsApi_.fullscreenEnabled]&&n.disable(),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(RT);rS.prototype.controlText_="Fullscreen",Tw.registerComponent("FullscreenToggle",rS);var oS=function(e){function t(){return e.apply(this,arguments)||this}return zm(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(Tw);Tw.registerComponent("VolumeLevel",oS);var sS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=tw(ew(Hm(n),n.update),J_),n}zm(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},i.update=function(e,t,i,n){if(!i){var r=y_(this.el_),o=y_(this.player_.el()),s=e.width*t;if(!o||!r)return;var a=e.left-o.left+s,l=e.width-s+(o.right-e.right),u=r.width/2;a<u?u+=u-a:l<u&&(u=l),u<0?u=0:u>r.width&&(u=r.width),this.el_.style.right="-"+u+"px"}this.write(n+"%")},i.write=function(e){o_(this.el_,e)},i.updateVolume=function(e,t,i,n,r){var o=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){o.update(e,t,i,n.toFixed(0)),r&&r()}))},t}(Tw);Tw.registerComponent("VolumeLevelTooltip",sS);var aS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).update=tw(ew(Hm(n),n.update),J_),n}zm(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,t,i){var n=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,r,(function(){i?n.el_.style.bottom=e.height*t+"px":n.el_.style.left=e.width*t+"px"}))},t}(Tw);aS.prototype.options_={children:["volumeLevelTooltip"]},Tw.registerComponent("MouseVolumeLevelDisplay",aS);var lS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on("slideractive",(function(e){return n.updateLastVolume_(e)})),n.on(t,"volumechange",(function(e){return n.updateARIAAttributes(e)})),t.ready((function(){return n.updateARIAAttributes()})),n}zm(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(t){C_(t)&&e.prototype.handleMouseDown.call(this,t)},i.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var i=this.el(),n=y_(i),r=this.vertical(),o=__(i,e);o=r?o.y:o.x,o=YT(o,0,1),t.update(n,o,r)}C_(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},i.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},i.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(XT);lS.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Xb||Nb||lS.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),lS.prototype.playerEvent="volumechange",Tw.registerComponent("VolumeBar",lS);var uS=function(e){function t(t,i){var n;return void 0===i&&(i={}),i.vertical=i.vertical||!1,(void 0===i.volumeBar||Pb(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Hm(n=e.call(this,t,i)||this),t),n.throttledHandleMouseMove=tw(ew(Hm(n),n.handleMouseMove),J_),n.handleMouseUpHandler_=function(e){return n.handleMouseUp(e)},n.on("mousedown",(function(e){return n.handleMouseDown(e)})),n.on("touchstart",(function(e){return n.handleMouseDown(e)})),n.on("mousemove",(function(e){return n.handleMouseMove(e)})),n.on(n.volumeBar,["focus","slideractive"],(function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")})),n.on(n.volumeBar,["blur","sliderinactive"],(function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")})),n}zm(t,e);var i=t.prototype;return i.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},i.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},i.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Tw);uS.prototype.options_={children:["volumeBar"]},Tw.registerComponent("VolumeControl",uS);var cS=function(e){function t(t,i){var n;return function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Hm(n=e.call(this,t,i)||this),t),n.on(t,["loadstart","volumechange"],(function(e){return n.update(e)})),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},i.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();if(0===t){var n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(e){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var e=this.player_.volume(),t=3;Xb&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)u_(this.el_,"vjs-vol-"+i);l_(this.el_,"vjs-vol-"+t)},i.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(RT);cS.prototype.controlText_="Mute",Tw.registerComponent("MuteToggle",cS);var hS=function(e){function t(t,i){var n;return void 0===i&&(i={}),void 0!==i.inline?i.inline=i.inline:i.inline=!0,(void 0===i.volumeControl||Pb(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=e.call(this,t,i)||this).handleKeyPressHandler_=function(e){return n.handleKeyPress(e)},n.on(t,["loadstart"],(function(e){return n.volumePanelState_(e)})),n.on(n.muteToggle,"keyup",(function(e){return n.handleKeyPress(e)})),n.on(n.volumeControl,"keyup",(function(e){return n.handleVolumeControlKeyUp(e)})),n.on("keydown",(function(e){return n.handleKeyPress(e)})),n.on("mouseover",(function(e){return n.handleMouseOver(e)})),n.on("mouseout",(function(e){return n.handleMouseOut(e)})),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}zm(t,e);var i=t.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},i.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(e){$m().isEventKey(e,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(e){this.addClass("vjs-hover"),W_(Bm(),"keyup",this.handleKeyPressHandler_)},i.handleMouseOut=function(e){this.removeClass("vjs-hover"),G_(Bm(),"keyup",this.handleKeyPressHandler_)},i.handleKeyPress=function(e){$m().isEventKey(e,"Esc")&&this.handleMouseOut()},t}(Tw);hS.prototype.options_={children:["muteToggle","volumeControl"]},Tw.registerComponent("VolumePanel",hS);var dS=function(e){function t(t,i){var n;return n=e.call(this,t,i)||this,i&&(n.menuButton_=i.menuButton),n.focusedChild_=-1,n.on("keydown",(function(e){return n.handleKeyDown(e)})),n.boundHandleBlur_=function(e){return n.handleBlur(e)},n.boundHandleTapClick_=function(e){return n.handleTapClick(e)},n}zm(t,e);var i=t.prototype;return i.addEventListenerForItem=function(e){e instanceof Tw&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(e){e instanceof Tw&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},i.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},i.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=r_(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),W_(i,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),i},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},i.handleBlur=function(e){var t=e.relatedTarget||Bm().activeElement;if(!this.children().some((function(e){return e.el()===t}))){var i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}},i.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var i=t.filter((function(t){return t.el()===e.target}))[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},i.handleKeyDown=function(e){$m().isEventKey(e,"Left")||$m().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):($m().isEventKey(e,"Right")||$m().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},i.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},i.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},i.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(Tw);Tw.registerComponent("Menu",dS);var pS=function(e){function t(t,i){var n;void 0===i&&(i={}),(n=e.call(this,t,i)||this).menuButton_=new RT(t,i),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var r=RT.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+r,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0;var o=function(e){return n.handleClick(e)};return n.handleMenuKeyUp_=function(e){return n.handleMenuKeyUp(e)},n.on(n.menuButton_,"tap",o),n.on(n.menuButton_,"click",o),n.on(n.menuButton_,"keydown",(function(e){return n.handleKeyDown(e)})),n.on(n.menuButton_,"mouseenter",(function(){n.addClass("vjs-hover"),n.menu.show(),W_(Bm(),"keyup",n.handleMenuKeyUp_)})),n.on("mouseleave",(function(e){return n.handleMouseLeave(e)})),n.on("keydown",(function(e){return n.handleSubmenuKeyDown(e)})),n}zm(t,e);var i=t.prototype;return i.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},i.createMenu=function(){var e=new dS(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=r_("li",{className:"vjs-menu-title",textContent:mw(this.options_.title),tabIndex:-1}),i=new Tw(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},i.createItems=function(){},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+RT.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},i.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},i.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},i.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(e){this.removeClass("vjs-hover"),G_(Bm(),"keyup",this.handleMenuKeyUp_)},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(e){$m().isEventKey(e,"Esc")||$m().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),$m().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):($m().isEventKey(e,"Up")||$m().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(e){($m().isEventKey(e,"Esc")||$m().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},i.handleSubmenuKeyDown=function(e){($m().isEventKey(e,"Esc")||$m().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),$m().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Xb&&i_())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Tw);Tw.registerComponent("MenuButton",pS);var fS=function(e){function t(t,i){var n,r=i.tracks;if((n=e.call(this,t,i)||this).items.length<=1&&n.hide(),!r)return Hm(n);var o=ew(Hm(n),n.update);return r.addEventListener("removetrack",o),r.addEventListener("addtrack",o),r.addEventListener("labelchange",o),n.player_.on("ready",o),n.player_.on("dispose",(function(){r.removeEventListener("removetrack",o),r.removeEventListener("addtrack",o),r.removeEventListener("labelchange",o)})),n}return zm(t,e),t}(pS);Tw.registerComponent("TrackButton",fS);var gS=["Tab","Esc","Up","Down","Right","Left"],mS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).selectable=i.selectable,n.isSelected_=i.selected||!1,n.multiSelectable=i.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}zm(t,e);var i=t.prototype;return i.createEl=function(t,i,n){this.nonIconControl=!0;var r=e.prototype.createEl.call(this,"li",Cb({className:"vjs-menu-item",tabIndex:-1},i),n);return r.replaceChild(r_("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r},i.handleKeyDown=function(t){gS.some((function(e){return $m().isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){this.selected(!0)},i.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(CT);Tw.registerComponent("MenuItem",mS);var vS=function(e){function t(t,i){var n,r=i.track,o=t.textTracks();i.label=r.label||r.language||"Unknown",i.selected="showing"===r.mode,(n=e.call(this,t,i)||this).track=r,n.kinds=(i.kinds||[i.kind||n.track.kind]).filter(Boolean);var s,a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(Hm(n),t)},l=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleSelectedLanguageChange.apply(Hm(n),t)};(t.on(["loadstart","texttrackchange"],a),o.addEventListener("change",a),o.addEventListener("selectedlanguagechange",l),n.on("dispose",(function(){t.off(["loadstart","texttrackchange"],a),o.removeEventListener("change",a),o.removeEventListener("selectedlanguagechange",l)})),void 0===o.onchange)&&n.on(["tap","click"],(function(){if("object"!=typeof Mm().Event)try{s=new(Mm().Event)("change")}catch(e){}s||(s=Bm().createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(s)}));return n.handleTracksChange(),n}zm(t,e);var i=t.prototype;return i.handleClick=function(t){var i=this.track,n=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),n)for(var r=0;r<n.length;r++){var o=n[r];-1!==this.kinds.indexOf(o.kind)&&(o===i?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled"))}},i.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},i.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(mS);Tw.registerComponent("TextTrackMenuItem",vS);var yS=function(e){function t(t,i){return i.track={player:t,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,e.call(this,t,i)||this}zm(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var o=t[n];if(this.options_.kinds.indexOf(o.kind)>-1&&"showing"===o.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},i.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var o=t[n];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&"showing"===o.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(vS);Tw.registerComponent("OffTextTrackMenuItem",yS);var bS=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.textTracks(),e.call(this,t,i)||this}return zm(t,e),t.prototype.createItems=function(e,t){var i;void 0===e&&(e=[]),void 0===t&&(t=vS),this.label_&&(i=this.label_+" off"),e.push(new yS(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var o=n[r];if(this.kinds_.indexOf(o.kind)>-1){var s=new t(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+o.kind+"-menu-item"),e.push(s)}}return e},t}(fS);Tw.registerComponent("TextTrackButton",bS);var _S=function(e){function t(t,i){var n,r=i.track,o=i.cue,s=t.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=s&&s<o.endTime,(n=e.call(this,t,i)||this).track=r,n.cue=o,n}return zm(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(mS);Tw.registerComponent("ChaptersTrackMenuItem",_S);var wS=function(e){function t(t,i,n){var r;return(r=e.call(this,t,i,n)||this).selectCurrentItem_=function(){r.items.forEach((function(e){e.selected(r.track_.activeCues[0]===e.cue)}))},r}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},i.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var i=this.findChaptersTrack();i!==this.track_?(this.setTrack(i),e.prototype.update.call(this)):(!this.items||i&&i.cues&&i.cues.length!==this.items.length)&&e.prototype.update.call(this)}},i.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},i.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var i=e[t];if(i.kind===this.kind_)return i}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(mw(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},i.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=t[i],o=new _S(this.player_,{track:this.track_,cue:r});e.push(o)}return e},t}(bS);wS.prototype.kind_="chapters",wS.prototype.controlText_="Chapters",Tw.registerComponent("ChaptersButton",wS);var TS=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var o=t.textTracks(),s=ew(Hm(r),r.handleTracksChange);return o.addEventListener("change",s),r.on("dispose",(function(){o.removeEventListener("change",s)})),r}zm(t,e);var i=t.prototype;return i.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var o=t[n];if(o.kind!==this.kind_&&"showing"===o.mode){i=!0;break}}i?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(bS);TS.prototype.kind_="descriptions",TS.prototype.controlText_="Descriptions",Tw.registerComponent("DescriptionsButton",TS);var SS=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(bS);SS.prototype.kind_="subtitles",SS.prototype.controlText_="Subtitles",Tw.registerComponent("SubtitlesButton",SS);var ES=function(e){function t(t,i){var n;return i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",(n=e.call(this,t,i)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+i.kind+" settings dialog"),n}return zm(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(vS);Tw.registerComponent("CaptionSettingsMenuItem",ES);var xS=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ES(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(bS);xS.prototype.kind_="captions",xS.prototype.controlText_="Captions",Tw.registerComponent("CaptionsButton",xS);var CS=function(e){function t(){return e.apply(this,arguments)||this}return zm(t,e),t.prototype.createEl=function(t,i,n){var r=e.prototype.createEl.call(this,t,i,n),o=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(o.appendChild(r_("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(r_("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),r},t}(vS);Tw.registerComponent("SubsCapsMenuItem",CS);var kS=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(mw(n.label_)),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new ES(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,CS)},t}(bS);kS.prototype.kinds_=["captions","subtitles"],kS.prototype.controlText_="Subtitles",Tw.registerComponent("SubsCapsButton",kS);var PS=function(e){function t(t,i){var n,r=i.track,o=t.audioTracks();i.label=r.label||r.language||"Unknown",i.selected=r.enabled,(n=e.call(this,t,i)||this).track=r,n.addClass("vjs-"+r.kind+"-menu-item");var s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(Hm(n),t)};return o.addEventListener("change",s),n.on("dispose",(function(){o.removeEventListener("change",s)})),n}zm(t,e);var i=t.prototype;return i.createEl=function(t,i,n){var r=e.prototype.createEl.call(this,t,i,n),o=r.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(o.appendChild(r_("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(r_("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r},i.handleClick=function(t){if(e.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var i=this.player_.audioTracks(),n=0;n<i.length;n++){var r=i[n];r!==this.track&&(r.enabled=r===this.track)}},i.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(mS);Tw.registerComponent("AudioTrackMenuItem",PS);var AS=function(e){function t(t,i){return void 0===i&&(i={}),i.tracks=t.audioTracks(),e.call(this,t,i)||this}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new PS(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},t}(fS);AS.prototype.controlText_="Audio Track",Tw.registerComponent("AudioTrackButton",AS);var IS=function(e){function t(t,i){var n,r=i.rate,o=parseFloat(r,10);return i.label=r,i.selected=o===t.playbackRate(),i.selectable=!0,i.multiSelectable=!1,(n=e.call(this,t,i)||this).label=r,n.rate=o,n.on(t,"ratechange",(function(e){return n.update(e)})),n}zm(t,e);var i=t.prototype;return i.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(mS);IS.prototype.contentElType="button",Tw.registerComponent("PlaybackRateMenuItem",IS);var LS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).menuButton_.el_.setAttribute("aria-describedby",n.labelElId_),n.updateVisibility(),n.updateLabel(),n.on(t,"loadstart",(function(e){return n.updateVisibility(e)})),n.on(t,"ratechange",(function(e){return n.updateLabel(e)})),n.on(t,"playbackrateschange",(function(e){return n.handlePlaybackRateschange(e)})),n}zm(t,e);var i=t.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=r_("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},i.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){for(var e=this.playbackRates(),t=[],i=e.length-1;i>=0;i--)t.push(new IS(this.player(),{rate:e[i]+"x"}));return t},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(e){var t=this.player().playbackRate(),i=this.playbackRates(),n=(i.indexOf(t)+1)%i.length;this.player().playbackRate(i[n])},i.handlePlaybackRateschange=function(e){this.update()},i.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(pS);LS.prototype.controlText_="Playback Rate",Tw.registerComponent("PlaybackRateMenuButton",LS);var DS=function(e){function t(){return e.apply(this,arguments)||this}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(t,i,n){return void 0===t&&(t="div"),void 0===i&&(i={}),void 0===n&&(n={}),i.className||(i.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,i,n)},t}(Tw);Tw.registerComponent("Spacer",DS);var OS=function(e){function t(){return e.apply(this,arguments)||this}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:" "})},t}(DS);Tw.registerComponent("CustomControlSpacer",OS);var RS=function(e){function t(){return e.apply(this,arguments)||this}return zm(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Tw);RS.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Bm()&&RS.prototype.options_.children.splice(RS.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Tw.registerComponent("ControlBar",RS);var MS=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).on(t,"error",(function(e){return n.open(e)})),n}zm(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},i.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Mw);MS.prototype.options_=Fm({},Mw.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Tw.registerComponent("ErrorDisplay",MS);var NS="vjs-text-track-settings",BS=["#000","Black"],FS=["#00F","Blue"],US=["#0FF","Cyan"],$S=["#0F0","Green"],HS=["#F0F","Magenta"],jS=["#F00","Red"],zS=["#FFF","White"],qS=["#FF0","Yellow"],VS=["1","Opaque"],WS=["0.5","Semi-Transparent"],GS=["0","Transparent"],YS={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[BS,zS,jS,$S,FS,qS,HS,US]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[VS,WS,GS]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[zS,BS,jS,$S,FS,qS,HS,US]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[VS,WS]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[GS,WS,VS]}};function XS(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}YS.windowColor.options=YS.backgroundColor.options;var KS=function(e){function t(t,i){var n;return i.temporary=!1,(n=e.call(this,t,i)||this).updateDisplay=n.updateDisplay.bind(Hm(n)),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=r_("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===i.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",(function(){n.saveSettings(),n.close()})),n.on(n.$(".vjs-default-button"),"click",(function(){n.setDefaults(),n.updateDisplay()})),xb(YS,(function(e){n.on(n.$(e.selector),"change",n.updateDisplay)})),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}zm(t,e);var i=t.prototype;return i.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},i.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var r=YS[e],o=r.id.replace("%s",this.id_),s=[t,o].join(" ").trim();return["<"+i+' id="'+o+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map((function(e){var t=o+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',n.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},i.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return r_("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return r_("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var e=this.localize("restore all settings to the default values");return r_("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var e,t,i,n=this;return t=function(e,t,i){var r,o,s=(r=n.$(t.selector),o=t.parser,XS(r.options[r.options.selectedIndex].value,o));return void 0!==s&&(e[i]=s),e},void 0===(i={})&&(i=0),Eb(e=YS).reduce((function(i,n){return t(i,e[n],n)}),i)},i.setValues=function(e){var t=this;xb(YS,(function(i,n){!function(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(XS(e.options[n].value,i)===t){e.selectedIndex=n;break}}(t.$(i.selector),e[n],i.parser)}))},i.setDefaults=function(){var e=this;xb(YS,(function(t){var i=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=i}))},i.restoreSettings=function(){var e;try{e=JSON.parse(Mm().localStorage.getItem(NS))}catch(e){wb.warn(e)}e&&this.setValues(e)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?Mm().localStorage.setItem(NS,JSON.stringify(e)):Mm().localStorage.removeItem(NS)}catch(e){wb.warn(e)}}},i.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},t}(Mw);Tw.registerComponent("TextTrackSettings",KS);var QS=function(e){function t(t,i){var n,r=i.ResizeObserver||Mm().ResizeObserver;null===i.ResizeObserver&&(r=!1);var o=vw({createEl:!r,reportTouchActivity:!1},i);return(n=e.call(this,t,o)||this).ResizeObserver=i.ResizeObserver||Mm().ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=function(e,t,i,n){var r;void 0===n&&(n=Mm());var o=function(){var o=this,s=arguments,a=function(){r=null,a=null,i||e.apply(o,s)};!r&&i&&e.apply(o,s),n.clearTimeout(r),r=n.setTimeout(a,t)};return o.cancel=function(){n.clearTimeout(r),r=null},o}((function(){n.resizeHandler()}),100,!1,Hm(n)),r?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(t.el())):(n.loadListener_=function(){if(n.el_&&n.el_.contentWindow){var e=n.debouncedHandler_,t=n.unloadListener_=function(){G_(this,"resize",e),G_(this,"unload",t),t=null};W_(n.el_.contentWindow,"unload",t),W_(n.el_.contentWindow,"resize",e)}},n.one("load",n.loadListener_)),n}zm(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(Tw);Tw.registerComponent("ResizeManager",QS);var ZS={trackingThreshold:20,liveTolerance:15},JS=function(e){function t(t,i){var n,r=vw(ZS,i,{createEl:!1});return(n=e.call(this,t,r)||this).handleVisibilityChange_=function(e){return n.handleVisibilityChange(e)},n.trackLiveHandler_=function(){return n.trackLive_()},n.handlePlay_=function(e){return n.handlePlay(e)},n.handleFirstTimeupdate_=function(e){return n.handleFirstTimeupdate(e)},n.handleSeeked_=function(e){return n.handleSeeked(e)},n.seekToLiveEdge_=function(e){return n.seekToLiveEdge(e)},n.reset_(),n.on(n.player_,"durationchange",(function(e){return n.handleDurationchange(e)})),n.on(n.player_,"canplay",(function(){return n.toggleTracking()})),zb&&"hidden"in Bm()&&"visibilityState"in Bm()&&n.on(Bm(),"visibilitychange",n.handleVisibilityChange_),n}zm(t,e);var i=t.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Bm().hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(Mm().performance.now().toFixed(4)),i=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;var n=this.liveCurrentTime(),r=this.player_.currentTime(),o=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-r)>this.options_.liveTolerance;this.timeupdateSeen_&&n!==1/0||(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.toggleTracking()},i.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,J_),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},i.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},i.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},i.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0},i.seekableStart=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0},i.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return"number"==typeof this.trackingInterval_},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(Bm(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(Tw);Tw.registerComponent("LiveTracker",JS);var eE,tE=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),n=[],r="";if(!i.length)return!1;for(var o=0;o<i.length;o++){var s=i[o].src;s&&-1===n.indexOf(s)&&n.push(s)}return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)},iE=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Bm().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=Bm().createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",Mm().Element.prototype.appendChild.call(this,i),this.innerHTML}}),nE=function(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i},rE=function(e){var t=e.el();if(!t.resetSourceWatch_){var i={},n=function(e){return nE([e.el(),Mm().HTMLMediaElement.prototype,Mm().Element.prototype,iE],"innerHTML")}(e),r=function(i){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i.apply(t,r);return tE(e),s}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(i[e]=t[e],t[e]=r(i[e]))})),Object.defineProperty(t,"innerHTML",vw(n,{set:r(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(i).forEach((function(e){t[e]=i[e]})),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)}},oE=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Qw(Mm().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Mm().Element.prototype.setAttribute.call(this,"src",e),e}}),sE=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var i=function(e){return nE([e.el(),Mm().HTMLMediaElement.prototype,oE],"src")}(e),n=t.setAttribute,r=t.load;Object.defineProperty(t,"src",vw(i,{set:function(n){var r=i.set.call(t,n);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(i,r){var o=n.call(t,i,r);return/src/i.test(i)&&e.triggerSourceset(t.src),o},t.load=function(){var i=r.call(t);return tE(e)||(e.triggerSourceset(""),rE(e)),i},t.currentSrc?e.triggerSourceset(t.currentSrc):tE(e)||rE(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=n,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},aE=function(e,t,i,n){void 0===n&&(n=!0);var r=function(i){return Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0})},o={configurable:!0,enumerable:!0,get:function(){var e=i();return r(e),e}};return n&&(o.set=r),Object.defineProperty(e,t,o)},lE=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var r=t.source,o=!1;if(n.featuresVideoFrameCallback=n.featuresVideoFrameCallback&&"VIDEO"===n.el_.tagName,r&&(n.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),t.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var s=n.el_.childNodes,a=s.length,l=[];a--;){var u=s[a];"track"===u.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(u),n.remoteTextTracks().addTrack(u.track),n.textTracks().addTrack(u.track),o||n.el_.hasAttribute("crossorigin")||!Jw(u.src)||(o=!0)):l.push(u))}for(var c=0;c<l.length;c++)n.el_.removeChild(l[c])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&o&&wb.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(Wb||Yb||Fb)&&!0===t.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}zm(t,e);var i=t.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){sE(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),i=function(){e=[];for(var i=0;i<t.length;i++){var n=t[i];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};i(),t.addEventListener("change",i),this.on("dispose",(function(){return t.removeEventListener("change",i)}));var n=function i(){for(var n=0;n<e.length;n++){var r=e[n];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",i)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",i),t.removeEventListener("change",n),t.addEventListener("change",n)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",i),t.addEventListener("change",i),t.removeEventListener("change",n)}))},i.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach((function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},i.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},i.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},i.proxyNativeTracksForType_=function(e){var t=this,i=aT[e],n=this.el()[i.getterName],r=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&n&&n.addEventListener){var o={change:function(i){var n={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(n),"text"===e&&t[lT.remoteText.getterName]().trigger(n)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<r.length;t++){for(var i=!1,o=0;o<n.length;o++)if(n[o]===r[t]){i=!0;break}i||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[i.getterName+"Listeners_"]=o,Object.keys(o).forEach((function(e){var i=o[e];n.addEventListener(e,i),t.on("dispose",(function(t){return n.removeEventListener(e,i)}))})),this.on("loadstart",s),this.on("dispose",(function(e){return t.off("loadstart",s)}))}},i.proxyNativeTracks_=function(){var e=this;aT.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},i.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),t.disposeMediaElement(e),e=i}else{e=Bm().createElement("video");var n=vw({},this.options_.tag&&d_(this.options_.tag));Wb&&!0===this.options_.nativeControlsForTouch||delete n.controls,h_(e,Cb(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&f_(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],o=0;o<r.length;o++){var s=r[o],a=this.options_[s];void 0!==a&&(a?f_(e,s,s):g_(e,s),e[s]=a)}return e},i.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready((function(){this.off("loadstart",i),this.off("loadedmetadata",n),t||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(e){this.trigger(e)}),this)}))}},i.setScrubbing=function(e){this.isScrubbing_=e},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Kb?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){wb(e,"Video is not ready. (Video.js)")}},i.duration=function(){var e=this;if(this.el_.duration===1/0&&Nb&&Hb&&0===this.el_.currentTime){return this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN}return this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",(function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)}))}},i.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=Mm().navigator&&Mm().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},i.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Iw(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},i.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},i.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},i.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},i.reset=function(){t.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(e){this.el_.controls=!!e},i.addTextTrack=function(t,i,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,n):e.prototype.addTextTrack.call(this,t,i,n)},i.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var i=Bm().createElement("track");return t.kind&&(i.kind=t.kind),t.label&&(i.label=t.label),(t.language||t.srclang)&&(i.srclang=t.language||t.srclang),t.default&&(i.default=t.default),t.id&&(i.id=t.id),t.src&&(i.src=t.src),i},i.addRemoteTextTrack=function(t,i){var n=e.prototype.addRemoteTextTrack.call(this,t,i);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},i.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var i=this.$$("track"),n=i.length;n--;)t!==i[n]&&t!==i[n].track||this.el().removeChild(i[n])},i.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Mm().performance&&"function"==typeof Mm().performance.now?e.creationTime=Mm().performance.now():Mm().performance&&Mm().performance.timing&&"number"==typeof Mm().performance.timing.navigationStart&&(e.creationTime=Mm().Date.now()-Mm().performance.timing.navigationStart),e},t}(cT);aE(lE,"TEST_VID",(function(){if(e_()){var e=Bm().createElement("video"),t=Bm().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),lE.isSupported=function(){try{lE.TEST_VID.volume=.5}catch(e){return!1}return!(!lE.TEST_VID||!lE.TEST_VID.canPlayType)},lE.canPlayType=function(e){return lE.TEST_VID.canPlayType(e)},lE.canPlaySource=function(e,t){return lE.canPlayType(e.type)},lE.canControlVolume=function(){try{var e=lE.TEST_VID.volume;lE.TEST_VID.volume=e/2+.1;var t=e!==lE.TEST_VID.volume;return t&&Xb?(Mm().setTimeout((function(){lE&&lE.prototype&&(lE.prototype.featuresVolumeControl=e!==lE.TEST_VID.volume)})),!1):t}catch(e){return!1}},lE.canMuteVolume=function(){try{var e=lE.TEST_VID.muted;return lE.TEST_VID.muted=!e,lE.TEST_VID.muted?f_(lE.TEST_VID,"muted","muted"):g_(lE.TEST_VID,"muted"),e!==lE.TEST_VID.muted}catch(e){return!1}},lE.canControlPlaybackRate=function(){if(Nb&&Hb&&jb<58)return!1;try{var e=lE.TEST_VID.playbackRate;return lE.TEST_VID.playbackRate=e/2+.1,e!==lE.TEST_VID.playbackRate}catch(e){return!1}},lE.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(Bm().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(Bm().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(Bm().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(Bm().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},lE.supportsNativeTextTracks=function(){return Kb||Xb&&Hb},lE.supportsNativeVideoTracks=function(){return!(!lE.TEST_VID||!lE.TEST_VID.videoTracks)},lE.supportsNativeAudioTracks=function(){return!(!lE.TEST_VID||!lE.TEST_VID.audioTracks)},lE.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],i=e[1];aE(lE.prototype,t,(function(){return lE[i]()}),!0)})),lE.prototype.featuresVolumeControl=lE.canControlVolume(),lE.prototype.movingMediaElementInDOM=!Xb,lE.prototype.featuresFullscreenResize=!0,lE.prototype.featuresProgressEvents=!0,lE.prototype.featuresTimeupdateEvents=!0,lE.prototype.featuresVideoFrameCallback=!(!lE.TEST_VID||!lE.TEST_VID.requestVideoFrameCallback),lE.patchCanPlayType=function(){Bb>=4&&!Ub&&!Hb&&(eE=lE.TEST_VID&&lE.TEST_VID.constructor.prototype.canPlayType,lE.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":eE.call(this,e)})},lE.unpatchCanPlayType=function(){var e=lE.TEST_VID.constructor.prototype.canPlayType;return eE&&(lE.TEST_VID.constructor.prototype.canPlayType=eE),e},lE.patchCanPlayType(),lE.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},lE.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){lE.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){lE.prototype["set"+mw(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){lE.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){lE.prototype["set"+mw(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){lE.prototype[e]=function(){return this.el_[e]()}})),cT.withSourceHandlers(lE),lE.nativeSourceHandler={},lE.nativeSourceHandler.canPlayType=function(e){try{return lE.TEST_VID.canPlayType(e)}catch(e){return""}},lE.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return lE.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=Zw(e.src);return lE.nativeSourceHandler.canPlayType("video/"+i)}return""},lE.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},lE.nativeSourceHandler.dispose=function(){},lE.registerSourceHandler(lE.nativeSourceHandler),cT.registerTech("Html5",lE);var uE=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],cE={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},hE=["tiny","xsmall","small","medium","large","xlarge","huge"],dE={};hE.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;dE[e]="vjs-layout-"+t}));var pE={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},fE=function(e){function t(i,n,r){var o;if(i.id=i.id||n.id||"vjs_video_"+U_(),(n=Cb(t.getTagSettings(i),n)).initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language)if("function"==typeof i.closest){var s=i.closest("[lang]");s&&s.getAttribute&&(n.language=s.getAttribute("lang"))}else for(var a=i;a&&1===a.nodeType;){if(d_(a).hasOwnProperty("lang")){n.language=a.getAttribute("lang");break}a=a.parentNode}if((o=e.call(this,null,n,r)||this).boundDocumentFullscreenChange_=function(e){return o.documentFullscreenChange_(e)},o.boundFullWindowOnEscKey_=function(e){return o.fullWindowOnEscKey(e)},o.boundUpdateStyleEl_=function(e){return o.updateStyleEl_(e)},o.boundApplyInitTime_=function(e){return o.applyInitTime_(e)},o.boundUpdateCurrentBreakpoint_=function(e){return o.updateCurrentBreakpoint_(e)},o.boundHandleTechClick_=function(e){return o.handleTechClick_(e)},o.boundHandleTechDoubleClick_=function(e){return o.handleTechDoubleClick_(e)},o.boundHandleTechTouchStart_=function(e){return o.handleTechTouchStart_(e)},o.boundHandleTechTouchMove_=function(e){return o.handleTechTouchMove_(e)},o.boundHandleTechTouchEnd_=function(e){return o.handleTechTouchEnd_(e)},o.boundHandleTechTap_=function(e){return o.handleTechTap_(e)},o.isFullscreen_=!1,o.log=Tb(o.id_),o.fsApi_=gb,o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,o.debugEnabled_=!1,o.audioOnlyMode_=!1,o.audioPosterMode_=!1,o.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=i,o.tagAttributes=i&&d_(i),o.language(o.options_.language),n.languages){var l={};Object.getOwnPropertyNames(n.languages).forEach((function(e){l[e.toLowerCase()]=n.languages[e]})),o.languages_=l}else o.languages_=t.prototype.options_.languages;o.resetCache_(),o.poster_=n.poster||"",o.controls_=!!n.controls,i.controls=!1,i.removeAttribute("controls"),o.changingSrc_=!1,o.playCallbacks_=[],o.playTerminatedQueue_=[],i.hasAttribute("autoplay")?o.autoplay(!0):o.autoplay(o.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach((function(e){if("function"!=typeof o[e])throw new Error('plugin "'+e+'" does not exist')})),o.scrubbing_=!1,o.el_=o.createEl(),dw(Hm(o),{eventBusKey:"el_"}),o.fsApi_.requestFullscreen&&(W_(Bm(),o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_),o.on(o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_)),o.fluid_&&o.on(["playerreset","resize"],o.boundUpdateStyleEl_);var u=vw(o.options_);n.plugins&&Object.keys(n.plugins).forEach((function(e){o[e](n.plugins[e])})),n.debug&&o.debug(!0),o.options_.playerOptions=u,o.middleware_=[],o.playbackRates(n.playbackRates),o.initChildren(),o.isAudio("audio"===i.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),Wb&&o.addClass("vjs-touch-enabled"),Xb||o.addClass("vjs-workinghover"),t.players[o.id_]=Hm(o);var c=hb.split(".")[0];return o.addClass("vjs-v"+c),o.userActive(!0),o.reportUserActivity(),o.one("play",(function(e){return o.listenForUserActivity_(e)})),o.on("stageclick",(function(e){return o.handleStageClick_(e)})),o.on("keydown",(function(e){return o.handleKeyDown(e)})),o.on("languagechange",(function(e){return o.handleLanguagechange(e)})),o.breakpoints(o.options_.breakpoints),o.responsive(o.options_.responsive),o.on("ready",(function(){o.audioPosterMode(o.options_.audioPosterMode),o.audioOnlyMode(o.options_.audioOnlyMode)})),o}zm(t,e);var i=t.prototype;return i.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),G_(Bm(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),G_(Bm(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),dT[this.id()]=null,uT.names.forEach((function(e){var t=uT[e],n=i[t.getterName]();n&&n.off&&n.off()})),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},i.createEl=function(){var t,i=this.tag,n=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();n?t=this.el_=i.parentNode:r||(t=this.el_=e.prototype.createEl.call(this,"div"));var o=d_(i);if(r){for(t=this.el_=i,i=this.tag=Bm().createElement("video");t.children.length;)i.appendChild(t.firstChild);a_(t,"video-js")||l_(t,"video-js"),t.appendChild(i),n=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{i[e]=t[e]}catch(e){}}))}if(i.setAttribute("tabindex","-1"),o.tabindex="-1",(zb||Hb&&Vb)&&(i.setAttribute("role","application"),o.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach((function(e){r&&"class"===e||t.setAttribute(e,o[e]),r&&i.setAttribute(e,o[e])})),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=t.player=this,this.addClass("vjs-paused"),!0!==Mm().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=N_("vjs-styles-dimensions");var s=P_(".vjs-styles-defaults"),a=P_("head");a.insertBefore(this.styleEl_,s?s.nextSibling:a.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var l=i.getElementsByTagName("a"),u=0;u<l.length;u++){var c=l.item(u);l_(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!n&&i.parentNode.insertBefore(t,i),s_(i,t),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},i.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):wb.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},i.width=function(e){return this.dimension("width",e)},i.height=function(e){return this.dimension("height",e)},i.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t||"auto"===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?wb.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},i.fluid=function(e){var t,i,n=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,rw(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),i=function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)},rw(t=this)?i():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){if(!0!==Mm().VIDEOJS_NO_DYNAMIC_STYLE){var e,t,i,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=n[1]/n[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),B_(this.styleEl_,"\n      ."+i+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+i+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(o>=0&&(a.width=o),s>=0&&(a.height=s))}},i.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var n=mw(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(cT.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var o=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(o=!1);var s={source:t,autoplay:o,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};uT.names.forEach((function(e){var t=uT[e];s[t.getterName]=i[t.privateName]})),Cb(s,this.options_[n]),Cb(s,this.options_[r]),Cb(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);var a=cT.getTech(e);if(!a)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new a(s),this.tech_.ready(ew(this,this.handleTechReady_),!0),Ow(this.textTracksJson_||[],this.tech_),uE.forEach((function(e){i.on(i.tech_,e,(function(t){return i["handleTech"+mw(e)+"_"](t)}))})),Object.keys(cE).forEach((function(e){i.on(i.tech_,e,(function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+cE[e]+"_"].bind(i),event:t}):i["handleTech"+cE[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",(function(e){return i.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return i.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return i.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return i.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return i.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return i.handleTechPlay_(e)})),this.on(this.tech_,"firstplay",(function(e){return i.handleTechFirstPlay_(e)})),this.on(this.tech_,"pause",(function(e){return i.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return i.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return i.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscreenerror",(function(e,t){return i.handleTechFullscreenError_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return i.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return i.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return i.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return i.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return i.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return i.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||s_(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var e=this;uT.names.forEach((function(t){var i=uT[t];e[i.privateName]=e[i.getterName]()})),this.textTracksJson_=Dw(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(e){return void 0===e&&wb.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},i.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var i,n=function(){var e=t.muted();t.muted(!0);var i=function(){t.muted(e)};t.playTerminatedQueue_.push(i);var n=t.play();if(Aw(n))return n.catch((function(e){throw i(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))}))};if("any"!==e||this.muted()?i="muted"!==e||this.muted()?this.play():n():Aw(i=this.play())&&(i=i.catch(n)),Aw(i))return i.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(){t.trigger({type:"autoplay-failure",autoplay:e})}))}},i.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter((function(e){return e.src===t}));if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var o=n[r];if(o.type&&o.src&&o.src===t)return o.type}return TT(t)}(this,t)),this.cache_.source=vw({},e,{src:t,type:i});for(var n=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),r=[],o=this.$$("source"),s=[],a=0;a<o.length;a++){var l=d_(o[a]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},i.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var i=function(e){return t.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(i=function(){}),i(r),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var i=t.techGet("currentSrc");t.lastSource_.tech=i,t.updateSourceCaches_(i)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},i.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function i(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",i))}))},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(wb.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Iw(this.play()):this.pause()))},i.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var i=this.el(),n=Bm()[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}},i.handleTechFullscreenChange_=function(e,t){var i=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){i.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))},i.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},i.handleTechError_=function(){var e=this.tech_.error();this.error(e)},i.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},i.techCall_=function(e,t){this.ready((function(){if(e in vT)return function(e,t,i,n){return t[i](e.reduce(bT(i),n))}(this.middleware_,this.tech_,e,t);if(e in yT)return gT(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw wb(e),e}}),!0)},i.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in mT)return function(e,t,i){return e.reduceRight(bT(i),t[i]())}(this.middleware_,this.tech_,e);if(e in yT)return gT(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw wb("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw wb("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw wb(t),t}}},i.play=function(){var e=this,t=this.options_.Promise||Mm().Promise;return t?new t((function(t){e.play_(t)})):this.play_()},i.play_=function(e){var t=this;void 0===e&&(e=Iw),this.playCallbacks_.push(e);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),n=Boolean(Kb||Xb);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!i&&n&&this.load());var r=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)},i.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},i.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},i.pause=function(){this.techCall_("pause")},i.paused=function(){return!1!==this.techGet_("paused")},i.played=function(){return this.techGet_("played")||xw(0,0)},i.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=xw(0,0)),e},i.bufferedPercent=function(){return Cw(this.buffered(),this.duration())},i.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i},i.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},i.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},i.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},i.requestFullscreen=function(e){var t=this.options_.Promise||Mm().Promise;if(t){var i=this;return new t((function(t,n){function r(){i.off("fullscreenerror",s),i.off("fullscreenchange",o)}function o(){r(),t()}function s(e,t){r(),n(t)}i.one("fullscreenchange",o),i.one("fullscreenerror",s);var a=i.requestFullscreenHelper_(e);a&&(a.then(r,r),a.then(t,n))}))}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(e){var t,i=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then((function(){return i.isFullscreen(!0)}),(function(){return i.isFullscreen(!1)})),n}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var e=this.options_.Promise||Mm().Promise;if(e){var t=this;return new e((function(e,i){function n(){t.off("fullscreenerror",o),t.off("fullscreenchange",r)}function r(){n(),e()}function o(e,t){n(),i(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",o);var s=t.exitFullscreenHelper_();s&&(s.then(n,n),s.then(e,i))}))}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=Bm()[this.fsApi_.exitFullscreen]();return t&&Iw(t.then((function(){return e.isFullscreen(!1)}))),t}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Bm().documentElement.style.overflow,W_(Bm(),"keydown",this.boundFullWindowOnEscKey_),Bm().documentElement.style.overflow="hidden",l_(Bm().body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(e){$m().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,G_(Bm(),"keydown",this.boundFullWindowOnEscKey_),Bm().documentElement.style.overflow=this.docOrigOverflow,u_(Bm().body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Bm()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Bm())return Bm().exitPictureInPicture()},i.handleKeyDown=function(e){var t=this.options_.userActions;if(t&&t.hotkeys){(function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if("input"===t)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type);return-1!==["textarea"].indexOf(t)})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}},i.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},i=t.fullscreenKey,n=void 0===i?function(e){return $m().isEventKey(e,"f")}:i,r=t.muteKey,o=void 0===r?function(e){return $m().isEventKey(e,"m")}:r,s=t.playPauseKey,a=void 0===s?function(e){return $m().isEventKey(e,"k")||$m().isEventKey(e,"Space")}:s;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();var l=Tw.getComponent("FullscreenToggle");!1!==Bm()[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else if(o.call(this,e)){e.preventDefault(),e.stopPropagation(),Tw.getComponent("MuteToggle").prototype.handleClick.call(this,e)}else if(a.call(this,e)){e.preventDefault(),e.stopPropagation(),Tw.getComponent("PlayToggle").prototype.handleClick.call(this,e)}},i.canPlayType=function(e){for(var t,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],o=cT.getTech(r);if(o||(o=Tw.getComponent(r)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else wb.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},i.selectSource=function(e){var t,i,n=this,r=this.options_.techOrder.map((function(e){return[e,cT.getTech(e)]})).filter((function(e){var t=e[0],i=e[1];return i?i.isSupported():(wb.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),o=function(e,t,i){var n;return e.some((function(e){return t.some((function(t){if(n=i(e,t))return!0}))})),n},s=function(e,t){var i=e[0];if(e[1].canPlaySource(t,n.options_[i.toLowerCase()]))return{source:t,tech:i}};return t=this.options_.sourceOrder?o(e,r,(i=s,function(e,t){return i(t,e)})):o(r,e,s),t||!1},i.handleSrc_=function(e,t){var i=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var n=ST(e);if(n.length){if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),fT(this,n[0],(function(e,r){var o,s;if(i.middleware_=r,t||(i.cache_.sources=n),i.updateSourceCaches_(e),i.src_(e))return n.length>1?i.handleSrc_(n.slice(1)):(i.changingSrc_=!1,i.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void i.triggerReady());o=r,s=i.tech_,o.forEach((function(e){return e.setTech&&e.setTech(s)}))})),this.options_.retryOnError&&n.length>1){var r=function(){i.error(null),i.handleSrc_(n.slice(1),!0)},o=function(){i.off("error",r)};this.one("error",r),this.one("playing",o),this.resetRetryOnError_=function(){i.off("error",r),i.off("playing",o)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)},i.src=function(e){return this.handleSrc_(e,!1)},i.src_=function(e){var t,i,n=this,r=this.selectSource([e]);return!r||(t=r.tech,i=this.techName_,mw(t)!==mw(i)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){n.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1))},i.load=function(){this.techCall_("load")},i.reset=function(){var e=this,t=this.options_.Promise||Mm().Promise;this.paused()||!t?this.doReset_():Iw(this.play().then((function(){return e.doReset_()})))},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),rw(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,i=e.remainingTimeDisplay;t&&t.updateContent(),i&&i.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},i.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},i.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},i.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},i.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(pb("beforeerror").forEach((function(i){var n=i(t,e);kb(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:t.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){var i=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),void this.one("loadstart",(function(){this.off(["click","touchstart"],i)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new kw(e),this.addClass("vjs-error"),wb.error("(CODE:"+this.error_.code+" "+kw.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),pb("error").forEach((function(e){return e(t,t.error_)}))},i.reportUserActivity=function(e){this.userActivity_=!0},i.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){var e,t,i,n=ew(this,this.reportUserActivity),r=function(t){n(),this.clearInterval(e)};this.on("mousedown",(function(){n(),this.clearInterval(e),e=this.setInterval(n,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===i||(t=e.screenX,i=e.screenY,n())})),this.on("mouseup",r),this.on("mouseleave",r);var o,s=this.getChild("controlBar");!s||Xb||Nb||(s.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),s.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",n),this.on("keyup",n),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},i.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},i.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},i.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),i=this.getChild("ControlBar"),n=i&&i.currentHeight();t.forEach((function(t){t!==i&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(n),this.trigger("audioonlymodechange")},i.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(e){return e.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},i.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var i=this.options_.Promise||Mm().Promise;if(i){if(e){var n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),i.all(n).then((function(){return t.enableAudioOnlyUI_()}))}return i.resolve().then((function(){return t.disableAudioOnlyUI_()}))}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},i.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var i=this.options_.Promise||Mm().Promise;return i?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){t.enablePosterModeUI_()})):i.resolve().then((function(){t.enablePosterModeUI_()})):i.resolve().then((function(){t.disablePosterModeUI_()})):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},i.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},i.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},i.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),rw(this)&&this.trigger("languagechange"))},i.languages=function(){return vw(t.prototype.options_.languages,this.languages_)},i.toJSON=function(){var e=vw(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=vw(n)).player=void 0,e.tracks[i]=n}return e},i.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var n=new Mw(this,t);return this.addChild(n),n.on("dispose",(function(){i.removeChild(n)})),n.open(),n},i.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<hE.length;i++){var n=hE[i];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(dE[e]),this.addClass(dE[n]),this.breakpoint_=n;break}}},i.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},i.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Cb({},pE,e),this.updateCurrentBreakpoint_()),Cb(this.breakpoints_)},i.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return dE[this.breakpoint_]||""},i.loadMedia=function(e,t){var i=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=vw(e);var n=this.cache_.media,r=n.artwork,o=n.poster,s=n.src,a=n.textTracks;!r&&o&&(this.cache_.media.artwork=[{src:o,type:TT(o)}]),s&&this.src(s),o&&this.poster(o),Array.isArray(a)&&a.forEach((function(e){return i.addRemoteTextTrack(e,!1)})),this.ready(t)}},i.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:TT(t.poster)}]),t}return vw(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},i=d_(e),n=i["data-setup"];if(a_(e,"vjs-fill")&&(i.fill=!0),a_(e,"vjs-fluid")&&(i.fluid=!0),null!==n){var r=Vm()(n||"{}"),o=r[0],s=r[1];o&&wb.error(o),Cb(i,s)}if(Cb(t,i),e.hasChildNodes())for(var a=e.childNodes,l=0,u=a.length;l<u;l++){var c=a[l],h=c.nodeName.toLowerCase();"source"===h?t.sources.push(d_(c)):"track"===h&&t.tracks.push(d_(c))}return t},i.flexNotSupported_=function(){var e=Bm().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},i.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},i.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"==typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(Tw);uT.names.forEach((function(e){var t=uT[e];fE.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),fE.prototype.crossorigin=fE.prototype.crossOrigin,fE.players={};var gE=Mm().navigator;fE.prototype.options_={techOrder:cT.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:gE&&(gE.languages&&gE.languages[0]||gE.userLanguage||gE.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){fE.prototype[e]=function(){return this.techGet_(e)}})),uE.forEach((function(e){fE.prototype["handleTech"+mw(e)+"_"]=function(){return this.trigger(e)}})),Tw.registerComponent("Player",fE);var mE="plugin",vE="activePlugins_",yE={},bE=function(e){return yE.hasOwnProperty(e)},_E=function(e){return bE(e)?yE[e]:void 0},wE=function(e,t){e[vE]=e[vE]||{},e[vE][t]=!0},TE=function(e,t,i){var n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},SE=function(e,t){return t.prototype.name=e,function(){TE(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=Qm(t,[this].concat(n));return this[e]=function(){return o},TE(this,o.getEventHash()),o}},EE=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),dw(this),delete this.trigger,fw(this,this.constructor.defaultState),wE(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),Y_(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[vE][e]=!1,this.player=this.state=null,t[e]=SE(e,yE[e])},e.isBasic=function(t){var i="string"==typeof t?_E(t):t;return"function"==typeof i&&!e.prototype.isPrototypeOf(i.prototype)},e.registerPlugin=function(t,i){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(bE(t))wb.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(fE.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof i+".");return yE[t]=i,t!==mE&&(e.isBasic(i)?fE.prototype[t]=function(e,t){var i=function(){TE(this,{name:e,plugin:t,instance:null},!0);var i=t.apply(this,arguments);return wE(this,e),TE(this,{name:e,plugin:t,instance:i}),i};return Object.keys(t).forEach((function(e){i[e]=t[e]})),i}(t,i):fE.prototype[t]=SE(t,i)),i},e.deregisterPlugin=function(e){if(e===mE)throw new Error("Cannot de-register base plugin.");bE(e)&&(delete yE[e],delete fE.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(yE)),e.forEach((function(e){var i=_E(e);i&&((t=t||{})[e]=i)})),t},e.getPluginVersion=function(e){var t=_E(e);return t&&t.VERSION||""},e}();EE.getPlugin=_E,EE.BASE_PLUGIN_NAME=mE,EE.registerPlugin(mE,EE),fE.prototype.usingPlugin=function(e){return!!this[vE]&&!0===this[vE][e]},fE.prototype.hasPlugin=function(e){return!!bE(e)};var xE=!1,CE=function(e){return 0===e.indexOf("#")?e.slice(1):e};function kE(e,t,i){var n=kE.getPlayer(e);if(n)return t&&wb.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&n.ready(i),n;var r="string"==typeof e?P_("#"+CE(e)):e;if(!t_(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||wb.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),pb("beforesetup").forEach((function(e){var i=e(r,vw(t));kb(i)&&!Array.isArray(i)?t=vw(t,i):wb.error("please return an object in beforesetup hooks")}));var o=Tw.getComponent("Player");return n=new o(r,t,i),pb("setup").forEach((function(e){return e(n)})),n}if(kE.hooks_=db,kE.hooks=pb,kE.hook=function(e,t){pb(e,t)},kE.hookOnce=function(e,t){pb(e,[].concat(t).map((function(t){return function i(){return fb(e,i),t.apply(void 0,arguments)}})))},kE.removeHook=fb,!0!==Mm().VIDEOJS_NO_DYNAMIC_STYLE&&e_()){var PE=P_(".vjs-styles-defaults");if(!PE){PE=N_("vjs-styles-defaults");var AE=P_("head");AE&&AE.insertBefore(PE,AE.firstChild),B_(PE,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}O_(1,kE),kE.VERSION=hb,kE.options=fE.prototype.options_,kE.getPlayers=function(){return fE.players},kE.getPlayer=function(e){var t,i=fE.players;if("string"==typeof e){var n=CE(e),r=i[n];if(r)return r;t=P_("#"+n)}else t=e;if(t_(t)){var o=t,s=o.player,a=o.playerId;if(s||i[a])return s||i[a]}},kE.getAllPlayers=function(){return Object.keys(fE.players).map((function(e){return fE.players[e]})).filter(Boolean)},kE.players=fE.players,kE.getComponent=Tw.getComponent,kE.registerComponent=function(e,t){cT.isTech(t)&&wb.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Tw.registerComponent.call(Tw,e,t)},kE.getTech=cT.getTech,kE.registerTech=cT.registerTech,kE.use=function(e,t){hT[e]=hT[e]||[],hT[e].push(t)},Object.defineProperty(kE,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(kE.middleware,"TERMINATOR",{value:pT,writeable:!1,enumerable:!0}),kE.browser=Qb,kE.TOUCH_ENABLED=Wb,kE.extend=function(e,t){void 0===t&&(t={}),xE||(wb.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),xE=!0);var i=function(){e.apply(this,arguments)},n={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),n=t):"function"==typeof t&&(i=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jm(e,t)}(i,e),e&&(i.super_=e),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},kE.mergeOptions=vw,kE.bind=ew,kE.registerPlugin=EE.registerPlugin,kE.deregisterPlugin=EE.deregisterPlugin,kE.plugin=function(e,t){return wb.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),EE.registerPlugin(e,t)},kE.getPlugins=EE.getPlugins,kE.getPlugin=EE.getPlugin,kE.getPluginVersion=EE.getPluginVersion,kE.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),kE.options.languages=vw(kE.options.languages,((i={})[e]=t,i)),kE.options.languages[e]},kE.log=wb,kE.createLogger=Tb,kE.createTimeRange=kE.createTimeRanges=xw,kE.formatTime=$T,kE.setFormatTime=function(e){UT=e},kE.resetFormatTime=function(){UT=FT},kE.parseUrl=Kw,kE.isCrossOrigin=Jw,kE.EventTarget=iw,kE.on=W_,kE.one=X_,kE.off=G_,kE.trigger=Y_,kE.xhr=Gm(),kE.TextTrack=nT,kE.AudioTrack=rT,kE.VideoTrack=oT,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){kE[e]=function(){return wb.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),I_[e].apply(null,arguments)}})),kE.computedStyle=Ab,kE.dom=I_,kE.url=eT,kE.defineLazyProperty=aE,kE.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var IE=tv,LE=function(e,t,i){return e&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t},DE=function(e){return kE.log.debug?kE.log.debug.bind(kE,"VHS:",e+" >"):function(){}},OE=1/30,RE=.1,ME=function(e,t){var i,n=[];if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return kE.createTimeRanges(n)},NE=function(e,t){return ME(e,(function(e,i){return e-RE<=t&&i+RE>=t}))},BE=function(e,t){return ME(e,(function(e){return e-OE>=t}))},FE=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},UE=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},$E=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},HE=function(e,t){var i=0;if(!e||!e.length)return i;for(var n=0;n<e.length;n++){var r=e.start(n),o=e.end(n);t>o||(i+=t>r&&t<=o?o-t:o-r)}return i},jE=kE.createTimeRange,zE=function(e,t){if(!t.preload)return t.duration;var i=0;return(t.parts||[]).forEach((function(e){i+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(i+=e.partTargetDuration)})),i},qE=function(e){return(e.segments||[]).reduce((function(e,t,i){return t.parts?t.parts.forEach((function(n,r){e.push({duration:n.duration,segmentIndex:i,partIndex:r,part:n,segment:t})})):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e}),[])},VE=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},WE=function(e){var t=e.preloadSegment;if(t){var i=t.parts,n=(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0);return n+=i&&i.length?i.length:0}},GE=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var i=VE(t).length>0;return i&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:i&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},YE=function(e,t,i){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var n=function(e,t){var i=0,n=t-e.mediaSequence,r=e.segments[n];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(void 0!==(r=e.segments[n]).end)return{result:i+r.end,precise:!0};if(i+=zE(e,r),void 0!==r.start)return{result:i+r.start,precise:!0}}return{result:i,precise:!1}}(e,t);if(n.precise)return n.result;var r=function(e,t){for(var i,n=0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=zE(e,i),void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:n.result+i},XE=function(e,t,i){if(!e)return 0;if("number"!=typeof i&&(i=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Mm()[1/0]}return YE(e,t,i)},KE=function(e){var t=e.defaultDuration,i=e.durationList,n=e.startIndex,r=e.endIndex,o=0;if(n>r){var s=[r,n];n=s[0],r=s[1]}if(n<0){for(var a=n;a<Math.min(0,r);a++)o+=t;n=0}for(var l=n;l<r;l++)o+=i[l].duration;return o},QE=function(e,t,i,n){if(!e||!e.segments)return null;if(e.endList)return XE(e);if(null===t)return null;t=t||0;var r=YE(e,e.mediaSequence+e.segments.length,t);return i&&(r-=n="number"==typeof n?n:GE(null,e)),Math.max(0,r)},ZE=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},JE=function(e){return e.excludeUntil&&e.excludeUntil===1/0},ex=function(e){var t=ZE(e);return!e.disabled&&!t},tx=function(e,t){return t.attributes&&t.attributes[e]},ix=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!ex(e)&&(e.attributes.BANDWIDTH||0)<i})).length},nx=function(e,t){return!(!e&&!t||!e&&t||e&&!t)&&(e===t||(!(!e.id||!t.id||e.id!==t.id)||(!(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)||!(!e.uri||!t.uri||e.uri!==t.uri))))},rx=function(e,t){var i=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},n=!1;for(var r in i){for(var o in i[r])if(n=t(i[r][o]))break;if(n)break}return!!n},ox=function(e){if(!e||!e.playlists||!e.playlists.length)return rx(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(t){var i=e.playlists[t],n=i.attributes&&i.attributes.CODECS;return n&&n.split(",").every((function(e){return wv(e)}))||rx(e,(function(e){return nx(i,e)}))?"continue":{v:!1}},i=0;i<e.playlists.length;i++){var n=t(i);if("continue"!==n&&"object"==typeof n)return n.v}return!0},sx={liveEdgeDelay:GE,duration:XE,seekable:function(e,t,i){var n=t||0,r=QE(e,t,!0,i);return null===r?jE():jE(n,r)},getMediaInfoForTime:function(e){for(var t=e.playlist,i=e.currentTime,n=e.startingSegmentIndex,r=e.startingPartIndex,o=e.startTime,s=e.experimentalExactManifestTimings,a=i-o,l=qE(t),u=0,c=0;c<l.length;c++){var h=l[c];if(n===h.segmentIndex&&("number"!=typeof r||"number"!=typeof h.partIndex||r===h.partIndex)){u=c;break}}if(a<0){if(u>0)for(var d=u-1;d>=0;d--){var p=l[d];if(a+=p.duration,s){if(a<0)continue}else if(a+OE<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:o-KE({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:d})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i}}if(u<0){for(var f=u;f<0;f++)if((a-=t.targetDuration)<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i};u=0}for(var g=u;g<l.length;g++){var m=l[g];if(a-=m.duration,s){if(a>0)continue}else if(a-OE>=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:o+KE({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:g})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:i}},isEnabled:ex,isDisabled:function(e){return e.disabled},isBlacklisted:ZE,isIncompatible:JE,playlistEnd:QE,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:tx,estimateSegmentRequestTime:function(e,t,i,n){return void 0===n&&(n=0),tx("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*n)/t:NaN},isLowestEnabledRendition:ix,isAudioOnly:ox,playlistMatch:nx,segmentDurationWithParts:zE},ax=kE.log,lx=function(e,t){return e+"-"+t},ux=function(e,t,i){return"placeholder-uri-"+e+"-"+t+"-"+i},cx=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(i){if(e.mediaGroups[i])for(var n in e.mediaGroups[i])for(var r in e.mediaGroups[i][n]){var o=e.mediaGroups[i][n][r];t(o,i,n,r)}}))},hx=function(e){var t=e.playlist,i=e.uri,n=e.id;t.id=n,t.playlistErrors_=0,i&&(t.uri=i),t.attributes=t.attributes||{}},dx=function(e,t,i){void 0===i&&(i=ux),e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var r="placeholder-uri-"+n;e.playlists[n].uri=r}var o=ox(e);cx(e,(function(t,n,r,s){if(!t.playlists||!t.playlists.length){if(o&&"AUDIO"===n&&!t.uri)for(var a=0;a<e.playlists.length;a++){var l=e.playlists[a];if(l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===r)return}t.playlists=[Fm({},t)]}t.playlists.forEach((function(t,o){var a=i(n,r,s,t),l=lx(o,a);t.uri?t.resolvedUri=t.resolvedUri||IE(e.uri,t.uri):(t.uri=0===o?a:l,t.resolvedUri=t.uri),t.id=t.id||l,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];hx({playlist:i,id:lx(t,i.uri)}),i.resolvedUri=IE(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||ax.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){cx(e,(function(t){t.uri&&(t.resolvedUri=IE(e.uri,t.uri))}))}(e)},px=kE.mergeOptions,fx=kE.EventTarget,gx=function(e,t){if(!e)return t;var i=px(e,t);if(e.preloadHints&&!t.preloadHints&&delete i.preloadHints,e.parts&&!t.parts)delete i.parts;else if(e.parts&&t.parts)for(var n=0;n<t.parts.length;n++)e.parts&&e.parts[n]&&(i.parts[n]=px(e.parts[n],t.parts[n]));return!e.skipped&&t.skipped&&(i.skipped=!1),e.preload&&!t.preload&&(i.preload=!1),i},mx=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=IE(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=IE(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=IE(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=IE(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=IE(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=IE(t,e.uri))}))},vx=function(e){var t=e.segments||[],i=e.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(var n=0;n<i.preloadHints.length;n++)if("MAP"===i.preloadHints[n].type)return t;i.duration=e.targetDuration,i.preload=!0,t.push(i)}return t},yx=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},bx=function(e,t,i){void 0===i&&(i=yx);var n=px(e,{}),r=n.playlists[t.id];if(!r)return null;if(i(r,t))return null;t.segments=vx(t);var o=px(r,t);if(o.preloadSegment&&!t.preloadSegment&&delete o.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(var s=0;s<t.skip.skippedSegments;s++)t.segments.unshift({skipped:!0})}o.segments=function(e,t,i){var n=e.slice(),r=t.slice();i=i||0;for(var o,s=[],a=0;a<r.length;a++){var l=n[a+i],u=r[a];l?(o=l.map||o,s.push(gx(l,u))):(o&&!u.map&&(u.map=o),s.push(u))}return s}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}o.segments.forEach((function(e){mx(e,o.resolvedUri)}));for(var a=0;a<n.playlists.length;a++)n.playlists[a].id===t.id&&(n.playlists[a]=o);return n.playlists[t.id]=o,n.playlists[t.uri]=o,cx(e,(function(e,i,n,r){if(e.playlists)for(var s=0;s<e.playlists.length;s++)t.id===e.playlists[s].id&&(e.playlists[s]=o)})),n},_x=function(e,t){var i=e.segments||[],n=i[i.length-1],r=n&&n.parts&&n.parts[n.parts.length-1],o=r&&r.duration||n&&n.duration;return t&&o?1e3*o:500*(e.partTargetDuration||e.targetDuration||10)},wx=function(e){function t(t,i,n){var r;if(void 0===n&&(n={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");r.logger_=DE("PlaylistLoader");var o=n,s=o.withCredentials,a=void 0!==s&&s,l=o.handleManifestRedirects,u=void 0!==l&&l;r.src=t,r.vhs_=i,r.withCredentials=a,r.handleManifestRedirects=u;var c=i.options_;return r.customTagParsers=c&&c.customTagParsers||[],r.customTagMappers=c&&c.customTagMappers||[],r.experimentalLLHLS=c&&c.experimentalLLHLS||!1,kE.browser.IE_VERSION&&(r.experimentalLLHLS=!1),r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind(Hm(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}zm(t,e);var i=t.prototype;return i.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),i=IE(this.master.uri,t.uri);this.experimentalLLHLS&&(i=function(e,t){if(t.endList||!t.serverControl)return e;var i={};if(t.serverControl.canBlockReload){var n=t.preloadSegment,r=t.mediaSequence+t.segments.length;if(n){var o=n.parts||[],s=WE(t)-1;s>-1&&s!==o.length-1&&(i._HLS_part=s),(s>-1||o.length)&&r--}i._HLS_msn=r}if(t.serverControl&&t.serverControl.canSkipUntil&&(i._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){var a=new(Mm().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){i.hasOwnProperty(e)&&a.searchParams.set(e,i[e])})),e=a.toString()}return e}(i,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials},(function(t,i){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}},i.playlistRequestError=function(e,t,i){var n=t.uri,r=t.id;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},i.parseManifest_=function(e){var t=this,i=e.url;return function(e){var t=e.onwarn,i=e.oninfo,n=e.manifestString,r=e.customTagParsers,o=void 0===r?[]:r,s=e.customTagMappers,a=void 0===s?[]:s,l=e.experimentalLLHLS,u=new gv;t&&u.on("warn",t),i&&u.on("info",i),o.forEach((function(e){return u.addParser(e)})),a.forEach((function(e){return u.addTagMapper(e)})),u.push(n),u.end();var c=u.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){c.hasOwnProperty(e)&&delete c[e]})),c.segments&&c.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!c.targetDuration){var h=10;c.segments&&c.segments.length&&(h=c.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+h),c.targetDuration=h}var d=VE(c);if(d.length&&!c.partTargetDuration){var p=d.reduce((function(e,t){return Math.max(e,t.duration)}),0);t&&(t("manifest has no partTargetDuration defaulting to "+p),ax.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=p}return c}({onwarn:function(e){var n=e.message;return t.logger_("m3u8-parser warn for "+i+": "+n)},oninfo:function(e){var n=e.message;return t.logger_("m3u8-parser info for "+i+": "+n)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},i.haveMetadata=function(e){var t=e.playlistString,i=e.playlistObject,n=e.url,r=e.id;this.request=null,this.state="HAVE_METADATA";var o=i||this.parseManifest_({url:n,manifestString:t});o.lastRequest=Date.now(),hx({playlist:o,uri:n,id:r});var s=bx(this.master,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,s?(this.master=s,this.media_=this.master.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(_x(this.media(),!!s)),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),Mm().clearTimeout(this.mediaUpdateTimeout),Mm().clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e,t){var i=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(Mm().clearTimeout(this.finalRenditionTimeout),t){var n=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Mm().setTimeout(this.media.bind(this,e,!1),n)}else{var r=this.state,o=!this.media_||e.id!==this.media_.id,s=this.master.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(o&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(_x(e,!0)),o){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,n){if(i.request){if(e.lastRequest=Date.now(),e.resolvedUri=LE(i.handleManifestRedirects,e.resolvedUri,n),t)return i.playlistRequestError(i.request,e,r);i.haveMetadata({playlistString:n.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}}))}}},i.pause=function(){this.mediaUpdateTimeout&&(Mm().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},i.load=function(e){var t=this;this.mediaUpdateTimeout&&(Mm().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var i=this.media();if(e){var n=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Mm().setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},i.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(Mm().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Mm().setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))},i.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Mm().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=LE(e.handleManifestRedirects,e.src,i);var n=e.parseManifest_({manifestString:i.responseText,url:e.src});e.setupInitialPlaylist(n)}}))},i.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},i.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,dx(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=vx(e),e.segments.forEach((function(t){mx(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||Mm().location.href;this.master=function(e,t){var i=lx(0,t),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Mm().location.href,resolvedUri:Mm().location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[t]=n.playlists[0],n}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(fx),Tx=kE.xhr,Sx=kE.mergeOptions,Ex=function(e,t,i,n){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),n(t,e)},xx=function(){var e=function e(t,i){t=Sx({timeout:45e3},t);var n=e.beforeRequest||kE.Vhs.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(t);r&&(t=r)}var o=(!0===kE.Vhs.xhr.original?Tx:kE.Vhs.xhr)(t,(function(e,t){return Ex(o,e,t,i)})),s=o.abort;return o.abort=function(){return o.aborted=!0,s.apply(o,arguments)},o.uri=t.uri,o.requestTime=Date.now(),o};return e.original=!0,e},Cx=function(e){var t,i={};return e.byterange&&(i.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?Mm().BigInt(t.offset)+Mm().BigInt(t.length)-Mm().BigInt(1):t.offset+t.length-1)),i},kx=function(e,t){return e.start(t)+"-"+e.end(t)},Px=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},Ax=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Ix=function(e){var t={};return Object.keys(e).forEach((function(i){var n=e[i];Av(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n})),t},Lx=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Dx=function(e){return e.resolvedUri},Ox=function(e){for(var t=Array.prototype.slice.call(e),i=16,n="",r=0;r<t.length/i;r++)n+=t.slice(r*i,r*i+i).map(Px).join("")+" "+t.slice(r*i,r*i+i).map(Ax).join("")+"\n";return n},Rx=Object.freeze({__proto__:null,createTransferableMessage:Ix,initSegmentId:Lx,segmentKeyId:Dx,hexDump:Ox,tagDump:function(e){var t=e.bytes;return Ox(t)},textRanges:function(e){var t,i="";for(t=0;t<e.length;t++)i+=kx(e,t)+" ";return i}}),Mx=function(e){var t=e.playlist,i=e.time,n=void 0===i?void 0:i,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var o=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i,n=0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var o=t.segments[t.segments.length-1];if(o.videoTimingInfo&&o.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+.25*o.duration)return null;i=o}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(n,t);if(!o)return r({message:"valid programTime was not found"});if("estimate"===o.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});var s={mediaSeconds:n},a=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);return new Date(t.dateTimeObject.getTime()+1e3*n)}(n,o.segment);return a&&(s.programDateTime=a.toISOString()),r(null,s)},Nx=function e(t){var i=t.programTime,n=t.playlist,r=t.retryCount,o=void 0===r?2:r,s=t.seekTo,a=t.pauseAfterSeek,l=void 0===a||a,u=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===i||!n||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return c({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=function(e,t){var i;try{i=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(n=t.segments[r],!(i<t.segments[r+1].dateTimeObject));r++);var o,s=t.segments[t.segments.length-1],a=s.dateTimeObject,l=s.videoTimingInfo?(o=s.videoTimingInfo).transmuxedPresentationEnd-o.transmuxedPresentationStart-o.transmuxerPrependedSeconds:s.duration+.25*s.duration;return i>new Date(a.getTime()+1e3*l)?null:(i>a&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:sx.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(i,n);if(!h)return c({message:i+" was not found in the stream"});var d=h.segment,p=function(e,t){var i,n;try{i=new Date(e),n=new Date(t)}catch(e){}var r=i.getTime();return(n.getTime()-r)/1e3}(d.dateTimeObject,i);if("estimate"===h.type)return 0===o?c({message:i+" is not buffered yet. Try again"}):(s(h.estimatedStart+p),void u.one("seeked",(function(){e({programTime:i,playlist:n,retryCount:o-1,seekTo:s,pauseAfterSeek:l,tech:u,callback:c})})));var f=d.start+p;u.one("seeked",(function(){return c(null,u.currentTime())})),l&&u.pause(),s(f)},Bx=function(e,t){if(4===e.readyState)return t()},Fx=function(e,t,i){var n,r=[],o=!1,s=function(e,t,n,r){return t.abort(),o=!0,i(e,t,n,r)},a=function(e,t){if(!o){if(e)return s(e,t,"",r);var i=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})),t.length<=1)return Iv(t[0]);var n=t.reduce((function(e,t,i){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(n),o=0;return t.forEach((function(e){e=Iv(e),r.set(e,o),o+=e.byteLength})),r}(r,Mv(i,!0)),n=n||Hy(r),r.length<10||n&&r.length<n+2)return Bx(t,(function(){return s(e,t,"",r)}));var a=sb(r);return"ts"===a&&r.length<188||!a&&r.length<376?Bx(t,(function(){return s(e,t,"",r)})):s(null,t,a,r)}},l={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,Ex(e,null,{statusCode:e.status},a)}))}},u=t(l,(function(e,t){return Ex(u,e,t,a)}));return u},Ux=kE.EventTarget,$x=kE.mergeOptions,Hx=function(e,t){if(!yx(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var i=0;i<e.segments.length;i++){var n=e.segments[i],r=t.segments[i];if(n.uri!==r.uri)return!1;if(n.byterange||r.byterange){var o=n.byterange,s=r.byterange;if(o&&!s||!o&&s)return!1;if(o.offset!==s.offset||o.length!==s.length)return!1}}return!0},jx=function(e,t,i,n){return"placeholder-uri-"+e+"-"+t+"-"+(n.attributes.NAME||i)},zx=function(e,t,i){for(var n=!0,r=$x(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),o=0;o<t.playlists.length;o++){var s=t.playlists[o];if(s.sidx){var a=ly(s.sidx);i&&i[a]&&i[a].sidx&&ty(s,i[a].sidx,s.sidx.resolvedUri)}var l=bx(r,s,Hx);l&&(r=l,n=!1)}return cx(t,(function(e,t,i,o){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,a=bx(r,e.playlists[0],Hx);a&&(o in(r=a).mediaGroups[t][i]||(r.mediaGroups[t][i][o]=e),r.mediaGroups[t][i][o].playlists[0]=r.playlists[s],n=!1)}})),function(e,t){cx(e,(function(i,n,r,o){o in t.mediaGroups[n][r]||delete e.mediaGroups[n][r][o]}))}(r,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(n=!1),n?null:r},qx=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Vx=function(e,t){var i={};for(var n in e){var r=e[n].sidx;if(r){var o=ly(r);if(!t[o])break;var s=t[o].sidxInfo;qx(s,r)&&(i[o]=t[o])}}return i},Wx=function(e){function t(t,i,n,r){var o;void 0===n&&(n={}),(o=e.call(this)||this).masterPlaylistLoader_=r||Hm(o),r||(o.isMaster_=!0);var s=n,a=s.withCredentials,l=void 0!==a&&a,u=s.handleManifestRedirects,c=void 0!==u&&u;if(o.vhs_=i,o.withCredentials=l,o.handleManifestRedirects=c,!t)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",(function(){o.refreshXml_()})),o.on("mediaupdatetimeout",(function(){o.refreshMedia_(o.media().id)})),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=DE("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=t,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=t,o}zm(t,e);var i=t.prototype;return i.requestErrored_=function(e,t,i){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,i&&(this.state=i),this.trigger("error"),!0):void 0)},i.addSidxSegments_=function(e,t,i){var n=this,r=e.sidx&&ly(e.sidx);if(e.sidx&&r&&!this.masterPlaylistLoader_.sidxMapping_[r]){var o=LE(this.handleManifestRedirects,e.sidx.resolvedUri),s=function(o,s){if(!n.requestErrored_(o,s,t)){var a,l=n.masterPlaylistLoader_.sidxMapping_;try{a=Uy()(Iv(s.response).subarray(8))}catch(e){return void n.requestErrored_(e,s,t)}return l[r]={sidxInfo:e.sidx,sidx:a},ty(e,a,e.sidx.resolvedUri),i(!0)}};this.request=Fx(o,this.vhs_.xhr,(function(t,i,r,a){if(t)return s(t,i);if(!r||"mp4"!==r)return s({status:i.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+o,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},i);var l=e.sidx.byterange,u=l.offset,c=l.length;if(a.length>=c+u)return s(t,{response:a.subarray(u,u+c),status:i.status,uri:i.uri});n.request=n.vhs_.xhr({uri:o,responseType:"arraybuffer",headers:Cx({byterange:e.sidx.byterange})},s)}))}else this.mediaRequest_=Mm().setTimeout((function(){return i(!1)}),0)},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Mm().clearTimeout(this.minimumUpdatePeriodTimeout_),Mm().clearTimeout(this.mediaRequest_),Mm().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,i,(function(n){t.haveMetadata({startingState:i,playlist:e})})))},i.haveMetadata=function(e){var t=e.startingState,i=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Mm().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Mm().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},i.load=function(e){var t=this;Mm().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var i=this.media();if(e){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Mm().setTimeout((function(){return t.load()}),n)}else this.started?i&&!i.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},i.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,i){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=Mm().setTimeout((function(){return e.haveMaster_()}),0)},i.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(i,n){if(!t.requestErrored_(i,n)){var r=n.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?t.masterLoaded_=Date.parse(n.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=LE(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,n),r?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(n,r)}))):e(n,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},i.syncClientServerClock_=function(e){var t=this,i=By(this.masterPlaylistLoader_.masterXml_);return null===i?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===i.method?(this.masterPlaylistLoader_.clientOffset_=i.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:IE(this.masterPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},(function(n,r){if(t.request){if(n)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var o;o="HEAD"===i.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.masterPlaylistLoader_.clientOffset_=o-Date.now(),e()}})))},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var e,t,i,n,r,o,s,a=this.masterPlaylistLoader_.master,l=(e={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:a},t=e.masterXml,i=e.srcUrl,n=e.clientOffset,r=e.sidxMapping,o=e.previousManifest,s=Ny(t,{manifestUri:i,clientOffset:n,sidxMapping:r,previousManifest:o}),dx(s,i,jx),s);a&&(l=zx(a,l,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=l||a;var u=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return u&&u!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=u),(!a||l&&l.minimumUpdatePeriod!==a.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(l)},i.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Mm().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},i.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Mm().setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},i.refreshXml_=function(){var e=this;this.requestMaster_((function(t,i){var n,r,o;i&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(n=e.masterPlaylistLoader_.master,r=e.masterPlaylistLoader_.sidxMapping_,o=Vx(n.playlists,r),cx(n,(function(e,t,i,n){if(e.playlists&&e.playlists.length){var s=e.playlists;o=$x(o,Vx(s,r))}})),o),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},i.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,n=!this.media_||this.media_!==i[e];if(n?this.media_=i[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){!function e(){t.media().endList||(t.mediaUpdateTimeout=Mm().setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),_x(t.media(),Boolean(n))))}()}this.trigger("loadedplaylist")},t}(Ux),Gx={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Yx=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Xx=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(i){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),i=Yx(new Worker(t));i.objURL=t;var n=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(t),n.call(this)},i}},Kx=function(e){return"var browserWorkerPolyFill = "+Yx.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},Qx=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Zx=Kx(Qx((function(){var e=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,r,o;if(i=e[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(o=[],n=arguments.length,n=1;n<arguments.length;++n)o.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,o)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,i,r,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,_,w,T,S,E,x,C,k,P,A,I,L,D,O,R,M,N,B,F,U,$,H,j=e,z=Math.pow(2,32),q={getUint64:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.getBigUint64?(t=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:i.getUint32(0)*z+i.getUint32(4)},MAX_UINT32:z},V=q.MAX_UINT32;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);E=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),x=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:k,audio:P},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),O=new Uint8Array([0,0,0,0,0,0,0,0]),R=O,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=O,I=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,i,n=[],r=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)r+=n[t].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,r=8;t<n.length;t++)i.set(n[t],r),r+=n[t].byteLength;return i},i=function(){return t(S.dinf,t(S.dref,D))},r=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function(e){return t(S.hdlr,A[e])},g=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(i[12]=e.samplerate>>>24&255,i[13]=e.samplerate>>>16&255,i[14]=e.samplerate>>>8&255,i[15]=255&e.samplerate),t(S.mdhd,i)},f=function(e){return t(S.mdia,g(e),m(e.type),a(e))},s=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},a=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,I):t(S.smhd,L),i(),y(e))},l=function(e,i){for(var n=[],r=i.length;r--;)n[r]=_(i[r]);return t.apply(null,[S.moof,s(e)].concat(n))},u=function(e){for(var i=e.length,n=[];i--;)n[i]=d(e[i]);return t.apply(null,[S.moov,h(4294967295)].concat(n).concat(c(e)))},c=function(e){for(var i=e.length,n=[];i--;)n[i]=w(e[i]);return t.apply(null,[S.mvex].concat(n))},h=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,i)},v=function(e){var i,n,r=e.samples||[],o=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,o[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t(S.sdtp,o)},y=function(e){return t(S.stbl,b(e),t(S.stts,N),t(S.stsc,R),t(S.stsz,M),t(S.stco,O))},b=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?B(e):F(e))},B=function(e){var i,n,r=e.sps||[],o=e.pps||[],s=[],a=[];for(i=0;i<r.length;i++)s.push((65280&r[i].byteLength)>>>8),s.push(255&r[i].byteLength),s=s.concat(Array.prototype.slice.call(r[i]));for(i=0;i<o.length;i++)a.push((65280&o[i].byteLength)>>>8),a.push(255&o[i].byteLength),a=a.concat(Array.prototype.slice.call(o[i]));if(n=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],s,[o.length],a))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];n.push(t(S.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return t.apply(null,n)},F=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},p=function(e){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,i)},_=function(e){var i,n,r,o,s,a;return i=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/V),a=Math.floor(e.baseMediaDecodeTime%V),n=t(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),"audio"===e.type?(r=T(e,92),t(S.traf,i,n,r)):(o=v(e),r=T(e,o.length+92),t(S.traf,i,n,r,o))},d=function(e){return e.duration=e.duration||4294967295,t(S.trak,p(e),f(e))},w=function(e){var i=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(i[i.length-1]=0),t(S.trex,i)},H=function(e,t){var i=0,n=0,r=0,o=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,i|n|r|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},$=function(e,i){var n,r,o,s,a,l;for(i+=20+16*(s=e.samples||[]).length,o=H(s,i),(r=new Uint8Array(o.length+16*s.length)).set(o),n=o.length,l=0;l<s.length;l++)a=s[l],r[n++]=(4278190080&a.duration)>>>24,r[n++]=(16711680&a.duration)>>>16,r[n++]=(65280&a.duration)>>>8,r[n++]=255&a.duration,r[n++]=(4278190080&a.size)>>>24,r[n++]=(16711680&a.size)>>>16,r[n++]=(65280&a.size)>>>8,r[n++]=255&a.size,r[n++]=a.flags.isLeading<<2|a.flags.dependsOn,r[n++]=a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,r[n++]=61440&a.flags.degradationPriority,r[n++]=15&a.flags.degradationPriority,r[n++]=(4278190080&a.compositionTimeOffset)>>>24,r[n++]=(16711680&a.compositionTimeOffset)>>>16,r[n++]=(65280&a.compositionTimeOffset)>>>8,r[n++]=255&a.compositionTimeOffset;return t(S.trun,r)},U=function(e,i){var n,r,o,s,a,l;for(i+=20+8*(s=e.samples||[]).length,o=H(s,i),(n=new Uint8Array(o.length+8*s.length)).set(o),r=o.length,l=0;l<s.length;l++)a=s[l],n[r++]=(4278190080&a.duration)>>>24,n[r++]=(16711680&a.duration)>>>16,n[r++]=(65280&a.duration)>>>8,n[r++]=255&a.duration,n[r++]=(4278190080&a.size)>>>24,n[r++]=(16711680&a.size)>>>16,n[r++]=(65280&a.size)>>>8,n[r++]=255&a.size;return t(S.trun,n)},T=function(e,t){return"audio"===e.type?U(e,t):$(e,t)};o=function(){return t(S.ftyp,E,x,E,C)};var W,G,Y,X,K,Q,Z,J,ee=function(e){return t(S.mdat,e)},te=l,ie=function(e){var t,i=o(),n=u(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t},ne=function(e,t){var i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=4*e.length,i.size+=e.byteLength,e.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},re=function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,n.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},oe=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},se=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ae=function(e,t){var i,n,r,o,s,a=t||0,l=[];for(i=0;i<e.length;i++)for(o=e[i],n=0;n<o.length;n++)s=o[n],a+=(r=ne(s,a)).size,l.push(r);return l},le=function(e){var t,i,n,r,o,s,a=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),h=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for(o=r[i],n=0;n<o.length;n++)s=o[n],h.setUint32(a,s.data.byteLength),a+=4,c.set(s.data,a),a+=s.data.byteLength;return c},ue=[33,16,5,32,164,27],ce=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],he=function(e){for(var t=[];e--;)t.push(0);return t},de=function(){if(!W){var e={96e3:[ue,[227,64],he(154),[56]],88200:[ue,[231],he(170),[56]],64e3:[ue,[248,192],he(240),[56]],48e3:[ue,[255,192],he(268),[55,148,128],he(54),[112]],44100:[ue,[255,192],he(268),[55,163,128],he(84),[112]],32e3:[ue,[255,192],he(268),[55,234],he(226),[112]],24e3:[ue,[255,192],he(268),[55,255,128],he(268),[111,112],he(126),[224]],16e3:[ue,[255,192],he(268),[55,255,128],he(268),[111,255],he(269),[223,108],he(195),[1,192]],12e3:[ce,he(268),[3,127,248],he(268),[6,255,240],he(268),[13,255,224],he(268),[27,253,128],he(259),[56]],11025:[ce,he(268),[3,127,248],he(268),[6,255,240],he(268),[13,255,224],he(268),[27,255,192],he(268),[55,175,128],he(108),[112]],8e3:[ce,he(268),[3,121,16],he(47),[7]]};t=e,W=Object.keys(t).reduce((function(e,i){return e[i]=new Uint8Array(t[i].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return W},pe=9e4;Q=function(e,t){return G(K(e,t))},Z=function(e,t){return Y(X(e),t)},J=function(e,t,i){return X(i?e:e-t)};var fe=pe,ge=G=function(e){return e*pe},me=(Y=function(e,t){return e*t},X=function(e){return e/pe}),ve=(K=function(e,t){return e/t},Q),ye=Z,be=J,_e=function(e,t,i,n){var r,o,s,a,l,u=0,c=0,h=0;if(t.length&&(r=ve(e.baseMediaDecodeTime,e.samplerate),o=Math.ceil(fe/(e.samplerate/1024)),i&&n&&(u=r-Math.max(i,n),h=(c=Math.floor(u/o))*o),!(c<1||h>fe/2))){for((s=de()[e.samplerate])||(s=t[0].data),a=0;a<c;a++)l=t[0],t.splice(0,0,{data:s,dts:l.dts-o,pts:l.pts-o});return e.baseMediaDecodeTime-=Math.floor(ye(h,e.samplerate)),h}},we=function(e,t,i){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},Te=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},Se=function(e){var t,i,n=0,r=new Uint8Array(function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i}(e));for(t=0;t<e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;return r},Ee=fe,xe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Ce=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/Ee,i=Math.floor(i)),i},ke=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Pe=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}i.payload=void 0}t+=r,n=0,r=0}return i},Ae=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Ie=function(e,t){var i,n,r,o,s=[];if(!(64&t[0]))return s;for(n=31&t[0],i=0;i<n;i++)o={type:3&t[(r=3*i)+2],pts:e},4&t[r+2]&&(o.ccData=t[r+3]<<8|t[r+4],s.push(o));return s},Le=function(e){for(var t,i,n=e.byteLength,r=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(o=0;o<t;s++,o++)s===r[0]&&(s++,r.shift()),i[o]=e[s];return i},De=4,Oe=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new ze(0,0),new ze(0,1),new ze(1,0),new ze(1,1)],this.parse708captions_&&(this.cc708Stream_=new Fe({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Oe.prototype=new j).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=Pe(e.escapedRBSP)).payload&&t.payloadType===De&&(i=Ae(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=Ie(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Oe.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},Oe.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},Oe.prototype.flush=function(){return this.flushStream("flush")},Oe.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Oe.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},Oe.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Oe.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Oe.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},Oe.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},Oe.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var Re={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Me=function(e){return 32<=e&&e<=127||160<=e&&e<=255},Ne=function(e){this.windowNum=e,this.reset()};Ne.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ne.prototype.getText=function(){return this.rows.join("\n")},Ne.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ne.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ne.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Ne.prototype.addText=function(e){this.rows[this.rowIdx]+=e},Ne.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var Be=function(e,t,i){this.serviceNum=e,this.text="",this.currentWindow=new Ne(-1),this.windows=[],this.stream=i,"string"==typeof t&&this.createTextDecoder(t)};Be.prototype.init=function(e,t){this.startPts=e;for(var i=0;i<8;i++)this.windows[i]=new Ne(i),"function"==typeof t&&(this.windows[i].beforeRowOverflow=t)},Be.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},Be.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var Fe=function e(t){t=t||{},e.prototype.init.call(this);var i,n=this,r=t.captionServices||{},o={};Object.keys(r).forEach((function(e){i=r[e],/^SERVICE/.test(e)&&(o[e]=i.encoding)})),this.serviceEncodings=o,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(n.new708Packet(),n.add708Bytes(e)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(e))}};Fe.prototype=new j,Fe.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Fe.prototype.add708Bytes=function(e){var t=e.ccData,i=t>>>8,n=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},Fe.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,i=null,n=null,r=0,o=t[r++];for(e.seq=o>>6,e.sizeCode=63&o;r<t.length;r++)n=31&(o=t[r++]),7===(i=o>>5)&&n>0&&(i=o=t[r++]),this.pushServiceBlock(i,r,n),n>0&&(r+=n-1)},Fe.prototype.pushServiceBlock=function(e,t,i){var n,r=t,o=this.current708Packet.data,s=this.services[e];for(s||(s=this.initService(e,r));r<t+i&&r<o.length;r++)n=o[r],Me(n)?r=this.handleText(r,s):24===n?r=this.multiByteCharacter(r,s):16===n?r=this.extendedCommands(r,s):128<=n&&n<=135?r=this.setCurrentWindow(r,s):152<=n&&n<=159?r=this.defineWindow(r,s):136===n?r=this.clearWindows(r,s):140===n?r=this.deleteWindows(r,s):137===n?r=this.displayWindows(r,s):138===n?r=this.hideWindows(r,s):139===n?r=this.toggleWindows(r,s):151===n?r=this.setWindowAttributes(r,s):144===n?r=this.setPenAttributes(r,s):145===n?r=this.setPenColor(r,s):146===n?r=this.setPenLocation(r,s):143===n?s=this.reset(r,s):8===n?s.currentWindow.backspace():12===n?s.currentWindow.clearText():13===n?s.currentWindow.pendingNewLine=!0:14===n?s.currentWindow.clearText():141===n&&r++},Fe.prototype.extendedCommands=function(e,t){var i=this.current708Packet.data[++e];return Me(i)&&(e=this.handleText(e,t,{isExtended:!0})),e},Fe.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Fe.prototype.initService=function(e,t){var i,n,r=this;return(i="SERVICE"+e)in this.serviceEncodings&&(n=this.serviceEncodings[i]),this.services[e]=new Be(e,n,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},Fe.prototype.handleText=function(e,t,i){var n,r,o,s,a=i&&i.isExtended,l=i&&i.isMultiByte,u=this.current708Packet.data,c=a?4096:0,h=u[e],d=u[e+1],p=t.currentWindow;return t.textDecoder_&&!a?(l?(r=[h,d],e++):r=[h],n=t.textDecoder_.decode(new Uint8Array(r))):(s=Re[o=c|h]||o,n=4096&o&&o===s?"":String.fromCharCode(s)),p.pendingNewLine&&!p.isEmpty()&&p.newLine(this.getPts(e)),p.pendingNewLine=!1,p.addText(n),e},Fe.prototype.multiByteCharacter=function(e,t){var i=this.current708Packet.data,n=i[e+1],r=i[e+2];return Me(n)&&Me(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},Fe.prototype.setCurrentWindow=function(e,t){var i=7&this.current708Packet.data[e];return t.setCurrentWindow(i),e},Fe.prototype.defineWindow=function(e,t){var i=this.current708Packet.data,n=i[e],r=7&n;t.setCurrentWindow(r);var o=t.currentWindow;return n=i[++e],o.visible=(32&n)>>5,o.rowLock=(16&n)>>4,o.columnLock=(8&n)>>3,o.priority=7&n,n=i[++e],o.relativePositioning=(128&n)>>7,o.anchorVertical=127&n,n=i[++e],o.anchorHorizontal=n,n=i[++e],o.anchorPoint=(240&n)>>4,o.rowCount=15&n,n=i[++e],o.columnCount=63&n,n=i[++e],o.windowStyle=(56&n)>>3,o.penStyle=7&n,o.virtualRowCount=o.rowCount+1,e},Fe.prototype.setWindowAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.winAttr;return n=i[++e],r.fillOpacity=(192&n)>>6,r.fillRed=(48&n)>>4,r.fillGreen=(12&n)>>2,r.fillBlue=3&n,n=i[++e],r.borderType=(192&n)>>6,r.borderRed=(48&n)>>4,r.borderGreen=(12&n)>>2,r.borderBlue=3&n,n=i[++e],r.borderType+=(128&n)>>5,r.wordWrap=(64&n)>>6,r.printDirection=(48&n)>>4,r.scrollDirection=(12&n)>>2,r.justify=3&n,n=i[++e],r.effectSpeed=(240&n)>>4,r.effectDirection=(12&n)>>2,r.displayEffect=3&n,e},Fe.prototype.flushDisplayed=function(e,t){for(var i=[],n=0;n<8;n++)t.windows[n].visible&&!t.windows[n].isEmpty()&&i.push(t.windows[n].getText());t.endPts=e,t.text=i.join("\n\n"),this.pushCaption(t),t.startPts=e},Fe.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Fe.prototype.displayWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=1);return e},Fe.prototype.hideWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible=0);return e},Fe.prototype.toggleWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&(t.windows[r].visible^=1);return e},Fe.prototype.clearWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].clearText();return e},Fe.prototype.deleteWindows=function(e,t){var i=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var r=0;r<8;r++)i&1<<r&&t.windows[r].reset();return e},Fe.prototype.setPenAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penAttr;return n=i[++e],r.textTag=(240&n)>>4,r.offset=(12&n)>>2,r.penSize=3&n,n=i[++e],r.italics=(128&n)>>7,r.underline=(64&n)>>6,r.edgeType=(56&n)>>3,r.fontStyle=7&n,e},Fe.prototype.setPenColor=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penColor;return n=i[++e],r.fgOpacity=(192&n)>>6,r.fgRed=(48&n)>>4,r.fgGreen=(12&n)>>2,r.fgBlue=3&n,n=i[++e],r.bgOpacity=(192&n)>>6,r.bgRed=(48&n)>>4,r.bgGreen=(12&n)>>2,r.bgBlue=3&n,n=i[++e],r.edgeRed=(48&n)>>4,r.edgeGreen=(12&n)>>2,r.edgeBlue=3&n,e},Fe.prototype.setPenLocation=function(e,t){var i=this.current708Packet.data,n=i[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,n=i[++e],r.row=15&n,n=i[++e],r.column=63&n,e},Fe.prototype.reset=function(e,t){var i=this.getPts(e);return this.flushDisplayed(i,t),this.initService(t.serviceNum,e)};var Ue={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},$e=function(e){return null===e?"":(e=Ue[e]||e,String.fromCharCode(e))},He=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],je=function(){for(var e=[],t=15;t--;)e.push("");return e},ze=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,o;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=je();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=je();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=je()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))o=$e((n=(3&n)<<8)|r),this[this.mode_](e.pts,o),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),o=$e((n=(3&n)<<8)|r),this[this.mode_](e.pts,o),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14&~r||this.addFormatting(e.pts,["i"]),1&~r||this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=He.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16&~t||(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&(14&~r||this.addFormatting(e.pts,["i"]))}else this.isNormalChar(n)&&(0===r&&(r=null),o=$e(n),o+=$e(r),this[this.mode_](e.pts,o),this.column_+=o.length)}else this.lastControlCode_=null}};ze.prototype=new j,ze.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},ze.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=je(),this.nonDisplayed_=je(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ze.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ze.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},ze.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},ze.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},ze.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},ze.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},ze.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},ze.prototype.isNormalChar=function(e){return e>=32&&e<=127},ze.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=je(),this.displayed_=je()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},ze.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,i)},ze.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},ze.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},ze.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},ze.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},ze.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var qe={CaptionStream:Oe,Cea608Stream:ze,Cea708Stream:Fe},Ve={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},We="shared",Ge=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},Ye=function e(t){var i,n;e.prototype.init.call(this),this.type_=t||We,this.push=function(e){this.type_!==We&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=Ge(e.dts,n),e.pts=Ge(e.pts,n),i=e.dts,this.trigger("data",e))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ye.prototype=new j;var Xe,Ke=Ye,Qe=Ge,Ze=function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r},Je=function(e,t,i){return decodeURIComponent(Ze(e,t,i))},et=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},tt={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Je(e.data,1,t),e.value=Je(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Je(e.data,1,t),e.url=Je(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(Ze(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Xe=function(e){var t,i={descriptor:e&&e.descriptor},n=0,r=[],o=0;if(Xe.prototype.init.call(this),this.dispatchType=Ve.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,s,a,l;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(o=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),o+=e.data.byteLength,1===r.length&&(n=et(e.data.subarray(6,10)),n+=10),!(o<n)){for(t={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<n;)t.data.set(r[0].data.subarray(0,n-l),l),l+=r[0].data.byteLength,o-=r[0].data.byteLength,r.shift();i=10,64&t.data[5]&&(i+=4,i+=et(t.data.subarray(10,14)),n-=et(t.data.subarray(16,20)));do{if((s=et(t.data.subarray(i+4,i+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((a={id:String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),data:t.data.subarray(i+10,i+s+10)}).key=a.id,tt[a.id]&&(tt[a.id](a),"com.apple.streaming.transportStreamTimestamp"===a.owner)){var u=a.data,c=(1&u[3])<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;c*=4,c+=3&u[7],a.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=a.timeStamp,t.dts=a.timeStamp),this.trigger("timestamp",a)}t.frames.push(a),i+=10,i+=s}while(i<n);this.trigger("data",t)}}},Xe.prototype=new j;var it,nt,rt,ot=Xe,st=Ke,at=188;(it=function(){var e=new Uint8Array(at),t=0;it.prototype.init.call(this),this.push=function(i){var n,r=0,o=at;for(t?((n=new Uint8Array(i.byteLength+t)).set(e.subarray(0,t)),n.set(i,t),t=0):n=i;o<n.byteLength;)71!==n[r]||71!==n[o]?(r++,o++):(this.trigger("data",n.subarray(r,o)),r+=at,o+=at);r<n.byteLength&&(e.set(n.subarray(r),0),t=n.byteLength-r)},this.flush=function(){t===at&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new j,nt=function(){var e,t,i,n;nt.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var r=0;n.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===n.type?t(e.subarray(r),n):i(e.subarray(r),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,r;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<i;){var o=e[r],s=(31&e[r+1])<<8|e[r+2];o===Ve.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=s:o===Ve.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=s:o===Ve.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=o),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=Ve.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=Ve.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}},nt.prototype=new j,nt.STREAM_TYPES={h264:27,adts:15},rt=function(){var e,t=this,i=!1,n={data:[],size:0},r={data:[],size:0},o={data:[],size:0},s=function(e,i,n){var r,o,s=new Uint8Array(e.size),a={type:i},l=0,u=0;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,l=0;l<e.data.length;l++)o=e.data[l],s.set(o.data,u),u+=o.data.byteLength;var c,h,d,p;h=a,p=(c=s)[0]<<16|c[1]<<8|c[2],h.data=new Uint8Array,1===p&&(h.packetLength=6+(c[4]<<8|c[5]),h.dataAlignmentIndicator=!!(4&c[6]),192&(d=c[7])&&(h.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,h.pts*=4,h.pts+=(6&c[13])>>>1,h.dts=h.pts,64&d&&(h.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,h.dts*=4,h.dts+=(6&c[18])>>>1)),h.data=c.subarray(9+c[8])),r="video"===i||a.packetLength<=e.size,(n||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",a)}};rt.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,t;switch(a.streamType){case Ve.H264_STREAM_TYPE:e=n,t="video";break;case Ve.ADTS_STREAM_TYPE:e=r,t="audio";break;case Ve.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};null!==(e=a.programMapTable).video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),i=!0,t.trigger("data",n)}})[a.type]()},this.reset=function(){n.size=0,n.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){s(n,"video"),s(r,"audio"),s(o,"timed-metadata")},this.flush=function(){if(!i&&e){var n={type:"metadata",tracks:[]};null!==e.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",n)}i=!1,this.flushStreams_(),this.trigger("done")}},rt.prototype=new j;var lt={PAT_PID:0,MP2T_PACKET_LENGTH:at,TransportPacketStream:it,TransportParseStream:nt,ElementaryStream:rt,TimestampRolloverStream:st,CaptionStream:qe.CaptionStream,Cea608Stream:qe.Cea608Stream,Cea708Stream:qe.Cea708Stream,MetadataStream:ot};for(var ut in Ve)Ve.hasOwnProperty(ut)&&(lt[ut]=Ve[ut]);var ct,ht=lt,dt=fe,pt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ct=function(e){var t,i=0;ct.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+i+" outside syncword"})},this.push=function(n){var r,o,s,a,l,u=0;if(e||(i=0),"audio"===n.type){var c;for(t&&t.length?(s=t,(t=new Uint8Array(s.byteLength+n.data.byteLength)).set(s),t.set(n.data,s.byteLength)):t=n.data;u+7<t.length;)if(255===t[u]&&240==(246&t[u+1])){if("number"==typeof c&&(this.skipWarn_(c,u),c=null),o=2*(1&~t[u+1]),r=(3&t[u+3])<<11|t[u+4]<<3|(224&t[u+5])>>5,l=(a=1024*(1+(3&t[u+6])))*dt/pt[(60&t[u+2])>>>2],t.byteLength-u<r)break;this.trigger("data",{pts:n.pts+i*l,dts:n.dts+i*l,sampleCount:a,audioobjecttype:1+(t[u+2]>>>6&3),channelcount:(1&t[u+2])<<2|(192&t[u+3])>>>6,samplerate:pt[(60&t[u+2])>>>2],samplingfrequencyindex:(60&t[u+2])>>>2,samplesize:16,data:t.subarray(u+7+o,u+r)}),i++,u+=r}else"number"!=typeof c&&(c=u),u++;"number"==typeof c&&(this.skipWarn_(c,u),c=null),t=t.subarray(u)}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},ct.prototype=new j;var ft,gt,mt,vt=ct,yt=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var r=e.byteLength-t,o=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");o.set(e.subarray(r,r+s)),i=new DataView(o.buffer).getUint32(0),n=8*s,t-=s},this.skipBits=function(e){var r;n>e?(i<<=e,n-=e):(e-=n,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),i<<=e,n-=e)},this.readBits=function(e){var r=Math.min(n,e),o=i>>>32-r;return(n-=r)>0?i<<=r:t>0&&this.loadWord(),(r=e-r)>0?o<<r|this.readBits(r):o},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(i&2147483648>>>e)return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};gt=function(){var e,t,i=0;gt.prototype.init.call(this),this.push=function(n){var r;t?((r=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),r.set(n.data,t.byteLength),t=r):t=n.data;for(var o=t.byteLength;i<o-3;i++)if(1===t[i+2]){e=i+5;break}for(;e<o;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));do{e++}while(1!==t[e]&&e<o);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3}t=t.subarray(i),e-=i,i=0},this.reset=function(){t=null,i=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},gt.prototype=new j,mt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ft=function(){var e,t,i,n,r,o,s,a=new gt;ft.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,a.push(e))},a.on("data",(function(s){var a={trackId:t,pts:i,dts:n,data:s,nalUnitTypeCode:31&s[0]};switch(a.nalUnitTypeCode){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=r(s.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=r(s.subarray(1)),a.config=o(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",a)})),a.on("done",(function(){e.trigger("done")})),a.on("partialdone",(function(){e.trigger("partialdone")})),a.on("reset",(function(){e.trigger("reset")})),a.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){a.flush()},this.partialFlush=function(){a.partialFlush()},this.reset=function(){a.reset()},this.endTimeline=function(){a.endTimeline()},s=function(e,t){var i,n=8,r=8;for(i=0;i<e;i++)0!==r&&(r=(n+t.readExpGolomb()+256)%256),n=0===r?n:r},r=function(e){for(var t,i,n=e.byteLength,r=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(o=0;o<t;s++,o++)s===r[0]&&(s++,r.shift()),i[o]=e[s];return i},o=function(e){var t,i,n,r,o,a,l,u,c,h,d,p,f=0,g=0,m=0,v=0,y=[1,1];if(i=(t=new yt(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),mt[i]&&(3===(o=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==o?8:12,p=0;p<d;p++)t.readBoolean()&&s(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(a=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),p=0;p<l;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(h=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(y[0],y[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:16*(u+1)-2*f-2*g,height:(2-h)*(c+1)*16-2*m-2*v,sarRatio:y}}},ft.prototype=new j;var bt,_t={H264Stream:ft,NalByteStream:gt},wt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Tt=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return i=i>=0?i:0,(16&e[t+5])>>4?i+20:i+10},St=function e(t,i){return t.length-i<10||t[i]!=="I".charCodeAt(0)||t[i+1]!=="D".charCodeAt(0)||t[i+2]!=="3".charCodeAt(0)?i:e(t,i+=Tt(t,i))},Et=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},xt={isLikelyAacData:function(e){var t=St(e,0);return e.length>=t+2&&!(255&~e[t])&&!(240&~e[t+1])&&16==(22&e[t+1])},parseId3TagSize:Tt,parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&!(240&~e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return wt[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i,n;t=10,64&e[5]&&(t+=4,t+=Et(e.subarray(10,14)));do{if((i=Et(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){var o=unescape(function(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r}(n,0,r));if("com.apple.streaming.transportStreamTimestamp"===o){var s=n.subarray(r+1),a=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return a*=4,a+=3&s[7]}break}}t+=10,t+=i}while(t<e.byteLength);return null}};(bt=function(){var e=new Uint8Array,t=0;bt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(i){var n,r,o,s,a=0,l=0;for(e.length?(s=e.length,(e=new Uint8Array(i.byteLength+s)).set(e.subarray(0,s)),e.set(i,s)):e=i;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255&~e[l]||240&~e[l+1])l++;else{if(e.length-l<7)break;if(l+(a=xt.parseAdtsSize(e,l))>e.length)break;o={type:"audio",data:e.subarray(l,l+a),pts:t,dts:t},this.trigger("data",o),l+=a}else{if(e.length-l<10)break;if(l+(a=xt.parseId3TagSize(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+a)},this.trigger("data",r),l+=a}n=e.length-l,e=n>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new j;var Ct,kt,Pt,At,It=bt,Lt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Dt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Ot=_t.H264Stream,Rt=xt.isLikelyAacData,Mt=fe,Nt=function(e,t){t.stream=e,this.trigger("log",t)},Bt=function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++){var r=i[n];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",Nt.bind(e,r))}},Ft=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},Ut=function(e,t,i,n,r,o){return{start:{dts:e,pts:e+(i-t)},end:{dts:e+(n-t),pts:e+(r-i)},prependedContentDuration:o,baseMediaDecodeTime:e}};kt=function(e,t){var i,n=[],r=0,o=0,s=1/0;i=(t=t||{}).firstSequenceNumber||0,kt.prototype.init.call(this),this.push=function(t){ke(e,t),e&&Lt.forEach((function(i){e[i]=t[i]})),n.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){o=e},this.flush=function(){var a,l,u,c,h,d,p;0!==n.length?(a=we(n,e,r),e.baseMediaDecodeTime=Ce(e,t.keepOriginalTimestamps),p=_e(e,a,o,s),e.samples=Te(a),u=ee(Se(a)),n=[],l=te(i,[e]),c=new Uint8Array(l.byteLength+u.byteLength),i++,c.set(l),c.set(u,l.byteLength),xe(e),h=Math.ceil(1024*Mt/e.samplerate),a.length&&(d=a.length*h,this.trigger("segmentTimingInfo",Ut(ve(e.baseMediaDecodeTime,e.samplerate),a[0].dts,a[0].pts,a[0].dts+d,a[0].pts+d,p||0)),this.trigger("timingInfo",{start:a[0].pts,end:a[0].pts+d})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){xe(e),n=[],this.trigger("reset")}},kt.prototype=new j,Ct=function(e,t){var i,n,r,o=[],s=[];i=(t=t||{}).firstSequenceNumber||0,Ct.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){ke(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],Dt.forEach((function(t){e[t]=n[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),o.push(t)},this.flush=function(){for(var n,r,a,l,u,c,h,d,p=0;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=re(o),(a=oe(n))[0][0].keyFrame||((r=this.getGopForFusion_(o[0],e))?(p=r.duration,a.unshift(r),a.byteLength+=r.byteLength,a.nalCount+=r.nalCount,a.pts=r.pts,a.dts=r.dts,a.duration+=r.duration):a=se(a)),s.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");xe(e),a=f}ke(e,a),e.samples=ae(a),u=ee(le(a)),e.baseMediaDecodeTime=Ce(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),h=a[0],d=a[a.length-1],this.trigger("segmentTimingInfo",Ut(e.baseMediaDecodeTime,h.dts,h.pts,d.dts+d.duration,d.pts+d.duration,p)),this.trigger("timingInfo",{start:a[0].pts,end:a[a.length-1].pts+a[a.length-1].duration}),this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=te(i,[e]),c=new Uint8Array(l.byteLength+u.byteLength),i++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),o=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){xe(e),n=void 0,r=void 0},this.getGopForFusion_=function(t){var i,n,r,o,s,a=1/0;for(s=0;s<this.gopCache_.length;s++)r=(o=this.gopCache_[s]).gop,e.pps&&Ft(e.pps[0],o.pps[0])&&e.sps&&Ft(e.sps[0],o.sps[0])&&(r.dts<e.timelineStartInfo.dts||(i=t.dts-r.dts-r.duration)>=-1e4&&i<=45e3&&(!n||a>i)&&(n=o,a=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,r,o,a,l,u;for(o=e.byteLength,a=e.nalCount,l=e.duration,t=i=0;t<s.length&&i<e.length&&(n=s[t],r=e[i],n.pts!==r.pts);)r.pts>n.pts?t++:(i++,o-=r.byteLength,a-=r.nalCount,l-=r.duration);return 0===i?e:i===e.length?null:((u=e.slice(i)).byteLength=o,u.duration=l,u.nalCount=a,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,i,n,r,o,a,l;for(t=s.length-1,i=e.length-1,o=null,a=!1;t>=0&&i>=0;){if(n=s[t],r=e[i],n.pts===r.pts){a=!0;break}n.pts>r.pts?t--:(t===s.length-1&&(o=i),i--)}if(!a&&null===o)return null;if(0===(l=a?i:o))return e;var u=e.slice(l),c=u.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){s=e}},Ct.prototype=new j,At=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,At.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},At.prototype=new j,At.prototype.flush=function(e){var t,i,n,r,o=0,s={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,Dt.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Lt.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=ie(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],o),o+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=be(t.startPts,a,this.keepOriginalTimestamps),t.endTime=be(t.endPts,a,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=be(i.pts,a,this.keepOriginalTimestamps),s.metadata.push(i);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)t=s.captions[r],this.trigger("caption",t);for(r=0;r<s.metadata.length;r++)i=s.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},At.prototype.setRemux=function(e){this.remuxTracks=e},Pt=function(e){var t,i,n=this,r=!0;Pt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new ht.MetadataStream,r.aacStream=new It,r.audioTimestampRolloverStream=new ht.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new ht.TimestampRolloverStream("timed-metadata"),r.adtsStream=new vt,r.coalesceStream=new At(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(o){"timed-metadata"!==o.type&&"audio"!==o.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new kt(i,e),r.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Bt(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new ht.MetadataStream,r.packetStream=new ht.TransportPacketStream,r.parseStream=new ht.TransportParseStream,r.elementaryStream=new ht.ElementaryStream,r.timestampRolloverStream=new ht.TimestampRolloverStream,r.adtsStream=new vt,r.h264Stream=new Ot,r.captionStream=new ht.CaptionStream(e),r.coalesceStream=new At(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(o){var s;if("metadata"===o.type){for(s=o.tracks.length;s--;)t||"video"!==o.tracks[s].type?i||"audio"!==o.tracks[s].type||((i=o.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=o.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new Ct(t,e),r.videoSegmentStream.on("log",n.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){i&&!e.keepOriginalTimestamps&&(i.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new kt(i,e),r.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Bt(this,r)},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,xe(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,xe(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var i=this.transmuxPipeline_;e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(i){i.stream=e,t.trigger("log",i)}},this.push=function(e){if(r){var t=Rt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Pt.prototype=new j;var $t,Ht,jt,zt={Transmuxer:Pt,VideoSegmentStream:Ct,AudioSegmentStream:kt,AUDIO_PROPERTIES:Lt,VIDEO_PROPERTIES:Dt,generateSegmentTimingInfo:Ut},qt=function(e){return e>>>0},Vt=function(e){return("00"+e.toString(16)).slice(-2)},Wt=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},Gt=qt,Yt=function e(t,i){var n,r,o,s,a,l=[];if(!i.length)return null;for(n=0;n<t.byteLength;)r=Gt(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),o=Wt(t.subarray(n+4,n+8)),s=r>1?n+r:t.byteLength,o===i[0]&&(1===i.length?l.push(t.subarray(n+8,s)):(a=e(t.subarray(n+8,s),i.slice(1))).length&&(l=l.concat(a))),n=s;return l},Xt=qt,Kt=q.getUint64,Qt=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Kt(e.subarray(4)):t.baseMediaDecodeTime=Xt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},Zt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Jt=function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],o=4&i.flags[2],s=1&i.flags[1],a=2&i.flags[1],l=4&i.flags[1],u=8&i.flags[1],c=n.getUint32(4),h=8;for(r&&(i.dataOffset=n.getInt32(h),h+=4),o&&c&&(t={flags:Zt(e.subarray(h,h+4))},h+=4,s&&(t.duration=n.getUint32(h),h+=4),a&&(t.size=n.getUint32(h),h+=4),u&&(1===i.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(t),c--);c--;)t={},s&&(t.duration=n.getUint32(h),h+=4),a&&(t.size=n.getUint32(h),h+=4),l&&(t.flags=Zt(e.subarray(h,h+4)),h+=4),u&&(1===i.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=4),i.samples.push(t);return i},ei=function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],o=2&n.flags[2],s=8&n.flags[2],a=16&n.flags[2],l=32&n.flags[2],u=65536&n.flags[0],c=131072&n.flags[0];return t=8,r&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),o&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),s&&(n.defaultSampleDuration=i.getUint32(t),t+=4),a&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),u&&(n.durationIsEmpty=!0),!r&&c&&(n.baseDataOffsetIsMoof=!0),n},ti="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},ii="undefined"!=typeof window?window:void 0!==ti?ti:"undefined"!=typeof self?self:{},ni=Le,ri=qe.CaptionStream,oi=function(e,t){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(i<r.size)return r;i-=r.size}return null},si=function(e,t){var i=Yt(e,["moof","traf"]),n=Yt(e,["mdat"]),r={},o=[];return n.forEach((function(e,t){var n=i[t];o.push({mdat:e,traf:n})})),o.forEach((function(e){var i,n,o=e.mdat,s=e.traf,a=Yt(s,["tfhd"]),l=ei(a[0]),u=l.trackId,c=Yt(s,["tfdt"]),h=c.length>0?Qt(c[0]).baseMediaDecodeTime:0,d=Yt(s,["trun"]);t===u&&d.length>0&&(i=function(e,t,i){var n=t,r=i.defaultSampleDuration||0,o=i.defaultSampleSize||0,s=i.trackId,a=[];return e.forEach((function(e){var t=Jt(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=o),e.trackId=s,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof n?(e.pts=n+ii.BigInt(e.compositionTimeOffset),n+=ii.BigInt(e.duration)):(e.pts=n+e.compositionTimeOffset,n+=e.duration)})),a=a.concat(t)})),a}(d,h,l),n=function(e,t,i){var n,r,o,s,a=new DataView(e.buffer,e.byteOffset,e.byteLength),l={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=o)if(o=a.getUint32(r),r+=4,!(o<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+o),c=oi(r,t);if(n={nalUnitType:"sei_rbsp",size:o,data:u,escapedRBSP:ni(u),trackId:i},c)n.pts=c.pts,n.dts=c.dts,s=c;else{if(!s){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+i+". See mux.js#223."});break}n.pts=s.pts,n.dts=s.dts}l.seiNals.push(n)}return l}(o,i,u),r[u]||(r[u]={seiNals:[],logs:[]}),r[u].seiNals=r[u].seiNals.concat(n.seiNals),r[u].logs=r[u].logs.concat(n.logs))})),r},ai=function(){var e,t,i,n,r,o,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new ri,s=!0,o=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(i!==e[0]||n!==t[i])},this.parse=function(e,o,s){var a;if(!this.isInitialized())return null;if(!o||!s)return null;if(this.isNewInit(o,s))i=o[0],n=s[i];else if(null===i||!n)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,o,s)}return a=function(e,t,i){if(null===t)return null;var n=si(e,t)[t]||{};return{seiNals:n.seiNals,logs:n.logs,timescale:i}}(e,i,n),a&&a.logs&&(r.logs=r.logs.concat(a.logs)),null!==a&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;o?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],i=null,n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},li=qt,ui=Vt,ci=q.getUint64;$t=function(e,t){var i=Yt(t,["moof","traf"]).reduce((function(t,i){var n,r,o=Yt(i,["tfhd"])[0],s=li(o[4]<<24|o[5]<<16|o[6]<<8|o[7]),a=e[s]||9e4,l=Yt(i,["tfdt"])[0],u=new DataView(l.buffer,l.byteOffset,l.byteLength);return"bigint"==typeof(n=1===l[0]?ci(l.subarray(4,12)):u.getUint32(4))?r=n/ii.BigInt(a):"number"!=typeof n||isNaN(n)||(r=n/a),r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r<t&&(t=r),t}),1/0);return"bigint"==typeof i||isFinite(i)?i:0},jt=function(e){var t=0===e[0]?12:20;return li(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},Ht=function(e){var t=Yt(e,["moov","trak"]),i=[];return t.forEach((function(e){var t,n,r={},o=Yt(e,["tkhd"])[0];o&&(n=(t=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0),r.id=0===n?t.getUint32(12):t.getUint32(20));var s=Yt(e,["mdia","hdlr"])[0];if(s){var a=Wt(s.subarray(8,12));r.type="vide"===a?"video":"soun"===a?"audio":a}var l=Yt(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);r.codec=Wt(u.subarray(4,8));var c,h=Yt(u,[r.codec])[0];h&&(/^[asm]vc[1-9]$/i.test(r.codec)?(c=h.subarray(78),"avcC"===Wt(c.subarray(4,8))&&c.length>11?(r.codec+=".",r.codec+=ui(c[9]),r.codec+=ui(c[10]),r.codec+=ui(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(c=h.subarray(28),"esds"===Wt(c.subarray(4,8))&&c.length>20&&0!==c[19]?(r.codec+="."+ui(c[19]),r.codec+="."+ui(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var d=Yt(e,["mdia","mdhd"])[0];d&&(r.timescale=jt(d)),i.push(r)})),i};var hi=$t,di=Ht,pi=function(e){var t=31&e[1];return t<<=8,t|=e[2]},fi=function(e){return!!(64&e[1])},gi=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},mi=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},vi={parseType:function(e,t){var i=pi(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},parsePat:function(e){var t=fi(e),i=4+gi(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=fi(e),n=4+gi(e);if(i&&(n+=e[n]+1),1&e[n+5]){var r;r=3+((15&e[n+1])<<8|e[n+2])-4;for(var o=12+((15&e[n+10])<<8|e[n+11]);o<r;){var s=n+o;t[(31&e[s+1])<<8|e[s+2]]=e[s],o+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:fi,parsePesType:function(e,t){switch(t[pi(e)]){case Ve.H264_STREAM_TYPE:return"video";case Ve.ADTS_STREAM_TYPE:return"audio";case Ve.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!fi(e))return null;var t=4+gi(e);if(t>=e.byteLength)return null;var i,n=null;return 192&(i=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+gi(e),i=e.subarray(t),n=0,r=0,o=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===mi(31&i[r+3])&&(o=!0);do{n++}while(1!==i[n]&&n<i.length);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===mi(31&i[r+3])&&(o=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===mi(31&i[r+3])&&(o=!0),o}},yi=Qe,bi={};bi.ts=vi,bi.aac=xt;var _i=fe,wi=188,Ti=71,Si=function(e,t,i){for(var n,r,o,s,a=0,l=wi,u=!1;l<=e.byteLength;)if(e[a]!==Ti||e[l]!==Ti&&l!==e.byteLength)a++,l++;else{if(n=e.subarray(a,l),"pes"===bi.ts.parseType(n,t.pid))r=bi.ts.parsePesType(n,t.table),o=bi.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&o&&(s=bi.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0);if(u)break;a+=wi,l+=wi}for(a=(l=e.byteLength)-wi,u=!1;a>=0;)if(e[a]!==Ti||e[l]!==Ti&&l!==e.byteLength)a--,l--;else{if(n=e.subarray(a,l),"pes"===bi.ts.parseType(n,t.pid))r=bi.ts.parsePesType(n,t.table),o=bi.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&o&&(s=bi.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),u=!0);if(u)break;a-=wi,l-=wi}},Ei=function(e,t,i){for(var n,r,o,s,a,l,u,c=0,h=wi,d=!1,p={data:[],size:0};h<e.byteLength;)if(e[c]!==Ti||e[h]!==Ti)c++,h++;else{if(n=e.subarray(c,h),"pes"===bi.ts.parseType(n,t.pid))if(r=bi.ts.parsePesType(n,t.table),o=bi.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(o&&!d&&(s=bi.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),d=!0),!i.firstKeyFrame)){if(o&&0!==p.size){for(a=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),a.set(u,l),l+=u.byteLength;if(bi.ts.videoPacketContainsKeyFrame(a)){var f=bi.ts.parsePesTime(a);f?(i.firstKeyFrame=f,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(n),p.size+=n.byteLength}if(d&&i.firstKeyFrame)break;c+=wi,h+=wi}for(c=(h=e.byteLength)-wi,d=!1;c>=0;)if(e[c]!==Ti||e[h]!==Ti)c--,h--;else{if(n=e.subarray(c,h),"pes"===bi.ts.parseType(n,t.pid))r=bi.ts.parsePesType(n,t.table),o=bi.ts.parsePayloadUnitStartIndicator(n),"video"===r&&o&&(s=bi.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),d=!0);if(d)break;c-=wi,h-=wi}},xi=function(e){var t={pid:null,table:null},i={};for(var n in function(e,t){for(var i,n=0,r=wi;r<e.byteLength;)if(e[n]!==Ti||e[r]!==Ti)n++,r++;else{switch(i=e.subarray(n,r),bi.ts.parseType(i,t.pid)){case"pat":t.pid=bi.ts.parsePat(i);break;case"pmt":var o=bi.ts.parsePmt(i);t.table=t.table||{},Object.keys(o).forEach((function(e){t.table[e]=o[e]}))}n+=wi,r+=wi}}(e,t),t.table){if(t.table.hasOwnProperty(n))switch(t.table[n]){case Ve.H264_STREAM_TYPE:i.video=[],Ei(e,t,i),0===i.video.length&&delete i.video;break;case Ve.ADTS_STREAM_TYPE:i.audio=[],Si(e,t,i),0===i.audio.length&&delete i.audio}}return i},Ci=function(e,t){var i;return i=bi.aac.isLikelyAacData(e)?function(e){for(var t,i=!1,n=0,r=null,o=null,s=0,a=0;e.length-a>=3;){switch(bi.aac.parseType(e,a)){case"timed-metadata":if(e.length-a<10){i=!0;break}if((s=bi.aac.parseId3TagSize(e,a))>e.length){i=!0;break}null===o&&(t=e.subarray(a,a+s),o=bi.aac.parseAacTimestamp(t)),a+=s;break;case"audio":if(e.length-a<7){i=!0;break}if((s=bi.aac.parseAdtsSize(e,a))>e.length){i=!0;break}null===r&&(t=e.subarray(a,a+s),r=bi.aac.parseSampleRate(t)),n++,a+=s;break;default:a++}if(i)return null}if(null===r||null===o)return null;var l=_i/r;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*n*l,pts:o+1024*n*l}]}}(e):xi(e),i&&(i.audio||i.video)?(function(e,t){if(e.audio&&e.audio.length){var i=t;(void 0===i||isNaN(i))&&(i=e.audio[0].dts),e.audio.forEach((function(e){e.dts=yi(e.dts,i),e.pts=yi(e.pts,i),e.dtsTime=e.dts/_i,e.ptsTime=e.pts/_i}))}if(e.video&&e.video.length){var n=t;if((void 0===n||isNaN(n))&&(n=e.video[0].dts),e.video.forEach((function(e){e.dts=yi(e.dts,n),e.pts=yi(e.pts,n),e.dtsTime=e.dts/_i,e.ptsTime=e.pts/_i})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=yi(r.dts,n),r.pts=yi(r.pts,n),r.dtsTime=r.dts/_i,r.ptsTime=r.pts/_i}}}(i,t),i):null},ki=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new zt.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var i={start:{decode:me(t.start.dts),presentation:me(t.start.pts)},end:{decode:me(t.end.dts),presentation:me(t.end.pts)},baseMediaDecodeTime:me(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=me(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})})),t.on("audioSegmentTimingInfo",(function(t){var i={start:{decode:me(t.start.dts),presentation:me(t.start.pts)},end:{decode:me(t.end.dts),presentation:me(t.end.pts)},baseMediaDecodeTime:me(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=me(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:i})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:me(t.start),end:me(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:me(t.start),end:me(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new ai,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),i=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],logs:i&&i.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,i=e.data,n=hi(t,i);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:i},[i.buffer])},t.probeMp4Tracks=function(e){var t=e.data,i=di(t);this.self.postMessage({action:"probeMp4Tracks",tracks:i,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,i=e.baseStartTime,n="number"!=typeof i||isNaN(i)?void 0:i*fe,r=Ci(t,n),o=null;r&&((o={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1}).hasVideo&&(o.videoStart=r.video[0].ptsTime),o.hasAudio&&(o.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:o,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ge(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(ge(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new ki(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new ki(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),Jx=Xx(Zx),eC=function(e){var t=e.transmuxer,i=e.bytes,n=e.audioAppendStart,r=e.gopsToAlignWith,o=e.remux,s=e.onData,a=e.onTrackInfo,l=e.onAudioTimingInfo,u=e.onVideoTimingInfo,c=e.onVideoSegmentTimingInfo,h=e.onAudioSegmentTimingInfo,d=e.onId3,p=e.onCaptions,f=e.onDone,g=e.onEndedTimeline,m=e.onTransmuxerLog,v=e.isEndOfTimeline,y={buffer:[]},b=v;if(t.onmessage=function(i){t.currentTransmux===e&&("data"===i.data.action&&function(e,t,i){var n=e.data.segment,r=n.type,o=n.initSegment,s=n.captions,a=n.captionStreams,l=n.metadata,u=n.videoFrameDtsTime,c=n.videoFramePtsTime;t.buffer.push({captions:s,captionStreams:a,metadata:l});var h=e.data.segment.boxes||{data:e.data.segment.data},d={type:r,data:new Uint8Array(h.data,h.data.byteOffset,h.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};void 0!==u&&(d.videoFrameDtsTime=u),void 0!==c&&(d.videoFramePtsTime=c),i(d)}(i,y,s),"trackinfo"===i.data.action&&a(i.data.trackInfo),"gopInfo"===i.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(i,y),"audioTimingInfo"===i.data.action&&l(i.data.audioTimingInfo),"videoTimingInfo"===i.data.action&&u(i.data.videoTimingInfo),"videoSegmentTimingInfo"===i.data.action&&c(i.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===i.data.action&&h(i.data.audioSegmentTimingInfo),"id3Frame"===i.data.action&&d([i.data.id3Frame],i.data.id3Frame.dispatchType),"caption"===i.data.action&&p(i.data.caption),"endedtimeline"===i.data.action&&(b=!1,g()),"log"===i.data.action&&m(i.data.log),"transmuxed"===i.data.type&&(b||(t.onmessage=null,function(e){var t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)}({transmuxedData:y,callback:f}),tC(t))))},n&&t.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==o&&t.postMessage({action:"setRemux",remux:o}),i.byteLength){var _=i instanceof ArrayBuffer?i:i.buffer,w=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:_,byteOffset:w,byteLength:i.byteLength},[_])}v&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},tC=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():eC(e.currentTransmux))},iC=function(e,t){e.postMessage({action:t}),tC(e)},nC=function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void iC(t,e);t.transmuxQueue.push(iC.bind(null,t,e))},rC=function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void eC(e);e.transmuxer.transmuxQueue.push(e)},oC=function(e){nC("reset",e)},sC=function(e){var t=new Jx;t.currentTransmux=null,t.transmuxQueue=[];var i=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)},t.postMessage({action:"init",options:e}),t},aC=function(e){var t=e.transmuxer,i=e.endAction||e.action,n=e.callback,r=Fm({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(function r(o){o.data.action===i&&(t.removeEventListener("message",r),o.data.data&&(o.data.data=new Uint8Array(o.data.data,e.byteOffset||0,e.byteLength||o.data.data.byteLength),e.data&&(e.data=o.data.data)),n(o.data))})),e.data){var o=e.data instanceof ArrayBuffer;r.byteOffset=o?0:e.data.byteOffset,r.byteLength=e.data.byteLength;var s=[o?e.data:e.data.buffer];t.postMessage(r,s)}else t.postMessage(r)},lC=2,uC=-101,cC=-102,hC=function(e){e.forEach((function(e){e.abort()}))},dC=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:uC,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:cC,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:lC,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:lC,xhr:t}:null},pC=function(e,t,i){return function(n,r){var o=r.response,s=dC(n,r);if(s)return i(s,e);if(16!==o.byteLength)return i({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:lC,xhr:r},e);for(var a=new DataView(o),l=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]),u=0;u<t.length;u++)t[u].bytes=l;return i(null,e)}},fC=function(e,t){var i=sb(e.map.bytes);if("mp4"!==i){var n=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(i||"unknown")+" container for initialization segment at URL: "+n,code:lC})}aC({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(i){var n=i.tracks,r=i.data;return e.map.bytes=r,n.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},gC=function(e){var t=e.segment,i=e.finishProcessingFn,n=e.responseType;return function(e,r){var o=dC(e,r);if(o)return i(o,t);var s="arraybuffer"!==n&&r.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer}(r.responseText.substring(t.lastReachedChar||0)):r.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),t.key?t.encryptedBytes=new Uint8Array(s):t.bytes=new Uint8Array(s),i(null,t)}},mC=function(e){var t=e.segment,i=e.bytes,n=e.trackInfoFn,r=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,a=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,h=e.dataFn,d=e.doneFn,p=e.onTransmuxerLog,f=t.map&&t.map.tracks||{},g=Boolean(f.audio&&f.video),m=r.bind(null,t,"audio","start"),v=r.bind(null,t,"audio","end"),y=r.bind(null,t,"video","start"),b=r.bind(null,t,"video","end");aC({action:"probeTs",transmuxer:t.transmuxer,data:i,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=i=e.data;var r=e.result;r&&(n(t,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:g}),n=null,r.hasAudio&&!g&&m(r.audioStart),r.hasVideo&&y(r.videoStart),m=null,y=null),rC({bytes:i,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:g,onData:function(e){e.type="combined"===e.type?"video":e.type,h(t,e)},onTrackInfo:function(e){n&&(g&&(e.isMuxed=!0),n(t,e))},onAudioTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),v&&void 0!==e.end&&v(e.end)},onVideoTimingInfo:function(e){y&&void 0!==e.start&&(y(e.start),y=null),b&&void 0!==e.end&&b(e.end)},onVideoSegmentTimingInfo:function(e){o(e)},onAudioSegmentTimingInfo:function(e){s(e)},onId3:function(e,i){a(t,e,i)},onCaptions:function(e){l(t,[e])},isEndOfTimeline:u,onEndedTimeline:function(){c()},onTransmuxerLog:p,onDone:function(e){d&&(e.type="combined"===e.type?"video":e.type,d(null,t,e))}})}})},vC=function(e){var t=e.segment,i=e.bytes,n=e.trackInfoFn,r=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,a=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,h=e.dataFn,d=e.doneFn,p=e.onTransmuxerLog,f=new Uint8Array(i);if(function(e){return qy(e,["moof"]).length>0}(f)){t.isFmp4=!0;var g=t.map.tracks,m={isFmp4:!0,hasVideo:!!g.video,hasAudio:!!g.audio};g.audio&&g.audio.codec&&"enca"!==g.audio.codec&&(m.audioCodec=g.audio.codec),g.video&&g.video.codec&&"encv"!==g.video.codec&&(m.videoCodec=g.video.codec),g.video&&g.audio&&(m.isMuxed=!0),n(t,m);var v=function(e){h(t,{data:f,type:m.hasAudio&&!m.isMuxed?"audio":"video"}),e&&e.length&&l(t,e),d(null,t,{})};aC({action:"probeMp4StartTime",timescales:t.map.timescales,data:f,transmuxer:t.transmuxer,callback:function(e){var n=e.data,o=e.startTime;i=n.buffer,t.bytes=f=n,m.hasAudio&&!m.isMuxed&&r(t,"audio","start",o),m.hasVideo&&r(t,"video","start",o),g.video&&n.byteLength&&t.transmuxer?aC({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:f,timescales:t.map.timescales,trackIds:[g.video.id],callback:function(e){i=e.data.buffer,t.bytes=f=e.data,e.logs.forEach((function(e){p(kE.mergeOptions(e,{stream:"mp4CaptionParser"}))})),v(e.captions)}}):v()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=sb(f)),"ts"!==t.container&&"aac"!==t.container)return n(t,{hasAudio:!1,hasVideo:!1}),void d(null,t,{});mC({segment:t,bytes:i,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:h,doneFn:d,onTransmuxerLog:p})}else d(null,t,{})},yC=function(e,t){var i,n=e.id,r=e.key,o=e.encryptedBytes,s=e.decryptionWorker;s.addEventListener("message",(function e(i){if(i.data.source===n){s.removeEventListener("message",e);var r=i.data.decrypted;t(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),i=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),s.postMessage(Ix({source:n,encrypted:o,key:i,iv:r.iv}),[o.buffer,i.buffer])},bC=function(e){var t=e.activeXhrs,i=e.decryptionWorker,n=e.trackInfoFn,r=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,a=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,h=e.dataFn,d=e.doneFn,p=e.onTransmuxerLog,f=0,g=!1;return function(e,m){if(!g){if(e)return g=!0,hC(t),d(e,m);if((f+=1)===t.length){var v=function(){if(m.encryptedBytes)return function(e){var t=e.decryptionWorker,i=e.segment,n=e.trackInfoFn,r=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,a=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,h=e.dataFn,d=e.doneFn,p=e.onTransmuxerLog;yC({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:t},(function(e){i.bytes=e,vC({segment:i,bytes:i.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:h,doneFn:d,onTransmuxerLog:p})}))}({decryptionWorker:i,segment:m,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:h,doneFn:d,onTransmuxerLog:p});vC({segment:m,bytes:m.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:h,doneFn:d,onTransmuxerLog:p})};if(m.endOfAllRequests=Date.now(),m.map&&m.map.encryptedBytes&&!m.map.bytes)return yC({decryptionWorker:i,id:m.requestId+"-init",encryptedBytes:m.map.encryptedBytes,key:m.map.key},(function(e){m.map.bytes=e,fC(m,(function(e){if(e)return hC(t),d(e,m);v()}))}));v()}}}},_C=function(e){var t=e.segment,i=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){if(!e.target.aborted)return t.stats=kE.mergeOptions(t.stats,function(e){var t=e.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(e,t)}},wC=function(e){var t=e.xhr,i=e.xhrOptions,n=e.decryptionWorker,r=e.segment,o=e.abortFn,s=e.progressFn,a=e.trackInfoFn,l=e.timingInfoFn,u=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,h=e.id3Fn,d=e.captionsFn,p=e.isEndOfTimeline,f=e.endedTimelineFn,g=e.dataFn,m=e.doneFn,v=e.onTransmuxerLog,y=[],b=bC({activeXhrs:y,decryptionWorker:n,trackInfoFn:a,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:h,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:f,dataFn:g,doneFn:m,onTransmuxerLog:v});if(r.key&&!r.key.bytes){var _=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&_.push(r.map.key);var w=t(kE.mergeOptions(i,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),pC(r,_,b));y.push(w)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){var T=t(kE.mergeOptions(i,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),pC(r,[r.map.key],b));y.push(T)}var S=kE.mergeOptions(i,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Cx(r.map)}),E=function(e){var t=e.segment,i=e.finishProcessingFn;return function(e,n){var r=dC(e,n);if(r)return i(r,t);var o=new Uint8Array(n.response);if(t.map.key)return t.map.encryptedBytes=o,i(null,t);t.map.bytes=o,fC(t,(function(e){if(e)return e.xhr=n,e.status=n.status,i(e,t);i(null,t)}))}}({segment:r,finishProcessingFn:b}),x=t(S,E);y.push(x)}var C=kE.mergeOptions(i,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:Cx(r)}),k=t(C,gC({segment:r,finishProcessingFn:b,responseType:C.responseType}));k.addEventListener("progress",_C({segment:r,progressFn:s,trackInfoFn:a,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:h,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:f,dataFn:g})),y.push(k);var P={};return y.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,i=e.abortFn;return function(e){e.target.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}}({loadendState:P,abortFn:o}))})),function(){return hC(y)}},TC=DE("CodecUtils"),SC=function(e,t){var i=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]},EC=function(e){var t={};return e.forEach((function(e){var i=e.mediaType,n=e.type,r=e.details;t[i]=t[i]||[],t[i].push(bv(""+n+r))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return TC("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]})),t},xC=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},CC=function(e,t){var i=t.attributes||{},n=EC(function(e){var t=e.attributes||{};if(t.CODECS)return _v(t.CODECS)}(t)||[]);if(SC(e,t)&&!n.audio&&!function(e,t){if(!SC(e,t))return!0;var i=t.attributes||{},n=e.mediaGroups.AUDIO[i.AUDIO];for(var r in n)if(!n[r].uri&&!n[r].playlists)return!0;return!1}(e,t)){var r=EC(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var r=i[n];if(r.default&&r.playlists)return _v(r.playlists[0].attributes.CODECS)}return null}(e,i.AUDIO)||[]);r.audio&&(n.audio=r.audio)}return n},kC=DE("PlaylistSelector"),PC=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},AC=function(e,t){if(!e)return"";var i=Mm().getComputedStyle(e);return i?i[t]:""},IC=function(e,t){var i=e.slice();e.sort((function(e,n){var r=t(e,n);return 0===r?i.indexOf(e)-i.indexOf(n):r}))},LC=function(e,t){var i,n;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||Mm().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),i-(n=n||Mm().Number.MAX_VALUE)},DC=function(e,t,i,n,r,o){if(e){var s={bandwidth:t,width:i,height:n,limitRenditionByPlayerDimensions:r},a=e.playlists;sx.isAudioOnly(e)&&(a=o.getAudioTrackPlaylists_(),s.audioOnly=!0);var l=a.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||Mm().Number.MAX_VALUE,width:t,height:i,playlist:e}}));IC(l,(function(e,t){return e.bandwidth-t.bandwidth}));var u=(l=l.filter((function(e){return!sx.isIncompatible(e.playlist)}))).filter((function(e){return sx.isEnabled(e.playlist)}));u.length||(u=l.filter((function(e){return!sx.isDisabled(e.playlist)})));var c=u.filter((function(e){return e.bandwidth*Gx.BANDWIDTH_VARIANCE<t})),h=c[c.length-1],d=c.filter((function(e){return e.bandwidth===h.bandwidth}))[0];if(!1===r){var p=d||u[0]||l[0];if(p&&p.playlist){var f="sortedPlaylistReps";return d&&(f="bandwidthBestRep"),u[0]&&(f="enabledPlaylistReps"),kC("choosing "+PC(p)+" using "+f+" with options",s),p.playlist}return kC("could not choose a playlist with options",s),null}var g=c.filter((function(e){return e.width&&e.height}));IC(g,(function(e,t){return e.width-t.width}));var m=g.filter((function(e){return e.width===i&&e.height===n}));h=m[m.length-1];var v,y,b,_,w=m.filter((function(e){return e.bandwidth===h.bandwidth}))[0];if(w||(y=(v=g.filter((function(e){return e.width>i||e.height>n}))).filter((function(e){return e.width===v[0].width&&e.height===v[0].height})),h=y[y.length-1],b=y.filter((function(e){return e.bandwidth===h.bandwidth}))[0]),o.experimentalLeastPixelDiffSelector){var T=g.map((function(e){return e.pixelDiff=Math.abs(e.width-i)+Math.abs(e.height-n),e}));IC(T,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),_=T[0]}var S=_||b||w||d||u[0]||l[0];if(S&&S.playlist){var E="sortedPlaylistReps";return _?E="leastPixelDiffRep":b?E="resolutionPlusOneRep":w?E="resolutionBestRep":d?E="bandwidthBestRep":u[0]&&(E="enabledPlaylistReps"),kC("choosing "+PC(S)+" using "+E+" with options",s),S.playlist}return kC("could not choose a playlist with options",s),null}},OC=function(){var e=this.useDevicePixelRatio&&Mm().devicePixelRatio||1;return DC(this.playlists.master,this.systemBandwidth,parseInt(AC(this.tech_.el(),"width"),10)*e,parseInt(AC(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},RC=function(e){var t=e.inbandTextTracks,i=e.metadataArray,n=e.timestampOffset,r=e.videoDuration;if(i){var o=Mm().WebKitDataCue||Mm().VTTCue,s=t.metadataTrack_;if(s&&(i.forEach((function(e){var t=e.cueTime+n;!("number"!=typeof t||Mm().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var i=new o(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return kE.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return kE.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return kE.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(i),s.addCue(i)}))})),s.cues&&s.cues.length)){for(var a=s.cues,l=[],u=0;u<a.length;u++)a[u]&&l.push(a[u]);var c=l.reduce((function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e}),{}),h=Object.keys(c).sort((function(e,t){return Number(e)-Number(t)}));h.forEach((function(e,t){var i=c[e],n=Number(h[t+1])||r;i.forEach((function(e){e.endTime=n}))}))}}},MC=function(e,t,i){var n,r;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime>=e&&r.endTime<=t&&i.removeCue(r)},NC=function(e){return"number"==typeof e&&isFinite(e)},BC=1/60,FC=function(e){var t=e.startOfSegment,i=e.duration,n=e.segment,r=e.part,o=e.playlist,s=o.mediaSequence,a=o.id,l=o.segments,u=void 0===l?[]:l,c=e.mediaIndex,h=e.partIndex,d=e.timeline,p=u.length-1,f="mediaIndex/partIndex increment";e.getMediaInfoForTime?f="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(f+=" with independent "+e.independent);var g="number"==typeof h,m=e.segment.uri?"segment":"pre-segment",v=g?WE({preloadSegment:n})-1:0;return m+" ["+(s+c)+"/"+(s+p)+"]"+(g?" part ["+h+"/"+v+"]":"")+" segment start/end ["+n.start+" => "+n.end+"]"+(g?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+t+"] duration ["+i+"] timeline ["+d+"] selected by ["+f+"] playlist ["+a+"]"},UC=function(e){return e+"TimingInfo"},$C=function(e){var t=e.timelineChangeController,i=e.currentTimeline,n=e.segmentTimeline,r=e.loaderType,o=e.audioDisabled;if(i===n)return!1;if("audio"===r){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==n}if("main"===r&&o){var a=t.pendingTimelineChange({type:"audio"});return!a||a.to!==n}return!1},HC=function(e){var t=e.segmentDuration,i=e.maxDuration;return!!t&&Math.round(t)>i+OE},jC=function(e,t){if("hls"!==t)return null;var i,n,r=(i={audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo},n=0,["video","audio"].forEach((function(e){var t=i[e+"TimingInfo"];if(t){var r,o=t.start,s=t.end;"bigint"==typeof o||"bigint"==typeof s?r=Mm().BigInt(s)-Mm().BigInt(o):"number"==typeof o&&"number"==typeof s&&(r=s-o),void 0!==r&&r>n&&(n=r)}})),"bigint"==typeof n&&n<Number.MAX_SAFE_INTEGER&&(n=Number(n)),n);if(!r)return null;var o=e.playlist.targetDuration,s=HC({segmentDuration:r,maxDuration:2*o}),a=HC({segmentDuration:r,maxDuration:o}),l="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+r+" when the reported duration is "+e.duration+" and the target duration is "+o+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return s||a?{severity:s?"warn":"info",message:l}:null},zC=function(e){function t(t,i){var n;if(n=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=t.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=t.hasPlayed,n.currentTime_=t.currentTime,n.seekable_=t.seekable,n.seeking_=t.seeking,n.duration_=t.duration,n.mediaSource_=t.mediaSource,n.vhs_=t.vhs,n.loaderType_=t.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=t.segmentMetadataTrack,n.goalBufferLength_=t.goalBufferLength,n.sourceType_=t.sourceType,n.sourceUpdater_=t.sourceUpdater,n.inbandTextTracks_=t.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=t.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=t.parse708captions,n.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,n.captionServices_=t.captionServices,n.experimentalExactManifestTimings=t.experimentalExactManifestTimings,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=kE.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=t.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=t.decrypter,n.syncController_=t.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",(function(){n.isEndOfStream_()||(n.ended_=!1)})),n.fetchAtBuffer_=!1,n.logger_=DE("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(Hm(n),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"main"===n.loaderType_&&n.timelineChangeController_.on("pendingtimelinechange",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"audio"===n.loaderType_&&n.timelineChangeController_.on("timelinechange",(function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),n}zm(t,e);var i=t.prototype;return i.createTransmuxer_=function(){return sC({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Mm().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Mm().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},i.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},i.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&oC(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return kE.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,i=e.hasVideo,n=e.isMuxed;if(i&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=Lx(e),n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e},i.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=Dx(e),n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(e,t){if(void 0===t&&(t={}),e){var i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var o=e.mediaSequence-i.mediaSequence;if(this.logger_("live window shift ["+o+"]"),null!==this.mediaIndex)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var s=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!s.parts||!s.parts.length||!s.parts[this.partIndex])){var a=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=a}}n&&(n.mediaIndex-=o,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}},i.pause=function(){this.checkBufferTimeout_&&(Mm().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return null===this.checkBufferTimeout_},i.resetEverything=function(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&oC(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(e,t,i,n){if(void 0===i&&(i=function(){}),void 0===n&&(n=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r=1,o=function(){0===--r&&i()};for(var s in!n&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,o)),(n||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,i,n){for(var r=Math.ceil((t-n)*ab.ONE_SECOND_IN_TS),o=Math.ceil((i-n)*ab.ONE_SECOND_IN_TS),s=e.slice(),a=e.length;a--&&!(e[a].pts<=o););if(-1===a)return s;for(var l=a+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,a-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,o)),this.inbandTextTracks_)MC(e,t,this.inbandTextTracks_[s]);MC(e,t,this.segmentMetadataTrack_),o()}else this.logger_("skipping remove because no source updater or starting media info")},i.monitorBuffer_=function(){this.checkBufferTimeout_&&Mm().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Mm().setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Mm().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Mm().setTimeout(this.monitorBufferTick_.bind(this),500)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},i.isEndOfStream_=function(e,t,i){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===i&&(i=this.partIndex),!t||!this.mediaSource_)return!1;var n="number"==typeof e&&t.segments[e],r=e+1===t.segments.length,o=!n||!n.parts||i+1===n.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&o},i.chooseNextRequest_=function(){var e=this.buffered_(),t=$E(e)||0,i=HE(e,this.currentTime_()),n=!this.hasPlayed_()&&i>=1,r=i>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||n||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var s={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(s.isSyncRequest)s.mediaIndex=function(e,t,i){t=t||[];for(var n=[],r=0,o=0;o<t.length;o++){var s=t[o];if(e===s.timeline&&(n.push(o),(r+=s.duration)>i))return o}return 0===n.length?0:n[n.length-1]}(this.currentTimeline_,o,t);else if(null!==this.mediaIndex){var a=o[this.mediaIndex],l="number"==typeof this.partIndex?this.partIndex:-1;s.startOfSegment=a.end?a.end:t,a.parts&&a.parts[l+1]?(s.mediaIndex=this.mediaIndex,s.partIndex=l+1):s.mediaIndex=this.mediaIndex+1}else{var u=sx.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),c=u.segmentIndex,h=u.startTime,d=u.partIndex;s.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),s.mediaIndex=c,s.startOfSegment=h,s.partIndex=d}var p=o[s.mediaIndex],f=p&&"number"==typeof s.partIndex&&p.parts&&p.parts[s.partIndex];if(!p||"number"==typeof s.partIndex&&!f)return null;if("number"!=typeof s.partIndex&&p.parts&&(s.partIndex=0,f=p.parts[0]),!i&&f&&!f.independent)if(0===s.partIndex){var g=o[s.mediaIndex-1],m=g.parts&&g.parts.length&&g.parts[g.parts.length-1];m&&m.independent&&(s.mediaIndex-=1,s.partIndex=g.parts.length-1,s.independent="previous segment")}else p.parts[s.partIndex-1].independent&&(s.partIndex-=1,s.independent="previous part");var v=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return s.mediaIndex>=o.length-1&&v&&!this.seeking_()?null:this.generateSegmentInfo_(s)},i.generateSegmentInfo_=function(e){var t=e.independent,i=e.playlist,n=e.mediaIndex,r=e.startOfSegment,o=e.isSyncRequest,s=e.partIndex,a=e.forceTimestampOffset,l=e.getMediaInfoForTime,u=i.segments[n],c="number"==typeof s&&u.parts[s],h={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||u.resolvedUri,mediaIndex:n,partIndex:c?s:null,isSyncRequest:o,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:c&&c.duration||u.duration,segment:u,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},d=void 0!==a?a:this.isPendingTimestampOffset_;h.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:d});var p=$E(this.sourceUpdater_.audioBuffered());return"number"==typeof p&&(h.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(h.gopsToAlignWith=function(e,t,i){if(null==t||!e.length)return[];var n,r=Math.ceil((t-i+3)*ab.ONE_SECOND_IN_TS);for(n=0;n<e.length&&!(e[n].pts>r);n++);return e.slice(n)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),h},i.timestampOffsetForSegment_=function(e){return i=(t=e).segmentTimeline,n=t.currentTimeline,r=t.startOfSegment,o=t.buffered,t.overrideCheck||i!==n?i<n?r:o.length?o.end(o.length-1):r:null;var t,i,n,r,o},i.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=sx.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),o=function(e,t,i){return void 0===i&&(i=1),((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=o)){var s=function(e){var t=e.master,i=e.currentTime,n=e.bandwidth,r=e.duration,o=e.segmentDuration,s=e.timeUntilRebuffer,a=e.currentTimeline,l=e.syncController,u=t.playlists.filter((function(e){return!sx.isIncompatible(e)})),c=u.filter(sx.isEnabled);c.length||(c=u.filter((function(e){return!sx.isDisabled(e)})));var h=c.filter(sx.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=l.getSyncPoint(e,r,a,i)?1:2;return{playlist:e,rebufferingImpact:sx.estimateSegmentRequestTime(o,n,e)*t-s}})),d=h.filter((function(e){return e.rebufferingImpact<=0}));return IC(d,(function(e,t){return LC(t.playlist,e.playlist)})),d.length?d[0]:(IC(h,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),h[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var a=r-o-s.rebufferingImpact,l=.5;o<=OE&&(l=1),!s.playlist||s.playlist.uri===this.playlist_.uri||a<l||(this.bandwidth=s.playlist.attributes.BANDWIDTH*Gx.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(e){this.logger_("Aborting "+FC(e)),this.mediaRequestsAborted+=1},i.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},i.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var i=Object.keys(e).sort(),n=Object.keys(t).sort();if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++){var o=i[r];if(o!==n[r])return!1;if(e[o]!==t[o])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},i.handleTimingInfo_=function(e,t,i,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var r=this.pendingSegment_,o=UC(t);r[o]=r[o]||{},r[o][i]=n,this.logger_("timinginfo: "+t+" - "+i+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(e,t){var i=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((function(e){r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)})),Object.keys(r).forEach((function(e){var t=r[e],o=t.startTime,s=t.endTime,a=t.captions,l=i.inbandTextTracks_;i.logger_("adding cues from "+o+" -> "+s+" for "+e),function(e,t,i){if(!e[i]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var n=i;/^cc708_/.test(i)&&(n="SERVICE"+i.split("_")[1]);var r=t.textTracks().getTrackById(n);if(r)e[i]=r;else{var o=i,s=i,a=!1,l=(t.options_.vhs&&t.options_.vhs.captionServices||{})[n];l&&(o=l.label,s=l.language,a=l.default),e[i]=t.addRemoteTextTrack({kind:"captions",id:n,default:a,label:o,language:s},!1).track}}}(l,i.vhs_.tech_,e),MC(o,s,l[e]),function(e){var t=e.inbandTextTracks,i=e.captionArray,n=e.timestampOffset;if(i){var r=Mm().WebKitDataCue||Mm().VTTCue;i.forEach((function(e){var i=e.stream;t[i].addCue(new r(e.startTime+n,e.endTime+n,e.text))}))}}({captionArray:a,inbandTextTracks:l,timestampOffset:n})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},i.handleId3_=function(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,i){e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,i,this.vhs_.tech_),RC({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i))},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},i.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},i.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!!e&&(!this.getCurrentMediaInfo_()||!$C({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},i.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},i.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var i=t.hasAudio,n=t.hasVideo,r=t.isMuxed;return!(n&&!e.videoTimingInfo)&&(!(i&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)&&!$C({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[UC(t.type)].start;else{var n,r=this.getCurrentMediaInfo_(),o="main"===this.loaderType_&&r&&r.hasVideo;o&&(n=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:o,firstVideoFrameTimeForData:n,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});var s=this.chooseNextRequest_();if(s.mediaIndex!==i.mediaIndex||s.partIndex!==i.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},i.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},i.getInitSegmentAndUpdateState_=function(e){var t=e.type,i=e.initSegment,n=e.map,r=e.playlist;if(n){var o=Lx(n);if(this.activeInitSegmentId_===o)return null;i=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=o}return i&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,i):null},i.handleQuotaExceededError_=function(e,t){var i=this,n=e.segmentInfo,r=e.type,o=e.bytes,s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+UE(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+UE(a).join(", "));var l=s.length?s.start(0):0,u=s.length?s.end(s.length-1):0,c=a.length?a.start(0):0,h=a.length?a.end(a.length-1):0;if(u-l<=1&&h-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+o.byteLength+", audio buffer: "+UE(s).join(", ")+", video buffer: "+UE(a).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:n,type:r,bytes:o}));var d=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+d),this.remove(0,d,(function(){i.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=Mm().setTimeout((function(){i.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),i.quotaExceededErrorRetryTimeout_=null,i.processCallQueue_()}),1e3)}),!0)},i.handleAppendError_=function(e,t){var i=e.segmentInfo,n=e.type,r=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(n+" append of "+r.length+"b failed for segment #"+i.mediaIndex+" in playlist "+i.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:i,type:n,bytes:r}))},i.appendToSourceBuffer_=function(e){var t,i,n,r=e.segmentInfo,o=e.type,s=e.initSegment,a=e.data,l=e.bytes;if(!l){var u=[a],c=a.byteLength;s&&(u.unshift(s),c+=s.byteLength),n=0,(t={bytes:c,segments:u}).bytes&&(i=new Uint8Array(t.bytes),t.segments.forEach((function(e){i.set(e,n),n+=e.byteLength}))),l=i}this.sourceUpdater_.appendBuffer({segmentInfo:r,type:o,bytes:l},this.handleAppendError_.bind(this,{segmentInfo:r,type:o,bytes:l}))},i.handleSegmentTimingInfo_=function(e,t,i){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment,r=e+"TimingInfo";n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}},i.appendData_=function(e,t){var i=t.type,n=t.data;if(n&&n.byteLength&&("audio"!==i||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:r,data:n})}},i.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var i=Fm({},e,{forceTimestampOffset:!0});Fm(e,t.generateSegmentInfo_(i)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},i.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var i=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,o=e.timeline!==this.currentTimeline_&&e.timeline>0,s=n||r&&o;this.logger_("Requesting "+FC(e)),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=wC({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(i){var n=i.message,r=i.level,o=i.stream;t.logger_(FC(e)+" logged from transmuxer stream "+o+" as a "+r+": "+n)}})},i.trimBackBuffer_=function(e){var t=function(e,t,i){var n=t-Gx.BACK_BUFFER_LENGTH;e.length&&(n=Math.max(n,e.start(0)));var r=t-i;return Math.min(r,n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},i.createSimplifiedSegmentObj_=function(e){var t=e.segment,i=e.part,n={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?n.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(n.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){var o=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=o}return t.map&&(n.map=this.initSegmentForMap(t.map)),n},i.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<BC?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+BC):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},i.segmentRequestFinished_=function(e,t,i){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===cC)return;return this.pause(),e.code===uC?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}},i.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},i.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},i.trueSegmentStart_=function(e){var t=e.currentStart,i=e.playlist,n=e.mediaIndex,r=e.firstVideoFrameTimeForData,o=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,a=e.videoTimingInfo,l=e.audioTimingInfo;if(void 0!==t)return t;if(!s)return l.start;var u=i.segments[n-1];return 0!==n&&u&&void 0!==u.start&&u.end===r+o?a.start:r},i.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var i=t.hasAudio,n=t.hasVideo,r=t.isMuxed,o="main"===this.loaderType_&&n,s=!this.audioDisabled_&&i&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);o&&e.waitingOnAppends++,s&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},i.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(e){var t=function(e,t,i){return"main"===e&&t&&i?i.hasAudio||i.hasVideo?t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},i.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},i.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,i=e.audioTimingInfo,n=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:i&&"number"==typeof i.transmuxedDecodeStart?i.transmuxedDecodeStart:n.start:n.start},i.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),i="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end="number"==typeof i.end?i.end:i.start+e.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=jC(e,this.sourceType_);if(t&&("warn"===t.severity?kE.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+FC(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var i=e.segment,n=e.part,r=i.end&&this.currentTime_()-i.end>3*e.playlist.targetDuration,o=n&&n.end&&this.currentTime_()-n.end>3*e.playlist.partTargetDuration;if(r||o)return this.logger_("bad "+(r?"segment":"part")+" "+FC(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+FC(e))},i.recordThroughput_=function(e){if(e.duration<BC)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+BC);else{var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}},i.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,i=t.start,n=t.end;if(NC(i)&&NC(n)){MC(i,n,this.segmentMetadataTrack_);var r=Mm().WebKitDataCue||Mm().VTTCue,o={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:n},s=new r(i,n,JSON.stringify(o));s.value=o,this.segmentMetadataTrack_.addCue(s)}}},t}(kE.EventTarget);function qC(){}var VC,WC=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},GC=["video","audio"],YC=function(e,t){var i=t[e+"Buffer"];return i&&i.updating||t.queuePending[e]},XC=function e(t,i){if(0!==i.queue.length){var n=0,r=i.queue[n];if("mediaSource"!==r.type){if("mediaSource"!==t&&i.ready()&&"closed"!==i.mediaSource.readyState&&!YC(t,i)){if(r.type!==t){if(n=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if("mediaSource"===n.type)return null;if(n.type===e)return i}return null}(t,i.queue),null===n)return;r=i.queue[n]}return i.queue.splice(n,1),i.queuePending[t]=r,r.action(t,i),r.doneFn?void 0:(i.queuePending[t]=null,void e(t,i))}}else i.updating()||"closed"===i.mediaSource.readyState||(i.queue.shift(),r.action(i),r.doneFn&&r.doneFn(),e("audio",i),e("video",i))}},KC=function(e,t){var i=t[e+"Buffer"],n=WC(e);i&&(i.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),i.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},QC=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},ZC=function(e,t,i){return function(n,r){var o=r[n+"Buffer"];if(QC(r.mediaSource,o)){r.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+n+"Buffer");try{o.appendBuffer(e)}catch(e){r.logger_("Error with code "+e.code+" "+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+n+"Buffer"),r.queuePending[n]=null,i(e)}}}},JC=function(e,t){return function(i,n){var r=n[i+"Buffer"];if(QC(n.mediaSource,r)){n.logger_("Removing "+e+" to "+t+" from "+i+"Buffer");try{r.remove(e,t)}catch(r){n.logger_("Remove "+e+" to "+t+" from "+i+"Buffer failed")}}}},ek=function(e){return function(t,i){var n=i[t+"Buffer"];QC(i.mediaSource,n)&&(i.logger_("Setting "+t+"timestampOffset to "+e),n.timestampOffset=e)}},tk=function(e){return function(t,i){e()}},ik=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){kE.log.warn("Failed to call media source endOfStream",e)}}}},nk=function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(e){kE.log.warn("Failed to set media source duration",e)}}},rk=function(){return function(e,t){if("open"===t.mediaSource.readyState){var i=t[e+"Buffer"];if(QC(t.mediaSource,i)){t.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(t){kE.log.warn("Failed to abort on "+e+"Buffer",t)}}}}},ok=function(e,t){return function(i){var n=WC(e),r=Tv(t);i.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var o=i.mediaSource.addSourceBuffer(r);o.addEventListener("updateend",i["on"+n+"UpdateEnd_"]),o.addEventListener("error",i["on"+n+"Error_"]),i.codecs[e]=t,i[e+"Buffer"]=o}},sk=function(e){return function(t){var i=t[e+"Buffer"];if(KC(e,t),QC(t.mediaSource,i)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(i)}catch(t){kE.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},ak=function(e){return function(t,i){var n=i[t+"Buffer"],r=Tv(e);if(QC(i.mediaSource,n)&&i.codecs[t]!==e){i.logger_("changing "+t+"Buffer codec from "+i.codecs[t]+" to "+e);try{n.changeType(r),i.codecs[t]=e}catch(e){kE.log.warn("Failed to changeType on "+t+"Buffer",e)}}}},lk=function(e){var t=e.type,i=e.sourceUpdater,n=e.action,r=e.doneFn,o=e.name;i.queue.push({type:t,action:n,doneFn:r,name:o}),XC(t,i)},uk=function(e,t){return function(i){if(t.queuePending[e]){var n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[e+"Error_"])}XC(e,t)}},ck=function(e){function t(t){var i;return(i=e.call(this)||this).mediaSource=t,i.sourceopenListener_=function(){return XC("mediaSource",Hm(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=DE("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=uk("video",Hm(i)),i.onAudioUpdateEnd_=uk("audio",Hm(i)),i.onVideoError_=function(e){i.videoError_=e},i.onAudioError_=function(e){i.audioError_=e},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}zm(t,e);var i=t.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(e,t){lk({type:"mediaSource",sourceUpdater:this,action:ok(e,t),name:"addSourceBuffer"})},i.abort=function(e){lk({type:e,sourceUpdater:this,action:rk(e),name:"abort"})},i.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?lk({type:"mediaSource",sourceUpdater:this,action:sk(e),name:"removeSourceBuffer"}):kE.log.error("removeSourceBuffer is not supported!")},i.canRemoveSourceBuffer=function(){return!kE.browser.IE_VERSION&&!kE.browser.IS_FIREFOX&&Mm().MediaSource&&Mm().MediaSource.prototype&&"function"==typeof Mm().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return Mm().SourceBuffer&&Mm().SourceBuffer.prototype&&"function"==typeof Mm().SourceBuffer.prototype.changeType},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(e,t){this.canChangeType()?lk({type:e,sourceUpdater:this,action:ak(t),name:"changeType"}):kE.log.error("changeType is not supported!")},i.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(i){var n=e[i];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(i,n);t.canChangeType()&&t.changeType(i,n)}))},i.appendBuffer=function(e,t){var i=this,n=e.segmentInfo,r=e.type,o=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+o.length+" until video append");if(lk({type:r,sourceUpdater:this,action:ZC(o,n||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach((function(e){i.appendBuffer.apply(i,e)}))}},i.audioBuffered=function(){return QC(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:kE.createTimeRange()},i.videoBuffered=function(){return QC(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:kE.createTimeRange()},i.buffered=function(){var e=QC(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=QC(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var i=null,n=null,r=0,o=[],s=[];if(!(e&&e.length&&t&&t.length))return kE.createTimeRange();for(var a=e.length;a--;)o.push({time:e.start(a),type:"start"}),o.push({time:e.end(a),type:"end"});for(a=t.length;a--;)o.push({time:t.start(a),type:"start"}),o.push({time:t.end(a),type:"end"});for(o.sort((function(e,t){return e.time-t.time})),a=0;a<o.length;a++)"start"===o[a].type?2==++r&&(i=o[a].time):"end"===o[a].type&&1==--r&&(n=o[a].time),null!==i&&null!==n&&(s.push([i,n]),i=null,n=null);return kE.createTimeRanges(s)}(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(e,t){void 0===t&&(t=qC),lk({type:"mediaSource",sourceUpdater:this,action:nk(e),name:"duration",doneFn:t})},i.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=qC),"string"!=typeof e&&(e=void 0),lk({type:"mediaSource",sourceUpdater:this,action:ik(e),name:"endOfStream",doneFn:t})},i.removeAudio=function(e,t,i){void 0===i&&(i=qC),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?lk({type:"audio",sourceUpdater:this,action:JC(e,t),doneFn:i,name:"remove"}):i()},i.removeVideo=function(e,t,i){void 0===i&&(i=qC),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?lk({type:"video",sourceUpdater:this,action:JC(e,t),doneFn:i,name:"remove"}):i()},i.updating=function(){return!(!YC("audio",this)&&!YC("video",this))},i.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(lk({type:"audio",sourceUpdater:this,action:ek(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},i.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(lk({type:"video",sourceUpdater:this,action:ek(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},i.audioQueueCallback=function(e){this.audioBuffer&&lk({type:"audio",sourceUpdater:this,action:tk(e),name:"callback"})},i.videoQueueCallback=function(e){this.videoBuffer&&lk({type:"video",sourceUpdater:this,action:tk(e),name:"callback"})},i.dispose=function(){var e=this;this.trigger("dispose"),GC.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return KC(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(kE.EventTarget),hk=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},dk=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),pk=function(e){function t(){return e.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return zm(t,e),t}(ub(Error)),fk=function(e){function t(t,i){var n;return void 0===i&&(i={}),(n=e.call(this,t,i)||this).mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.loadVttJs=t.loadVttJs,n.shouldSaveSegmentTimingInfo_=!1,n}zm(t,e);var i=t.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return kE.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return kE.createTimeRanges([[t,i]])},i.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var i=Lx(e),n=this.initSegments_[i];if(t&&!n&&e.bytes){var r=dk.byteLength+e.bytes.byteLength,o=new Uint8Array(r);o.set(e.bytes),o.set(dk,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return n||e},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},i.remove=function(e,t){MC(e,t,this.subtitlesTrack_)},i.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}},i.timestampOffsetForSegment_=function(){return null},i.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},i.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},i.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(e,t,i){var n=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===uC&&this.handleTimeout_(),e.code===cC?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var o=r.segment;if(o.map&&(o.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof Mm().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then((function(){return n.segmentRequestFinished_(e,t,i)}),(function(){return n.stopForError({message:"Error loading vtt.js"})}));o.requested=!0;try{this.parseVTTCues_(r)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,r.cues.forEach((function(e){n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new(Mm().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var i=0;i<t.length;i++){for(var n=[],r=0,o=0;o<t.length;o++)t[i].startTime===t[o].startTime&&t[i].endTime===t[o].endTime&&t[i].text===t[o].text&&++r>1&&n.push(t[o]);n.length&&n.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(e){var t,i=!1;if("function"!=typeof Mm().WebVTT)throw new pk;"function"==typeof Mm().TextDecoder?t=new(Mm().TextDecoder)("utf8"):(t=Mm().WebVTT.StringDecoder(),i=!0);var n=new(Mm().WebVTT.Parser)(Mm(),Mm().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){e.timestampmap=t},n.onparsingerror=function(e){kE.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var r=e.segment.map.bytes;i&&(r=hk(r)),n.parse(r)}var o=e.bytes;i&&(o=hk(o)),n.parse(o),n.flush()},i.updateTimeMapping_=function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,o=r.MPEGTS/ab.ONE_SECOND_IN_TS-r.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=o,e.endTime+=o})),!i.syncInfo){var s=e.cues[0].startTime,a=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(s,a-n.duration)}}}else n.empty=!0},t}(zC),gk=function(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},mk=[{name:"VOD",run:function(e,t,i,n,r){if(i!==1/0){return{time:0,segmentIndex:0,partIndex:null}}return null}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var o=null,s=null,a=qE(t);r=r||0;for(var l=0;l<a.length;l++){var u=a[t.endList||0===r?l:a.length-(l+1)],c=u.segment,h=e.timelineToDatetimeMappings[c.timeline];if(h&&c.dateTimeObject){var d=c.dateTimeObject.getTime()/1e3+h;if(c.parts&&"number"==typeof u.partIndex)for(var p=0;p<u.partIndex;p++)d+=c.parts[p].duration;var f=Math.abs(r-d);if(null!==s&&(0===f||s<f))break;s=f,o={time:d,segmentIndex:u.segmentIndex,partIndex:u.partIndex}}}return o}},{name:"Segment",run:function(e,t,i,n,r){var o=null,s=null;r=r||0;for(var a=qE(t),l=0;l<a.length;l++){var u=a[t.endList||0===r?l:a.length-(l+1)],c=u.segment,h=u.part&&u.part.start||c&&c.start;if(c.timeline===n&&void 0!==h){var d=Math.abs(r-h);if(null!==s&&s<d)break;(!o||null===s||s>=d)&&(s=d,o={time:h,segmentIndex:u.segmentIndex,partIndex:u.partIndex})}}return o}},{name:"Discontinuity",run:function(e,t,i,n,r){var o=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,a=0;a<t.discontinuityStarts.length;a++){var l=t.discontinuityStarts[a],u=t.discontinuitySequence+a+1,c=e.discontinuities[u];if(c){var h=Math.abs(r-c.time);if(null!==s&&s<h)break;(!o||null===s||s>=h)&&(s=h,o={time:c.time,segmentIndex:l,partIndex:null})}}return o}},{name:"Playlist",run:function(e,t,i,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],vk=function(e){function t(t){var i;return(i=e.call(this)||this).timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=DE("SyncController"),i}zm(t,e);var i=t.prototype;return i.getSyncPoint=function(e,t,i,n){var r=this.runStrategies_(e,t,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null},i.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+KE({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:n.segmentIndex,endIndex:0}))},i.runStrategies_=function(e,t,i,n){for(var r=[],o=0;o<mk.length;o++){var s=mk[o],a=s.run(this,e,t,i,n);a&&(a.strategy=s.name,r.push({strategy:s.name,syncPoint:a}))}return r},i.selectSyncPoint_=function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,o=1;o<e.length;o++){var s=Math.abs(e[o].syncPoint[t.key]-t.value);s<n&&(n=s,i=e[o].syncPoint,r=e[o].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+("number"==typeof i.partIndex?",partIndex:"+i.partIndex:"")+"]"),i},i.saveExpiredSegmentInfo=function(e,t){var i=t.mediaSequence-e.mediaSequence;if(i>86400)kE.log.warn("Not saving expired segment info. Media sequence gap "+i+" is too large.");else for(var n=i-1;n>=0;n--){var r=e.segments[n];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}},i.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,i=e.shouldSaveTimelineMapping,n=this.calculateSegmentTimeMapping_(t,t.timingInfo,i),r=t.segment;n&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:r.start}));var o=r.dateTimeObject;r.discontinuity&&i&&o&&(this.timelineToDatetimeMappings[r.timeline]=-o.getTime()/1e3)},i.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},i.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,t,i){var n,r,o=e.segment,s=e.part,a=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+a.time+"] [mapping: "+a.mapping+"]")),n=e.startOfSegment,r=t.end+a.mapping;else{if(!a)return!1;n=t.start+a.mapping,r=t.end+a.mapping}return s&&(s.start=n,s.end=r),(!o.start||n<o.start)&&(o.start=n),o.end=r,!0},i.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r=t.discontinuityStarts[n],o=t.discontinuitySequence+n+1,s=r-e.mediaIndex,a=Math.abs(s);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>a){var l=void 0;l=s<0?i.start-KE({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):i.end+KE({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[o]={time:l,accuracy:a}}}},i.dispose=function(){this.trigger("dispose"),this.off()},t}(kE.EventTarget),yk=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}zm(t,e);var i=t.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"==typeof i&&"number"==typeof n&&(this.pendingTimelineChanges_[t]={type:t,from:i,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},i.lastTimelineChange=function(e){var t=e.type,i=e.from,n=e.to;return"number"==typeof i&&"number"==typeof n&&(this.lastTimelineChanges_[t]={type:t,from:i,to:n},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(kE.EventTarget),bk=Kx(Qx((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function t(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}var i=t((function(e){function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0})),r=t((function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(i,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),o=t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),s=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),o=t.length,s=0;s<o;++s)t[s].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();var a,l=null,u=function(){function e(e){var t,i,n;l||(l=function(){var e,t,i,n,r,o,s,a,l=[[[],[],[],[],[]],[[],[],[],[],[]]],u=l[0],c=l[1],h=u[4],d=c[4],p=[],f=[];for(e=0;e<256;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=i=0;!h[t];t^=n||1,i=f[i]||1)for(o=(o=i^i<<1^i<<2^i<<3^i<<4)>>8^255&o^99,h[t]=o,d[o]=t,a=16843009*p[r=p[n=p[t]]]^65537*r^257*n^16843008*t,s=257*p[o]^16843008*o,e=0;e<4;e++)u[e][t]=s=s<<24^s>>>8,c[e][o]=a=a<<24^a>>>8;for(e=0;e<5;e++)u[e]=u[e].slice(0),c[e]=c[e].slice(0);return l}()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];var r=this._tables[0][4],o=this._tables[1],s=e.length,a=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");var u=e.slice(0),c=[];for(this._key=[u,c],t=s;t<4*s+28;t++)n=u[t-1],(t%s==0||8===s&&t%s==4)&&(n=r[n>>>24]<<24^r[n>>16&255]<<16^r[n>>8&255]<<8^r[255&n],t%s==0&&(n=n<<8^n>>>24^a<<24,a=a<<1^283*(a>>7))),u[t]=u[t-s]^n;for(i=0;t;i++,t--)n=u[3&i?t:t-4],c[i]=t<=4||i<4?n:o[0][r[n>>>24]]^o[1][r[n>>16&255]]^o[2][r[n>>8&255]]^o[3][r[255&n]]}return e.prototype.decrypt=function(e,t,i,n,r,o){var s,a,l,u,c=this._key[1],h=e^c[0],d=n^c[1],p=i^c[2],f=t^c[3],g=c.length/4-2,m=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],w=v[3],T=v[4];for(u=0;u<g;u++)s=y[h>>>24]^b[d>>16&255]^_[p>>8&255]^w[255&f]^c[m],a=y[d>>>24]^b[p>>16&255]^_[f>>8&255]^w[255&h]^c[m+1],l=y[p>>>24]^b[f>>16&255]^_[h>>8&255]^w[255&d]^c[m+2],f=y[f>>>24]^b[h>>16&255]^_[d>>8&255]^w[255&p]^c[m+3],m+=4,h=s,d=a,p=l;for(u=0;u<4;u++)r[(3&-u)+o]=T[h>>>24]<<24^T[d>>16&255]<<16^T[p>>8&255]<<8^T[255&f]^c[m++],s=h,h=d,d=p,p=f,f=s},e}(),c=function(e){function t(){var t;return(t=e.call(this,s)||this).jobs=[],t.delay=1,t.timeout_=null,t}o(t,e);var i=t.prototype;return i.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(s),h=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},d=function(){function e(t,i,n,r){var o=e.STEP,s=new Int32Array(t.buffer),a=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new c,this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+o),i,n,a)),l=o;l<s.length;l+=o)n=new Uint32Array([h(s[l-4]),h(s[l-3]),h(s[l-2]),h(s[l-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+o),i,n,a));this.asyncStream_.push((function(){var e;r(null,(e=a).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,i,n){return function(){var r=function(e,t,i){var n,r,o,s,a,l,c,d,p,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),g=new u(Array.prototype.slice.call(t)),m=new Uint8Array(e.byteLength),v=new Int32Array(m.buffer);for(n=i[0],r=i[1],o=i[2],s=i[3],p=0;p<f.length;p+=4)a=h(f[p]),l=h(f[p+1]),c=h(f[p+2]),d=h(f[p+3]),g.decrypt(a,l,c,d,v,p),v[p]=h(v[p]^n),v[p+1]=h(v[p+1]^r),v[p+2]=h(v[p+2]^o),v[p+3]=h(v[p+3]^s),n=a,r=l,o=c,s=d;return m}(e,t,i);n.set(r,e.byteOffset)}},i(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}();a="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};var p=a.BigInt||Number;p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000");var f=function(e){var t={};return Object.keys(e).forEach((function(i){var n,r=e[i];n=r,("function"===ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer)?t[i]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[i]=r})),t};self.onmessage=function(e){var t=e.data,i=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),n=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new d(i,n,r,(function(e,i){self.postMessage(f({source:t.source,decrypted:i}),[i.buffer])}))}}))),_k=Xx(bk),wk=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Tk=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Sk=function(e,t){t.activePlaylistLoader=e,e.load()},Ek={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;Tk(i,n);var o=n.activeTrack(),s=n.activeGroup(),a=(s.filter((function(e){return e.default}))[0]||s[0]).id,l=n.tracks[a];if(o!==l){for(var u in kE.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[u].enabled=n.tracks[u]===l;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],n=t.mediaTypes[e];kE.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Tk(i,n);var r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}}},xk={AUDIO:function(e,t,i){if(t){var n=i.tech,r=i.requestOptions,o=i.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();o.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&o.load()})),t.on("loadedplaylist",(function(){o.playlist(t.media(),r),n.paused()||o.load()})),t.on("error",Ek[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,o=i.segmentLoaders[e],s=i.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();o.playlist(e,r),o.track(s.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&o.load()})),t.on("loadedplaylist",(function(){o.playlist(t.media(),r),n.paused()||o.load()})),t.on("error",Ek[e](e,i))}},Ck={AUDIO:function(e,t){var i=t.vhs,n=t.sourceType,r=t.segmentLoaders[e],o=t.requestOptions,s=t.master.mediaGroups,a=t.mediaTypes[e],l=a.groups,u=a.tracks,c=a.logger_,h=t.masterPlaylistLoader,d=ox(h.master);for(var p in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}},d&&(s[e].main.default.playlists=h.master.playlists)),s[e])for(var f in l[p]||(l[p]=[]),s[e][p]){var g=s[e][p][f],m=void 0;if(d?(c("AUDIO group '"+p+"' label '"+f+"' is a master playlist"),g.isMasterPlaylist=!0,m=null):m="vhs-json"===n&&g.playlists?new wx(g.playlists[0],i,o):g.resolvedUri?new wx(g.resolvedUri,i,o):g.playlists&&"dash"===n?new Wx(g.playlists[0],i,o,h):null,g=kE.mergeOptions({id:f,playlistLoader:m},g),xk[e](e,g.playlistLoader,t),l[p].push(g),void 0===u[f]){var v=new kE.AudioTrack({id:f,kind:wk(g),enabled:!1,language:g.language,default:g.default,label:f});u[f]=v}}r.on("error",Ek[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.vhs,r=t.sourceType,o=t.segmentLoaders[e],s=t.requestOptions,a=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,h=t.masterPlaylistLoader;for(var d in a[e])for(var p in u[d]||(u[d]=[]),a[e][d])if(!a[e][d][p].forced){var f=a[e][d][p],g=void 0;if("hls"===r)g=new wx(f.resolvedUri,n,s);else if("dash"===r){if(!f.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;g=new Wx(f.playlists[0],n,s,h)}else"vhs-json"===r&&(g=new wx(f.playlists?f.playlists[0]:f.resolvedUri,n,s));if(f=kE.mergeOptions({id:p,playlistLoader:g},f),xk[e](e,f.playlistLoader,t),u[d].push(f),void 0===c[p]){var m=i.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track;c[p]=m}}o.on("error",Ek[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],o=r.groups,s=r.tracks;for(var a in n[e])for(var l in o[a]||(o[a]=[]),n[e][a]){var u=n[e][a][l];if(/^(?:CC|SERVICE)/.test(u.instreamId)){var c=i.options_.vhs&&i.options_.vhs.captionServices||{},h={label:l,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(c[h.instreamId]&&(h=kE.mergeOptions(h,c[h.instreamId])),void 0===h.default&&delete h.default,o[a].push(kE.mergeOptions({id:l},u)),void 0===s[l]){var d=i.addRemoteTextTrack({id:h.instreamId,kind:"captions",default:h.default,language:h.language,label:h.label},!1).track;s[l]=d}}}}},kk=function e(t,i){for(var n=0;n<t.length;n++){if(nx(i,t[n]))return!0;if(t[n].playlists&&e(t[n].playlists,i))return!0}return!1},Pk={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},Ak=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){Ck[t](t,e)}));var t=e.mediaTypes,i=e.masterPlaylistLoader,n=e.tech,r=e.vhs,o=e.segmentLoaders,s=o.AUDIO,a=o.main;["AUDIO","SUBTITLES"].forEach((function(i){t[i].activeGroup=function(e,t){return function(i){var n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,o=n.media();if(!o)return null;var s=null;o.attributes[e]&&(s=r[o.attributes[e]]);var a=Object.keys(r);if(!s)if("AUDIO"===e&&a.length>1&&ox(t.master))for(var l=0;l<a.length;l++){var u=r[a[l]];if(kk(u,o)){s=u;break}}else r.main?s=r.main:1===a.length&&(s=r[a[0]]);return void 0===i?s:null!==i&&s&&s.filter((function(e){return e.id===i.id}))[0]||null}}(i,e),t[i].activeTrack=Pk[i](i,e),t[i].onGroupChanged=function(e,t){return function(){var i=t.segmentLoaders,n=i[e],r=i.main,o=t.mediaTypes[e],s=o.activeTrack(),a=o.getActiveGroup(),l=o.activePlaylistLoader,u=o.lastGroup_;a&&u&&a.id===u.id||(o.lastGroup_=a,o.lastTrack_=s,Tk(n,o),a&&!a.isMasterPlaylist&&(a.playlistLoader?(n.resyncLoader(),Sk(a.playlistLoader,o)):l&&r.resetEverything()))}}(i,e),t[i].onGroupChanging=function(e,t){return function(){var i=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,i.abort(),i.pause()}}(i,e),t[i].onTrackChanged=function(e,t){return function(){var i=t.masterPlaylistLoader,n=t.segmentLoaders,r=n[e],o=n.main,s=t.mediaTypes[e],a=s.activeTrack(),l=s.getActiveGroup(),u=s.activePlaylistLoader,c=s.lastTrack_;if((!c||!a||c.id!==a.id)&&(s.lastGroup_=l,s.lastTrack_=a,Tk(r,s),l)){if(l.isMasterPlaylist){if(!a||!c||a.id===c.id)return;var h=t.vhs.masterPlaylistController_,d=h.selectPlaylist();if(h.media()===d)return;return s.logger_("track change. Switching master audio from "+c.id+" to "+a.id),i.pause(),o.resetEverything(),void h.fastQualityChange_(d)}if("AUDIO"===e){if(!l.playlistLoader)return o.setAudio(!0),void o.resetEverything();r.setAudio(!0),o.setAudio(!1)}u!==l.playlistLoader?(r.track&&r.track(a),r.resetEverything(),Sk(l.playlistLoader,s)):Sk(l.playlistLoader,s)}}}(i,e),t[i].getActiveGroup=function(e,t){var i=t.mediaTypes;return function(){var t=i[e].activeTrack();return t?i[e].activeGroup(t):null}}(i,e)}));var l=t.AUDIO.activeGroup();if(l){var u=(l.filter((function(e){return e.default}))[0]||l[0]).id;t.AUDIO.tracks[u].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}i.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),i.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var c=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};for(var h in n.audioTracks().addEventListener("change",c),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(function(){n.audioTracks().removeEventListener("change",c),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[h])},Ik=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Lk=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Dk=function(e){function t(t){var i;i=e.call(this)||this;var n=t.src,r=t.handleManifestRedirects,o=t.withCredentials,s=t.tech,a=t.bandwidth,l=t.externVhs,u=t.useCueTags,c=t.blacklistDuration,h=t.enableLowInitialPlaylist,d=t.sourceType,p=t.cacheEncryptionKeys,f=t.experimentalBufferBasedABR,g=t.experimentalLeastPixelDiffSelector,m=t.captionServices;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");var v=t.maxPlaylistRetries;null==v&&(v=1/0),VC=l,i.experimentalBufferBasedABR=Boolean(f),i.experimentalLeastPixelDiffSelector=Boolean(g),i.withCredentials=o,i.tech_=s,i.vhs_=s.vhs,i.sourceType_=d,i.useCueTags_=u,i.blacklistDuration=c,i.maxPlaylistRetries=v,i.enableLowInitialPlaylist=h,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:o,handleManifestRedirects:r,maxPlaylistRetries:v,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:qC,activeTrack:qC,getActiveGroup:qC,onGroupChanged:qC,onTrackChanged:qC,lastTrack_:null,logger_:DE("MediaGroups["+t+"]")}})),e}(),i.mediaSource=new(Mm().MediaSource),i.handleDurationChange_=i.handleDurationChange_.bind(Hm(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(Hm(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(Hm(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=kE.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new vk(t),i.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new _k,i.sourceUpdater_=new ck(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new yk;var y={vhs:i.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:m,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:a,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:p,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings};i.masterPlaylistLoader_="dash"===i.sourceType_?new Wx(n,i.vhs_,i.requestOptions_):new wx(n,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new zC(kE.mergeOptions(y,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),t),i.audioSegmentLoader_=new zC(kE.mergeOptions(y,{loaderType:"audio"}),t),i.subtitleSegmentLoader_=new fk(kE.mergeOptions(y,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise((function(e,t){function i(){s.off("vttjserror",n),e()}function n(){s.off("vttjsloaded",i),t()}s.one("vttjsloaded",i),s.one("vttjserror",n),s.addWebVttScript_()}))}}),t),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",(function(){return i.startABRTimer_()})),i.tech_.on("pause",(function(){return i.stopABRTimer_()})),i.tech_.on("play",(function(){return i.startABRTimer_()}))),Ik.forEach((function(e){i[e+"_"]=Lk.bind(Hm(i),e)})),i.logger_=DE("MPC"),i.triggeredFmp4Usage=!1,"none"===i.tech_.preload()?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var b="none"===i.tech_.preload()?"play":"loadstart";return i.tech_.one(b,(function(){var e=Date.now();i.tech_.one("loadeddata",(function(){i.timeToLoadedData__=Date.now()-e,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends}))})),i}zm(t,e);var i=t.prototype;return i.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},i.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},i.timeToLoadedData_=function(){return this.timeToLoadedData__},i.checkABR_=function(e){void 0===e&&(e="abr");var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)},i.switchMedia_=function(e,t,i){var n=this.media(),r=n&&(n.id||n.uri),o=e.id||e.uri;r&&r!==o&&(this.logger_("switch media "+r+" -> "+o+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,i)},i.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=Mm().setInterval((function(){return e.checkABR_()}),250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Mm().clearInterval(this.abrTimer_),this.abrTimer_=null)},i.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var i,n=e.mediaGroups.AUDIO,r=Object.keys(n);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)i=this.mediaTypes_.AUDIO.activeTrack();else{var o=n.main||r.length&&n[r[0]];for(var s in o)if(o[s].default){i={label:s};break}}if(!i)return t;var a=[];for(var l in n)if(n[l][i.label]){var u=n[l][i.label];if(u.playlists&&u.playlists.length)a.push.apply(a,u.playlists);else if(u.uri)a.push(u);else if(e.playlists.length)for(var c=0;c<e.playlists.length;c++){var h=e.playlists[c];h.attributes&&h.attributes.AUDIO&&h.attributes.AUDIO===l&&a.push(h)}}return a.length?a:t},i.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;ix(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Ak({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var i;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),!i||!e.shouldSwitchToMedia_(i))return;if(e.initialMedia_=i,e.switchMedia_(e.initialMedia_,"initial"),!("vhs-json"===e.sourceType_&&e.initialMedia_.segments))return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;ix(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.masterPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&(e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck")))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},i.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(e,t){var i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var o in i.AUDIO)for(var s in i.AUDIO[o]){i.AUDIO[o][s].uri||(n=!1)}n&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),VC.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),n=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,i=e.buffered,n=e.currentTime,r=e.nextPlaylist,o=e.bufferLowWaterLine,s=e.bufferHighWaterLine,a=e.duration,l=e.experimentalBufferBasedABR,u=e.log;if(!r)return kE.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch "+(t&&t.id||"null")+" -> "+r.id;if(!t)return u(c+" as current playlist is not set"),!0;if(r.id===t.id)return!1;var h=Boolean(NE(i,n).length);if(!t.endList)return h||"number"!=typeof t.partTargetDuration?(u(c+" as current playlist is live"),!0):(u("not "+c+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var d=HE(i,n),p=l?Gx.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Gx.MAX_BUFFER_LOW_WATER_LINE;if(a<p)return u(c+" as duration < max low water line ("+a+" < "+p+")"),!0;var f=r.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;if(f<g&&(!l||d<s)){var m=c+" as next bandwidth < current bandwidth ("+f+" < "+g+")";return l&&(m+=" and forwardBuffer < bufferHighWaterLine ("+d+" < "+s+")"),u(m),!0}if((!l||f>g)&&d>=o){var v=c+" as forwardBuffer >= bufferLowWaterLine ("+d+" >= "+o+")";return l&&(v+=" and next bandwidth > current bandwidth ("+f+" > "+g+")"),u(v),!0}return u("not "+c+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:n,bufferHighWaterLine:r,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(function(){e.experimentalBufferBasedABR&&e.mainSegmentLoader_.load()})),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},i.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){kE.browser.IE_VERSION||kE.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},i.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(kE.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var i=VC.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=RE;var o=r.end(r.length-1);return o-n<=RE&&i-o<=RE},i.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var i=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!i)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));i.playlistErrors_++;var n,r=this.masterPlaylistLoader_.master.playlists,o=r.filter(ex),s=1===o.length&&o[0]===i;if(1===r.length&&t!==1/0)return kE.log.warn("Problem encountered with playlist "+i.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s);if(s){var a=!1;r.forEach((function(e){if(e!==i){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(a=!0,delete e.excludeUntil)}})),a&&(kE.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}n=i.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,i.excludeUntil=n,e.reason&&(i.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var l=this.selectPlaylist();if(!l)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var u=e.internal?this.logger_:kE.log.warn,c=e.message?" "+e.message:"";u((e.internal?"Internal problem":"Problem")+" encountered with playlist "+i.id+"."+c+" Switching to playlist "+l.id+"."),l.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var h=l.targetDuration/2*1e3||5e3,d="number"==typeof l.lastRequest&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",s||d)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(e,t){var i=this,n=[],r="all"===e;(r||"main"===e)&&n.push(this.masterPlaylistLoader_);var o=[];(r||"audio"===e)&&o.push("AUDIO"),(r||"subtitle"===e)&&(o.push("CLOSED-CAPTIONS"),o.push("SUBTITLES")),o.forEach((function(e){var t=i.mediaTypes_[e]&&i.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)})),["main","audio","subtitle"].forEach((function(t){var r=i[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||n.push(r)})),n.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},i.setCurrentTime=function(e){var t=NE(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:VC.Playlist.duration(e):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var i=this.syncController_.getExpiredTime(t,this.duration());if(null!==i){var n=this.masterPlaylistLoader_.master,r=VC.Playlist.seekable(t,i,VC.Playlist.liveEdgeDelay(n,t));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=VC.Playlist.seekable(t,i,VC.Playlist.liveEdgeDelay(n,t))).length)return}var o,s;this.seekable_&&this.seekable_.length&&(o=this.seekable_.end(0),s=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=kE.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===o&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+FE(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var i=this.tech_.buffered(),n=VC.Playlist.duration(this.masterPlaylistLoader_.media());i.length>0&&(n=Math.max(n,i.end(i.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}},i.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var i=e.mediaTypes_[t].groups;for(var n in i)i[n].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!i)},i.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},i=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;var n=CC(this.master(),i),r={},o=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(r.video=n.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(r.video+=","+(n.audio||t.main.audioCodec||xv)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||o)&&(r.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||xv,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),r.audio||r.video){var s,a={};if(["video","audio"].forEach((function(e){if(r.hasOwnProperty(e)&&(n=t[e].isFmp4,o=r[e],!(n?Sv(o):Ev(o)))){var i=t[e].isFmp4?"browser":"muxer";a[i]=a[i]||[],a[i].push(r[e]),"audio"===e&&(s=i)}var n,o})),o&&s&&i.attributes.AUDIO){var l=i.attributes.AUDIO;this.master().playlists.forEach((function(e){(e.attributes&&e.attributes.AUDIO)===l&&e!==i&&(e.excludeUntil=1/0)})),this.logger_("excluding audio group "+l+" as "+s+' does not support codec(s): "'+r.audio+'"')}if(!Object.keys(a).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(t){var i=(_v(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,n=(_v(r[t]||"")[0]||{}).type;i&&n&&i.toLowerCase()!==n.toLowerCase()&&u.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+r[t]+'"')})),u.length)return void this.blacklistCurrentPlaylist({playlist:i,message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return r}var c=Object.keys(a).reduce((function(e,t){return e&&(e+=", "),e+=t+' does not support codec(s): "'+a[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:i,internal:!0,message:c,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:i,message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},i.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},i.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,i=[];Object.keys(t).forEach((function(n){var r=t[n];if(-1===i.indexOf(r.id)){i.push(r.id);var o=CC(e.master,r),s=[];!o.audio||Ev(o.audio)||Sv(o.audio)||s.push("audio codec "+o.audio),!o.video||Ev(o.video)||Sv(o.video)||s.push("video codec "+o.video),o.text&&"stpp.ttml.im1t"===o.text&&s.push("text codec "+o.text),s.length&&(r.excludeUntil=1/0,e.logger_("excluding "+r.id+" for unsupported: "+s.join(", ")))}}))},i.excludeIncompatibleVariants_=function(e){var t=this,i=[],n=this.master().playlists,r=EC(_v(e)),o=xC(r),s=r.video&&_v(r.video)[0]||null,a=r.audio&&_v(r.audio)[0]||null;Object.keys(n).forEach((function(e){var r=n[e];if(-1===i.indexOf(r.id)&&r.excludeUntil!==1/0){i.push(r.id);var l=[],u=CC(t.masterPlaylistLoader_.master,r),c=xC(u);if(u.audio||u.video){if(c!==o&&l.push('codec count "'+c+'" !== "'+o+'"'),!t.sourceUpdater_.canChangeType()){var h=u.video&&_v(u.video)[0]||null,d=u.audio&&_v(u.audio)[0]||null;h&&s&&h.type.toLowerCase()!==s.type.toLowerCase()&&l.push('video codec "'+h.type+'" !== "'+s.type+'"'),d&&a&&d.type.toLowerCase()!==a.type.toLowerCase()&&l.push('audio codec "'+d.type+'" !== "'+a.type+'"')}l.length&&(r.excludeUntil=1/0,t.logger_("blacklisting "+r.id+": "+l.join(" && ")))}}}))},i.updateAdCues_=function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),function(e,t,i){if(void 0===i&&(i=0),e.segments)for(var n,r=i,o=0;o<e.segments.length;o++){var s=e.segments[o];if(n||(n=gk(t,r+s.duration/2)),n){if("cueIn"in s){n.endTime=r,n.adEndTime=r,r+=s.duration,n=null;continue}if(r<n.endTime){r+=s.duration;continue}n.endTime+=s.duration}else if("cueOut"in s&&((n=new(Mm().VTTCue)(r,r+s.duration,s.cueOut)).adStartTime=r,n.adEndTime=r+parseFloat(s.cueOut),t.addCue(n)),"cueOutCont"in s){var a=s.cueOutCont.split("/").map(parseFloat),l=a[0],u=a[1];(n=new(Mm().VTTCue)(r,r+s.duration,"")).adStartTime=r-l,n.adEndTime=n.adStartTime+u,t.addCue(n)}r+=s.duration}}(e,this.cueTagsTrack_,t)},i.goalBufferLength=function(){var e=this.tech_.currentTime(),t=Gx.GOAL_BUFFER_LENGTH,i=Gx.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,Gx.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)},i.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=Gx.BUFFER_LOW_WATER_LINE,i=Gx.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,Gx.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,Gx.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.experimentalBufferBasedABR?r:n)},i.bufferHighWaterLine=function(){return Gx.BUFFER_HIGH_WATER_LINE},t}(kE.EventTarget),Ok=function(e,t,i){var n,r,o,s=e.masterPlaylistController_,a=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(t.attributes){var l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=CC(s.master(),t),this.playlist=t,this.id=i,this.enabled=(n=e.playlists,r=t.id,o=a,function(e){var t=n.master.playlists[r],i=JE(t),s=ex(t);return void 0===e?s:(e?delete t.disabled:t.disabled=!0,e===s||i||(o(),e?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),e)})},Rk=["seeking","seeked","pause","playing","error"],Mk=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=DE("PlaybackWatcher"),this.logger_("initialize");var i=function(){return t.monitorCurrentTime_()},n=function(){return t.monitorCurrentTime_()},r=function(){return t.techWaiting_()},o=function(){return t.cancelTimer_()},s=this.masterPlaylistController_,a=["main","subtitle","audio"],l={};a.forEach((function(e){l[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},s[e+"SegmentLoader_"].on("appendsdone",l[e].updateend),s[e+"SegmentLoader_"].on("playlistupdate",l[e].reset),t.tech_.on(["seeked","seeking"],l[e].reset)}));var u=function(e){["main","audio"].forEach((function(i){s[i+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=function(){return u("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(Rk,o),this.tech_.on("canplay",n),this.tech_.one("play",i),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",r),t.tech_.off(Rk,o),t.tech_.off("canplay",n),t.tech_.off("play",i),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),a.forEach((function(e){s[e+"SegmentLoader_"].off("appendsdone",l[e].updateend),s[e+"SegmentLoader_"].off("playlistupdate",l[e].reset),t.tech_.off(["seeked","seeking"],l[e].reset)})),t.checkCurrentTimeTimeout_&&Mm().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Mm().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Mm().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,i=t[e+"SegmentLoader_"],n=i.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0;return!1}(this[e+"Buffered_"],n);this[e+"Buffered_"]=n,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:UE(n)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+RE>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),i=this.tech_.currentTime();this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1));if(this.beforeSeekableWindow_(t,i)){var n=t.start(0);e=n+(n===t.end(0)?0:RE)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+FE(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var r=this.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),s=r.audioBuffer?r.audioBuffered():null,a=r.videoBuffer?r.videoBuffered():null,l=this.media(),u=l.partTargetDuration?l.partTargetDuration:2*(l.targetDuration-OE),c=[s,a],h=0;h<c.length;h++){if(c[h])if(HE(c[h],i)<u)return!1}var d=BE(o,i);return 0!==d.length&&(e=d.start(0)+RE,this.logger_("Buffered region starts ("+d.start(0)+")  just beyond seek point ("+i+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=NE(t,e);return i.length&&e+3<=i.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var o=BE(r,t);if(o.length>0){var s=o.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+o.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,i,n){if(void 0===n&&(n=!1),!e.length)return!1;var r=e.end(e.length-1)+RE;return!i.endList&&n&&(r=e.end(e.length-1)+3*i.targetDuration),t>r},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,i=e.audioBuffered,n=e.currentTime;if(t){var r;if(t.length&&i.length){var o=NE(t,n-3),s=NE(t,n),a=NE(i,n);a.length&&!s.length&&o.length&&(r={start:o.end(0),end:a.end(0)})}else{BE(t,n).length||(r=this.gapFromVideoUnderflow_(t,n))}return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=BE(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+OE),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var i=function(e){if(e.length<2)return kE.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return kE.createTimeRanges(t)}(e),n=0;n<i.length;n++){var r=i.start(n),o=i.end(n);if(t-r<4&&t-r>2)return{start:r,end:o}}return null},e}(),Nk={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Bk=function e(t,i){var n=0,r=0,o=kE.mergeOptions(Nk,i);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var s=function(){r&&t.currentTime(r)},a=function(e){null!=e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){return Date.now()-n<1e3*o.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):o.getSource&&"function"==typeof o.getSource?(n=Date.now(),o.getSource.call(t,a)):void kE.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},u=function e(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(i){u(),e(t,i)}},Fk="2.16.3",Uk={PlaylistLoader:wx,Playlist:sx,utils:Rx,STANDARD_PLAYLIST_SELECTOR:OC,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(sx.isEnabled);return IC(t,(function(e,t){return LC(e,t)})),t.filter((function(t){return!!CC(e.playlists.master,t).video}))[0]||null},lastBandwidthSelector:OC,movingAverageBandwidthSelector:function(e){var t=-1,i=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var n=this.useDevicePixelRatio&&Mm().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(t=e*this.systemBandwidth+(1-e)*t,i=this.systemBandwidth),DC(this.playlists.master,t,parseInt(AC(this.tech_.el(),"width"),10)*n,parseInt(AC(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:LC,comparePlaylistResolution:function(e,t){var i,n;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||Mm().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),i===(n=n||Mm().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},xhr:xx()};Object.keys(Gx).forEach((function(e){Object.defineProperty(Uk,e,{get:function(){return kE.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),Gx[e]},set:function(t){kE.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?kE.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):Gx[e]=t}})}));var $k="videojs-vhs",Hk=function(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.id){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})};Uk.canPlaySource=function(){return kE.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var jk=function(e){var t=e.player,i=e.sourceKeySystems,n=e.audioMedia,r=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var o=function(e,t){return e.reduce((function(e,i){if(!i.contentProtection)return e;var n=t.reduce((function(e,t){var n=i.contentProtection[t];return n&&n.pssh&&(e[t]={pssh:n.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])}(n?r.concat([n]):r,Object.keys(i)),s=[],a=[];return o.forEach((function(e){a.push(new Promise((function(e,i){t.tech_.one("keysessioncreated",e)}))),s.push(new Promise((function(i,n){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?n(e):i()}))})))})),Promise.race([Promise.all(s),Promise.race(a)])},zk=function(e){var t=e.player,i=function(e,t,i){if(!e)return e;var n={};t&&t.attributes&&t.attributes.CODECS&&(n=EC(_v(t.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);var r=Tv(n.video),o=Tv(n.audio),s={};for(var a in e)s[a]={},o&&(s[a].audioContentType=o),r&&(s[a].videoContentType=r),t.contentProtection&&t.contentProtection[a]&&t.contentProtection[a].pssh&&(s[a].pssh=t.contentProtection[a].pssh),"string"==typeof e[a]&&(s[a].url=e[a]);return kE.mergeOptions(e,s)}(e.sourceKeySystems,e.media,e.audioMedia);return!!i&&(t.currentSource().keySystems=i,!(i&&!t.eme)||(kE.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},qk=function(){if(!Mm().localStorage)return null;var e=Mm().localStorage.getItem($k);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};Uk.supportsNativeHls=function(){if(!Bm()||!Bm().createElement)return!1;var e=Bm().createElement("video");if(!kE.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Uk.supportsNativeDash=!!(Bm()&&Bm().createElement&&kE.getTech("Html5").isSupported())&&/maybe|probably/i.test(Bm().createElement("video").canPlayType("application/dash+xml")),Uk.supportsTypeNatively=function(e){return"hls"===e?Uk.supportsNativeHls:"dash"===e&&Uk.supportsNativeDash},Uk.isSupported=function(){return kE.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Vk=function(e){function t(t,i,n){var r;if(r=e.call(this,i,kE.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&kE.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof n.initialBandwidth&&(r.options_.bandwidth=n.initialBandwidth),r.logger_=DE("VhsHandler"),i.options_&&i.options_.playerId){var o=kE(i.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return kE.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),Hm(r)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return kE.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),Hm(r)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return kE.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Hm(r)},configurable:!0}),r.player_=o}if(r.tech_=i,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(Bm(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=Bm().fullscreenElement||Bm().webkitFullscreenElement||Bm().mozFullScreenElement||Bm().msFullscreenElement;t&&t.contains(r.tech_.el())?r.masterPlaylistController_.fastQualityChange_():r.masterPlaylistController_.checkABR_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}zm(t,e);var i=t.prototype;return i.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=qk();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Gx.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Gx.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(e,t){var i=this;if(e){var n;this.setOptions_(),this.options_.src=0===(n=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n,this.options_.tech=this.tech_,this.options_.externVhs=Uk,this.options_.sourceType=Pv(t),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&kE.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Dk(this.options_);var r=kE.mergeOptions({liveRangeSafeTimeDelta:RE},this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Mk(r),this.masterPlaylistController_.on("error",(function(){var e=kE.players[i.tech_.options_.playerId],t=i.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var o=this.options_.experimentalBufferBasedABR?Uk.movingAverageBandwidthSelector(.55):Uk.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):o.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Uk.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=Mm().navigator.connection||Mm().navigator.mozConnection||Mm().navigator.webkitConnection,i=1e7;if(this.options_.useNetworkInformationApi&&t){var n=1e3*t.downlink*1e3;e=n>=i&&e>=i?Math.max(e,n):n}return e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){kE.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return i.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return i.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return i.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return i.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return i.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return UE(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return UE(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){i.options_.useBandwidthFromLocalStorage&&function(e){if(!Mm().localStorage)return!1;var t=qk();t=t?kE.mergeOptions(t,e):e;try{Mm().localStorage.setItem($k,JSON.stringify(t))}catch(e){return!1}}({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=i).representations=function(){var t=e.masterPlaylistController_.master(),i=ox(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return i?i.filter((function(e){return!JE(e)})).map((function(t,i){return new Ok(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){i.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Mm().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),jk({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},i.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},i.setupEme_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=zk({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",(function(t){if("output-restricted"===t.status){var i=e.masterPlaylistController_.master();if(i&&i.playlists){var n,r=[];if(i.playlists.forEach((function(e){e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,r.push(e))})),r.length)(n=kE.log).warn.apply(n,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(r)),e.masterPlaylistController_.fastQualityChange_()}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==kE.browser.IE_VERSION&&i?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},i.setupQualityLevels_=function(){var e=this,t=kE.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,i;t=e.qualityLevels_,(i=e).representations().forEach((function(e){t.addQualityLevel(e)})),Hk(t,i.playlists)})),this.playlists.on("mediachange",(function(){Hk(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":Fk,"mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return ck.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Mm().URL.revokeObjectURL&&(Mm().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},i.convertToProgramTime=function(e,t){return Mx({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},i.seekToProgramTime=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=2),Nx({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(kE.getComponent("Component")),Wk={name:"videojs-http-streaming",VERSION:Fk,canHandleSource:function(e,t){void 0===t&&(t={});var i=kE.mergeOptions(kE.options,t);return Wk.canPlayType(e.type,i)},handleSource:function(e,t,i){void 0===i&&(i={});var n=kE.mergeOptions(kE.options,i);return t.vhs=new Vk(e,t,n),kE.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return kE.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=xx(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var i=Pv(e);if(!i)return"";var n=Wk.getOverrideNative(t);return!Uk.supportsTypeNatively(i)||n?"maybe":""},getOverrideNative:function(e){void 0===e&&(e={});var t=e,i=t.vhs,n=void 0===i?{}:i,r=t.hls,o=void 0===r?{}:r,s=!(kE.browser.IS_ANY_SAFARI||kE.browser.IS_IOS),a=n.overrideNative,l=void 0===a?s:a,u=o.overrideNative;return void 0!==u&&u||l}};(Sv("avc1.4d400d,mp4a.40.2")&&kE.getTech("Html5").registerSourceHandler(Wk,0),kE.VhsHandler=Vk,Object.defineProperty(kE,"HlsHandler",{get:function(){return kE.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Vk},configurable:!0}),kE.VhsSourceHandler=Wk,Object.defineProperty(kE,"HlsSourceHandler",{get:function(){return kE.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Wk},configurable:!0}),kE.Vhs=Uk,Object.defineProperty(kE,"Hls",{get:function(){return kE.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Uk},configurable:!0}),kE.use||(kE.registerComponent("Hls",Uk),kE.registerComponent("Vhs",Uk)),kE.options.vhs=kE.options.vhs||{},kE.options.hls=kE.options.hls||{},kE.getPlugin&&kE.getPlugin("reloadSourceOnError"))||(kE.registerPlugin||kE.plugin)("reloadSourceOnError",(function(e){Bk(this,e)}));const Gk=kE;function Yk(e){return Yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yk(e)}function Xk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Kk(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Xk(Object(i),!0).forEach((function(t){Qk(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Xk(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Qk(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=Yk(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=Yk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yk(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Zk=(0,s.createBehavior)("VideoPlayer",{initPlayer:function(){this.$player&&(this.$videojs=Gk(this.$player,this.playerOptions))}},{init:function(){if(this.$player=this.getChild("player"),this.playerOptions={autoplay:!1,controls:!0,fluid:!0},this.options.youtube){var e={techOrder:["youtube"],sources:[{type:"video/youtube",src:this.options.youtube}],youtube:{iv_load_policy:1,customVars:{wmode:"transparent"}}};this.playerOptions=Kk(Kk({},this.playerOptions),e)}this.initPlayer()},enabled:function(){},resized:function(){},mediaQueryUpdated:function(){},disabled:function(){},destroy:function(){}});const Jk=function(){var e=document.createElement("div");e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;function i(){var e=document.documentElement.scrollHeight>document.documentElement.clientHeight,i="scroll"===window.getComputedStyle(document.documentElement,null).getPropertyValue("overflow-y");document.documentElement.style.setProperty("--scroll-bar-visible-width","".concat(e||i?t:0,"px"))}document.body.removeChild(e),document.documentElement.style.setProperty("--scroll-bar-width","".concat(t,"px")),window.addEventListener("load",i,!1),window.addEventListener("resized",i,!1),i()};function eP(e){return eP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eP(e)}function tP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function iP(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?tP(Object(i),!0).forEach((function(t){nP(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tP(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function nP(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=eP(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=eP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eP(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.A17=window.A17||{},window.A17.breakpoints=["xs","sm","md","lg","xl","2xl","3xl"],window.A17.structure={breakpoints:{xs:"0",sm:"540px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1681px","3xl":"1920px"},columns:{xs:12,sm:12,md:12,lg:12,xl:12,"2xl":12,"3xl":12},container:{xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto","2xl":"auto","3xl":"1824px"},gutters:{inner:{xs:"16px",sm:"20px",md:"24px",lg:"28px",xl:"32px","2xl":"40px","3xl":"48px"},outer:{xs:"16px",sm:"20px",md:"24px",lg:"28px",xl:"32px","2xl":"40px","3xl":"40px"}}},document.addEventListener("DOMContentLoaded",(function(){se(),Jk(),ue(),oe(),le(),window.A17.pjax=function(){bo.registerPlugin(Ao);var t=!!document.querySelector("#swup"),i=["#swup","#global-header","#global-footer","#mobileNavItems"].filter((function(e){return document.querySelector(e)})),n=['a[href^="'.concat(window.location.origin,'"]'),'a[href^="/"]','a[href^="#"]'],r=['[target="_blank"]',"[data-no-swup]"].map((function(e){return":not(".concat(e,")")})).join(""),o=n.map((function(e){return"".concat(e).concat(r)})).join(",");if(t&&i.length>0){var s=new Io.A({containers:i,cache:!1,linkSelector:o,animateHistoryBrowsing:!1,plugins:[new ce.A({contentSelector:"#content"}),new he.A,new de.A,new fe.A(Fo),new ge.A,new pe.A]});return s.on("contentReplaced",(function(){var e=document.querySelector("h1#content");e&&"function"==typeof e.removeAttribute&&setTimeout((function(){e.removeAttribute("data-focus-method")}),1),window.A17.lazyloading&&window.A17.lazyloading.reset(),document.dispatchEvent(new CustomEvent("page:updated"));var t=window.location.hash;if(t){var i=document.querySelector(t);if(i){var n=i.getBoundingClientRect().top+window.scrollY-80;setTimeout((function(){window.scrollTo(0,n)}),10)}}else window.scrollTo(0,Ro);isPopState=!1})),s.on("clickLink",(function(){document.dispatchEvent(new CustomEvent("pjax:clickLink")),Mo=e.target})),s.on("popState",(function(){isPopState=!0})),s.on("samePageWithHash",(function(e){var t=document.querySelector(e.delegateTarget.hash);if(t){var i=t.getBoundingClientRect().top+window.pageYOffset-32;t.focus(),window.scrollTo({top:i,behavior:"smooth"})}})),s.on("transitionStart",(function(){document.dispatchEvent(new CustomEvent("pjax:transitionStart"))})),s.on("transitionEnd",(function(){document.dispatchEvent(new CustomEvent("pjax:transitionEnd"))})),s}}(),window.A17.behaviors=s.manageBehaviors,window.A17.behaviors.init(iP(iP({},r),o),{breakpoints:window.A17.breakpoints}),window.A17.lazyloading=new Uo.e}))},4242:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=i(6078),o=(n=r)&&n.__esModule?n:{default:n};t.default=function(e){return new o.default(e).getAddress()}},4409:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var i=this;if(null!=e)if(null!=t)if(this._handlers[e]&&this._handlers[e].filter((function(e){return e===t})).length){var n=this._handlers[e].filter((function(e){return e===t}))[0],r=this._handlers[e].indexOf(n);r>-1&&this._handlers[e].splice(r,1)}else console.warn("Handler for event '"+e+"' no found.");else this._handlers[e]=[];else Object.keys(this._handlers).forEach((function(e){i._handlers[e]=[]}))}},4466:(e,t,i)=>{var n=i(4582).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp("^"+r.source+o.source+"*(?::"+r.source+o.source+"*)?$");function a(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,a)}function l(){}function u(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function c(e,t,i,r,o,s){function a(e,t,n){i.attributeNames.hasOwnProperty(e)&&s.fatalError("Attribute "+e+" redefined"),i.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,o),n)}for(var l,u=++t,c=0;;){var h=e.charAt(u);switch(h){case"=":if(1===c)l=e.slice(t,u),c=3;else{if(2!==c)throw new Error("attribute equal must after attrName");c=3}break;case"'":case'"':if(3===c||1===c){if(1===c&&(s.warning('attribute value must after "="'),l=e.slice(t,u)),t=u+1,!((u=e.indexOf(h,t))>0))throw new Error("attribute value no end '"+h+"' match");a(l,d=e.slice(t,u),t-1),c=5}else{if(4!=c)throw new Error('attribute value must after "="');a(l,d=e.slice(t,u),t),s.warning('attribute "'+l+'" missed start quot('+h+")!!"),t=u+1,c=5}break;case"/":switch(c){case 0:i.setTagName(e.slice(t,u));case 5:case 6:case 7:c=7,i.closed=!0;case 4:case 1:break;case 2:i.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),0==c&&i.setTagName(e.slice(t,u)),u;case">":switch(c){case 0:i.setTagName(e.slice(t,u));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=e.slice(t,u)).slice(-1)&&(i.closed=!0,d=d.slice(0,-1));case 2:2===c&&(d=l),4==c?(s.warning('attribute "'+d+'" missed quot(")!'),a(l,d,t)):(n.isHTML(r[""])&&d.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),a(d,d,t));break;case 3:throw new Error("attribute value missed!!")}return u;case"":h=" ";default:if(h<=" ")switch(c){case 0:i.setTagName(e.slice(t,u)),c=6;break;case 1:l=e.slice(t,u),c=2;break;case 4:var d=e.slice(t,u);s.warning('attribute "'+d+'" missed quot(")!!'),a(l,d,t);case 5:c=6}else switch(c){case 2:i.tagName;n.isHTML(r[""])&&l.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),a(l,l,t),t=u,c=1;break;case 5:s.warning('attribute space is required"'+l+'"!!');case 6:c=1,t=u;break;case 3:c=4,t=u;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function h(e,t,i){for(var r=e.tagName,o=null,s=e.length;s--;){var a=e[s],l=a.qName,u=a.value;if((p=l.indexOf(":"))>0)var c=a.prefix=l.slice(0,p),h=l.slice(p+1),d="xmlns"===c&&h;else h=l,c=null,d="xmlns"===l&&"";a.localName=h,!1!==d&&(null==o&&(o={},f(i,i={})),i[d]=o[d]=u,a.uri=n.XMLNS,t.startPrefixMapping(d,u))}for(s=e.length;s--;){(c=(a=e[s]).prefix)&&("xml"===c&&(a.uri=n.XML),"xmlns"!==c&&(a.uri=i[c||""]))}var p;(p=r.indexOf(":"))>0?(c=e.prefix=r.slice(0,p),h=e.localName=r.slice(p+1)):(c=null,h=e.localName=r);var g=e.uri=i[c||""];if(t.startElement(g,h,r,e),!e.closed)return e.currentNSMap=i,e.localNSMap=o,!0;if(t.endElement(g,h,r),o)for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&t.endPrefixMapping(c)}function d(e,t,i,n,r){if(/^(?:script|textarea)$/i.test(i)){var o=e.indexOf("</"+i+">",t),s=e.substring(t+1,o);if(/[&<]/.test(s))return/^script$/i.test(i)?(r.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,n),r.characters(s,0,s.length),o)}return t+1}function p(e,t,i,n){var r=n[i];return null==r&&((r=e.lastIndexOf("</"+i+">"))<t&&(r=e.lastIndexOf("</"+i)),n[i]=r),r<t}function f(e,t){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function g(e,t,i,n){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(i.comment(e,t+4,r-t-4),r+3):(n.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return i.startCDATA(),i.characters(e,t+9,r-t-9),i.endCDATA(),r+3}var o=function(e,t){var i,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;i=r.exec(e);)if(n.push(i),i[1])return n}(e,t),s=o.length;if(s>1&&/!doctype/i.test(o[0][0])){var a=o[1][0],l=!1,u=!1;s>3&&(/^public$/i.test(o[2][0])?(l=o[3][0],u=s>4&&o[4][0]):/^system$/i.test(o[2][0])&&(u=o[3][0]));var c=o[s-1];return i.startDTD(a,l,u),i.endDTD(),c.index+c[0].length}return-1}function m(e,t,i){var n=e.indexOf("?>",t);if(n){var r=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return i.processingInstruction(r[1],r[2]),n+2}return-1}return-1}function v(){this.attributeNames={}}a.prototype=new Error,a.prototype.name=a.name,l.prototype={parse:function(e,t,i){var r=this.domBuilder;r.startDocument(),f(t,t={}),function(e,t,i,r,o){function s(e){if(e>65535){var t=55296+((e-=65536)>>10),i=56320+(1023&e);return String.fromCharCode(t,i)}return String.fromCharCode(e)}function l(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(i,t)?i[t]:"#"===t.charAt(0)?s(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function f(t){if(t>x){var i=e.substring(x,t).replace(/&#?\w+;/g,l);T&&y(x),r.characters(i,0,t-x),x=t}}function y(t,i){for(;t>=_&&(i=w.exec(e));)b=i.index,_=b+i[0].length,T.lineNumber++;T.columnNumber=t-b+1}var b=0,_=0,w=/.*(?:\r\n?|\n)|.*$/g,T=r.locator,S=[{currentNSMap:t}],E={},x=0;for(;;){try{var C=e.indexOf("<",x);if(C<0){if(!e.substr(x).match(/^\s*$/)){var k=r.doc,P=k.createTextNode(e.substr(x));k.appendChild(P),r.currentElement=P}return}switch(C>x&&f(C),e.charAt(C+1)){case"/":var A=e.indexOf(">",C+3),I=e.substring(C+2,A).replace(/[ \t\n\r]+$/g,""),L=S.pop();A<0?(I=e.substring(C+2).replace(/[\s<].*/,""),o.error("end tag name: "+I+" is not complete:"+L.tagName),A=C+1+I.length):I.match(/\s</)&&(I=I.replace(/[\s<].*/,""),o.error("end tag name: "+I+" maybe not complete"),A=C+1+I.length);var D=L.localNSMap,O=L.tagName==I;if(O||L.tagName&&L.tagName.toLowerCase()==I.toLowerCase()){if(r.endElement(L.uri,L.localName,I),D)for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&r.endPrefixMapping(R);O||o.fatalError("end tag name: "+I+" is not match the current start tagName:"+L.tagName)}else S.push(L);A++;break;case"?":T&&y(C),A=m(e,C,r);break;case"!":T&&y(C),A=g(e,C,r,o);break;default:T&&y(C);var M=new v,N=S[S.length-1].currentNSMap,B=(A=c(e,C,M,N,l,o),M.length);if(!M.closed&&p(e,A,M.tagName,E)&&(M.closed=!0,i.nbsp||o.warning("unclosed xml attribute")),T&&B){for(var F=u(T,{}),U=0;U<B;U++){var $=M[U];y($.offset),$.locator=u(T,{})}r.locator=F,h(M,r,N)&&S.push(M),r.locator=T}else h(M,r,N)&&S.push(M);n.isHTML(M.uri)&&!M.closed?A=d(e,A,M.tagName,l,r):A++}}catch(e){if(e instanceof a)throw e;o.error("element parse error: "+e),A=-1}A>x?x=A:f(Math.max(C,x)+1)}}(e,t,i,r,this.errorHandler),r.endDocument()}},v.prototype={setTagName:function(e){if(!s.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,i){if(!s.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=l,t.ParseError=a},4582:(e,t)=>{"use strict";function i(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var n=i({HTML:"text/html",isHTML:function(e){return e===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.find=function(e,t,i){if(void 0===i&&(i=Array.prototype),e&&"function"==typeof i.find)return i.find.call(e,t);for(var n=0;n<e.length;n++)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];if(t.call(void 0,r,n,e))return r}},t.freeze=i,t.MIME_TYPE=n,t.NAMESPACE=r},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4722:(e,t,i)=>{var n=i(4582),r=n.find,o=n.NAMESPACE;function s(e){return""!==e}function a(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function l(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(s):[]}(e);return Object.keys(t.reduce(a,{}))}function u(e,t){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function c(e,t){var i=e.prototype;if(!(i instanceof t)){function n(){}n.prototype=t.prototype,u(i,n=new n),e.prototype=i=n}i.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),i.constructor=e)}var h={},d=h.ELEMENT_NODE=1,p=h.ATTRIBUTE_NODE=2,f=h.TEXT_NODE=3,g=h.CDATA_SECTION_NODE=4,m=h.ENTITY_REFERENCE_NODE=5,v=h.ENTITY_NODE=6,y=h.PROCESSING_INSTRUCTION_NODE=7,b=h.COMMENT_NODE=8,_=h.DOCUMENT_NODE=9,w=h.DOCUMENT_TYPE_NODE=10,T=h.DOCUMENT_FRAGMENT_NODE=11,S=h.NOTATION_NODE=12,E={},x={},C=(E.INDEX_SIZE_ERR=(x[1]="Index size error",1),E.DOMSTRING_SIZE_ERR=(x[2]="DOMString size error",2),E.HIERARCHY_REQUEST_ERR=(x[3]="Hierarchy request error",3)),k=(E.WRONG_DOCUMENT_ERR=(x[4]="Wrong document",4),E.INVALID_CHARACTER_ERR=(x[5]="Invalid character",5),E.NO_DATA_ALLOWED_ERR=(x[6]="No data allowed",6),E.NO_MODIFICATION_ALLOWED_ERR=(x[7]="No modification allowed",7),E.NOT_FOUND_ERR=(x[8]="Not found",8)),P=(E.NOT_SUPPORTED_ERR=(x[9]="Not supported",9),E.INUSE_ATTRIBUTE_ERR=(x[10]="Attribute in use",10));E.INVALID_STATE_ERR=(x[11]="Invalid state",11),E.SYNTAX_ERR=(x[12]="Syntax error",12),E.INVALID_MODIFICATION_ERR=(x[13]="Invalid modification",13),E.NAMESPACE_ERR=(x[14]="Invalid namespace",14),E.INVALID_ACCESS_ERR=(x[15]="Invalid access",15);function A(e,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,x[e]),this.message=x[e],Error.captureStackTrace&&Error.captureStackTrace(this,A);return i.code=e,t&&(this.message=this.message+": "+t),i}function I(){}function L(e,t){this._node=e,this._refresh=t,D(this)}function D(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var i=e._refresh(e._node);if(be(e,"length",i.length),!e.$$length||i.length<e.$$length)for(var n=i.length;n in e;n++)Object.prototype.hasOwnProperty.call(e,n)&&delete e[n];u(i,e),e._inc=t}}function O(){}function R(e,t){for(var i=e.length;i--;)if(e[i]===t)return i}function M(e,t,i,n){if(n?t[R(t,n)]=i:t[t.length++]=i,e){i.ownerElement=e;var r=e.ownerDocument;r&&(n&&j(r,e,n),function(e,t,i){e&&e._inc++;var n=i.namespaceURI;n===o.XMLNS&&(t._nsMap[i.prefix?i.localName:""]=i.value)}(r,e,i))}}function N(e,t,i){var n=R(t,i);if(!(n>=0))throw new A(k,new Error(e.tagName+"@"+i));for(var r=t.length-1;n<r;)t[n]=t[++n];if(t.length=r,e){var o=e.ownerDocument;o&&(j(o,e,i),i.ownerElement=null)}}function B(){}function F(){}function U(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function $(e,t){if(t(e))return!0;if(e=e.firstChild)do{if($(e,t))return!0}while(e=e.nextSibling)}function H(){this.ownerDocument=this}function j(e,t,i,n){e&&e._inc++,i.namespaceURI===o.XMLNS&&delete t._nsMap[i.prefix?i.localName:""]}function z(e,t,i){if(e&&e._inc){e._inc++;var n=t.childNodes;if(i)n[n.length++]=i;else{for(var r=t.firstChild,o=0;r;)n[o++]=r,r=r.nextSibling;n.length=o,delete n[n.length]}}}function q(e,t){var i=t.previousSibling,n=t.nextSibling;return i?i.nextSibling=n:e.firstChild=n,n?n.previousSibling=i:e.lastChild=i,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,z(e.ownerDocument,e),t}function V(e){return e&&e.nodeType===F.DOCUMENT_TYPE_NODE}function W(e){return e&&e.nodeType===F.ELEMENT_NODE}function G(e){return e&&e.nodeType===F.TEXT_NODE}function Y(e,t){var i=e.childNodes||[];if(r(i,W)||V(t))return!1;var n=r(i,V);return!(t&&n&&i.indexOf(n)>i.indexOf(t))}function X(e,t){var i=e.childNodes||[];if(r(i,(function(e){return W(e)&&e!==t})))return!1;var n=r(i,V);return!(t&&n&&i.indexOf(n)>i.indexOf(t))}function K(e,t,i){if(!function(e){return e&&(e.nodeType===F.DOCUMENT_NODE||e.nodeType===F.DOCUMENT_FRAGMENT_NODE||e.nodeType===F.ELEMENT_NODE)}(e))throw new A(C,"Unexpected parent node type "+e.nodeType);if(i&&i.parentNode!==e)throw new A(k,"child not in parent");if(!function(e){return e&&(W(e)||G(e)||V(e)||e.nodeType===F.DOCUMENT_FRAGMENT_NODE||e.nodeType===F.COMMENT_NODE||e.nodeType===F.PROCESSING_INSTRUCTION_NODE)}(t)||V(t)&&e.nodeType!==F.DOCUMENT_NODE)throw new A(C,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function Q(e,t,i){var n=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===F.DOCUMENT_FRAGMENT_NODE){var s=o.filter(W);if(s.length>1||r(o,G))throw new A(C,"More than one element or text in fragment");if(1===s.length&&!Y(e,i))throw new A(C,"Element in fragment can not be inserted before doctype")}if(W(t)&&!Y(e,i))throw new A(C,"Only one element can be added and only after doctype");if(V(t)){if(r(n,V))throw new A(C,"Only one doctype is allowed");var a=r(n,W);if(i&&n.indexOf(a)<n.indexOf(i))throw new A(C,"Doctype can only be inserted before an element");if(!i&&a)throw new A(C,"Doctype can not be appended since element is present")}}function Z(e,t,i){var n=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===F.DOCUMENT_FRAGMENT_NODE){var s=o.filter(W);if(s.length>1||r(o,G))throw new A(C,"More than one element or text in fragment");if(1===s.length&&!X(e,i))throw new A(C,"Element in fragment can not be inserted before doctype")}if(W(t)&&!X(e,i))throw new A(C,"Only one element can be added and only after doctype");if(V(t)){if(r(n,(function(e){return V(e)&&e!==i})))throw new A(C,"Only one doctype is allowed");var a=r(n,W);if(i&&n.indexOf(a)<n.indexOf(i))throw new A(C,"Doctype can only be inserted before an element")}}function J(e,t,i,n){K(e,t,i),e.nodeType===F.DOCUMENT_NODE&&(n||Q)(e,t,i);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===T){var o=t.firstChild;if(null==o)return t;var s=t.lastChild}else o=s=t;var a=i?i.previousSibling:e.lastChild;o.previousSibling=a,s.nextSibling=i,a?a.nextSibling=o:e.firstChild=o,null==i?e.lastChild=s:i.previousSibling=s;do{o.parentNode=e}while(o!==s&&(o=o.nextSibling));return z(e.ownerDocument||e,e),t.nodeType==T&&(t.firstChild=t.lastChild=null),t}function ee(){this._nsMap={}}function te(){}function ie(){}function ne(){}function re(){}function oe(){}function se(){}function ae(){}function le(){}function ue(){}function ce(){}function he(){}function de(){}function pe(e,t){var i=[],n=9==this.nodeType&&this.documentElement||this,r=n.prefix,o=n.namespaceURI;if(o&&null==r&&null==(r=n.lookupPrefix(o)))var s=[{namespace:o,prefix:null}];return me(this,i,e,t,s),i.join("")}function fe(e,t,i){var n=e.prefix||"",r=e.namespaceURI;if(!r)return!1;if("xml"===n&&r===o.XML||r===o.XMLNS)return!1;for(var s=i.length;s--;){var a=i[s];if(a.prefix===n)return a.namespace!==r}return!0}function ge(e,t,i){e.push(" ",t,'="',i.replace(/[<>&"\t\n\r]/g,U),'"')}function me(e,t,i,n,r){if(r||(r=[]),n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case d:var s=e.attributes,a=s.length,l=e.firstChild,u=e.tagName,c=u;if(!(i=o.isHTML(e.namespaceURI)||i)&&!e.prefix&&e.namespaceURI){for(var h,v=0;v<s.length;v++)if("xmlns"===s.item(v).name){h=s.item(v).value;break}if(!h)for(var S=r.length-1;S>=0;S--){if(""===(E=r[S]).prefix&&E.namespace===e.namespaceURI){h=E.namespace;break}}if(h!==e.namespaceURI)for(S=r.length-1;S>=0;S--){var E;if((E=r[S]).namespace===e.namespaceURI){E.prefix&&(c=E.prefix+":"+u);break}}}t.push("<",c);for(var x=0;x<a;x++){"xmlns"==(C=s.item(x)).prefix?r.push({prefix:C.localName,namespace:C.value}):"xmlns"==C.nodeName&&r.push({prefix:"",namespace:C.value})}for(x=0;x<a;x++){var C,k,P;if(fe(C=s.item(x),0,r))ge(t,(k=C.prefix||"")?"xmlns:"+k:"xmlns",P=C.namespaceURI),r.push({prefix:k,namespace:P});me(C,t,i,n,r)}if(u===c&&fe(e,0,r))ge(t,(k=e.prefix||"")?"xmlns:"+k:"xmlns",P=e.namespaceURI),r.push({prefix:k,namespace:P});if(l||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),i&&/^script$/i.test(u))for(;l;)l.data?t.push(l.data):me(l,t,i,n,r.slice()),l=l.nextSibling;else for(;l;)me(l,t,i,n,r.slice()),l=l.nextSibling;t.push("</",c,">")}else t.push("/>");return;case _:case T:for(l=e.firstChild;l;)me(l,t,i,n,r.slice()),l=l.nextSibling;return;case p:return ge(t,e.name,e.value);case f:return t.push(e.data.replace(/[<&>]/g,U));case g:return t.push("<![CDATA[",e.data,"]]>");case b:return t.push("\x3c!--",e.data,"--\x3e");case w:var A=e.publicId,I=e.systemId;if(t.push("<!DOCTYPE ",e.name),A)t.push(" PUBLIC ",A),I&&"."!=I&&t.push(" ",I),t.push(">");else if(I&&"."!=I)t.push(" SYSTEM ",I,">");else{var L=e.internalSubset;L&&t.push(" [",L,"]"),t.push(">")}return;case y:return t.push("<?",e.target," ",e.data,"?>");case m:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ve(e,t,i){var n;switch(t.nodeType){case d:(n=t.cloneNode(!1)).ownerDocument=e;case T:break;case p:i=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,i)for(var r=t.firstChild;r;)n.appendChild(ve(e,r,i)),r=r.nextSibling;return n}function ye(e,t,i){var n=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=t[r];"object"!=typeof o&&o!=n[r]&&(n[r]=o)}switch(t.childNodes&&(n.childNodes=new I),n.ownerDocument=e,n.nodeType){case d:var s=t.attributes,a=n.attributes=new O,l=s.length;a._ownerElement=n;for(var u=0;u<l;u++)n.setAttributeNode(ye(e,s.item(u),!0));break;case p:i=!0}if(i)for(var c=t.firstChild;c;)n.appendChild(ye(e,c,i)),c=c.nextSibling;return n}function be(e,t,i){e[t]=i}A.prototype=Error.prototype,u(E,A),I.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e,t){for(var i=[],n=0;n<this.length;n++)me(this[n],i,e,t);return i.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},L.prototype.item=function(e){return D(this),this[e]||null},c(L,I),O.prototype={length:0,item:I.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new A(P);var i=this.getNamedItem(e.nodeName);return M(this._ownerElement,this,e,i),i},setNamedItemNS:function(e){var t,i=e.ownerElement;if(i&&i!=this._ownerElement)throw new A(P);return t=this.getNamedItemNS(e.namespaceURI,e.localName),M(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return N(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);return N(this._ownerElement,this,i),i},getNamedItemNS:function(e,t){for(var i=this.length;i--;){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},B.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,i){var n=new H;if(n.implementation=this,n.childNodes=new I,n.doctype=i||null,i&&n.appendChild(i),t){var r=n.createElementNS(e,t);n.appendChild(r)}return n},createDocumentType:function(e,t,i){var n=new se;return n.name=e,n.nodeName=e,n.publicId=t||"",n.systemId=i||"",n}},F.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return J(this,e,t)},replaceChild:function(e,t){J(this,e,t,Z),t&&this.removeChild(t)},removeChild:function(e){return q(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ye(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==f&&e.nodeType==f?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var i=t._nsMap;if(i)for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&i[n]===e)return n;t=t.nodeType==p?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var i=t._nsMap;if(i&&Object.prototype.hasOwnProperty.call(i,e))return i[e];t=t.nodeType==p?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},u(h,F),u(h,F.prototype),H.prototype={nodeName:"#document",nodeType:_,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==T){for(var i=e.firstChild;i;){var n=i.nextSibling;this.insertBefore(i,t),i=n}return e}return J(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===d&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),q(this,e)},replaceChild:function(e,t){J(this,e,t,Z),e.ownerDocument=this,t&&this.removeChild(t),W(e)&&(this.documentElement=e)},importNode:function(e,t){return ve(this,e,t)},getElementById:function(e){var t=null;return $(this.documentElement,(function(i){if(i.nodeType==d&&i.getAttribute("id")==e)return t=i,!0})),t},getElementsByClassName:function(e){var t=l(e);return new L(this,(function(i){var n=[];return t.length>0&&$(i.documentElement,(function(r){if(r!==i&&r.nodeType===d){var o=r.getAttribute("class");if(o){var s=e===o;if(!s){var a=l(o);s=t.every((u=a,function(e){return u&&-1!==u.indexOf(e)}))}s&&n.push(r)}}var u})),n}))},createElement:function(e){var t=new ee;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new I,(t.attributes=new O)._ownerElement=t,t},createDocumentFragment:function(){var e=new ce;return e.ownerDocument=this,e.childNodes=new I,e},createTextNode:function(e){var t=new ne;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new oe;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new he;return i.ownerDocument=this,i.tagName=i.nodeName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new te;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ue;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new ee,n=t.split(":"),r=i.attributes=new O;return i.childNodes=new I,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,r._ownerElement=i,i},createAttributeNS:function(e,t){var i=new te,n=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,i}},c(H,F),ee.prototype={nodeType:d,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===T?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,z(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new L(this,(function(t){var i=[];return $(t,(function(n){n===t||n.nodeType!=d||"*"!==e&&n.tagName!=e||i.push(n)})),i}))},getElementsByTagNameNS:function(e,t){return new L(this,(function(i){var n=[];return $(i,(function(r){r===i||r.nodeType!==d||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||n.push(r)})),n}))}},H.prototype.getElementsByTagName=ee.prototype.getElementsByTagName,H.prototype.getElementsByTagNameNS=ee.prototype.getElementsByTagNameNS,c(ee,F),te.prototype.nodeType=p,c(te,F),ie.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(x[C])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){i=this.data.substring(0,e)+i+this.data.substring(e+t),this.nodeValue=this.data=i,this.length=i.length}},c(ie,F),ne.prototype={nodeName:"#text",nodeType:f,splitText:function(e){var t=this.data,i=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},c(ne,ie),re.prototype={nodeName:"#comment",nodeType:b},c(re,ie),oe.prototype={nodeName:"#cdata-section",nodeType:g},c(oe,ie),se.prototype.nodeType=w,c(se,F),ae.prototype.nodeType=S,c(ae,F),le.prototype.nodeType=v,c(le,F),ue.prototype.nodeType=m,c(ue,F),ce.prototype.nodeName="#document-fragment",ce.prototype.nodeType=T,c(ce,F),he.prototype.nodeType=y,c(he,F),de.prototype.serializeToString=function(e,t,i){return pe.call(e,t,i)},F.prototype.toString=pe;try{if(Object.defineProperty){function _e(e){switch(e.nodeType){case d:case T:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(_e(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(L.prototype,"length",{get:function(){return D(this),this.$$length}}),Object.defineProperty(F.prototype,"textContent",{get:function(){return _e(this)},set:function(e){switch(this.nodeType){case d:case T:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),be=function(e,t,i){e["$$"+t]=i}}}catch(we){}t.DocumentType=se,t.DOMException=A,t.DOMImplementation=B,t.Element=ee,t.Node=F,t.NodeList=I,t.XMLSerializer=de},4784:(e,t,i)=>{var n=i(9840),r=e.exports={WebVTT:i(6311),VTTCue:i(184),VTTRegion:i(5891)};n.vttjs=r,n.WebVTT=r.WebVTT;var o=r.VTTCue,s=r.VTTRegion,a=n.VTTCue,l=n.VTTRegion;r.shim=function(){n.VTTCue=o,n.VTTRegion=s},r.restore=function(){n.VTTCue=a,n.VTTRegion=l},n.VTTCue||r.shim()},4791:function(e,t){var i,n,r,o,s;function a(e){return new a.Viewer(e)}!function(e){e.version={versionStr:"3.1.0",major:parseInt("3",10),minor:parseInt("1",10),revision:parseInt("0",10)};var t,i={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,r=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"==typeof e&&"setInterval"in e},e.type=function(e){return null==e?String(e):i[n.call(e)]||"object"},e.isPlainObject=function(t){if(!t||"object"!==a.type(t)||t.nodeType||e.isWindow(t))return!1;if(t.constructor&&!r.call(t,"constructor")&&!r.call(t.constructor.prototype,"isPrototypeOf"))return!1;var i;for(var n in t)i=n;return void 0===i||r.call(t,i)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=(t=document.createElement("canvas"),!(!e.isFunction(t.getContext)||!t.getContext("2d"))),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(e){t=!0}return t},e.supportsAddEventListener=!(!document.documentElement.addEventListener||!document.addEventListener),e.supportsRemoveEventListener=!(!document.documentElement.removeEventListener||!document.removeEventListener),e.supportsEventListenerOptions=function(){var t=0;if(e.supportsAddEventListener)try{var i={get capture(){return t++,!1},get once(){return t++,!1},get passive(){return t++,!1}};window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(e){t=0}return t>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),i=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(i,1)/n}return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()}(a),function(e){e.extend=function(){var e,t,i,n,r,o,s=arguments[0]||{},l=arguments.length,u=!1,c=1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},c=2),"object"==typeof s||a.isFunction(s)||(s={}),l===c&&(s=this,--c);c<l;c++)if(null!==(e=arguments[c])||void 0!==e)for(t in e)i=s[t],s!==(n=e[t])&&(u&&n&&(a.isPlainObject(n)||(r=a.isArray(n)))?(r?(r=!1,o=i&&a.isArray(i)?i:[]):o=i&&a.isPlainObject(i)?i:{},s[t]=a.extend(u,o,n)):void 0!==n&&(s[t]=n));return s};e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:function(){if("object"!=typeof navigator)return!1;var e=navigator.userAgent;return"string"==typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))}(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(e,t){return function(){var i=arguments;return void 0===i&&(i=[]),t.apply(e,i)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(t){return e._viewers.get(this.getElement(t))},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(t){var i,n,o=new e.Point;for(n=r(t=e.getElement(t),i="fixed"===e.getElementStyle(t).position);n;)o.x+=t.offsetLeft,o.y+=t.offsetTop,i&&(o=o.plus(e.getPageScroll())),n=r(t=n,i="fixed"===e.getElementStyle(t).position);return o},getElementOffset:function(t){var i,n,r=(t=e.getElement(t))&&t.ownerDocument,o={top:0,left:0};return r?(i=r.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),n=r===r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),new e.Point(o.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0),o.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0))):new e.Point},getElementSize:function(t){return t=e.getElement(t),new e.Point(t.clientWidth,t.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(t){return(t=e.getElement(t)).currentStyle}:function(t){return t=e.getElement(t),window.getComputedStyle(t,"")},getCssPropertyWithVendorPrefix:function(t){var i={};return e.getCssPropertyWithVendorPrefix=function(t){if(void 0!==i[t])return i[t];var n=document.createElement("div").style,r=null;if(void 0!==n[t])r=t;else for(var o=["Webkit","Moz","MS","O","webkit","moz","ms","o"],s=e.capitalizeFirstLetter(t),a=0;a<o.length;a++){var l=o[a]+s;if(void 0!==n[l]){r=l;break}}return i[t]=r,r},e.getCssPropertyWithVendorPrefix(t)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var i=e%t;return i<0&&(i+=t),i},pointInElement:function(t,i){t=e.getElement(t);var n=e.getElementOffset(t),r=e.getElementSize(t);return i.x>=n.x&&i.x<n.x+r.x&&i.y<n.y+r.y&&i.y>=n.y},getMousePosition:function(t){if("number"==typeof t.pageX)e.getMousePosition=function(t){var i=new e.Point;return i.x=t.pageX,i.y=t.pageY,i};else{if("number"!=typeof t.clientX)throw new Error("Unknown event mouse position, no known technique.");e.getMousePosition=function(t){var i=new e.Point;return i.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop,i}}return e.getMousePosition(t)},getPageScroll:function(){var t=document.documentElement||{},i=document.body||{};if("number"==typeof window.pageXOffset)e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(i.scrollLeft||i.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!t.scrollLeft&&!t.scrollTop)return new e.Point(0,0);e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return e.getPageScroll()},setPageScroll:function(t){if(void 0!==window.scrollTo)e.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var i=e.getPageScroll();if(i.x===t.x&&i.y===t.y)return;document.body.scrollLeft=t.x,document.body.scrollTop=t.y;var n=e.getPageScroll();if(n.x!==i.x&&n.y!==i.y)return void(e.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y,(n=e.getPageScroll()).x!==i.x&&n.y!==i.y)return void(e.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});e.setPageScroll=function(e){}}e.setPageScroll(t)},getWindowSize:function(){var t=document.documentElement||{},i=document.body||{};if("number"==typeof window.innerWidth)e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(t.clientWidth||t.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!i.clientWidth&&!i.clientHeight)throw new Error("Unknown window size, no known technique.");e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)}}return e.getWindowSize()},makeCenteredNode:function(t){t=e.getElement(t);var i=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(i[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(i[1].style,{display:"table-row"}),e.extend(i[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),i[0].appendChild(i[1]),i[1].appendChild(i[2]),i[2].appendChild(t),i[0]},makeNeutralElement:function(e){var t=document.createElement(e),i=t.style;return i.background="transparent none",i.border="none",i.margin="0px",i.padding="0px",i.position="static",t},now:function(){return Date.now?e.now=Date.now:e.now=function(){return(new Date).getTime()},e.now()},makeTransparentImage:function(t){var i=e.makeNeutralElement("img");return i.src=t,i},setElementOpacity:function(t,i,n){var r;t=e.getElement(t),n&&!e.Browser.alpha&&(i=Math.round(i)),e.Browser.opacity?t.style.opacity=i<1?i:"":i<1?(r="alpha(opacity="+Math.round(100*i)+")",t.style.filter=r):t.style.filter=""},setElementTouchActionNone:function(t){void 0!==(t=e.getElement(t)).style.touchAction?t.style.touchAction="none":void 0!==t.style.msTouchAction&&(t.style.msTouchAction="none")},setElementPointerEvents:function(t,i){void 0!==(t=e.getElement(t)).style&&void 0!==t.style.pointerEvents&&(t.style.pointerEvents=i)},setElementPointerEventsNone:function(t){e.setElementPointerEvents(t,"none")},addClass:function(t,i){(t=e.getElement(t)).className?-1===(" "+t.className+" ").indexOf(" "+i+" ")&&(t.className+=" "+i):t.className=i},indexOf:function(e,t,i){return Array.prototype.indexOf?this.indexOf=function(e,t,i){return e.indexOf(t,i)}:this.indexOf=function(e,t,i){var n,r,o=i||0;if(!e)throw new TypeError;if(0===(r=e.length)||o>=r)return-1;for(o<0&&(o=r-Math.abs(o)),n=o;n<r;n++)if(e[n]===t)return n;return-1},this.indexOf(e,t,i)},removeClass:function(t,i){var n,r,o=[];for(n=(t=e.getElement(t)).className.split(/\s+/),r=0;r<n.length;r++)n[r]&&n[r]!==i&&o.push(n[r]);t.className=o.join(" ")},normalizeEventListenerOptions:function(t){return void 0!==t?"boolean"==typeof t?e.supportsEventListenerOptions?{capture:t}:t:e.supportsEventListenerOptions?t:void 0!==t.capture&&t.capture:!!e.supportsEventListenerOptions&&{capture:!1}},addEvent:function(){if(e.supportsAddEventListener)return function(t,i,n,r){r=e.normalizeEventListenerOptions(r),(t=e.getElement(t)).addEventListener(i,n,r)};if(document.documentElement.attachEvent&&document.attachEvent)return function(t,i,n){(t=e.getElement(t)).attachEvent("on"+i,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(t,i,n,r){r=e.normalizeEventListenerOptions(r),(t=e.getElement(t)).removeEventListener(i,n,r)};if(document.documentElement.detachEvent&&document.detachEvent)return function(t,i,n){(t=e.getElement(t)).detachEvent("on"+i,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){e.preventDefault()},eventIsCanceled:function(e){return e.defaultPrevented},stopEvent:function(e){e.stopPropagation()},createCallback:function(e,t){var i,n=[];for(i=2;i<arguments.length;i++)n.push(arguments[i]);return function(){var i,r=n.concat([]);for(i=0;i<arguments.length;i++)r.push(arguments[i]);return t.apply(e,r)}},getUrlParameter:function(e){var t=n[e];return t||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(t){var i;try{i=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(e){i=!1}if(i)window.XMLHttpRequest?e.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:e.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");e.createAjaxRequest=function(){return new XMLHttpRequest}}return e.createAjaxRequest(t)},makeAjaxRequest:function(t,i,n){var r,o,s,a;e.isPlainObject(t)&&(i=t.success,n=t.error,r=t.withCredentials,o=t.headers,s=t.responseType||null,a=t.postData||null,t=t.url);var l=e.getUrlProtocol(t),u=e.createAjaxRequest("file:"===l);if(!e.isFunction(i))throw new Error("makeAjaxRequest requires a success callback");u.onreadystatechange=function(){4===u.readyState&&(u.onreadystatechange=function(){},u.status>=200&&u.status<300||0===u.status&&"http:"!==l&&"https:"!==l?i(u):e.isFunction(n)?n(u):e.console.error("AJAX request returned %d: %s",u.status,t))};var c=a?"POST":"GET";try{if(u.open(c,t,!0),s&&(u.responseType=s),o)for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&o[h]&&u.setRequestHeader(h,o[h]);r&&(u.withCredentials=!0),u.send(a)}catch(t){e.console.error("%s while making AJAX request: %s",t.name,t.message),u.onreadystatechange=function(){},e.isFunction(n)&&n(u,t)}return u},jsonp:function(t){var i,n=t.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=t.callbackName||"openseadragon"+e.now(),s=window[o],a="$1"+o+"$2",l=t.param||"callback",u=t.callback;n=n.replace(/(=)\?(&|$)|\?\?/i,a),n+=(/\?/.test(n)?"&":"?")+l+"="+o,window[o]=function(t){if(s)window[o]=s;else try{delete window[o]}catch(e){}u&&e.isFunction(u)&&u(t)},i=document.createElement("script"),void 0===t.async&&!1===t.async||(i.async="async"),t.scriptCharset&&(i.charset=t.scriptCharset),i.src=n,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=void 0)},r.insertBefore(i,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(t){if(window.DOMParser)e.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");e.parseXml=function(e){var t=null;return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t}}return e.parseXml(t)},parseJSON:function(t){return e.parseJSON=window.JSON.parse,e.parseJSON(t)},imageFormatSupported:function(e){return!!i[(e=e||"").toLowerCase()]},setImageFormatsSupported:function(t){e.extend(i,t)}});var t=function(e){};e.console=window.console||{log:t,debug:t,info:t,warn:t,error:t,assert:t},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var i={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},n={};function r(e,t){return t&&e!==document.body?document.body:e.offsetParent}!function(){var t=navigator.appVersion,i=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(i.substring(i.indexOf("MSIE")+5,i.indexOf(";",i.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(i.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(i.substring(i.indexOf("Edge")+5))):i.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(i.substring(i.indexOf("Edg")+4))):i.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(i.substring(i.indexOf("Firefox")+8))):i.indexOf("Safari")>=0?(e.Browser.vendor=i.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(i.substring(i.substring(0,i.indexOf("Safari")).lastIndexOf("/")+1,i.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(i)&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(t)}var r,o,s,a=window.location.search.substring(1).split("&");for(s=0;s<a.length;s++)if((o=(r=a[s]).indexOf("="))>0){var l=r.substring(0,o),u=r.substring(o+1);try{n[l]=decodeURIComponent(u)}catch(t){e.console.error("Ignoring malformed URL parameter: %s=%s",l,u)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<11&&e.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")}(),function(t){var i=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,n=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame;if(i&&n)e.requestAnimationFrame=function(){return i.apply(t,arguments)},e.cancelAnimationFrame=function(){return n.apply(t,arguments)};else{var r,o=[],s=[],a=0;e.requestAnimationFrame=function(t){return o.push([++a,t]),r||(r=setInterval((function(){if(o.length){var t=e.now(),i=s;for(s=o,o=i;s.length;)s.shift()[1](t)}else clearInterval(r),r=void 0}),20)),a},e.cancelAnimationFrame=function(e){var t,i;for(t=0,i=o.length;t<i;t+=1)if(o[t][0]===e)return void o.splice(t,1);for(t=0,i=s.length;t<i;t+=1)if(s[t][0]===e)return void s.splice(t,1)}}}(window)}(a),n=[],void 0===(r="function"==typeof(i=function(){return a})?i.apply(t,n):i)||(e.exports=r),o=a,s={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""},document.exitFullscreen?(s.supportsFullScreen=!0,s.getFullScreenElement=function(){return document.fullscreenElement},s.requestFullScreen=function(e){return e.requestFullscreen()},s.exitFullScreen=function(){document.exitFullscreen()},s.fullScreenEventName="fullscreenchange",s.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(s.supportsFullScreen=!0,s.getFullScreenElement=function(){return document.msFullscreenElement},s.requestFullScreen=function(e){return e.msRequestFullscreen()},s.exitFullScreen=function(){document.msExitFullscreen()},s.fullScreenEventName="MSFullscreenChange",s.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(s.supportsFullScreen=!0,s.getFullScreenElement=function(){return document.webkitFullscreenElement},s.requestFullScreen=function(e){return e.webkitRequestFullscreen()},s.exitFullScreen=function(){document.webkitExitFullscreen()},s.fullScreenEventName="webkitfullscreenchange",s.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(s.supportsFullScreen=!0,s.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},s.requestFullScreen=function(e){return e.webkitRequestFullScreen()},s.exitFullScreen=function(){document.webkitCancelFullScreen()},s.fullScreenEventName="webkitfullscreenchange",s.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(s.supportsFullScreen=!0,s.getFullScreenElement=function(){return document.mozFullScreenElement},s.requestFullScreen=function(e){return e.mozRequestFullScreen()},s.exitFullScreen=function(){document.mozCancelFullScreen()},s.fullScreenEventName="mozfullscreenchange",s.fullScreenErrorEventName="mozfullscreenerror"),s.isFullScreen=function(){return null!==s.getFullScreenElement()},s.cancelFullScreen=function(){o.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),s.exitFullScreen()},o.extend(o,s),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(e,t,i,n){var r=this;n=n||1;var o=0,s=function(i){++o===n&&r.removeHandler(e,s),t(i)};this.addHandler(e,s,i)},addHandler:function(t,i,n){var r=this.events[t];r||(this.events[t]=r=[]),i&&e.isFunction(i)&&(r[r.length]={handler:i,userData:n||null})},removeHandler:function(t,i){var n,r=this.events[t],o=[];if(r&&e.isArray(r)){for(n=0;n<r.length;n++)r[n].handler!==i&&o.push(r[n]);this.events[t]=o}},numberOfHandlers:function(e){var t=this.events[e];return t?t.length:0},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,i){var n,r=t.length;for(n=0;n<r;n++)t[n]&&(i.eventSource=e,i.userData=t[n].userData,t[n].handler(i))}):null},raiseEvent:function(e,t){var i=this.getHandler(e);i&&(t||(t={}),i(this,t))}}}(a),function(e){var t=[],i={};e.MouseTracker=function(n){t.push(this);var r=arguments;e.isPlainObject(n)||(n={element:r[0],clickTimeThreshold:r[1],clickDistThreshold:r[2]}),this.hash=Math.random(),this.element=e.getElement(n.element),this.clickTimeThreshold=n.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=n.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=n.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=n.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=n.userData||null,this.stopDelay=n.stopDelay||50,this.preProcessEventHandler=n.preProcessEventHandler||null,this.contextMenuHandler=n.contextMenuHandler||null,this.enterHandler=n.enterHandler||null,this.leaveHandler=n.leaveHandler||null,this.exitHandler=n.exitHandler||null,this.overHandler=n.overHandler||null,this.outHandler=n.outHandler||null,this.pressHandler=n.pressHandler||null,this.nonPrimaryPressHandler=n.nonPrimaryPressHandler||null,this.releaseHandler=n.releaseHandler||null,this.nonPrimaryReleaseHandler=n.nonPrimaryReleaseHandler||null,this.moveHandler=n.moveHandler||null,this.scrollHandler=n.scrollHandler||null,this.clickHandler=n.clickHandler||null,this.dblClickHandler=n.dblClickHandler||null,this.dragHandler=n.dragHandler||null,this.dragEndHandler=n.dragEndHandler||null,this.pinchHandler=n.pinchHandler||null,this.stopHandler=n.stopHandler||null,this.keyDownHandler=n.keyDownHandler||null,this.keyUpHandler=n.keyUpHandler||null,this.keyHandler=n.keyHandler||null,this.focusHandler=n.focusHandler||null,this.blurHandler=n.blurHandler||null;var o=this;i[this.hash]={click:function(t){!function(t,i){var n={originalEvent:i,eventType:"click",pointerType:"mouse",isEmulated:!1};M(t,n),n.preventDefault&&!n.defaultPrevented&&e.cancelEvent(i);n.stopPropagation&&e.stopEvent(i)}(o,t)},dblclick:function(t){!function(t,i){var n={originalEvent:i,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};M(t,n),n.preventDefault&&!n.defaultPrevented&&e.cancelEvent(i);n.stopPropagation&&e.stopEvent(i)}(o,t)},keydown:function(t){!function(t,i){var n=null,r={originalEvent:i,eventType:"keydown",pointerType:"",isEmulated:!1};M(t,r),!t.keyDownHandler||r.preventGesture||r.defaultPrevented||(n={eventSource:t,keyCode:i.keyCode?i.keyCode:i.charCode,ctrl:i.ctrlKey,shift:i.shiftKey,alt:i.altKey,meta:i.metaKey,originalEvent:i,preventDefault:r.preventDefault||r.defaultPrevented,userData:t.userData},t.keyDownHandler(n));(n&&n.preventDefault||r.preventDefault&&!r.defaultPrevented)&&e.cancelEvent(i);r.stopPropagation&&e.stopEvent(i)}(o,t)},keyup:function(t){!function(t,i){var n=null,r={originalEvent:i,eventType:"keyup",pointerType:"",isEmulated:!1};M(t,r),!t.keyUpHandler||r.preventGesture||r.defaultPrevented||(n={eventSource:t,keyCode:i.keyCode?i.keyCode:i.charCode,ctrl:i.ctrlKey,shift:i.shiftKey,alt:i.altKey,meta:i.metaKey,originalEvent:i,preventDefault:r.preventDefault||r.defaultPrevented,userData:t.userData},t.keyUpHandler(n));(n&&n.preventDefault||r.preventDefault&&!r.defaultPrevented)&&e.cancelEvent(i);r.stopPropagation&&e.stopEvent(i)}(o,t)},keypress:function(t){!function(t,i){var n=null,r={originalEvent:i,eventType:"keypress",pointerType:"",isEmulated:!1};M(t,r),!t.keyHandler||r.preventGesture||r.defaultPrevented||(n={eventSource:t,keyCode:i.keyCode?i.keyCode:i.charCode,ctrl:i.ctrlKey,shift:i.shiftKey,alt:i.altKey,meta:i.metaKey,originalEvent:i,preventDefault:r.preventDefault||r.defaultPrevented,userData:t.userData},t.keyHandler(n));(n&&n.preventDefault||r.preventDefault&&!r.defaultPrevented)&&e.cancelEvent(i);r.stopPropagation&&e.stopEvent(i)}(o,t)},focus:function(e){!function(e,t){var i={originalEvent:t,eventType:"focus",pointerType:"",isEmulated:!1};M(e,i),e.focusHandler&&!i.preventGesture&&e.focusHandler({eventSource:e,originalEvent:t,userData:e.userData})}(o,e)},blur:function(e){!function(e,t){var i={originalEvent:t,eventType:"blur",pointerType:"",isEmulated:!1};M(e,i),e.blurHandler&&!i.preventGesture&&e.blurHandler({eventSource:e,originalEvent:t,userData:e.userData})}(o,e)},contextmenu:function(t){!function(t,i){var n=null,r={originalEvent:i,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};M(t,r),!t.contextMenuHandler||r.preventGesture||r.defaultPrevented||(n={eventSource:t,position:_(y(i),t.element),originalEvent:r.originalEvent,preventDefault:r.preventDefault||r.defaultPrevented,userData:t.userData},t.contextMenuHandler(n));(n&&n.preventDefault||r.preventDefault&&!r.defaultPrevented)&&e.cancelEvent(i);r.stopPropagation&&e.stopEvent(i)}(o,t)},wheel:function(e){!function(e,t){S(e,t,t)}(o,e)},mousewheel:function(e){T(o,e)},DOMMouseScroll:function(e){T(o,e)},MozMousePixelScroll:function(e){T(o,e)},losecapture:function(t){!function(t,i){var n={id:e.MouseTracker.mousePointerId,type:"mouse"},r={originalEvent:i,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};M(t,r),i.target===t.element&&N(t,n,!1);r.stopPropagation&&e.stopEvent(i)}(o,t)},mouseenter:function(e){E(o,e)},mouseleave:function(e){x(o,e)},mouseover:function(e){C(o,e)},mouseout:function(e){k(o,e)},mousedown:function(e){P(o,e)},mouseup:function(e){A(o,e)},mousemove:function(e){L(o,e)},touchstart:function(t){!function(t,i){var n,r,o,s=i.changedTouches.length,a=t.getActivePointersListByType("touch");n=e.now(),a.getLength()>i.touches.length-s&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var l={originalEvent:i,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(M(t,l),r=0;r<s;r++)B(t,l,o={id:i.changedTouches[r].identifier,type:"touch",isPrimary:0===a.getLength(),currentPos:y(i.changedTouches[r]),currentTime:n}),U(t,l,o,0),N(t,o,!0);l.preventDefault&&!l.defaultPrevented&&e.cancelEvent(i);l.stopPropagation&&e.stopEvent(i)}(o,t)},touchend:function(t){!function(t,i){var n,r,o,s=i.changedTouches.length;n=e.now();var a={originalEvent:i,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(M(t,a),r=0;r<s;r++)$(t,a,o={id:i.changedTouches[r].identifier,type:"touch",currentPos:y(i.changedTouches[r]),currentTime:n},0),N(t,o,!1),F(t,a,o);a.preventDefault&&!a.defaultPrevented&&e.cancelEvent(i);a.stopPropagation&&e.stopEvent(i)}(o,t)},touchmove:function(t){!function(t,i){var n,r,o=i.changedTouches.length;n=e.now();var s={originalEvent:i,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(M(t,s),r=0;r<o;r++)H(t,s,{id:i.changedTouches[r].identifier,type:"touch",currentPos:y(i.changedTouches[r]),currentTime:n});s.preventDefault&&!s.defaultPrevented&&e.cancelEvent(i);s.stopPropagation&&e.stopEvent(i)}(o,t)},touchcancel:function(t){!function(t,i){var n,r=i.changedTouches.length,o={originalEvent:i,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(M(t,o),n=0;n<r;n++)j(t,o,{id:i.changedTouches[n].identifier,type:"touch"});o.stopPropagation&&e.stopEvent(i)}(o,t)},gesturestart:function(t){!function(t,i){e.eventIsCanceled(i)||i.preventDefault()}(0,t)},gesturechange:function(t){!function(t,i){e.eventIsCanceled(i)||i.preventDefault()}(0,t)},gotpointercapture:function(t){!function(t,i){var n={originalEvent:i,eventType:"gotpointercapture",pointerType:m(i),isEmulated:!1};M(t,n),i.target===t.element&&N(t,{id:i.pointerId,type:m(i)},!0);n.stopPropagation&&e.stopEvent(i)}(o,t)},lostpointercapture:function(t){!function(t,i){var n={originalEvent:i,eventType:"lostpointercapture",pointerType:m(i),isEmulated:!1};M(t,n),i.target===t.element&&N(t,{id:i.pointerId,type:m(i)},!1);n.stopPropagation&&e.stopEvent(i)}(o,t)},pointerenter:function(e){E(o,e)},pointerleave:function(e){x(o,e)},pointerover:function(e){C(o,e)},pointerout:function(e){k(o,e)},pointerdown:function(e){P(o,e)},pointerup:function(e){A(o,e)},pointermove:function(e){L(o,e)},pointercancel:function(t){!function(t,i){var n={id:i.pointerId,type:m(i)},r={originalEvent:i,eventType:"pointercancel",pointerType:n.type,isEmulated:!1};M(t,r),j(t,r,n),r.stopPropagation&&e.stopEvent(i)}(o,t)},pointerupcaptured:function(t){!function(t,i){var n=t.getActivePointersListByType(m(i));n.getById(i.pointerId)&&I(t,i);e.stopEvent(i)}(o,t)},pointermovecaptured:function(t){!function(t,i){var n=t.getActivePointersListByType(m(i));n.getById(i.pointerId)&&D(t,i);e.stopEvent(i)}(o,t)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),n.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var e;for(d(this),this.element=null,e=0;e<t.length;e++)if(t[e]===this){t.splice(e,1);break}i[this.hash]=null,delete i[this.hash]},isTracking:function(){return i[this.hash].tracking},setTracking:function(t){return t?function(t){var n,r,o=i[t.hash];if(!o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)n=e.MouseTracker.subscribeEvents[r],e.addEvent(t.element,n,o[n],n===e.MouseTracker.wheelEventName&&{passive:!1,capture:!1});h(t),o.tracking=!0}}(this):d(this),this},getActivePointersListByType:function(t){var n,r,o=i[this.hash],s=o.activePointersLists.length;for(n=0;n<s;n++)if(o.activePointersLists[n].type===t)return o.activePointersLists[n];return r=new e.MouseTracker.GesturePointList(t),o.activePointersLists.push(r),r},getActivePointerCount:function(){var e,t=i[this.hash],n=t.activePointersLists.length,r=0;for(e=0;e<n;e++)r+=t.activePointersLists[e].getLength();return r},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var n,r,o,s,a,l,u=function(){try{return window.self!==window.top}catch(e){return!0}}();function c(e){try{return e.addEventListener&&e.removeEventListener}catch(e){return!1}}function h(e){var t,n,r,o,s,a=i[e.hash],l=a.activePointersLists.length;for(t=0;t<l;t++)if((r=a.activePointersLists[t]).getLength()>0){for(s=[],o=r.asArray(),n=0;n<o.length;n++)s.push(o[n]);for(n=0;n<s.length;n++)R(e,r,s[n])}for(t=0;t<l;t++)a.activePointersLists.pop();a.sentDragEvent=!1}function d(t){var n,r,o=i[t.hash];if(o.tracking){for(r=0;r<e.MouseTracker.subscribeEvents.length;r++)n=e.MouseTracker.subscribeEvents[r],e.removeEvent(t.element,n,o[n],!1);h(t),o.tracking=!1}}function p(e,t){var n=i[e.hash];if("pointerevent"===t)return{upName:"pointerup",upHandler:n.pointerupcaptured,moveName:"pointermove",moveHandler:n.pointermovecaptured};if("mouse"===t)return{upName:"pointerup",upHandler:n.pointerupcaptured,moveName:"pointermove",moveHandler:n.pointermovecaptured};if("touch"===t)return{upName:"touchend",upHandler:n.touchendcaptured,moveName:"touchmove",moveHandler:n.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function f(t,i){var n,r;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(!(r=t.getActivePointersListByType(i.type).getById(i.id))||!r.captured)return;try{t.element.releasePointerCapture(i.id)}catch(e){}}else t.element.releaseCapture();else n=p(t,e.MouseTracker.havePointerEvents?"pointerevent":i.type),u&&c(window.top)&&e.removeEvent(window.top,n.upName,n.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,n.moveName,n.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,n.upName,n.upHandler,!0);N(t,i,!1)}function g(t){return e.MouseTracker.havePointerEvents?t.pointerId:e.MouseTracker.mousePointerId}function m(t){return e.MouseTracker.havePointerEvents?t.pointerType||(e.Browser.vendor===e.BROWSERS.IE?"mouse":""):"mouse"}function v(t){return!e.MouseTracker.havePointerEvents||t.isPrimary}function y(t){return e.getMousePosition(t)}function b(e,t){return _(y(e),t)}function _(t,i){var n=e.getElementOffset(i);return t.minus(n)}function w(t,i){return new e.Point((t.x+i.x)/2,(t.y+i.y)/2)}function T(t,i){var n={target:i.target||i.srcElement,type:"wheel",shiftKey:i.shiftKey||!1,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX?i.pageX:i.clientX,pageY:i.pageY?i.pageY:i.clientY,deltaMode:"MozMousePixelScroll"===i.type?0:1,deltaX:0,deltaZ:0};"mousewheel"===e.MouseTracker.wheelEventName?n.deltaY=-i.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:n.deltaY=i.detail,S(t,n,i)}function S(t,i,n){var r,o,s=null;r=i.deltaY<0?1:-1,M(t,o={originalEvent:i,eventType:"wheel",pointerType:"mouse",isEmulated:i!==n}),!t.scrollHandler||o.preventGesture||o.defaultPrevented||(s={eventSource:t,pointerType:"mouse",position:b(i,t.element),scroll:r,shift:i.shiftKey,isTouchEvent:!1,originalEvent:n,preventDefault:o.preventDefault||o.defaultPrevented,userData:t.userData},t.scrollHandler(s)),o.stopPropagation&&e.stopEvent(n),(s&&s.preventDefault||o.preventDefault&&!o.defaultPrevented)&&e.cancelEvent(n)}function E(t,i){var n={id:g(i),type:m(i),isPrimary:v(i),currentPos:y(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointerenter",pointerType:n.type,isEmulated:!1};M(t,r),B(t,r,n)}function x(t,i){var n={id:g(i),type:m(i),isPrimary:v(i),currentPos:y(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointerleave",pointerType:n.type,isEmulated:!1};M(t,r),F(t,r,n)}function C(t,i){var n={id:g(i),type:m(i),isPrimary:v(i),currentPos:y(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointerover",pointerType:n.type,isEmulated:!1};M(t,r),function(e,t,i){var n,r;n=e.getActivePointersListByType(i.type),r=n.getById(i.id),r?i=r:(i.captured=!1,i.insideElementPressed=!1);e.overHandler&&e.overHandler({eventSource:e,pointerType:i.type,position:_(i.currentPos,e.element),buttons:n.buttons,pointers:e.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==n.buttons,isTouchEvent:"touch"===i.type,originalEvent:t.originalEvent,userData:e.userData})}(t,r,n),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(i),r.stopPropagation&&e.stopEvent(i)}function k(t,i){var n={id:g(i),type:m(i),isPrimary:v(i),currentPos:y(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointerout",pointerType:n.type,isEmulated:!1};M(t,r),function(e,t,i){var n,r;n=e.getActivePointersListByType(i.type),r=n.getById(i.id),r?i=r:(i.captured=!1,i.insideElementPressed=!1);e.outHandler&&e.outHandler({eventSource:e,pointerType:i.type,position:i.currentPos&&_(i.currentPos,e.element),buttons:n.buttons,pointers:e.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==n.buttons,isTouchEvent:"touch"===i.type,originalEvent:t.originalEvent,userData:e.userData})}(t,r,n),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(i),r.stopPropagation&&e.stopEvent(i)}function P(t,i){var n={id:g(i),type:m(i),isPrimary:v(i),currentPos:y(i),currentTime:e.now()},r=e.MouseTracker.havePointerEvents&&"touch"===n.type&&e.Browser.vendor!==e.BROWSERS.IE,o={originalEvent:i,eventType:"pointerdown",pointerType:n.type,isEmulated:!1};M(t,o),U(t,o,n,i.button),o.preventDefault&&!o.defaultPrevented&&e.cancelEvent(i),o.stopPropagation&&e.stopEvent(i),o.shouldCapture&&(r?N(t,n,!0):function(t,i){var n;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{t.element.setPointerCapture(i.id)}catch(t){return void e.console.warn("setPointerCapture() called on invalid pointer ID")}else t.element.setCapture(!0);else n=p(t,e.MouseTracker.havePointerEvents?"pointerevent":i.type),u&&c(window.top)&&e.addEvent(window.top,n.upName,n.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,n.upName,n.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,n.moveName,n.moveHandler,!0);N(t,i,!0)}(t,n))}function A(e,t){I(e,t)}function I(t,i){var n,r={originalEvent:i,eventType:"pointerup",pointerType:(n={id:g(i),type:m(i),isPrimary:v(i),currentPos:y(i),currentTime:e.now()}).type,isEmulated:!1};M(t,r),$(t,r,n,i.button),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(i),r.stopPropagation&&e.stopEvent(i),r.shouldReleaseCapture&&(i.target===t.element?f(t,n):N(t,n,!1))}function L(e,t){D(e,t)}function D(t,i){var n={id:g(i),type:m(i),isPrimary:v(i),currentPos:y(i),currentTime:e.now()},r={originalEvent:i,eventType:"pointermove",pointerType:n.type,isEmulated:!1};M(t,r),H(t,r,n),r.preventDefault&&!r.defaultPrevented&&e.cancelEvent(i),r.stopPropagation&&e.stopEvent(i)}function O(e,t){return t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function R(t,i,n){var r,o=i.getById(n.id);return o?(o.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),f(t,o)),i.removeContact(),r=i.removeById(n.id)):r=i.getLength(),r}function M(t,i){i.eventSource=t,i.eventPhase=i.originalEvent&&void 0!==i.originalEvent.eventPhase?i.originalEvent.eventPhase:0,i.defaultPrevented=e.eventIsCanceled(i.originalEvent),i.shouldCapture=!1,i.shouldReleaseCapture=!1,i.userData=t.userData,function(e,t){switch(t.eventType){case"pointermove":case"pointerdown":case"pointerup":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasGestureHandlers,t.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"wheel":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!1,t.preventGesture=!e.hasScrollHandler,t.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":t.isStoppable=!0,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1;break;case"click":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.clickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;case"dblclick":t.isStoppable=!0,t.isCancelable=!0,t.preventDefault=!!e.dblClickHandler,t.preventGesture=!1,t.stopPropagation=!1;break;default:t.isStoppable=!1,t.isCancelable=!1,t.preventDefault=!1,t.preventGesture=!1,t.stopPropagation=!1}}(t,i),t.preProcessEventHandler&&t.preProcessEventHandler(i)}function N(t,i,n){var r=t.getActivePointersListByType(i.type),o=r.getById(i.id);o?n&&!o.captured?(o.captured=!0,r.captureCount++):!n&&o.captured&&(o.captured=!1,r.captureCount--,r.captureCount<0&&(r.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function B(e,t,i){var n,r=e.getActivePointersListByType(i.type);(n=r.getById(i.id))?(n.insideElement=!0,n.lastPos=n.currentPos,n.lastTime=n.currentTime,n.currentPos=i.currentPos,n.currentTime=i.currentTime,i=n):(i.captured=!1,i.insideElementPressed=!1,i.insideElement=!0,O(r,i)),e.enterHandler&&e.enterHandler({eventSource:e,pointerType:i.type,position:_(i.currentPos,e.element),buttons:r.buttons,pointers:e.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==r.buttons,isTouchEvent:"touch"===i.type,originalEvent:t.originalEvent,userData:e.userData})}function F(e,t,i){var n,r,o=e.getActivePointersListByType(i.type);(n=o.getById(i.id))?(n.captured?(n.insideElement=!1,n.lastPos=n.currentPos,n.lastTime=n.currentTime,n.currentPos=i.currentPos,n.currentTime=i.currentTime):R(e,o,n),i=n):(i.captured=!1,i.insideElementPressed=!1),(e.leaveHandler||e.exitHandler)&&(r={eventSource:e,pointerType:i.type,position:i.currentPos&&_(i.currentPos,e.element),buttons:o.buttons,pointers:e.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==o.buttons,isTouchEvent:"touch"===i.type,originalEvent:t.originalEvent,userData:e.userData},e.leaveHandler&&e.leaveHandler(r),e.exitHandler&&e.exitHandler(r))}function U(t,n,r,o){var s,a=i[t.hash],l=t.getActivePointersListByType(r.type);if(void 0!==n.originalEvent.buttons?l.buttons=n.originalEvent.buttons:0===o?l.buttons|=1:1===o?l.buttons|=4:2===o?l.buttons|=2:3===o?l.buttons|=8:4===o?l.buttons|=16:5===o&&(l.buttons|=32),0!==o)return n.shouldCapture=!1,n.shouldReleaseCapture=!1,void(!t.nonPrimaryPressHandler||n.preventGesture||n.defaultPrevented||(n.preventDefault=!0,t.nonPrimaryPressHandler({eventSource:t,pointerType:r.type,position:_(r.currentPos,t.element),button:o,buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:n.originalEvent,userData:t.userData})));(s=l.getById(r.id))?(s.insideElementPressed=!0,s.insideElement=!0,s.originalTarget=n.originalEvent.target,s.contactPos=r.currentPos,s.contactTime=r.currentTime,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=r.currentPos,s.currentTime=r.currentTime,r=s):(r.captured=!1,r.insideElementPressed=!0,r.insideElement=!0,r.originalTarget=n.originalEvent.target,O(l,r)),l.addContact(),n.preventGesture||n.defaultPrevented?(n.shouldCapture=!1,n.shouldReleaseCapture=!1):(n.shouldCapture=!0,n.shouldReleaseCapture=!1,n.preventDefault=!0,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,r),1===l.contacts?t.pressHandler&&!n.preventGesture&&t.pressHandler({eventSource:t,pointerType:r.type,position:_(r.contactPos,t.element),buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:n.originalEvent,userData:t.userData}):2===l.contacts&&t.pinchHandler&&"touch"===r.type&&(a.pinchGPoints=l.asArray(),a.lastPinchDist=a.currentPinchDist=a.pinchGPoints[0].currentPos.distanceTo(a.pinchGPoints[1].currentPos),a.lastPinchCenter=a.currentPinchCenter=w(a.pinchGPoints[0].currentPos,a.pinchGPoints[1].currentPos)))}function $(t,n,r,o){var s,a,l,u,c=i[t.hash],h=t.getActivePointersListByType(r.type),d=!1;if(void 0!==n.originalEvent.buttons?h.buttons=n.originalEvent.buttons:0===o?h.buttons^=-2:1===o?h.buttons^=-5:2===o?h.buttons^=-3:3===o?h.buttons^=-9:4===o?h.buttons^=-17:5===o&&(h.buttons^=-33),n.shouldCapture=!1,0!==o)return n.shouldReleaseCapture=!1,void(!t.nonPrimaryReleaseHandler||n.preventGesture||n.defaultPrevented||(n.preventDefault=!0,t.nonPrimaryReleaseHandler({eventSource:t,pointerType:r.type,position:_(r.currentPos,t.element),button:o,buttons:h.buttons,isTouchEvent:"touch"===r.type,originalEvent:n.originalEvent,userData:t.userData})));(l=h.getById(r.id))?(h.removeContact(),l.captured&&(d=!0),l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=r.currentPos,l.currentTime=r.currentTime,l.insideElement||R(t,h,l),s=l.currentPos,a=l.currentTime):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,O(h,r),l=r),n.preventGesture||n.defaultPrevented||(d?(n.shouldReleaseCapture=!0,n.preventDefault=!0,(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,l),0===h.contacts?(t.releaseHandler&&s&&t.releaseHandler({eventSource:t,pointerType:l.type,position:_(s,t.element),buttons:h.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:t.userData}),t.dragEndHandler&&c.sentDragEvent&&t.dragEndHandler({eventSource:t,pointerType:l.type,position:_(l.currentPos,t.element),speed:l.speed,direction:l.direction,shift:n.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:t.userData}),c.sentDragEvent=!1,(t.clickHandler||t.dblClickHandler)&&l.insideElement&&(u=a-l.contactTime<=t.clickTimeThreshold&&l.contactPos.distanceTo(s)<=t.clickDistThreshold,t.clickHandler&&t.clickHandler({eventSource:t,pointerType:l.type,position:_(l.currentPos,t.element),quick:u,shift:n.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,originalTarget:l.originalTarget,userData:t.userData}),t.dblClickHandler&&u&&(h.clicks++,1===h.clicks?(c.lastClickPos=s,c.dblClickTimeOut=setTimeout((function(){h.clicks=0}),t.dblClickTimeThreshold)):2===h.clicks&&(clearTimeout(c.dblClickTimeOut),h.clicks=0,c.lastClickPos.distanceTo(s)<=t.dblClickDistThreshold&&t.dblClickHandler({eventSource:t,pointerType:l.type,position:_(l.currentPos,t.element),shift:n.originalEvent.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:t.userData}),c.lastClickPos=null)))):2===h.contacts&&t.pinchHandler&&"touch"===l.type&&(c.pinchGPoints=h.asArray(),c.lastPinchDist=c.currentPinchDist=c.pinchGPoints[0].currentPos.distanceTo(c.pinchGPoints[1].currentPos),c.lastPinchCenter=c.currentPinchCenter=w(c.pinchGPoints[0].currentPos,c.pinchGPoints[1].currentPos))):(n.shouldReleaseCapture=!1,t.releaseHandler&&s&&(t.releaseHandler({eventSource:t,pointerType:l.type,position:_(s,t.element),buttons:h.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:n.originalEvent,userData:t.userData}),n.preventDefault=!0)))}function H(e,t,n){var r,o,s,a=i[e.hash],l=e.getActivePointersListByType(n.type);void 0!==t.originalEvent.buttons&&(l.buttons=t.originalEvent.buttons),(r=l.getById(n.id))&&(r.lastPos=r.currentPos,r.lastTime=r.currentTime,r.currentPos=n.currentPos,r.currentTime=n.currentTime,t.shouldCapture=!1,t.shouldReleaseCapture=!1,e.stopHandler&&"mouse"===n.type&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout((function(){!function(e,t,i){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:i,position:b(t,e.element),buttons:e.getActivePointersListByType(i).buttons,isTouchEvent:"touch"===i,originalEvent:t,userData:e.userData})}(e,t.originalEvent,n.type)}),e.stopDelay)),0===l.contacts?e.moveHandler&&e.moveHandler({eventSource:e,pointerType:n.type,position:_(n.currentPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===n.type,originalEvent:t.originalEvent,userData:e.userData}):1===l.contacts?(e.moveHandler&&(r=l.asArray()[0],e.moveHandler({eventSource:e,pointerType:r.type,position:_(r.currentPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===r.type,originalEvent:t.originalEvent,userData:e.userData})),!e.dragHandler||t.preventGesture||t.defaultPrevented||(s=(r=l.asArray()[0]).currentPos.minus(r.lastPos),e.dragHandler({eventSource:e,pointerType:r.type,position:_(r.currentPos,e.element),buttons:l.buttons,delta:s,speed:r.speed,direction:r.direction,shift:t.originalEvent.shiftKey,isTouchEvent:"touch"===r.type,originalEvent:t.originalEvent,userData:e.userData}),t.preventDefault=!0,a.sentDragEvent=!0)):2===l.contacts&&(e.moveHandler&&(o=l.asArray(),e.moveHandler({eventSource:e,pointerType:o[0].type,position:_(w(o[0].currentPos,o[1].currentPos),e.element),buttons:l.buttons,isTouchEvent:"touch"===o[0].type,originalEvent:t.originalEvent,userData:e.userData})),!e.pinchHandler||"touch"!==n.type||t.preventGesture||t.defaultPrevented||(s=a.pinchGPoints[0].currentPos.distanceTo(a.pinchGPoints[1].currentPos))!==a.currentPinchDist&&(a.lastPinchDist=a.currentPinchDist,a.currentPinchDist=s,a.lastPinchCenter=a.currentPinchCenter,a.currentPinchCenter=w(a.pinchGPoints[0].currentPos,a.pinchGPoints[1].currentPos),e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:a.pinchGPoints,lastCenter:_(a.lastPinchCenter,e.element),center:_(a.currentPinchCenter,e.element),lastDistance:a.lastPinchDist,distance:a.currentPinchDist,shift:t.originalEvent.shiftKey,originalEvent:t.originalEvent,userData:e.userData}),t.preventDefault=!0)))}function j(e,t,i){var n,r=e.getActivePointersListByType(i.type);(n=r.getById(i.id))&&R(e,r,n)}e.MouseTracker.gesturePointVelocityTracker=(n=[],r=0,o=0,s=function(e,t){return e.hash.toString()+t.type+t.id.toString()},a=function(){var t,i,r,s,a,l,u=n.length,c=e.now();for(s=c-o,o=c,t=0;t<u;t++)(r=(i=n[t]).gPoint).direction=Math.atan2(r.currentPos.y-i.lastPos.y,r.currentPos.x-i.lastPos.x),a=i.lastPos.distanceTo(r.currentPos),i.lastPos=r.currentPos,l=1e3*a/(s+1),r.speed=.75*l+.25*r.speed},{addPoint:function(t,i){var l=s(t,i);n.push({guid:l,gPoint:i,lastPos:i.currentPos}),1===n.length&&(o=e.now(),r=window.setInterval(a,50))},removePoint:function(e,t){var i,o=s(e,t),a=n.length;for(i=0;i<a;i++)if(n[i].guid===o){n.splice(i,1),0==--a&&window.clearInterval(r);break}}}),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],"DOMMouseScroll"===e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=(l=document.createElement("div"),e.isFunction(l.setPointerCapture)&&e.isFunction(l.releasePointerCapture)),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=function(){var t=document.createElement("div");return e.isFunction(t.setCapture)&&e.isFunction(t.releaseCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}}}(a),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,i,n){var r=t.parentNode;"number"==typeof i&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),i={anchor:i}),i.attachToViewer=void 0===i.attachToViewer||i.attachToViewer,this.autoFade=void 0===i.autoFade||i.autoFade,this.element=t,this.anchor=i.anchor,this.container=n,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof i.top?i.top+"px":i.top,this.wrapper.style.left="number"==typeof i.left?i.left+"px":i.left,this.wrapper.style.height="number"==typeof i.height?i.height+"px":i.height,this.wrapper.style.width="number"==typeof i.width?i.width+"px":i.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),i.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!==this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[e.SIGNAL]&&e.Browser.vendor===e.BROWSERS.IE?e.setElementOpacity(this.element,t,!0):e.setElementOpacity(this.wrapper,t,!0)}}}(a),function(e){function t(e,t){var i,n=e.controls;for(i=n.length-1;i>=0;i--)if(n[i].element===t)return i;return-1}e.ControlDock=function(t){var i,n,r=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),n=0;n<r.length;n++)i=r[n],this.controls[i]=e.makeNeutralElement("div"),this.controls[i].style.position="absolute",i.match("left")&&(this.controls[i].style.left="0px"),i.match("right")&&(this.controls[i].style.right="0px"),i.match("top")&&(this.controls[i].style.top="0px"),i.match("bottom")&&(this.controls[i].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(i,n){var r=null;if(!(t(this,i=e.getElement(i))>=0)){switch(n.anchor){case e.ControlAnchor.TOP_RIGHT:r=this.controls.topright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:r=this.controls.topleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:default:case e.ControlAnchor.NONE:r=this.container,i.style.margin="0px",i.style.padding="0px"}this.controls.push(new e.Control(i,n,r)),i.style.display="inline-block"}},removeControl:function(i){var n=t(this,i=e.getElement(i));return n>=0&&(this.controls[n].destroy(),this.controls.splice(n,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(a),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(a),function(e){var t={},i=1;function n(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function r(t,i){if(i instanceof e.Overlay)return i;var n=null;if(i.element)n=e.getElement(i.element);else{var r=i.id?i.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(n=e.getElement(i.id))||((n=document.createElement("a")).href="#/overlay/"+r),n.id=r,e.addClass(n,i.className?i.className:"openseadragon-overlay")}var o=i.location,s=i.width,a=i.height;if(!o){var l=i.x,u=i.y;if(void 0!==i.px){var c=t.viewport.imageToViewportRectangle(new e.Rect(i.px,i.py,s||0,a||0));l=c.x,u=c.y,s=void 0!==s?c.width:void 0,a=void 0!==a?c.height:void 0}o=new e.Point(l,u)}var h=i.placement;return h&&"string"===e.type(h)&&(h=e.Placement[i.placement.toUpperCase()]),new e.Overlay({element:n,location:o,placement:h,onDraw:i.onDraw,checkResize:i.checkResize,width:s,height:a,rotationMode:i.rotationMode})}function o(e,t){var i;for(i=e.length-1;i>=0;i--)if(e[i].element===t)return i;return-1}function s(t,i){return e.requestAnimationFrame((function(){i(t)}))}function a(t){e.requestAnimationFrame((function(){!function(t){var i,n;if(t.controlsShouldFade){for(i=1-(e.now()-t.controlsFadeBeginTime)/t.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),n=t.controls.length-1;n>=0;n--)t.controls[n].autoFade&&t.controls[n].setOpacity(i);i>0&&a(t)}}(t)}))}function l(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout((function(){a(t)}),t.controlsFadeDelay))}function u(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function c(){u(this)}function h(){l(this)}function d(e){var t={tracker:e.eventSource,position:e.position,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.raiseEvent("canvas-contextmenu",t),e.preventDefault=t.preventDefault}function p(t){var i={originalEvent:t.originalEvent,preventDefaultAction:!1,preventVerticalPan:t.preventVerticalPan||!this.panVertical,preventHorizontalPan:t.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",i),i.preventDefaultAction||t.ctrl||t.alt||t.meta)t.preventDefault=!1;else switch(t.keyCode){case 38:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 40:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 37:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 39:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;default:t.preventDefault=!1}}function f(t){var i={originalEvent:t.originalEvent,preventDefaultAction:!1,preventVerticalPan:t.preventVerticalPan||!this.panVertical,preventHorizontalPan:t.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",i),i.preventDefaultAction||t.ctrl||t.alt||t.meta)t.preventDefault=!1;else switch(t.keyCode){case 43:case 61:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 45:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 119:case 87:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 115:case 83:i.preventVerticalPan||(t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 97:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 100:i.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),t.preventDefault=!0;break;case 114:this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 82:this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),t.preventDefault=!0;break;case 102:this.viewport.toggleFlip(),t.preventDefault=!0;break;case 106:this.goToPreviousPage();break;case 107:this.goToNextPage();break;default:t.preventDefault=!1}}function g(e){var t;document.activeElement===this.canvas||this.canvas.focus(),this.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var i={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,originalTarget:e.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",i),!i.preventDefaultAction&&this.viewport&&e.quick&&(t=this.gestureSettingsByDeviceType(e.pointerType)).clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function m(e){var t,i={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",i),!i.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function v(e){var t,i={tracker:e.eventSource,pointerType:e.pointerType,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",i),(t=this.gestureSettingsByDeviceType(e.pointerType)).dragToPan&&!i.preventDefaultAction&&this.viewport){if(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan){var n=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=n.x,this.viewport.centerSpringY.target.value+=n.y;var r=this.viewport.getBounds(),o=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=n.x,this.viewport.centerSpringY.target.value-=n.y,r.x!==o.x&&(e.delta.x=0),r.y!==o.y&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function y(t){var i={tracker:t.eventSource,pointerType:t.pointerType,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",i),!i.preventDefaultAction&&this.viewport){var n=this.gestureSettingsByDeviceType(t.pointerType);if(n.flickEnabled&&t.speed>=n.flickMinSpeed){var r=0;this.panHorizontal&&(r=n.flickMomentum*t.speed*Math.cos(t.direction));var o=0;this.panVertical&&(o=n.flickMomentum*t.speed*Math.sin(t.direction));var s=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),a=this.viewport.pointFromPixel(new e.Point(s.x-r,s.y-o));this.viewport.panTo(a,!1)}this.viewport.applyConstraints()}}function b(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function _(e){this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function w(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function T(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function S(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function E(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function x(e){var t,i,n,r={tracker:e.eventSource,pointerType:e.pointerType,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",r),this.viewport&&(!(t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom||r.preventDefaultPanAction&&r.preventDefaultZoomAction||(i=this.viewport.pointFromPixel(e.center,!0),t.zoomToRefPoint&&!r.preventDefaultPanAction&&(n=this.viewport.pointFromPixel(e.lastCenter,!0).minus(i),this.panHorizontal||(n.x=0),this.panVertical||(n.y=0),this.viewport.panBy(n,!0)),r.preventDefaultZoomAction||this.viewport.zoomBy(e.distance/e.lastDistance,i,!0),this.viewport.applyConstraints()),t.pinchRotate&&!r.preventDefaultRotateAction)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),s=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(o-s)*(180/Math.PI))}}function C(t){var i,n,r,o;(o=e.now())-this._lastScrollTime>this.minScrollDeltaTime?(this._lastScrollTime=o,i={tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",i),!i.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x),(n=this.gestureSettingsByDeviceType(t.pointerType)).scrollToZoom&&(r=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(r,n.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints())),t.preventDefault=i.preventDefault):t.preventDefault=!0}function k(e){t[this.hash].mouseInside=!0,u(this),this.raiseEvent("container-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function P(e){e.pointers<1&&(t[this.hash].mouseInside=!1,t[this.hash].animating||l(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function A(e){!function(e){if(e._opening||!t[e.hash])return;if(e.autoResize){var i=n(e.container),r=t[e.hash].prevContainerSize;if(!i.equals(r)){var o=e.viewport;if(e.preserveImageSizeOnResize){var s=r.x/i.x,a=o.getZoom()*s,c=o.getCenter();o.resize(i,!1),o.zoomTo(a,null,!0),o.panTo(c,!0)}else{var h=o.getBounds();o.resize(i,!0),o.fitBoundsWithConstraints(h,!0)}t[e.hash].prevContainerSize=i,t[e.hash].forceRedraw=!0}}var d=e.viewport.update(),p=e.world.update()||d;d&&e.raiseEvent("viewport-change");e.referenceStrip&&(p=e.referenceStrip.update(e.viewport)||p);var f=t[e.hash].animating;!f&&p&&(e.raiseEvent("animation-start"),u(e));var g=f&&!p;g&&(t[e.hash].animating=!1);(p||g||t[e.hash].forceRedraw||e.world.needsDraw())&&(!function(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),t[e.hash].forceRedraw=!1,p&&e.raiseEvent("animation"));g&&(e.raiseEvent("animation-finish"),t[e.hash].mouseInside||l(e));t[e.hash].animating=p}(e),e.isOpen()?e._updateRequestId=s(e,A):e._updateRequestId=!1}function I(e,t){return e?e+t:t}function L(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=this.zoomPerSecond,t[this.hash].zooming=!0,R(this)}function D(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=1/this.zoomPerSecond,t[this.hash].zooming=!0,R(this)}function O(){t[this.hash].zooming=!1}function R(t){e.requestAnimationFrame(e.delegate(t,M))}function M(){var i,n,r;t[this.hash].zooming&&this.viewport&&(n=(i=e.now())-t[this.hash].lastZoomTime,r=Math.pow(t[this.hash].zoomFactor,n/1e3),this.viewport.zoomBy(r),this.viewport.applyConstraints(),t[this.hash].lastZoomTime=i,R(this))}function N(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function B(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function F(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function U(){this.viewport&&this.viewport.goHome()}function $(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function H(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t+this.rotationIncrement,360):e.positiveModulo(t-this.rotationIncrement,360),this.viewport.setRotation(t)}}function j(){if(this.viewport){var t=this.viewport.getRotation();t=this.viewport.flipped?e.positiveModulo(t-this.rotationIncrement,360):e.positiveModulo(t+this.rotationIncrement,360),this.viewport.setRotation(t)}}function z(){this.viewport.toggleFlip()}e.Viewer=function(r){var o,a,u=arguments,c=this;if(e.isPlainObject(r)||(r={id:u[0],xmlPath:u.length>1?u[1]:void 0,prefixUrl:u.length>2?u[2]:void 0,controls:u.length>3?u[3]:void 0,overlays:u.length>4?u[4]:void 0}),r.config&&(e.extend(!0,r,r.config),delete r.config),e.extend(!0,this,{id:r.id,hash:r.hash||i++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,r),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==t[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),t[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",(function(t){var i=e.getString("Errors.OpenFailed",t.eventSource,t.message);c._showMessage(i)})),e.ControlDock.call(this,r),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(a=this.canvas.style).width="100%",a.height="100%",a.overflow="hidden",a.position="absolute",a.top="0px",a.left="0px",e.setElementTouchActionNone(this.canvas),""!==r.tabIndex&&(this.canvas.tabIndex=void 0===r.tabIndex?0:r.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,d),keyDownHandler:e.delegate(this,p),keyHandler:e.delegate(this,f),clickHandler:e.delegate(this,g),dblClickHandler:e.delegate(this,m),dragHandler:e.delegate(this,v),dragEndHandler:e.delegate(this,y),enterHandler:e.delegate(this,b),leaveHandler:e.delegate(this,_),pressHandler:e.delegate(this,w),releaseHandler:e.delegate(this,T),nonPrimaryPressHandler:e.delegate(this,S),nonPrimaryReleaseHandler:e.delegate(this,E),scrollHandler:e.delegate(this,C),pinchHandler:e.delegate(this,x)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,k),leaveHandler:e.delegate(this,P)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),t[this.hash].prevContainerSize=n(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",(function(e){c.source=c.world.getItemAt(0).source,t[c.hash].forceRedraw=!0,c._updateRequestId||(c._updateRequestId=s(c,A))})),this.world.addHandler("remove-item",(function(e){c.world.getItemCount()?c.source=c.world.getItemAt(0).source:c.source=null,t[c.hash].forceRedraw=!0})),this.world.addHandler("metrics-change",(function(e){c.viewport&&c.viewport._setContentBounds(c.world.getHomeBounds(),c.world.getContentFactor())})),this.world.addHandler("item-index-change",(function(e){c.source=c.world.getItemAt(0).source})),this.viewport=new e.Viewport({containerSize:t[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:r.timeout}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(o=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(o,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(o=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(o,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),o=0;o<this.customControls.length;o++)this.addControl(this.customControls[o].id,{anchor:this.customControls[o].anchor});e.requestAnimationFrame((function(){l(c)})),void 0===this.imageSmoothingEnabled||this.imageSmoothingEnabled||this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(t,i){var n=this;if(this.close(),!t)return this;if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===i||isNaN(i)||(this.initialPage=i),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(t)||(t=[t]),!t.length)return this;this._opening=!0;for(var o,s=t.length,a=0,l=0,u=function(){if(a+l===s)if(a){!n._firstOpen&&n.preserveViewport||(n.viewport.goHome(!0),n.viewport.update()),n._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),n.overlays&&!n.preserveOverlays)for(var i=0;i<n.overlays.length;i++)n.currentOverlays[i]=r(n,n.overlays[i]);n._drawOverlays(),n._opening=!1,n.raiseEvent("open",{source:e})}else n._opening=!1,n.raiseEvent("open-failed",o)},c=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var i=t.success;t.success=function(e){if(a++,t.tileSource.overlays)for(var r=0;r<t.tileSource.overlays.length;r++)n.addOverlay(t.tileSource.overlays[r]);i&&i(e),u()};var r=t.error;t.error=function(e){l++,o||(o=e),r&&r(e),u()},n.addTiledImage(t)},h=0;h<t.length;h++)c(t[h]);return this},close:function(){return t[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),t[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(t[this.hash]){if(this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),t[this.navigator.hash]=null,delete t[this.navigator.hash],this.navigator=null),this.removeAllHandlers(),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),t[this.hash]=null,delete t[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisible();return t},setControlsEnabled:function(e){return e?u(this):l(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},isFullPage:function(){return t[this.hash].fullPage},setFullPage:function(i){var n,r,o=document.body,s=o.style,a=document.documentElement.style,l=this;if(i===this.isFullPage())return this;var u={fullPage:i,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",u),u.preventDefaultAction)return this;if(i){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=s.margin,this.docMargin=a.margin,s.margin="0",a.margin="0",this.bodyPadding=s.padding,this.docPadding=a.padding,s.padding="0",a.padding="0",this.bodyWidth=s.width,this.docWidth=a.width,s.width="100%",a.width="100%",this.bodyHeight=s.height,this.docHeight=a.height,s.height="100%",a.height="100%",this.bodyDisplay=s.display,s.display="block",this.previousBody=[],t[this.hash].prevElementParent=this.element.parentNode,t[this.hash].prevNextSibling=this.element.nextSibling,t[this.hash].prevElementWidth=this.element.style.width,t[this.hash].prevElementHeight=this.element.style.height,n=o.childNodes.length,r=0;r<n;r++)this.previousBody.push(o.childNodes[0]),o.removeChild(o.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,o.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),o.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),t[this.hash].fullPage=!0,e.delegate(this,k)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,s.margin=this.bodyMargin,a.margin=this.docMargin,s.padding=this.bodyPadding,a.padding=this.docPadding,s.width=this.bodyWidth,a.width=this.docWidth,s.height=this.bodyHeight,a.height=this.docHeight,s.display=this.bodyDisplay,o.removeChild(this.element),n=this.previousBody.length,r=0;r<n;r++)o.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),t[this.hash].prevElementParent.insertBefore(this.element,t[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(o.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=t[this.hash].prevElementWidth,this.element.style.height=t[this.hash].prevElementHeight;var c=0,h=function(){e.setPageScroll(l.pageScroll);var t=e.getPageScroll();++c<10&&(t.x!==l.pageScroll.x||t.y!==l.pageScroll.y)&&e.requestAnimationFrame(h)};e.requestAnimationFrame(h),t[this.hash].fullPage=!1,e.delegate(this,P)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:i}),this},setFullScreen:function(t){var i=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var n={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",n),n.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var r=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,r),e.removeEvent(document,e.fullScreenErrorEventName,r),i.setFullPage(!1),i.isFullPage()&&(i.element.style.width=i.fullPageStyleWidth,i.element.style.height=i.fullPageStyleHeight)),i.navigator&&i.viewport&&setTimeout((function(){i.navigator.update(i.viewport)})),i.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,r),e.addEvent(document,e.fullScreenErrorEventName,r),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!==this.container.style.visibility},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var i=this;t.replace&&(t.replaceItem=i.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.preload&&(t.preload=this.preload),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation),void 0===t.crossOriginPolicy&&(t.crossOriginPolicy=void 0!==t.tileSource.crossOriginPolicy?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===t.ajaxWithCredentials&&(t.ajaxWithCredentials=this.ajaxWithCredentials),void 0===t.loadTilesWithAjax&&(t.loadTilesWithAjax=this.loadTilesWithAjax),void 0===t.ajaxHeaders||null===t.ajaxHeaders?t.ajaxHeaders=this.ajaxHeaders:e.isPlainObject(t.ajaxHeaders)&&e.isPlainObject(this.ajaxHeaders)&&(t.ajaxHeaders=e.extend({},this.ajaxHeaders,t.ajaxHeaders));var n={options:t};function r(e){for(var r=0;r<i._loadQueue.length;r++)if(i._loadQueue[r]===n){i._loadQueue.splice(r,1);break}0===i._loadQueue.length&&o(n),i.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function o(e){i.collectionMode&&(i.world.arrange({immediately:e.options.collectionImmediately,rows:i.collectionRows,columns:i.collectionColumns,layout:i.collectionLayout,tileSize:i.collectionTileSize,tileMargin:i.collectionTileMargin}),i.world.setAutoRefigureSizes(!0))}function s(){for(var t,n,r;i._loadQueue.length&&(t=i._loadQueue[0]).tileSource;){if(i._loadQueue.splice(0,1),t.options.replace){var s=i.world.getIndexOfItem(t.options.replaceItem);-1!==s&&(t.options.index=s),i.world.removeItem(t.options.replaceItem)}n=new e.TiledImage({viewer:i,source:t.tileSource,viewport:i.viewport,drawer:i.drawer,tileCache:i.tileCache,imageLoader:i.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,flipped:t.options.flipped,compositeOperation:t.options.compositeOperation,springStiffness:i.springStiffness,animationTime:i.animationTime,minZoomImageRatio:i.minZoomImageRatio,wrapHorizontal:i.wrapHorizontal,wrapVertical:i.wrapVertical,immediateRender:i.immediateRender,blendTime:i.blendTime,alwaysBlend:i.alwaysBlend,minPixelRatio:i.minPixelRatio,smoothTileEdgesMinZoom:i.smoothTileEdgesMinZoom,iOSDevice:i.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:i.debugMode,subPixelRoundingForTransparency:i.subPixelRoundingForTransparency}),i.collectionMode&&i.world.setAutoRefigureSizes(!1),i.navigator&&(r=e.extend({},t.options,{replace:!1,originalTiledImage:n,tileSource:t.tileSource}),i.navigator.addTiledImage(r)),i.world.addItem(n,{index:t.options.index}),0===i._loadQueue.length&&o(t),1!==i.world.getItemCount()||i.preserveViewport||i.viewport.goHome(!0),t.options.success&&t.options.success({item:n})}}e.isArray(t.tileSource)?setTimeout((function(){r({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})})):(this._loadQueue.push(n),function(t,i,n,r,o){var s=t;if("string"===e.type(i))if(i.match(/^\s*<.*>\s*$/))i=e.parseXml(i);else if(i.match(/^\s*[{[].*[}\]]\s*$/))try{var a=e.parseJSON(i);i=a}catch(e){}function l(e,t){e.ready?r(e):(e.addHandler("ready",(function(){r(e)})),e.addHandler("open-failed",(function(e){o({message:e.message,source:t})})))}setTimeout((function(){if("string"===e.type(i))(i=new e.TileSource({url:i,crossOriginPolicy:void 0!==n.crossOriginPolicy?n.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:n.ajaxHeaders?n.ajaxHeaders:t.ajaxHeaders,splitHashDataForPost:t.splitHashDataForPost,useCanvas:t.useCanvas,success:function(e){r(e.tileSource)}})).addHandler("open-failed",(function(e){o(e)}));else if(e.isPlainObject(i)||i.nodeType)if(void 0!==i.crossOriginPolicy||void 0===n.crossOriginPolicy&&void 0===t.crossOriginPolicy||(i.crossOriginPolicy=void 0!==n.crossOriginPolicy?n.crossOriginPolicy:t.crossOriginPolicy),void 0===i.ajaxWithCredentials&&(i.ajaxWithCredentials=t.ajaxWithCredentials),void 0===i.useCanvas&&(i.useCanvas=t.useCanvas),e.isFunction(i.getTileUrl)){var a=new e.TileSource(i);a.getTileUrl=i.getTileUrl,r(a)}else{var u=e.TileSource.determineType(s,i);if(!u)return void o({message:"Unable to load TileSource",source:i});var c=u.prototype.configure.apply(s,[i]);l(new u(c),i)}else l(i,i)}))}(this,t.tileSource,t,(function(e){n.tileSource=e,s()}),(function(e){e.options=t,r(e),s()})))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var i=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete i.url,this.addTiledImage(i)},addLayer:function(t){var i=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var n=e.extend({},t,{success:function(e){i.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){i.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(n),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,i){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,i)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return t[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=e.delegate(this,c),i=e.delegate(this,h),n=e.delegate(this,this.goToNextPage),r=e.delegate(this,this.goToPreviousPage),o=this.navImages,s=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(s=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:I(this.prefixUrl,o.previous.REST),srcGroup:I(this.prefixUrl,o.previous.GROUP),srcHover:I(this.prefixUrl,o.previous.HOVER),srcDown:I(this.prefixUrl,o.previous.DOWN),onRelease:r,onFocus:t,onBlur:i}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:I(this.prefixUrl,o.next.REST),srcGroup:I(this.prefixUrl,o.next.GROUP),srcHover:I(this.prefixUrl,o.next.HOVER),srcDown:I(this.prefixUrl,o.next.DOWN),onRelease:n,onFocus:t,onBlur:i}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),s&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,L),i=e.delegate(this,O),n=e.delegate(this,N),r=e.delegate(this,D),o=e.delegate(this,B),s=e.delegate(this,U),a=e.delegate(this,$),l=e.delegate(this,H),u=e.delegate(this,j),d=e.delegate(this,z),p=e.delegate(this,c),f=e.delegate(this,h),g=this.navImages,m=[],v=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(v=!1),this.showZoomControl&&(m.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:I(this.prefixUrl,g.zoomIn.REST),srcGroup:I(this.prefixUrl,g.zoomIn.GROUP),srcHover:I(this.prefixUrl,g.zoomIn.HOVER),srcDown:I(this.prefixUrl,g.zoomIn.DOWN),onPress:t,onRelease:i,onClick:n,onEnter:t,onExit:i,onFocus:p,onBlur:f})),m.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:I(this.prefixUrl,g.zoomOut.REST),srcGroup:I(this.prefixUrl,g.zoomOut.GROUP),srcHover:I(this.prefixUrl,g.zoomOut.HOVER),srcDown:I(this.prefixUrl,g.zoomOut.DOWN),onPress:r,onRelease:i,onClick:o,onEnter:r,onExit:i,onFocus:p,onBlur:f}))),this.showHomeControl&&m.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:I(this.prefixUrl,g.home.REST),srcGroup:I(this.prefixUrl,g.home.GROUP),srcHover:I(this.prefixUrl,g.home.HOVER),srcDown:I(this.prefixUrl,g.home.DOWN),onRelease:s,onFocus:p,onBlur:f})),this.showFullPageControl&&m.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:I(this.prefixUrl,g.fullpage.REST),srcGroup:I(this.prefixUrl,g.fullpage.GROUP),srcHover:I(this.prefixUrl,g.fullpage.HOVER),srcDown:I(this.prefixUrl,g.fullpage.DOWN),onRelease:a,onFocus:p,onBlur:f})),this.showRotationControl&&(m.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:I(this.prefixUrl,g.rotateleft.REST),srcGroup:I(this.prefixUrl,g.rotateleft.GROUP),srcHover:I(this.prefixUrl,g.rotateleft.HOVER),srcDown:I(this.prefixUrl,g.rotateleft.DOWN),onRelease:l,onFocus:p,onBlur:f})),m.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:I(this.prefixUrl,g.rotateright.REST),srcGroup:I(this.prefixUrl,g.rotateright.GROUP),srcHover:I(this.prefixUrl,g.rotateright.HOVER),srcDown:I(this.prefixUrl,g.rotateright.DOWN),onRelease:u,onFocus:p,onBlur:f}))),this.showFlipControl&&m.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:I(this.prefixUrl,g.flip.REST),srcGroup:I(this.prefixUrl,g.flip.GROUP),srcHover:I(this.prefixUrl,g.flip.HOVER),srcDown:I(this.prefixUrl,g.flip.DOWN),onRelease:d,onFocus:p,onBlur:f})),v?(this.buttonGroup=new e.ButtonGroup({buttons:m,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,F)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=m),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(t,i,n,s){var a;if(a=e.isPlainObject(t)?t:{element:t,location:i,placement:n,onDraw:s},t=e.getElement(a.element),o(this.currentOverlays,t)>=0)return this;var l=r(this,a);return this.currentOverlays.push(l),l.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:a.location,placement:a.placement}),this},updateOverlay:function(i,n,r){var s;return i=e.getElement(i),(s=o(this.currentOverlays,i))>=0&&(this.currentOverlays[s].update(n,r),t[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:i,location:n,placement:r})),this},removeOverlay:function(i){var n;return i=e.getElement(i),(n=o(this.currentOverlays,i))>=0&&(this.currentOverlays[n].destroy(),this.currentOverlays.splice(n,1),t[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:i})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return t[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var i;return t=e.getElement(t),(i=o(this.currentOverlays,t))>=0?this.currentOverlays[i]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var i=e.makeNeutralElement("div");i.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(i),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var t=e.pixelDensityRatio,i=e.getCurrentPixelDensityRatio();t!==i&&(e.pixelDensityRatio=i,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)},goToNextPage:function(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)},isAnimating:function(){return t[this.hash].animating}})}(a),function(e){function t(e){var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",t),!t.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var i=this.viewport.pointFromPixel(e.position);this.panVertical?this.panHorizontal||(i.x=this.viewer.viewport.getCenter(!0).x):i.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(i),this.viewer.viewport.applyConstraints()}}function i(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function n(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function r(e){var t={tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent,preventDefault:e.preventDefault};this.viewer.raiseEvent("navigator-scroll",t),e.preventDefault=t.preventDefault}function o(e,t){s(e,"rotate("+t+"deg)")}function s(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}e.Navigator=function(s){var a,l,u,c,h=s.viewer,d=this;function p(e){o(d.displayRegionContainer,e),o(d.displayRegion,-e),d.viewport.setRotation(e)}(s.id?(this.element=document.getElementById(s.id),s.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(s.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),s.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:s.autoFade},s.position&&("BOTTOM_RIGHT"===s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"===s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"===s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"===s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"===s.position&&(s.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,s.controlOptions.top=s.top,s.controlOptions.left=s.left,s.controlOptions.height=s.height,s.controlOptions.width=s.width))),this.element.id=s.id,this.element.className+=" navigator",(s=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},s,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:s.autoResize,minZoomImageRatio:1,background:s.background,opacity:s.opacity,borderColor:s.borderColor,displayRegionColor:s.displayRegionColor})).minPixelRatio=this.minPixelRatio=h.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),s.controlOptions.anchor!==e.ControlAnchor.NONE&&(u=this.element.style,c=this.borderWidth,u.margin="0px",u.border=c+"px solid "+s.borderColor,u.padding="0px",u.background=s.background,u.opacity=s.opacity,u.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid "+s.displayRegionColor,e.margin="0px",e.padding="0px",e.background="transparent",e.float="left",e.cssFloat="left",e.styleFloat="left",e.zIndex=999999999,e.cursor="default"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),h.addControl(this.element,s.controlOptions),this._resizeWithViewer=s.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&s.controlOptions.anchor!==e.ControlAnchor.NONE,s.width&&s.height?(this.setWidth(s.width),this.setHeight(s.height)):this._resizeWithViewer&&(a=e.getElementSize(h.element),this.element.style.height=Math.round(a.y*s.sizeRatio)+"px",this.element.style.width=Math.round(a.x*s.sizeRatio)+"px",this.oldViewerSize=a,l=e.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[s]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),s.navigatorRotate)&&(p(s.viewer.viewport?s.viewer.viewport.getRotation():s.viewer.degrees||0),s.viewer.addHandler("rotate",(function(e){p(e.degrees)})));this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,i),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,n),scrollHandler:e.delegate(this,r),preProcessEventHandler:function(e){"wheel"===e.eventType&&(e.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",(function(){d.viewport&&d.viewport.goHome(!0)})),h.world.addHandler("item-index-change",(function(e){window.setTimeout((function(){var t=d.world.getItemAt(e.previousIndex);d.world.setItemIndex(t,e.newIndex)}),1)})),h.world.addHandler("remove-item",(function(e){var t=e.item,i=d._getMatchingItem(t);i&&d.world.removeItem(i)})),this.update(h.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.drawer.clear(),this.world.draw())}},setWidth:function(e){this.width=e,this.element.style.width="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setHeight:function(e){this.height=e,this.element.style.height="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){s(this.displayRegion,e),s(this.canvas,e),s(this.element,e)},update:function(t){var i,n,r,o,s,a;if(i=e.getElementSize(this.viewer.element),this._resizeWithViewer&&i.x&&i.y&&!i.equals(this.oldViewerSize)&&(this.oldViewerSize=i,this.maintainSizeRatio||!this.elementArea?(n=i.x*this.sizeRatio,r=i.y*this.sizeRatio):(n=Math.sqrt(this.elementArea*(i.x/i.y)),r=this.elementArea/n),this.element.style.width=Math.round(n)+"px",this.element.style.height=Math.round(r)+"px",this.elementArea||(this.elementArea=n*r),this.updateSize()),t&&this.viewport){o=t.getBoundsNoRotate(!0),s=this.viewport.pixelFromPointNoRotate(o.getTopLeft(),!1),a=this.viewport.pixelFromPointNoRotate(o.getBottomRight(),!1).minus(this.totalBorderWidths);var l=this.displayRegion.style;l.display=this.world.getItemCount()?"block":"none",l.top=Math.round(s.y)+"px",l.left=Math.round(s.x)+"px";var u=Math.abs(s.x-a.x),c=Math.abs(s.y-a.y);l.width=Math.round(Math.max(u,0))+"px",l.height=Math.round(Math.max(c,0))+"px"}},addTiledImage:function(t){var i=this,n=t.originalTiledImage;delete t.original;var r=e.extend({},t,{success:function(e){var t=e.item;function r(){i._matchBounds(t,n)}t._originalForNavigator=n,i._matchBounds(t,n,!0),i._matchOpacity(t,n),i._matchCompositeOperation(t,n),n.addHandler("bounds-change",r),n.addHandler("clip-change",r),n.addHandler("opacity-change",(function(){i._matchOpacity(t,n)})),n.addHandler("composite-operation-change",(function(){i._matchCompositeOperation(t,n)}))}});return e.Viewer.prototype.addTiledImage.apply(this,[r])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(e){for(var t,i=this.world.getItemCount(),n=0;n<i;n++)if((t=this.world.getItemAt(n))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,i){var n=t.getBoundsNoRotate();e.setPosition(n.getTopLeft(),i),e.setWidth(n.width,i),e.setRotation(t.getRotation(),i),e.setClip(t.getClip()),e.setFlip(t.getFlip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(a),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(i){var n,r=i.split("."),o=null,s=arguments,a=t;for(n=0;n<r.length-1;n++)a=a[r[n]]||{};return"string"!=typeof(o=a[r[n]])&&(e.console.error("Untranslated source string:",i),o=""),o.replace(/\{\d+\}/g,(function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<s.length?s[t]:""}))},setString:function(e,i){var n,r=e.split("."),o=t;for(n=0;n<r.length-1;n++)o[r[n]]||(o[r[n]]={}),o=o[r[n]];o[r[n]]=i}})}(a),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,i){var n,r;if(i=i||new e.Point(0,0),t%90==0){switch(e.positiveModulo(t,360)){case 0:n=1,r=0;break;case 90:n=0,r=1;break;case 180:n=-1,r=0;break;case 270:n=0,r=-1}}else{var o=t*Math.PI/180;n=Math.cos(o),r=Math.sin(o)}var s=n*(this.x-i.x)-r*(this.y-i.y)+i.x,a=r*(this.x-i.x)+n*(this.y-i.y)+i.y;return new e.Point(s,a)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(a),function(e){e.TileSource=function(t,i,n,r,o,s){var a,l,u=this,c=arguments;if(a=e.isPlainObject(t)?t:{width:c[0],height:c[1],tileSize:c[2],tileOverlap:c[3],minLevel:c[4],maxLevel:c[5]},e.EventSource.call(this),e.extend(!0,this,a),!this.success)for(l=0;l<arguments.length;l++)if(e.isFunction(arguments[l])){this.success=arguments[l];break}this.success&&this.addHandler("ready",(function(e){u.success(e)})),"string"===e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new e.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},setMaxLevel:function(e){this.maxLevel=e,this._memoizeLevelScale()},getLevelScale:function(e){return this._memoizeLevelScale(),this.getLevelScale(e)},_memoizeLevelScale:function(){var e,t={};for(e=0;e<=this.maxLevel;e++)t[e]=1/Math.pow(2,this.maxLevel-e);this.getLevelScale=function(e){return t[e]}},getNumTiles:function(t){var i=this.getLevelScale(t),n=Math.ceil(i*this.dimensions.x/this.getTileWidth(t)),r=Math.ceil(i*this.dimensions.y/this.getTileHeight(t));return new e.Point(n,r)},getPixelRatio:function(t){var i=this.dimensions.times(this.getLevelScale(t)),n=1/i.x*e.pixelDensityRatio,r=1/i.y*e.pixelDensityRatio;return new e.Point(n,r)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!((t=this.getNumTiles(e)).x>1||t.y>1);e++);return e-1},getTileAtPoint:function(t,i){var n=i.x>=0&&i.x<=1&&i.y>=0&&i.y<=1/this.aspectRatio;e.console.assert(n,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.dimensions.x*this.getLevelScale(t),o=i.x*r,s=i.y*r,a=Math.floor(o/this.getTileWidth(t)),l=Math.floor(s/this.getTileHeight(t));i.x>=1&&(a=this.getNumTiles(t).x-1);return i.y>=1/this.aspectRatio-1e-15&&(l=this.getNumTiles(t).y-1),new e.Point(a,l)},getTileBounds:function(t,i,n,r){var o=this.dimensions.times(this.getLevelScale(t)),s=this.getTileWidth(t),a=this.getTileHeight(t),l=0===i?0:s*i-this.tileOverlap,u=0===n?0:a*n-this.tileOverlap,c=s+(0===i?1:2)*this.tileOverlap,h=a+(0===n?1:2)*this.tileOverlap,d=1/o.x;return c=Math.min(c,o.x-l),h=Math.min(h,o.y-u),r?new e.Rect(0,0,c,h):new e.Rect(l*d,u*d,c*d,h*d)},getImageInfo:function(t){var i,n,r,o,s,a,l,u=this;t&&(l=(a=(s=t.split("/"))[s.length-1]).lastIndexOf("."))>-1&&(s[s.length-1]=a.slice(0,l));var c=null;if(this.splitHashDataForPost){var h=t.indexOf("#");-1!==h&&(c=t.substring(h+1),t=t.substr(0,h))}n=function(i){"string"==typeof i&&(i=e.parseXml(i));var n=e.TileSource.determineType(u,i,t);n?(void 0===(o=n.prototype.configure.apply(u,[i,t,c])).ajaxWithCredentials&&(o.ajaxWithCredentials=u.ajaxWithCredentials),r=new n(o),u.ready=!0,u.raiseEvent("ready",{tileSource:r})):u.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(i=t.split("/").pop().replace(".js",""),e.jsonp({url:t,async:!1,callbackName:i,callback:n})):e.makeAjaxRequest({url:t,postData:c,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var i=function(t){var i,n,r=t.responseText,o=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw i=404===(o=t.status)?"Not Found":t.statusText,new Error(e.getString("Errors.Status",o,i));if(r.match(/\s*<.*/))try{n=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(r)}catch(e){n=t.responseText}else if(r.match(/\s*[{[].*/))try{n=e.parseJSON(r)}catch(e){n=r}else n=r;return n}(t);n(i)},error:function(i,n){var r;try{r="HTTP "+i.status+" attempting to load TileSource: "+t}catch(e){r=(void 0!==n&&n.toString?n.toString():"Unknown error")+" attempting to load TileSource: "+t}e.console.error(r),u.raiseEvent("open-failed",{message:r,source:t,postData:c})}})},supports:function(e,t){return!1},configure:function(e,t,i){throw new Error("Method not implemented.")},getTileUrl:function(e,t,i){throw new Error("Method not implemented.")},getTilePostData:function(e,t,i){return null},getTileAjaxHeaders:function(e,t,i){return{}},getTileHashKey:function(e,t,i,n,r,o){return r?n+"+"+JSON.stringify(r):n},tileExists:function(e,t,i){var n=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&i>=0&&t<n.x&&i<n.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(t,i,n){var r;for(r in a)if(r.match(/.+TileSource$/)&&e.isFunction(a[r])&&e.isFunction(a[r].prototype.supports)&&a[r].prototype.supports.call(t,i,n))return a[r];return e.console.error("No TileSource was able to open %s %s",n,i),null}}(a),function(e){function t(t,i){var n,r,o=i.Image,s=o.Url,a=o.Format,l=o.Size,u=o.DisplayRect||[],c=parseInt(l.Width,10),h=parseInt(l.Height,10),d=parseInt(o.TileSize,10),p=parseInt(o.Overlap,10),f=[];for(r=0;r<u.length;r++)n=u[r].Rect,f.push(new e.DisplayRect(parseInt(n.X,10),parseInt(n.Y,10),parseInt(n.Width,10),parseInt(n.Height,10),parseInt(n.MinLevel,10),parseInt(n.MaxLevel,10)));return e.extend(!0,{width:c,height:h,tileSize:d,tileOverlap:p,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:f},i)}e.DziTileSource=function(t,i,n,r,o,s,a,l,u){var c,h,d,p;if(p=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=p.tilesUrl,this.fileFormat=p.fileFormat,this.displayRects=p.displayRects,this.displayRects)for(c=this.displayRects.length-1;c>=0;c--)for(d=(h=this.displayRects[c]).minLevel;d<=h.maxLevel;d++)this._levelRects[d]||(this._levelRects[d]=[]),this._levelRects[d].push(h);e.TileSource.apply(this,[p])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var i;return e.Image?i=e.Image.xmlns:e.documentElement&&("Image"!==e.documentElement.localName&&"Image"!==e.documentElement.tagName||(i=e.documentElement.namespaceURI)),-1!==(i=(i||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==i.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(i,n,r){var o;return o=e.isPlainObject(i)?t(this,i):function(i,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s,a,l,u=n.documentElement,c=u.localName||u.tagName,h=n.documentElement.namespaceURI,d=null,p=[];if("Image"===c)try{if(void 0===(a=u.getElementsByTagName("Size")[0])&&(a=u.getElementsByTagNameNS(h,"Size")[0]),d={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:u.getAttribute("Url"),Format:u.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(u.getAttribute("Overlap"),10),TileSize:parseInt(u.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!e.imageFormatSupported(d.Image.Format))throw new Error(e.getString("Errors.ImageFormat",d.Image.Format.toUpperCase()));for(void 0===(r=u.getElementsByTagName("DisplayRect"))&&(r=u.getElementsByTagNameNS(h,"DisplayRect")[0]),l=0;l<r.length;l++)void 0===(s=(o=r[l]).getElementsByTagName("Rect")[0])&&(s=o.getElementsByTagNameNS(h,"Rect")[0]),p.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return p.length&&(d.Image.DisplayRect=p),t(i,d)}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.Dzi"))}else{if("Collection"===c)throw new Error(e.getString("Errors.Dzc"));if("Error"===c){var f=u.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(f)}}throw new Error(e.getString("Errors.Dzi"))}(this,i),n&&!o.tilesUrl&&(o.tilesUrl=n.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),-1!==n.search(/\.(dzi|xml|js)\?/)?o.queryParams=n.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(e,t,i){return[this.tilesUrl,e,"/",t,"_",i,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,i){var n,r,o,s,a,l,u,c=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!c||!c.length)return!0;for(u=c.length-1;u>=0;u--)if(!(e<(n=c[u]).minLevel||e>n.maxLevel)&&(r=this.getLevelScale(e),o=n.x*r,s=n.y*r,a=o+n.width*r,l=s+n.height*r,o=Math.floor(o/this._tileWidth),s=Math.floor(s/this._tileWidth),a=Math.ceil(a/this._tileWidth),l=Math.ceil(l/this._tileWidth),o<=t&&t<a&&s<=i&&i<l))return!0;return!1}})}(a),function(e){function t(e){var t=Array.isArray(e.profile)?e.profile[0]:e.profile,i=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(t),n=!1;return 2===e.version&&e.profile.length>1&&e.profile[1].supports&&(n=-1!==e.profile[1].supports.indexOf("sizeByW")),3===e.version&&e.extraFeatures&&(n=-1!==e.extraFeatures.indexOf("sizeByWh")),!i||n}function i(e){for(var t=[],i=0;i<e.sizes.length;i++)t.push({url:e["@id"]+"/full/"+e.sizes[i].width+","+(3===e.version?e.sizes[i].height:"")+"/0/default."+e.tileFormat,width:e.sizes[i].width,height:e.sizes[i].height});return t.sort((function(e,t){return e.width-t.width}))}function n(t,i,r){var o,s;if(3===t.nodeType&&r)(s=t.nodeValue.trim()).match(/^\d*$/)&&(s=Number(s)),i[r]?(e.isArray(i[r])||(i[r]=[i[r]]),i[r].push(s)):i[r]=s;else if(1===t.nodeType)for(o=0;o<t.childNodes.length;o++)n(t.childNodes[o],i,t.nodeName)}e.IIIFTileSource=function(n){if(e.extend(!0,this,n),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(n.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=n.version,this.tile_width&&this.tile_height)n.tileWidth=this.tile_width,n.tileHeight=this.tile_height;else if(this.tile_width)n.tileSize=this.tile_width;else if(this.tile_height)n.tileSize=this.tile_height;else if(this.tiles)if(1===this.tiles.length)n.tileWidth=this.tiles[0].width,n.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var r=0;r<this.tiles.length;r++)for(var o=0;o<this.tiles[r].scaleFactors.length;o++){var s=this.tiles[r].scaleFactors[o];this.scale_factors.push(s),n.tileSizePerScaleFactor[s]={width:this.tiles[r].width,height:this.tiles[r].height||this.tiles[r].width}}}else if(t(n)){for(var a=Math.min(this.height,this.width),l=[256,512,1024],u=[],c=0;c<l.length;c++)l[c]<=a&&u.push(l[c]);u.length>0?n.tileSize=Math.max.apply(null,u):n.tileSize=a}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,n.levels=i(this),e.extend(!0,n,{width:n.levels[n.levels.length-1].width,height:n.levels[n.levels.length-1].height,tileSize:Math.max(n.height,n.width),tileOverlap:0,minLevel:0,maxLevel:n.levels.length-1}),this.levels=n.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!n.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var h=Math.max.apply(null,this.scale_factors);n.maxLevel=Math.round(Math.log(h)*Math.LOG2E)}else n.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));e.TileSource.apply(this,[n])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return!(!e.protocol||"http://iiif.io/api/image"!==e.protocol)||(!(!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!==e["@context"]&&"http://iiif.io/api/image/1/context.json"!==e["@context"])||(!(!e.profile||0!==e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(e.identifier&&e.width&&e.height)||!(!e.documentElement||"info"!==e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!==e.documentElement.namespaceURI))))},configure:function(t,i,r){if(e.isPlainObject(t)){if(t["@context"]){var o=t["@context"];if(Array.isArray(o))for(var s=0;s<o.length;s++)if("string"==typeof o[s]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(o[s])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===o[s])){o=o[s];break}switch(o){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":t.version=1;break;case"http://iiif.io/api/image/2/context.json":t.version=2;break;case"http://iiif.io/api/image/3/context.json":t.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else t["@context"]="http://iiif.io/api/image/1.0/context.json",t["@id"]=i.replace("/info.json",""),t.version=1;if(!t["@id"]&&t.id&&(t["@id"]=t.id),t.preferredFormats)for(var l=0;l<t.preferredFormats.length;l++)if(a.imageFormatSupported(t.preferredFormats[l])){t.tileFormat=t.preferredFormats[l];break}return t}var u=function(t){if(!t||!t.documentElement)throw new Error(e.getString("Errors.Xml"));var i=t.documentElement,r=i.tagName,o=null;if("info"===r)try{return n(i,o={}),o}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(t);return u["@context"]="http://iiif.io/api/image/1.0/context.json",u["@id"]=i.replace("/info.xml",""),u.version=1,u},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var i=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[i]?this.tileSizePerScaleFactor[i].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var i=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[i]?this.tileSizePerScaleFactor[i].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var i=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(i=this.levels[t].width/this.levels[this.maxLevel].width),i}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){return this.emulateLegacyImagePyramid?this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0):e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,i){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,t,i)},getTileUrl:function(e,t,i){if(this.emulateLegacyImagePyramid){var n=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n}var r,o,s,a,l,u,c,h,d,p,f,g,m,v=Math.pow(.5,this.maxLevel-e),y=Math.ceil(this.width*v),b=Math.ceil(this.height*v);return r=this.getTileWidth(e),o=this.getTileHeight(e),s=Math.ceil(r/v),a=Math.ceil(o/v),m=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,y<r&&b<o?(p=2===this.version&&y===this.width?"full":3===this.version&&y===this.width&&b===this.height?"max":3===this.version?y+","+b:y+",",l="full"):(u=t*s,c=i*a,h=Math.min(s,this.width-u),d=Math.min(a,this.height-c),l=0===t&&0===i&&h===this.width&&d===this.height?"full":[u,c,h,d].join(","),f=Math.ceil(h*v),g=Math.ceil(d*v),p=2===this.version&&f===this.width?"full":3===this.version&&f===this.width&&g===this.height?"max":3===this.version?f+","+g:f+","),[this["@id"],l,p,"0",m].join("/")},__testonly__:{canBeTiled:t,constructLevels:i}})}(a),function(e){e.OsmTileSource=function(t,i,n,r,o){var s;(s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width&&s.height||(s.width=65572864,s.height=65572864),s.tileSize||(s.tileSize=256,s.tileOverlap=0),s.tilesUrl||(s.tilesUrl="http://tile.openstreetmap.org/"),s.minLevel=8,e.TileSource.apply(this,[s])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"===e.type},configure:function(e,t,i){return e},getTileUrl:function(e,t,i){return this.tilesUrl+(e-8)+"/"+t+"/"+i+".png"}})}(a),function(e){e.TmsTileSource=function(t,i,n,r,o){var s;s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a,l=256*Math.ceil(s.width/256),u=256*Math.ceil(s.height/256);a=l>u?l/256:u/256,s.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,s.tileSize=256,s.width=l,s.height=u,e.TileSource.apply(this,[s])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"===e.type},configure:function(e,t,i){return e},getTileUrl:function(e,t,i){var n=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(n-i)+".png"}})}(a),function(e){e.ZoomifyTileSource=function(e){void 0===e.tileSize&&(e.tileSize=256),void 0===e.fileFormat&&(e.fileFormat="jpg",this.fileFormat=e.fileFormat);var t={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(t.x,10)>e.tileSize||parseInt(t.y,10)>e.tileSize;)t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),e.imageSizes.push({x:t.x,y:t.y}),e.gridSize.push(this._getGridSize(t.x,t.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,a.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,i){return{x:Math.ceil(e/i),y:Math.ceil(t/i)}},_calculateAbsoluteTileNumber:function(e,t,i){for(var n=0,r={},o=0;o<e;o++)n+=(r=this.gridSize[o]).x*r.y;return n+=(r=this.gridSize[e]).x*i+t},supports:function(e,t){return e.type&&"zoomifytileservice"===e.type},configure:function(e,t,i){return e},getTileUrl:function(e,t,i){var n,r=this._calculateAbsoluteTileNumber(e,t,i);return n=Math.floor(r/256),this.tilesUrl+"TileGroup"+n+"/"+e+"-"+t+"-"+i+"."+this.fileFormat}})}(a),function(e){function t(e,t){return t.levels}e.LegacyTileSource=function(t){var i,n,r;e.isArray(t)&&(i={type:"legacy-image-pyramid",levels:t}),i.levels=function(t){var i,n,r=[];for(n=0;n<t.length;n++)(i=t[n]).height&&i.width&&i.url?r.push({url:i.url,width:Number(i.width),height:Number(i.height)}):e.console.error("Unsupported image format: %s",i.url?i.url:"<no URL>");return r.sort((function(e,t){return e.height-t.height}))}(i.levels),i.levels.length>0?(n=i.levels[i.levels.length-1].width,r=i.levels[i.levels.length-1].height):(n=0,r=0,e.console.error("No supported image formats found")),e.extend(!0,i,{width:n,height:r,tileSize:Math.max(r,n),tileOverlap:0,minLevel:0,maxLevel:i.levels.length>0?i.levels.length-1:0}),e.TileSource.apply(this,[i]),this.levels=i.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"===e.type||e.documentElement&&"legacy-image-pyramid"===e.documentElement.getAttribute("type")},configure:function(i,n,r){return e.isPlainObject(i)?t(this,i):function(i,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var r,o,s=n.documentElement,a=s.tagName,l=null,u=[];if("image"===a)try{for(l={type:s.getAttribute("type"),levels:[]},u=s.getElementsByTagName("level"),o=0;o<u.length;o++)r=u[o],l.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return t(i,l)}catch(e){throw e instanceof Error?e:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"===a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"===a)throw new Error("Error: "+n)}throw new Error("Unknown element "+a)}(this,i)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,i){var n=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n}})}(a),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t,i){return e},getImageInfo:function(t){var i=this._image=new Image,n=this;this.crossOriginPolicy&&(i.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(i.useCredentials=this.ajaxWithCredentials),e.addEvent(i,"load",(function(){n.width=i.naturalWidth,n.height=i.naturalHeight,n.aspectRatio=n.width/n.height,n.dimensions=new e.Point(n.width,n.height),n._tileWidth=n.width,n._tileHeight=n.height,n.tileOverlap=0,n.minLevel=0,n.levels=n._buildLevels(),n.maxLevel=n.levels.length-1,n.ready=!0,n.raiseEvent("ready",{tileSource:n})})),e.addEvent(i,"error",(function(){n.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})})),i.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,i){var n=null;return e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n},getContext2D:function(e,t,i){var n=null;return e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].context2D),n},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var t=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,t;var i=this._image.naturalWidth,n=this._image.naturalHeight,r=document.createElement("canvas"),o=r.getContext("2d");if(r.width=i,r.height=n,o.drawImage(this._image,0,0,i,n),t[0].context2D=o,delete this._image,e.isCanvasTainted(r))return t;for(;i>=2&&n>=2;){i=Math.floor(i/2),n=Math.floor(n/2);var s=document.createElement("canvas"),a=s.getContext("2d");s.width=i,s.height=n,a.drawImage(r,0,0,i,n),t.splice(0,0,{context2D:a,width:i,height:n}),r=s,o=a}return t},_freeupCanvasMemory:function(){for(var e=0;e<this.levels.length;e++)this.levels[e].context2D&&(this.levels[e].context2D.canvas.height=0,this.levels[e].context2D.canvas.width=0)}})}(a),function(e){e.TileSourceCollection=function(t,i,n,r){e.console.error("TileSourceCollection is deprecated; use World instead")}}(a),function(e){function t(i){e.requestAnimationFrame((function(){!function(i){var n;i.shouldFade&&(n=1-(e.now()-i.fadeBeginTime)/i.fadeLength,n=Math.min(1,n),n=Math.max(0,n),i.imgGroup&&e.setElementOpacity(i.imgGroup,n,!0),n>0&&t(i))}(i)}))}function i(t,i){t.element.disabled||(i>=e.ButtonState.GROUP&&t.currentState===e.ButtonState.REST&&(!function(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}(t),t.currentState=e.ButtonState.GROUP),i>=e.ButtonState.HOVER&&t.currentState===e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),i>=e.ButtonState.DOWN&&t.currentState===e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function n(i,n){i.element.disabled||(n<=e.ButtonState.HOVER&&i.currentState===e.ButtonState.DOWN&&(i.imgDown&&(i.imgDown.style.visibility="hidden"),i.currentState=e.ButtonState.HOVER),n<=e.ButtonState.GROUP&&i.currentState===e.ButtonState.HOVER&&(i.imgHover&&(i.imgHover.style.visibility="hidden"),i.currentState=e.ButtonState.GROUP),n<=e.ButtonState.REST&&i.currentState===e.ButtonState.GROUP&&(!function(i){i.shouldFade=!0,i.fadeBeginTime=e.now()+i.fadeDelay,window.setTimeout((function(){t(i)}),i.fadeDelay)}(i),i.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var r=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor===e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(i(r,e.ButtonState.DOWN),r.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||i(r,e.ButtonState.HOVER)},focusHandler:function(e){r.tracker.enterHandler(e),r.raiseEvent("focus",{originalEvent:e.originalEvent})},leaveHandler:function(t){n(r,e.ButtonState.GROUP),t.insideElementPressed&&r.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){r.tracker.leaveHandler(e),r.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){i(r,e.ButtonState.DOWN),r.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(n(r,e.ButtonState.HOVER),r.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?n(r,e.ButtonState.GROUP):i(r,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&r.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){13===e.keyCode?(r.raiseEvent("click",{originalEvent:e.originalEvent}),r.raiseEvent("release",{originalEvent:e.originalEvent}),e.preventDefault=!0):e.preventDefault=!1}}),n(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){i(this,e.ButtonState.GROUP)},notifyGroupExit:function(){n(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}})}(a),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var i,n=this.buttons.concat([]),r=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.element.style.display="inline-block",i=0;i<n.length;i++)this.element.appendChild(n[i].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupEnter()},leaveHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var e=this.buttons.pop();this.element.removeChild(e.element),e.destroy()}this.tracker.destroy(),this.element=null}}}(a),function(e){e.Rect=function(t,i,n,r,o){var s,a;this.x="number"==typeof t?t:0,this.y="number"==typeof i?i:0,this.width="number"==typeof n?n:0,this.height="number"==typeof r?r:0,this.degrees="number"==typeof o?o:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(s=this.getTopRight(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(s=this.getBottomRight(),this.x=s.x,this.y=s.y,this.degrees-=180):this.degrees>=90&&(s=this.getBottomLeft(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},e.Rect.fromSummits=function(t,i,n){var r=t.distanceTo(i),o=t.distanceTo(n),s=i.minus(t),a=Math.atan(s.y/s.x);return s.x<0?a+=Math.PI:s.y<0&&(a+=2*Math.PI),new e.Rect(t.x,t.y,r,o,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var i=this.getBoundingBox(),n=t.getBoundingBox(),r=Math.min(i.x,n.x),o=Math.min(i.y,n.y),s=Math.max(i.x+i.width,n.x+n.width),a=Math.max(i.y+i.height,n.y+n.height);return new e.Rect(r,o,s-r,a-o)},intersection:function(t){var i=1e-10,n=[],r=this.getTopLeft();t.containsPoint(r,i)&&n.push(r);var o=this.getTopRight();t.containsPoint(o,i)&&n.push(o);var s=this.getBottomLeft();t.containsPoint(s,i)&&n.push(s);var a=this.getBottomRight();t.containsPoint(a,i)&&n.push(a);var l=t.getTopLeft();this.containsPoint(l,i)&&n.push(l);var u=t.getTopRight();this.containsPoint(u,i)&&n.push(u);var c=t.getBottomLeft();this.containsPoint(c,i)&&n.push(c);var h=t.getBottomRight();this.containsPoint(h,i)&&n.push(h);for(var d=this._getSegments(),p=t._getSegments(),f=0;f<d.length;f++)for(var g=d[f],m=0;m<p.length;m++){var v=p[m],y=b(g[0],g[1],v[0],v[1]);y&&n.push(y)}function b(t,n,r,o){var s=n.minus(t),a=o.minus(r),l=-a.x*s.y+s.x*a.y;if(0===l)return null;var u=(s.x*(t.y-r.y)-s.y*(t.x-r.x))/l,c=(a.x*(t.y-r.y)-a.y*(t.x-r.x))/l;return-1e-10<=u&&u<=1-i&&-1e-10<=c&&c<=1-i?new e.Point(t.x+c*s.x,t.y+c*s.y):null}if(0===n.length)return null;for(var _=n[0].x,w=n[0].x,T=n[0].y,S=n[0].y,E=1;E<n.length;E++){var x=n[E];x.x<_&&(_=x.x),x.x>w&&(w=x.x),x.y<T&&(T=x.y),x.y>S&&(S=x.y)}return new e.Rect(_,T,w-_,S-T)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),i=this.getBottomLeft(),n=this.getBottomRight();return[[e,t],[t,n],[n,i],[i,e]]},rotate:function(t,i){if(0===(t=e.positiveModulo(t,360)))return this.clone();i=i||this.getCenter();var n=this.getTopLeft().rotate(t,i),r=this.getTopRight().rotate(t,i).minus(n);r=r.apply((function(e){return Math.abs(e)<1e-15?0:e}));var o=Math.atan(r.y/r.x);return r.x<0?o+=Math.PI:r.y<0&&(o+=2*Math.PI),new e.Rect(n.x,n.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),i=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight(),o=Math.min(t.x,i.x,n.x,r.x),s=Math.max(t.x,i.x,n.x,r.x),a=Math.min(t.y,i.y,n.y,r.y),l=Math.max(t.y,i.y,n.y,r.y);return new e.Rect(o,a,s-o,l-a)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),i=Math.floor(t.x),n=Math.floor(t.y),r=Math.ceil(t.width+t.x-i),o=Math.ceil(t.height+t.y-n);return new e.Rect(i,n,r,o)},containsPoint:function(e,t){t=t||0;var i=this.getTopLeft(),n=this.getTopRight(),r=this.getBottomLeft(),o=n.minus(i),s=r.minus(i);return(e.x-i.x)*o.x+(e.y-i.y)*o.y>=-t&&(e.x-n.x)*o.x+(e.y-n.y)*o.y<=t&&(e.x-i.x)*s.x+(e.y-i.y)*s.y>=-t&&(e.x-r.x)*s.x+(e.y-r.y)*s.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(a),function(e){var t={};function i(e){var t;e.quick&&(t="horizontal"===this.scroll?Math.floor(e.position.x/this.panelWidth):Math.floor(e.position.y/this.panelHeight),this.viewer.goToPage(t));this.element.focus()}function n(t){if(this.dragging=!0,this.element){var i=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?-t.delta.x>0?i>-(r-a.x)&&(this.element.style.marginLeft=i+2*t.delta.x+"px",o(this,a.x,i+2*t.delta.x)):-t.delta.x<0&&i<0&&(this.element.style.marginLeft=i+2*t.delta.x+"px",o(this,a.x,i+2*t.delta.x)):-t.delta.y>0?n>-(s-a.y)&&(this.element.style.marginTop=n+2*t.delta.y+"px",o(this,a.y,n+2*t.delta.y)):-t.delta.y<0&&n<0&&(this.element.style.marginTop=n+2*t.delta.y+"px",o(this,a.y,n+2*t.delta.y))}}function r(t){if(this.element){var i=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?t.scroll>0?i>-(r-a.x)&&(this.element.style.marginLeft=i-60*t.scroll+"px",o(this,a.x,i-60*t.scroll)):t.scroll<0&&i<0&&(this.element.style.marginLeft=i-60*t.scroll+"px",o(this,a.x,i-60*t.scroll)):t.scroll<0?n>a.y-s&&(this.element.style.marginTop=n+60*t.scroll+"px",o(this,a.y,n+60*t.scroll)):t.scroll>0&&n<0&&(this.element.style.marginTop=n+60*t.scroll+"px",o(this,a.y,n+60*t.scroll)),t.preventDefault=!0}}function o(t,i,n){var r,o,s,a,l,u;for(r="horizontal"===t.scroll?t.panelWidth:t.panelHeight,o=Math.ceil(i/r)+5,l=o=(o=(s=Math.ceil((Math.abs(n)+i)/r)+1)-o)<0?0:o;l<s&&l<t.panels.length;l++)if(!(u=t.panels[l]).activePanel){var c,h=t.viewer.tileSources[l];c=h.referenceStripThumbnailUrl?{type:"image",url:h.referenceStripThumbnailUrl}:h,a=new e.Viewer({id:u.id,tileSources:[c],element:u,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:t.viewer.loadTilesWithAjax,ajaxHeaders:t.viewer.ajaxHeaders,useCanvas:t.useCanvas}),e.setElementPointerEventsNone(a.canvas),e.setElementPointerEventsNone(a.container),a.innerTracker.setTracking(!1),a.outerTracker.setTracking(!1),t.miniViewers[u.id]=a,u.activePanel=!0}}function s(e){var t=e.eventSource.element;"horizontal"===this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px"}function a(t){var i=t.eventSource.element;"horizontal"===this.scroll?i.style.marginBottom="-"+e.getElementSize(i).y/2+"px":i.style.marginLeft="-"+e.getElementSize(i).x/2+"px"}function l(e){if(e.ctrl||e.alt||e.meta)e.preventDefault=!1;else switch(e.keyCode){case 38:case 39:r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 40:case 37:r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1}}function u(e){if(e.ctrl||e.alt||e.meta)e.preventDefault=!1;else switch(e.keyCode){case 61:case 48:case 119:case 87:case 100:r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),e.preventDefault=!0;break;case 45:case 115:case 83:case 97:r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),e.preventDefault=!0;break;default:e.preventDefault=!1}}e.ReferenceStrip=function(c){var h,d,p,f=c.viewer,g=e.getElementSize(f.element);for(c.id||(c.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=c.id,this.element.className="referencestrip"),c=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},c,{element:this.element}),e.extend(this,c),t[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,(d=this.element.style).marginTop="0px",d.marginRight="0px",d.marginBottom="0px",d.marginLeft="0px",d.left="0px",d.bottom="0px",d.border="0px",d.background="#000",d.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=f,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,i),dragHandler:e.delegate(this,n),scrollHandler:e.delegate(this,r),enterHandler:e.delegate(this,s),leaveHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,l),keyHandler:e.delegate(this,u),preProcessEventHandler:function(e){"wheel"===e.eventType&&(e.preventDefault=!0)}}),c.width&&c.height?(this.element.style.width=c.width+"px",this.element.style.height=c.height+"px",f.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"===c.scroll?(this.element.style.width=g.x*c.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.height=g.y*c.sizeRatio+"px",f.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=g.y*c.sizeRatio*f.tileSources.length+12*f.tileSources.length+"px",this.element.style.width=g.x*c.sizeRatio+"px",f.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=g.x*this.sizeRatio+8,this.panelHeight=g.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},p=0;p<f.tileSources.length;p++)(h=e.makeNeutralElement("div")).id=this.element.id+"-"+p,h.style.width=this.panelWidth+"px",h.style.height=this.panelHeight+"px",h.style.display="inline",h.style.float="left",h.style.cssFloat="left",h.style.styleFloat="left",h.style.padding="2px",e.setElementTouchActionNone(h),e.setElementPointerEventsNone(h),this.element.appendChild(h),h.activePanel=!1,this.panels.push(h);o(this,"vertical"===this.scroll?g.y:g.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(t){var i,n=this.element.querySelector("#"+this.element.id+"-"+t),r=e.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==n&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=n,this.currentSelected.style.background="#999","horizontal"===this.scroll?(i=Number(t)*(this.panelWidth+3))>u+r.x-this.panelWidth?(i=Math.min(i,a-r.x),this.element.style.marginLeft=-i+"px",o(this,r.x,-i)):i<u&&(i=Math.max(0,i-r.x/2),this.element.style.marginLeft=-i+"px",o(this,r.x,-i)):(i=Number(t)*(this.panelHeight+3))>c+r.y-this.panelHeight?(i=Math.min(i,l-r.y),this.element.style.marginTop=-i+"px",o(this,r.y,-i)):i<c&&(i=Math.max(0,i-r.y/2),this.element.style.marginTop=-i+"px",o(this,r.y,-i)),this.currentPage=t,s.call(this,{eventSource:this.tracker}))},update:function(){return!!t[this.id].animating},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}}}(a),function(e){e.DisplayRect=function(t,i,n,r,o,s){e.Rect.apply(this,[t,i,n,r]),this.minLevel=o,this.maxLevel=s},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(a),function(e){e.Spring=function(t){var i=arguments;"object"!=typeof t&&(t={initial:i.length&&"number"==typeof i[0]?i[0]:void 0,springStiffness:i.length>1?i[1].springStiffness:5,animationTime:i.length>1?i[1].animationTime:1.5}),e.console.assert("number"==typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var t,i;this.current.time=e.now(),this._exponential?(t=this.start._logValue,i=this.target._logValue):(t=this.start.value,i=this.target.value);var n,r,o=this.current.time>=this.target.time?i:t+(i-t)*(n=this.springStiffness,r=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(n*-r))/(1-Math.exp(-n))),s=this.current.value;return this._exponential?this.current.value=Math.exp(o):this.current.value=o,s!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(a),function(e){function t(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},t),this.image=null}t.prototype={errorMsg:null,start:function(){var t=this,i=this.abort;this.image=new Image,this.image.onload=function(){t.finish(!0)},this.image.onabort=this.image.onerror=function(){t.errorMsg="Image load aborted",t.finish(!1)},this.jobId=window.setTimeout((function(){t.errorMsg="Image load exceeded timeout ("+t.timeout+" ms)",t.finish(!1)}),this.timeout),this.loadWithAjax?(this.request=e.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",postData:this.postData,success:function(e){var i;try{i=new window.Blob([e.response])}catch(t){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===t.name&&n){var r=new n;r.append(e.response),i=r.getBlob()}}0===i.size&&(t.errorMsg="Empty image response.",t.finish(!1));var o=(window.URL||window.webkitURL).createObjectURL(i);t.image.src=o},error:function(e){t.errorMsg="Image load aborted - XHR error: Ajax returned "+e.status,t.finish(!1)}}),this.abort=function(){t.request.abort(),"function"==typeof i&&i()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(e){var i=this,n=new t({src:e.src,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.loadWithAjax?e.ajaxHeaders:null,crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,postData:e.postData,callback:function(t){!function(e,t,i){e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&(e.jobQueue.shift().start(),e.jobsInProgress++);i(t.image,t.errorMsg,t.request)}(i,t,e.callback)},abort:e.abort,timeout:this.timeout});!this.jobLimit||this.jobsInProgress<this.jobLimit?(n.start(),this.jobsInProgress++):this.jobQueue.push(n)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(a),function(e){e.Tile=function(t,i,n,r,o,s,a,l,u,c,h,d){this.level=t,this.x=i,this.y=n,this.bounds=r,this.sourceBounds=c,this.exists=o,this.url=s,this.postData=h,this.context2D=a,this.loadWithAjax=l,this.ajaxHeaders=u,void 0===d&&(e.console.error("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),d=e.TileSource.prototype.getTileHashKey(t,i,n,s,u,h)),this.cacheKey=d,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(t){this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!==t&&t.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),e.setElementOpacity(this.element,this.opacity)):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(t,i,n,r,o){var s,a,l,u=this.position.times(e.pixelDensityRatio),c=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(s=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&s?(t.save(),t.globalAlpha=this.opacity,"number"==typeof n&&1!==n&&(u=u.times(n),c=c.times(n)),r instanceof e.Point&&(u=u.plus(r)),1===t.globalAlpha&&this._hasTransparencyChannel()&&(o&&(u.x=Math.round(u.x),u.y=Math.round(u.y),c.x=Math.round(c.x),c.y=Math.round(c.y)),t.clearRect(u.x,u.y,c.x,c.y)),i({context:t,tile:this,rendered:s}),this.sourceBounds?(a=Math.min(this.sourceBounds.width,s.canvas.width),l=Math.min(this.sourceBounds.height,s.canvas.height)):(a=s.canvas.width,l=s.canvas.height),t.translate(u.x+c.x/2,0),this.flipped&&t.scale(-1,1),t.drawImage(s.canvas,0,0,a,l,-c.x/2,u.y,c.x,c.y),t.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,i,n){var r=Math.max(1,Math.ceil((n.x-i.x)/2)),o=Math.max(1,Math.ceil((n.y-i.y)/2));return new e.Point(r,o).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply((function(e){return e%1})))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(a),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,i,n){var r;r=e.isPlainObject(t)?t:{element:t,location:i,placement:n},this.element=r.element,this.style=r.element.style,this._init(r)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,i){var n=e.Placement.properties[this.placement];n&&(n.isHorizontallyCentered?t.x-=i.x/2:n.isRight&&(t.x-=i.x),n.isVerticallyCentered?t.y-=i.y/2:n.isBottom&&(t.y-=i.y))},destroy:function(){var t=this.element,i=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(i.display="none",document.body.appendChild(t))),this.onDraw=null,i.top="",i.left="",i.position="",null!==this.width&&(i.width=""),null!==this.height&&(i.height="");var n=e.getCssPropertyWithVendorPrefix("transformOrigin"),r=e.getCssPropertyWithVendorPrefix("transform");n&&r&&(i[n]="",i[r]="")},drawHTML:function(t,i){var n=this.element;n.parentNode!==t&&(n.prevElementParent=n.parentNode,n.prevNextSibling=n.nextSibling,t.appendChild(n),this.style.position="absolute",this.size=e.getElementSize(n));var r=this._getOverlayPositionAndSize(i),o=r.position,s=this.size=r.size,a=r.rotate;if(this.onDraw)this.onDraw(o,s,this.element);else{var l=this.style;l.left=o.x+"px",l.top=o.y+"px",null!==this.width&&(l.width=s.x+"px"),null!==this.height&&(l.height=s.y+"px");var u=e.getCssPropertyWithVendorPrefix("transformOrigin"),c=e.getCssPropertyWithVendorPrefix("transform");u&&c&&(a?(l[u]=this._getTransformOrigin(),l[c]="rotate("+a+"deg)"):(l[u]="",l[c]="")),l.display="block"}},_getOverlayPositionAndSize:function(t){var i=t.pixelFromPoint(this.location,!0),n=this._getSizeInPixels(t);this.adjust(i,n);var r=0;if(t.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var o=new e.Rect(i.x,i.y,n.x,n.y),s=this._getBoundingBox(o,t.degrees);i=s.getTopLeft(),n=s.getSize()}else r=t.degrees;return{position:i,size:n,rotate:r}},_getSizeInPixels:function(t){var i=this.size.x,n=this.size.y;if(null!==this.width||null!==this.height){var r=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(i=r.x),null!==this.height&&(n=r.y)}if(this.checkResize&&(null===this.width||null===this.height)){var o=this.size=e.getElementSize(this.element);null===this.width&&(i=o.x),null===this.height&&(n=o.y)}return new e.Point(i,n)},_getBoundingBox:function(e,t){var i=this._getPlacementPoint(e);return e.rotate(t,i).getBoundingBox()},_getPlacementPoint:function(t){var i=new e.Point(t.x,t.y),n=e.Placement.properties[this.placement];return n&&(n.isHorizontallyCentered?i.x+=t.width/2:n.isRight&&(i.x+=t.width),n.isVerticallyCentered?i.y+=t.height/2:n.isBottom&&(i.y+=t.height)),i},_getTransformOrigin:function(){var t="",i=e.Placement.properties[this.placement];return i?(i.isLeft?t="left":i.isRight&&(t="right"),i.isTop?t+=" top":i.isBottom&&(t+=" bottom"),t):t},update:function(t,i){var n=e.isPlainObject(t)?t:{location:t,placement:i};this._init({location:n.location||this.location,placement:void 0!==n.placement?n.placement:this.placement,onDraw:n.onDraw||this.onDraw,checkResize:n.checkResize||this.checkResize,width:void 0!==n.width?n.width:this.width,height:void 0!==n.height?n.height:this.height,rotationMode:n.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var i=this.width,n=this.height;if(null===i||null===n){var r=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===i&&(i=r.x),null===n&&(n=r.y)}var o=this.location.clone();return this.adjust(o,new e.Point(i,n)),this._adjustBoundsForRotation(t,new e.Rect(o.x,o.y,i,n))},_adjustBoundsForRotation:function(t,i){if(!t||0===t.degrees||this.rotationMode===e.OverlayRotationMode.EXACT)return i;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return i;var n=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(n.position.x,n.position.y,n.size.x,n.size.y))}return i.rotate(-t.degrees,this._getPlacementPoint(i))}}}(a),function(e){e.Drawer=function(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required");var i=arguments;if(e.isPlainObject(t)||(t={source:i[0],viewport:i[1],element:i[2]}),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),t.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"==typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,t.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(t.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var n=this._calculateCanvasSize();this.canvas.width=n.x,this.canvas.height=n.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(t,i,n,r){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,i,n,r),this},updateOverlay:function(t,i,n){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,i,n),this},removeOverlay:function(t){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(t){var i=this.viewport.pixelFromPointNoRotate(t,!0);return new e.Point(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio)},clipWithPolygons:function(e,t){if(this.useCanvas){var i=this._getContext(t);i.beginPath(),e.forEach((function(e){e.forEach((function(e,t){i[0===t?"moveTo":"lineTo"](e.x,e.y)}))})),i.clip()}},setOpacity:function(t){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var i=this.viewer.world,n=0;n<i.getItemCount();n++)i.getItemAt(n).setOpacity(t);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,i=0,n=0;n<t.getItemCount();n++){var r=t.getItemAt(n).getOpacity();r>i&&(i=r)}return i},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!==e.x||this.canvas.height!==e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(e,t){if(this.useCanvas){var i=this._getContext(e);if(t)i.clearRect(t.x,t.y,t.width,t.height);else{var n=i.canvas;i.clearRect(0,0,n.width,n.height)}}},viewportToDrawerRectangle:function(t){var i=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),n=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio,n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)},drawTile:function(t,i,n,r,o,s){if(e.console.assert(t,"[Drawer.drawTile] tile is required"),e.console.assert(i,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var a=this._getContext(n);r=r||1,t.drawCanvas(a,i,r,o,s)}else t.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var i=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=i.x,this.sketchCanvas.height=i.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var n=this;this.viewer.addHandler("rotate",(function e(){if(0!==n.viewport.getRotation()){n.viewer.removeHandler("rotate",e);var t=n._calculateSketchCanvasSize();n.sketchCanvas.width=t.x,n.sketchCanvas.height=t.y}}))}this._updateImageSmoothingEnabled(this.sketchContext)}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var i=this._getContext(t);i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()}},drawRectangle:function(e,t,i){if(this.useCanvas){var n=this._getContext(i);n.save(),n.fillStyle=t,n.fillRect(e.x,e.y,e.width,e.height),n.restore()}},blendSketch:function(t,i,n,r){var o=t;if(e.isPlainObject(o)||(o={opacity:t,scale:i,translate:n,compositeOperation:r}),this.useCanvas&&this.sketchCanvas){t=o.opacity,r=o.compositeOperation;var s=o.bounds;if(this.context.save(),this.context.globalAlpha=t,r&&(this.context.globalCompositeOperation=r),s)s.x<0&&(s.width+=s.x,s.x=0),s.x+s.width>this.canvas.width&&(s.width=this.canvas.width-s.x),s.y<0&&(s.height+=s.y,s.y=0),s.y+s.height>this.canvas.height&&(s.height=this.canvas.height-s.y),this.context.drawImage(this.sketchCanvas,s.x,s.y,s.width,s.height,s.x,s.y,s.width,s.height);else{i=o.scale||1;var a=(n=o.translate)instanceof e.Point?n:new e.Point(0,0),l=0,u=0;if(n){var c=this.sketchCanvas.width-this.canvas.width,h=this.sketchCanvas.height-this.canvas.height;l=Math.round(c/2),u=Math.round(h/2)}this.context.drawImage(this.sketchCanvas,a.x-l*i,a.y-u*i,(this.canvas.width+2*l)*i,(this.canvas.height+2*u)*i,-l,-u,this.canvas.width+2*l,this.canvas.height+2*u)}this.context.restore()}},drawDebugInfo:function(t,i,n,r){if(this.useCanvas){var o=this.viewer.world.getIndexOfItem(r)%this.debugGridColor.length,s=this.context;s.save(),s.lineWidth=2*e.pixelDensityRatio,s.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",s.strokeStyle=this.debugGridColor[o],s.fillStyle=this.debugGridColor[o],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),r.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:r.getRotation(!0),point:r.viewport.pixelFromPointNoRotate(r._getRotationPoint(!0),!0)}),0===r.viewport.degrees&&r.getRotation(!0)%360==0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),s.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var a=(t.position.x+t.size.x/2)*e.pixelDensityRatio,l=(t.position.y+t.size.y/2)*e.pixelDensityRatio;s.translate(a,l),s.rotate(Math.PI/180*-this.viewport.degrees),s.translate(-a,-l),0===t.x&&0===t.y&&(s.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),s.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),s.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),s.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),s.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),s.fillText("Order: "+n+" of "+i,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),s.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),s.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),r.getRotation(!0)%360!=0&&this._restoreRotationChanges(),0===r.viewport.degrees&&r.getRotation(!0)%360==0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),s.restore()}},debugRect:function(t){if(this.useCanvas){var i=this.context;i.save(),i.lineWidth=2*e.pixelDensityRatio,i.strokeStyle=this.debugGridColor[0],i.fillStyle=this.debugGridColor[0],i.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),i.restore()}},setImageSmoothingEnabled:function(e){this.useCanvas&&(this._imageSmoothingEnabled=e,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(e){e.msImageSmoothingEnabled=this._imageSmoothingEnabled,e.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(t){var i=this._getContext(t).canvas;return new e.Point(i.width,i.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(t){var i=t.point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),n=this._getContext(t.useSketch);n.save(),n.translate(i.x,i.y),this.viewer.viewport.flipped?(n.rotate(Math.PI/180*-t.degrees),n.scale(-1,1)):n.rotate(Math.PI/180*t.degrees),n.translate(-i.x,-i.y)},_flip:function(t){var i=(t=t||{}).point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),n=this._getContext(t.useSketch);n.translate(i.x,0),n.scale(-1,1),n.translate(-i.x,0)},_restoreRotationChanges:function(e){this._getContext(e).restore()},_calculateCanvasSize:function(){var t=e.pixelDensityRatio,i=this.viewport.getContainerSize();return{x:Math.round(i.x*t),y:Math.round(i.y*t)}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}}(a),function(e){e.Viewport=function(t){var i=arguments;i.length&&i[0]instanceof e.Point&&(t={containerSize:i[0],contentSize:i[1],config:i[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,i){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,i)},_setContentBounds:function(t,i){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(i),this._contentBounds=t.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(i),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:i,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?e>=1?e:1:e>=1?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),i=1/this.getHomeZoom(),n=i/this.getAspectRatio();return new e.Rect(t.x-i/2,t.y-n/2,i,n)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation())},getBoundsNoRotate:function(t){var i=this.getCenter(t),n=1/this.getZoom(t),r=n/this.getAspectRatio();return new e.Rect(i.x-n/2,i.y-r/2,n,r)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),i=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/i,t.y-=this._margins.top/i,t.width+=(this._margins.left+this._margins.right)/i,t.height+=(this._margins.top+this._margins.bottom)/i,t},getCenter:function(t){var i,n,r,o,s,a,l=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),u=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?l:this.zoomPoint?(i=this.pixelFromPoint(this.zoomPoint,!0),o=(r=1/(n=this.getZoom()))/this.getAspectRatio(),s=new e.Rect(l.x-r/2,l.y-o/2,r,o),a=this._pixelFromPoint(this.zoomPoint,s).minus(i).divide(this._containerInnerSize.x*n),u.plus(a)):u},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(t){var i=new e.Rect(t.x,t.y,t.width,t.height);if(this.wrapHorizontal);else{var n=this.visibilityRatio*i.width,r=i.x+i.width,o=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,s=this._contentBoundsNoRotate.x-r+n,a=o-i.x-n;n>this._contentBoundsNoRotate.width?i.x+=(s+a)/2:a<0?i.x+=a:s>0&&(i.x+=s)}if(this.wrapVertical);else{var l=this.visibilityRatio*i.height,u=i.y+i.height,c=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,h=this._contentBoundsNoRotate.y-u+l,d=c-i.y-l;l>this._contentBoundsNoRotate.height?i.y+=(h+d)/2:d<0?i.y+=d:h>0&&(i.y+=h)}return i},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),i=this._applyZoomConstraints(t);t!==i&&this.zoomTo(i,this.zoomPoint,e);var n=this.getBoundsNoRotate(),r=this._applyBoundaryConstraints(n);return this._raiseConstraintsEvent(e),(n.x!==r.x||n.y!==r.y||e)&&this.fitBounds(r.rotate(-this.getRotation()),e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,i){var n=(i=i||{}).immediately||!1,r=i.constraints||!1,o=this.getAspectRatio(),s=t.getCenter(),a=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=o?a.height=a.width/o:a.width=a.height*o,a.x=s.x-a.width/2,a.y=s.y-a.height/2;var l=1/a.width;if(r){var u=a.getAspectRatio(),c=this._applyZoomConstraints(l);l!==c&&(l=c,a.width=1/l,a.x=s.x-a.width/2,a.height=a.width/u,a.y=s.y-a.height/2),s=(a=this._applyBoundaryConstraints(a)).getCenter(),this._raiseConstraintsEvent(n)}if(n)return this.panTo(s,!0),this.zoomTo(l,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var h=this.getBounds(),d=this.getZoom();if(0===d||Math.abs(l/d-1)<1e-8)return this.zoomTo(l,!0),this.panTo(s,n);var p=(a=a.rotate(-this.getRotation())).getTopLeft().times(l).minus(h.getTopLeft().times(d)).divide(l-d);return this.zoomTo(l,p,n)},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var i=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(i,t)},fitHorizontally:function(t){var i=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(i,t)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(t,i){var n=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(n.plus(t),i)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,i){return this.zoomTo(this.zoomSpring.target.value*e,t,i)},zoomTo:function(t,i,n){var r=this;return this.zoomPoint=i instanceof e.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,n?this._adjustCenterSpringsForZoomPoint((function(){r.zoomSpring.resetTo(t)})):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:i,immediately:n}),this},setRotation:function(t){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=e.positiveModulo(t,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t}),this):this},getRotation:function(){return this.degrees},resize:function(e,t){var i,n=this.getBoundsNoRotate(),r=n;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(i=e.x/this.containerSize.x,r.width=n.width*i,r.height=r.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(r,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint((function(){e.zoomSpring.update()})),this.centerSpringX.update(),this.centerSpringY.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,t},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var i=this.pixelFromPoint(this.zoomPoint,!0).minus(t),n=this.deltaPointsFromPixels(i,!0);this.centerSpringX.shiftBy(n.x),this.centerSpringY.shiftBy(n.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation()),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation())},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,i){return t.minus(i.getTopLeft()).times(this._containerInnerSize.x/i.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,i){var n=this.getBoundsNoRotate(i);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/n.width).plus(n.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(t,i){var n=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/n,i*this._contentSizeNoRotate.x/n)},viewportToImageCoordinates:function(t,i){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===n){return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t,i,!0)}}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,i-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,i){var n=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*n,i/this._contentSizeNoRotate.x*n)},imageToViewportCoordinates:function(t,i){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===n){return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t,i,!0)}}var r=this._imageToViewportDelta(t,i);return r.x+=this._contentBoundsNoRotate.x,r.y+=this._contentBoundsNoRotate.y,r},imageToViewportRectangle:function(t,i,n,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,i,n,r)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===s){return this.viewer.world.getItemAt(0).imageToViewportRectangle(t,i,n,r,!0)}}var a=this.imageToViewportCoordinates(o.x,o.y),l=this._imageToViewportDelta(o.width,o.height);return new e.Rect(a.x,a.y,l.x,l.y,o.degrees)},viewportToImageRectangle:function(t,i,n,r){var o=t;if(o instanceof e.Rect||(o=new e.Rect(t,i,n,r)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===s){return this.viewer.world.getItemAt(0).viewportToImageRectangle(t,i,n,r,!0)}}var a=this.viewportToImageCoordinates(o.x,o.y),l=this._viewportToImageDelta(o.width,o.height);return new e.Rect(a.x,a.y,l.x,l.y,o.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var i=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(i)},imageToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var i=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(i)},viewportToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===i){return this.viewer.world.getItemAt(0).viewportToImageZoom(t)}}var n=this._contentSizeNoRotate.x;return t*(this._containerInnerSize.x/n*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(t){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===i){return this.viewer.world.getItemAt(0).imageToViewportZoom(t)}}return t*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e||(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e})),this}}}(a),function(e){e.TiledImage=function(t){var i=this;e.console.assert(t.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(t.drawer,"[TiledImage] options.drawer is required"),e.console.assert(t.viewer,"[TiledImage] options.viewer is required"),e.console.assert(t.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(t.source,"[TiledImage] options.source is required"),e.console.assert(!t.clip||t.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=t.tileCache,delete t.tileCache,this._drawer=t.drawer,delete t.drawer,this._imageLoader=t.imageLoader,delete t.imageLoader,t.clip instanceof e.Rect&&(this._clip=t.clip.clone()),delete t.clip;var n=t.x||0;delete t.x;var r=t.y||0;delete t.y,this.normHeight=t.source.dimensions.y/t.source.dimensions.x,this.contentAspectX=t.source.dimensions.x/t.source.dimensions.y;var o=1;t.width?(o=t.width,delete t.width,t.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete t.height)):t.height&&(o=t.height/this.normHeight,delete t.height);var s=t.fitBounds;delete t.fitBounds;var l=t.fitBoundsPlacement||a.Placement.CENTER;delete t.fitBoundsPlacement;var u=t.degrees||0;delete t.degrees,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency},t),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:n,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:u,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),s&&this.fitBounds(s,l,!0),this._drawingHandler=function(t){i.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:i},t))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.update(),t=this._ySpring.update(),i=this._scaleSpring.update(),n=this._degreesSpring.update();return!!(e||t||i||n)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var i=this.getBoundsNoRotate(t);if(this._clip){var n=(t?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,r=this._clip.times(n);i=new e.Rect(i.x+r.x,i.y+r.y,r.width,r.height)}return i.rotate(this.getRotation(t),this._getRotationPoint(t))},getTileBounds:function(e,t,i){var n=this.source.getNumTiles(e),r=(n.x+t%n.x)%n.x,o=(n.y+i%n.y)%n.y,s=this.source.getTileBounds(e,r,o);return this.getFlip()&&(s.x=1-s.x-s.width),s.x+=(t-r)/n.x,s.y+=this._worldHeightCurrent/this._worldWidthCurrent*((i-o)/n.y),s},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var t=this.imageToWindowCoordinates(new e.Point(0,0)),i=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(i.x-t.x,i.y-t.y)},_viewportToImageDelta:function(t,i,n){var r=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/r),i*(this.source.dimensions.y*this.contentAspectX/r))},viewportToImageCoordinates:function(t,i,n){var r;return t instanceof e.Point?(n=i,r=t):r=new e.Point(t,i),r=r.rotate(-this.getRotation(n),this._getRotationPoint(n)),n?this._viewportToImageDelta(r.x-this._xSpring.current.value,r.y-this._ySpring.current.value):this._viewportToImageDelta(r.x-this._xSpring.target.value,r.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,i,n){var r=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*r,i/this.source.dimensions.y/this.contentAspectX*r)},imageToViewportCoordinates:function(t,i,n){t instanceof e.Point&&(n=i,i=t.y,t=t.x);var r=this._imageToViewportDelta(t,i);return n?(r.x+=this._xSpring.current.value,r.y+=this._ySpring.current.value):(r.x+=this._xSpring.target.value,r.y+=this._ySpring.target.value),r.rotate(this.getRotation(n),this._getRotationPoint(n))},imageToViewportRectangle:function(t,i,n,r,o){var s=t;s instanceof e.Rect?o=i:s=new e.Rect(t,i,n,r);var a=this.imageToViewportCoordinates(s.getTopLeft(),o),l=this._imageToViewportDelta(s.width,s.height,o);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees+this.getRotation(o))},viewportToImageRectangle:function(t,i,n,r,o){var s=t;t instanceof e.Rect?o=i:s=new e.Rect(t,i,n,r);var a=this.viewportToImageCoordinates(s.getTopLeft(),o),l=this._viewportToImageDelta(s.width,s.height,o);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees-this.getRotation(o))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(a.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(a.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var i=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/i,(t.y-this._ySpring.current.value)/i,t.width/i,t.height/i,t.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var i=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(i&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(i)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}i||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},setCroppingPolygons:function(t){var i=function(t){return t.map((function(t){try{if(function(t){return t instanceof e.Point||"number"==typeof t.x&&"number"==typeof t.y}(t))return{x:t.x,y:t.y};throw new Error}catch(e){throw new Error("A Provided cropping polygon point is not supported")}}))};try{if(!e.isArray(t))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=t.map((function(e){return i(e)}))}catch(t){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(t),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(t,i,n){i=i||e.Placement.CENTER;var r=e.Placement.properties[i],o=this.contentAspectX,s=0,a=0,l=1,u=1;if(this._clip&&(o=this._clip.getAspectRatio(),l=this._clip.width/this.source.dimensions.x,u=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>o?(s=this._clip.x/this._clip.height*t.height,a=this._clip.y/this._clip.height*t.height):(s=this._clip.x/this._clip.width*t.width,a=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>o){var c=t.height/u,h=0;r.isHorizontallyCentered?h=(t.width-t.height*o)/2:r.isRight&&(h=t.width-t.height*o),this.setPosition(new e.Point(t.x-s+h,t.y-a),n),this.setHeight(c,n)}else{var d=t.width/l,p=0;r.isVerticallyCentered?p=(t.height-t.width/o)/2:r.isBottom&&(p=t.height-t.width/o),this.setPosition(new e.Point(t.x-s,t.y-a+p),n),this.setWidth(d,n)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(e){this.flipped=!!e,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(e){e!==this.opacity&&(this.opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){e!==this.compositeOperation&&(this.compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(e,t){var i=this._scaleSpring.target.value===e;if(t){if(i&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(i)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}i||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,i=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return i=Math.max(i,this.source.minLevel||0),{lowestLevel:e=Math.min(e,i),highestLevel:i}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){this.lastDrawn.pop().beingDrawn=!1}var t=this.viewport,i=this._viewportToTiledImageRectangle(t.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var n=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(i=i.intersection(n)))return}for(var r=this._getLevelsInterval(),o=r.lowestLevel,s=r.highestLevel,a=null,l=!1,u=e.now(),c=s;c>=o;c--){var h=!1,d=t.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(c),!0).x*this._scaleSpring.current.value;if(c===o||!l&&d>=this.minPixelRatio)h=!0,l=!0;else if(!l)continue;var p=t.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(c),!1).x*this._scaleSpring.current.value,f=t.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,g=this.immediateRender?1:f,m=Math.min(1,(d-.5)/.5),v=g/Math.abs(g-p);if(a=this._updateLevel(l,h,c,m,v,i,u,a),this._providesCoverage(this.coverage,c))break}this._drawTiles(this.lastDrawn),a&&!a.context2D?(this._loadTile(a,u),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(t,i,n){var r,o,s,a;this.wrapHorizontal?(r=e.positiveModulo(i.x,1),o=e.positiveModulo(n.x,1)):(r=Math.max(0,i.x),o=Math.min(1,n.x));var l=1/this.source.aspectRatio;this.wrapVertical?(s=e.positiveModulo(i.y,l),a=e.positiveModulo(n.y,l)):(s=Math.max(0,i.y),a=Math.min(l,n.y));var u=this.source.getTileAtPoint(t,new e.Point(r,s)),c=this.source.getTileAtPoint(t,new e.Point(o,a)),h=this.source.getNumTiles(t);return this.wrapHorizontal&&(u.x+=h.x*Math.floor(i.x),c.x+=h.x*Math.floor(n.x)),this.wrapVertical&&(u.y+=h.y*Math.floor(i.y/l),c.y+=h.y*Math.floor(n.y/l)),{topLeft:u,bottomRight:c}},_updateLevel:function(e,t,i,n,r,o,s,a){var l=o.getBoundingBox().getTopLeft(),u=o.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:e,level:i,opacity:n,visibility:r,drawArea:o,topleft:l,bottomright:u,currenttime:s,best:a}),this._resetCoverage(this.coverage,i),this._resetCoverage(this.loadingCoverage,i);var c=this._getCornerTiles(i,l,u),h=c.topLeft,d=c.bottomRight,p=this.source.getNumTiles(i),f=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(d.x+=1,this.wrapHorizontal||(d.x=Math.min(d.x,p.x-1)));for(var g=h.x;g<=d.x;g++)for(var m=h.y;m<=d.y;m++){var v;if(this.getFlip()){var y=(p.x+g%p.x)%p.x;v=g+p.x-y-y-1}else v=g;null!==o.intersection(this.getTileBounds(i,v,m))&&(a=this._updateTile(t,e,v,m,i,n,r,f,p,s,a))}return a},_updateTile:function(e,t,i,n,r,o,s,a,l,u,c){var h=this._getTile(i,n,r,u,l,this._worldWidthCurrent,this._worldHeightCurrent),d=t;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:h}),this._setCoverage(this.coverage,r,i,n,!1);var p=h.loaded||h.loading||this._isCovered(this.loadingCoverage,r,i,n);if(this._setCoverage(this.loadingCoverage,r,i,n,p),!h.exists)return c;if(e&&!d&&(this._isCovered(this.coverage,r,i,n)?this._setCoverage(this.coverage,r,i,n,!0):d=!0),!d)return c;if(this._positionTile(h,this.source.tileOverlap,this.viewport,a,s),!h.loaded)if(h.context2D)this._setTileLoaded(h);else{var f=this._tileCache.getImageRecord(h.cacheKey);if(f){var g=f.getImage();this._setTileLoaded(h,g)}}h.loaded?this._blendTile(h,i,n,r,o,u)&&(this._needsDraw=!0):h.loading?this._tilesLoading++:p||(c=this._compareTiles(c,h));return c},_getTile:function(t,i,n,r,o,s,a){var l,u,c,h,d,p,f,g,m,v,y=this.tilesMatrix,b=this.source;return y[n]||(y[n]={}),y[n][t]||(y[n][t]={}),y[n][t][i]&&!y[n][t][i].flipped==!this.flipped||(l=(o.x+t%o.x)%o.x,u=(o.y+i%o.y)%o.y,c=this.getTileBounds(n,t,i),h=b.getTileBounds(n,l,u,!0),d=b.tileExists(n,l,u),p=b.getTileUrl(n,l,u),f=b.getTilePostData(n,l,u),this.loadTilesWithAjax?(g=b.getTileAjaxHeaders(n,l,u),e.isPlainObject(this.ajaxHeaders)&&(g=e.extend({},this.ajaxHeaders,g))):g=null,m=b.getContext2D?b.getContext2D(n,l,u):void 0,v=new e.Tile(n,t,i,c,d,p,m,this.loadTilesWithAjax,g,h,f,b.getTileHashKey(n,l,u,p,g,f)),this.getFlip()?0===l&&(v.isRightMost=!0):l===o.x-1&&(v.isRightMost=!0),u===o.y-1&&(v.isBottomMost=!0),v.flipped=this.flipped,y[n][t][i]=v),(v=y[n][t][i]).lastTouchTime=r,v},_loadTile:function(e,t){var i=this;e.loading=!0,this._imageLoader.addJob({src:e.url,postData:e.postData,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(n,r,o){i._onTileLoad(e,t,n,r,o)},abort:function(){e.loading=!1}})},_onTileLoad:function(t,i,n,r,o){if(!n)return e.console.error("Tile %s failed to load: %s - error: %s",t,t.url,r),this.viewer.raiseEvent("tile-load-failed",{tile:t,tiledImage:this,time:i,message:r,tileRequest:o}),t.loading=!1,void(t.exists=!1);if(i<this.lastResetTime)return e.console.warn("Ignoring tile %s loaded before reset: %s",t,t.url),void(t.loading=!1);var s=this,a=function(){var e=s.source.getClosestLevel();s._setTileLoaded(t,n,e,o)};this._midDraw?window.setTimeout(a,1):a()},_setTileLoaded:function(e,t,i,n){var r=0,o=this;function s(){return r++,a}function a(){0===--r&&(e.loading=!1,e.loaded=!0,e.context2D||o._tileCache.cacheTile({image:t,tile:e,cutoff:i,tiledImage:o}),o._needsDraw=!0)}this.viewer.raiseEvent("tile-loaded",{tile:e,tiledImage:this,tileRequest:n,image:t,getCompletionCallback:s}),s()()},_positionTile:function(t,i,n,r,o){var s=t.bounds.getTopLeft();s.x*=this._scaleSpring.current.value,s.y*=this._scaleSpring.current.value,s.x+=this._xSpring.current.value,s.y+=this._ySpring.current.value;var a=t.bounds.getSize();a.x*=this._scaleSpring.current.value,a.y*=this._scaleSpring.current.value;var l=n.pixelFromPointNoRotate(s,!0),u=n.pixelFromPointNoRotate(s,!1),c=n.deltaPixelsFromPointsNoRotate(a,!0),h=n.deltaPixelsFromPointsNoRotate(a,!1),d=u.plus(h.divide(2)),p=r.squaredDistanceTo(d);i||(c=c.plus(new e.Point(1,1))),t.isRightMost&&this.wrapHorizontal&&(c.x+=.75),t.isBottomMost&&this.wrapVertical&&(c.y+=.75),t.position=l,t.size=c,t.squaredDistance=p,t.visibility=o},_blendTile:function(e,t,i,n,r,o){var s,a,l=1e3*this.blendTime;if(e.blendStart||(e.blendStart=o),s=o-e.blendStart,a=l?Math.min(1,s/l):1,this.alwaysBlend&&(a*=r),e.opacity=a,this.lastDrawn.push(e),1===a)this._setCoverage(this.coverage,n,t,i,!0),this._hasOpaqueTile=!0;else if(s<l)return!0;return!1},_compareTiles:function(e,t){return e?t.visibility>e.visibility||t.visibility===e.visibility&&t.squaredDistance<e.squaredDistance?t:e:t},_drawTiles:function(r){if(0!==this.opacity&&(0!==r.length||this.placeholderFillStyle)){var o,s,a,l=r[0];l&&(o=this.opacity<1||this.compositeOperation&&"source-over"!==this.compositeOperation||!this._isBottomItem()&&l._hasTransparencyChannel());var u,c=this.viewport.getZoom(!0),h=this.viewportToImageZoom(c);r.length>1&&h>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360==0&&e.supportsCanvas&&this.viewer.useCanvas&&(o=!0,s=l.getScaleForEdgeSmoothing(),a=l.getTranslationForEdgeSmoothing(s,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0))),o&&(s||(u=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(0===this.viewport.degrees&&this.getRotation(!0)%360==0||(u.x=this._drawer.viewer.container.clientWidth-(u.x+u.width))),u=u.times(e.pixelDensityRatio)),this._drawer._clear(!0,u)),s||(0!==this.viewport.degrees&&this._drawer._offsetForRotation({degrees:this.viewport.degrees,useSketch:o}),this.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:o}),0===this.viewport.degrees&&this.getRotation(!0)%360==0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var d=!1;if(this._clip){this._drawer.saveContext(o);var p=this.imageToViewportRectangle(this._clip,!0);p=p.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var f=this._drawer.viewportToDrawerRectangle(p);s&&(f=f.times(s)),a&&(f=f.translate(a)),this._drawer.setClip(f,o),d=!0}if(this._croppingPolygons){this._drawer.saveContext(o);try{var g=this._croppingPolygons.map((function(e){return e.map((function(e){var t=this.imageToViewportCoordinates(e.x,e.y,!0).rotate(-this.getRotation(!0),this._getRotationPoint(!0)),i=this._drawer.viewportCoordToDrawerCoord(t);return s&&(i=i.times(s)),i}))}));this._drawer.clipWithPolygons(g,o)}catch(t){e.console.error(t)}d=!0}if(this.placeholderFillStyle&&!1===this._hasOpaqueTile){var m=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));s&&(m=m.times(s)),a&&(m=m.translate(a));var v=null;v="function"==typeof this.placeholderFillStyle?this.placeholderFillStyle(this,this._drawer.context):this.placeholderFillStyle,this._drawer.drawRectangle(m,v,o)}var y=function(r){if("number"==typeof r)return n(r);if(!r||!e.Browser)return t;var o=r[e.Browser.vendor];i(o)&&(o=r["*"]);return n(o)}(this.subPixelRoundingForTransparency),b=!1;if(y===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS)b=!0;else if(y===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST){b=!(this.viewer&&this.viewer.isAnimating())}for(var _=r.length-1;_>=0;_--)l=r[_],this._drawer.drawTile(l,this._drawingHandler,o,s,a,b),l.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:l});d&&this._drawer.restoreContext(o),s||(this.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(o),0!==this.viewport.degrees&&this._drawer._restoreRotationChanges(o)),o&&(s&&(0!==this.viewport.degrees&&this._drawer._offsetForRotation({degrees:this.viewport.degrees,useSketch:!1}),this.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:s,translate:a,compositeOperation:this.compositeOperation,bounds:u}),s&&(this.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(!1),0!==this.viewport.degrees&&this._drawer._restoreRotationChanges(!1))),s||0===this.viewport.degrees&&this.getRotation(!0)%360==0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(r)}},_drawDebugInfo:function(t){if(this.debugMode)for(var i=t.length-1;i>=0;i--){var n=t[i];try{this._drawer.drawDebugInfo(n,t.length,i,this)}catch(t){e.console.error(t)}}},_providesCoverage:function(e,t,i,n){var r,o,s,a;if(!e[t])return!1;if(void 0===i||void 0===n){for(s in r=e[t])if(Object.prototype.hasOwnProperty.call(r,s))for(a in o=r[s])if(Object.prototype.hasOwnProperty.call(o,a)&&!o[a])return!1;return!0}return void 0===e[t][i]||void 0===e[t][i][n]||!0===e[t][i][n]},_isCovered:function(e,t,i,n){return void 0===i||void 0===n?this._providesCoverage(e,t+1):this._providesCoverage(e,t+1,2*i,2*n)&&this._providesCoverage(e,t+1,2*i,2*n+1)&&this._providesCoverage(e,t+1,2*i+1,2*n)&&this._providesCoverage(e,t+1,2*i+1,2*n+1)},_setCoverage:function(t,i,n,r,o){t[i]?(t[i][n]||(t[i][n]={}),t[i][n][r]=o):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",i)},_resetCoverage:function(e,t){e[t]={}}});var t=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function i(t){return t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&t!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function n(e){return i(e)?t:e}}(a),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},i=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.image,"[ImageRecord] options.image is required"),this._image=t.image,this._tiles=[]};i.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(t){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=t},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var i=0;i<this._tiles.length;i++)if(this._tiles[i]===t)return void this._tiles.splice(i,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(n){e.console.assert(n,"[TileCache.cacheTile] options is required"),e.console.assert(n.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(n.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(n.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var r=n.cutoff||0,o=this._tilesLoaded.length,s=this._imagesLoaded[n.tile.cacheKey];if(s||(e.console.assert(n.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),s=this._imagesLoaded[n.tile.cacheKey]=new i({image:n.image}),this._imagesLoadedCount++),s.addTile(n.tile),n.tile.cacheImageRecord=s,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,l,u,c,h,d,p=null,f=-1,g=null,m=this._tilesLoaded.length-1;m>=0;m--)(a=(d=this._tilesLoaded[m]).tile).level<=r||a.beingDrawn||(p?(c=a.lastTouchTime,l=p.lastTouchTime,h=a.level,u=p.level,(c<l||c===l&&h>u)&&(p=a,f=m,g=d)):(p=a,f=m,g=d));p&&f>=0&&(this._unloadTile(g),o=f)}this._tilesLoaded[o]=new t({tile:n.tile,tiledImage:n.tiledImage})},clearTilesFor:function(t){var i;e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var n=0;n<this._tilesLoaded.length;++n)(i=this._tilesLoaded[n]).tiledImage===t&&(this._unloadTile(i),this._tilesLoaded.splice(n,1),n--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var i=t.tile,n=t.tiledImage;i.unload(),i.cacheImageRecord=null;var r=this._imagesLoaded[i.cacheKey];r.removeTile(i),r.getTileCount()||(r.destroy(),delete this._imagesLoaded[i.cacheKey],this._imagesLoadedCount--),n.viewer.raiseEvent("tile-unloaded",{tile:i,tiledImage:n})}}}(a),function(e){e.World=function(t){var i=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){i._autoRefigureSizes?i._figureSizes():i._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,i){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(i=i||{}).index){var n=Math.max(0,Math.min(this._items.length,i.index));this._items.splice(n,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,i){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==i,"[World.setItemIndex] index is required");var n=this.getIndexOfItem(t);if(i>=this._items.length)throw new Error("Index bigger than number of layers.");i!==n&&-1!==n&&(this._items.splice(n,1),this._items.splice(i,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:n,newIndex:i}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var i=e.indexOf(this._items,t);-1!==i&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(i,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var i=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<i.length;t++)e=i[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){var i,n=(t=t||{}).immediately||!1,r=t.layout||e.DEFAULT_SETTINGS.collectionLayout,o=t.rows||e.DEFAULT_SETTINGS.collectionRows,s=t.columns||e.DEFAULT_SETTINGS.collectionColumns,a=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,l=a+(t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);i=!t.rows&&s?s:Math.ceil(this._items.length/o);var u,c,h,d,p,f=0,g=0;this.setAutoRefigureSizes(!1);for(var m=0;m<this._items.length;m++)m&&m%i==0&&("horizontal"===r?(g+=l,f=0):(f+=l,g=0)),d=(h=(c=(u=this._items[m]).getBounds()).width>c.height?a:a*(c.width/c.height))*(c.height/c.width),p=new e.Point(f+(a-h)/2,g+(a-d)/2),u.setPosition(p,n),u.setWidth(h,n),"horizontal"===r?f+=l:g+=l;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,i=this._contentSize?this._contentSize.clone():null,n=this._contentFactor||0;if(this._items.length){var r=this._items[0],o=r.getBounds();this._contentFactor=r.getContentSize().x/o.width;for(var s=r.getClippedBounds().getBoundingBox(),a=s.x,l=s.y,u=s.x+s.width,c=s.y+s.height,h=1;h<this._items.length;h++)o=(r=this._items[h]).getBounds(),this._contentFactor=Math.max(this._contentFactor,r.getContentSize().x/o.width),s=r.getClippedBounds().getBoundingBox(),a=Math.min(a,s.x),l=Math.min(l,s.y),u=Math.max(u,s.x+s.width),c=Math.max(c,s.y+s.height);this._homeBounds=new e.Rect(a,l,u-a,c-l),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===n&&this._homeBounds.equals(t)&&this._contentSize.equals(i)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(a)},4896:()=>{},5093:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r=i(5932);t.default=function(e,t){var i=this;if(document.documentElement.classList.remove("is-leaving"),this.getCurrentUrl()===e.url){var o=new r.Link(e.responseURL).getPath();window.location.pathname!==o&&(window.history.replaceState({url:o,random:Math.random(),source:"swup"},document.title,o),this.cache.cacheUrl(n({},e,{url:o}))),t&&!this.options.animateHistoryBrowsing||document.documentElement.classList.add("is-rendering"),this.triggerEvent("willReplaceContent",t);for(var s=0;s<e.blocks.length;s++)document.body.querySelector('[data-swup="'+s+'"]').outerHTML=e.blocks[s];if(document.title=e.title,this.triggerEvent("contentReplaced",t),this.triggerEvent("pageView",t),this.options.cache||this.cache.empty(),setTimeout((function(){t&&!i.options.animateHistoryBrowsing||(i.triggerEvent("animationInStart"),document.documentElement.classList.remove("is-animating"))}),10),!t||this.options.animateHistoryBrowsing){var a=this.getAnimationPromises("in");Promise.all(a).then((function(){i.triggerEvent("animationInDone"),i.triggerEvent("transitionEnd",t),i.cleanupAnimationClasses()}))}else this.triggerEvent("transitionEnd",t);this.scrollToElement=null}}},5138:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(5932);var o=t.Cache=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pages={},this.last=null}return n(e,[{key:"cacheUrl",value:function(e){e.url=(0,r.normalizeUrl)(e.url),e.url in this.pages==!1&&(this.pages[e.url]=e),this.last=this.pages[e.url],this.swup.log("Cache ("+Object.keys(this.pages).length+")",this.pages)}},{key:"getPage",value:function(e){return e=(0,r.normalizeUrl)(e),this.pages[e]}},{key:"getCurrentPage",value:function(){return this.getPage((0,r.getCurrentUrl)())}},{key:"exists",value:function(e){return(e=(0,r.normalizeUrl)(e))in this.pages}},{key:"empty",value:function(){this.pages={},this.last=null,this.swup.log("Cache cleared")}},{key:"remove",value:function(e){delete this.pages[e]}}]),e}();t.default=o},5302:e=>{e.exports=h,e.exports.match=function(e,t){var i=[];return o(h(e,i,t),i)},e.exports.regexpToFunction=o,e.exports.parse=n,e.exports.compile=function(e,t){return s(n(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=c;var t="/",i=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function n(e,n){for(var o,s=[],a=0,u=0,c="",h=n&&n.delimiter||t,d=n&&n.whitelist||void 0,p=!1;null!==(o=i.exec(e));){var f=o[0],g=o[1],m=o.index;if(c+=e.slice(u,m),u=m+f.length,g)c+=g[1],p=!0;else{var v="",y=o[2],b=o[3],_=o[4],w=o[5];if(!p&&c.length){var T=c.length-1,S=c[T];(!d||d.indexOf(S)>-1)&&(v=S,c=c.slice(0,T))}c&&(s.push(c),c="",p=!1);var E="+"===w||"*"===w,x="?"===w||"*"===w,C=b||_,k=v||h,P=v||("string"==typeof s[s.length-1]?s[s.length-1]:"");s.push({name:y||a++,prefix:v,delimiter:k,optional:x,repeat:E,pattern:C?l(C):r(k,h,P)})}}return(c||u<e.length)&&s.push(c+e.substr(u)),s}function r(e,t,i){var n="[^"+a(e===t?e:e+t)+"]";return!i||i.indexOf(e)>-1||i.indexOf(t)>-1?n+"+?":a(i)+"|(?:(?!"+a(i)+")"+n+")+?"}function o(e,t){return function(i,n){var r=e.exec(i);if(!r)return!1;for(var o=r[0],s=r.index,a={},l=n&&n.decode||decodeURIComponent,u=1;u<r.length;u++)if(void 0!==r[u]){var c=t[u-1];c.repeat?a[c.name]=r[u].split(c.delimiter).map((function(e){return l(e,c)})):a[c.name]=l(r[u],c)}return{path:o,index:s,params:a}}}function s(e,t){for(var i=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(i[n]=new RegExp("^(?:"+e[n].pattern+")$",u(t)));return function(t,n){for(var r="",o=n&&n.encode||encodeURIComponent,s=!n||!1!==n.validate,a=0;a<e.length;a++){var l=e[a];if("string"!=typeof l){var u,c=t?t[l.name]:void 0;if(Array.isArray(c)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but got array');if(0===c.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<c.length;h++){if(u=o(c[h],l),s&&!i[a].test(u))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'"');r+=(0===h?l.prefix:l.delimiter)+u}}else if("string"!=typeof c&&"number"!=typeof c&&"boolean"!=typeof c){if(!l.optional)throw new TypeError('Expected "'+l.name+'" to be '+(l.repeat?"an array":"a string"))}else{if(u=o(String(c),l),s&&!i[a].test(u))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+u+'"');r+=l.prefix+u}}else r+=l}return r}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$/()])/g,"\\$1")}function u(e){return e&&e.sensitive?"":"i"}function c(e,i,n){for(var r=(n=n||{}).strict,o=!1!==n.start,s=!1!==n.end,l=n.delimiter||t,c=[].concat(n.endsWith||[]).map(a).concat("$").join("|"),h=o?"^":"",d=0;d<e.length;d++){var p=e[d];if("string"==typeof p)h+=a(p);else{var f=p.repeat?"(?:"+p.pattern+")(?:"+a(p.delimiter)+"(?:"+p.pattern+"))*":p.pattern;i&&i.push(p),p.optional?p.prefix?h+="(?:"+a(p.prefix)+"("+f+"))?":h+="("+f+")?":h+=a(p.prefix)+"("+f+")"}}if(s)r||(h+="(?:"+a(l)+")?"),h+="$"===c?"$":"(?="+c+")";else{var g=e[e.length-1],m="string"==typeof g?g[g.length-1]===l:void 0===g;r||(h+="(?:"+a(l)+"(?="+c+"))?"),m||(h+="(?="+a(l)+"|"+c+")")}return new RegExp(h,u(n))}function h(e,t,i){return e instanceof RegExp?function(e,t){if(!t)return e;var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}(e,t):Array.isArray(e)?function(e,t,i){for(var n=[],r=0;r<e.length;r++)n.push(h(e[r],t,i).source);return new RegExp("(?:"+n.join("|")+")",u(i))}(e,t,i):function(e,t,i){return c(n(e,i),t,i)}(e,t,i)}},5373:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3132);t.default=function(e){return e?("#"===e.charAt(0)&&(e=e.substring(1)),e=decodeURIComponent(e),e=(0,n.escapeCssIdentifier)(e),(0,n.query)("#"+e)||(0,n.query)("a[name='"+e+"']")):null}},5404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.use=function(e){if(e.isSwupPlugin)return this.plugins.push(e),e.swup=this,"function"==typeof e._beforeMount&&e._beforeMount(),e.mount(),this.plugins;console.warn("Not swup plugin instance "+e+".")},t.unuse=function(e){var t=void 0;if(t="string"==typeof e?this.plugins.find((function(t){return e===t.name})):e){t.unmount(),"function"==typeof t._afterUnmount&&t._afterUnmount();var i=this.plugins.indexOf(t);return this.plugins.splice(i,1),this.plugins}console.warn("No such plugin.")},t.findPlugin=function(e){return this.plugins.find((function(t){return e===t.name}))}},5606:e=>{var t,i,n=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var a,l=[],u=!1,c=-1;function h(){u&&a&&(u=!1,a.length?l=a.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=s(h);u=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new p(e,t)),1!==l.length||u||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},5640:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,i){this.transition={from:e,to:t,custom:i}}},5752:(e,t,i)=>{var n=i(4582),r=i(4722),o=i(6559),s=i(4466),a=r.DOMImplementation,l=n.NAMESPACE,u=s.ParseError,c=s.XMLReader;function h(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function d(e){this.options=e||{locator:{}}}function p(){this.cdata=!1}function f(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function g(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function m(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function v(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}d.prototype.parseFromString=function(e,t){var i=this.options,n=new c,r=i.domBuilder||new p,s=i.errorHandler,a=i.locator,u=i.xmlns||{},d=/\/x?html?$/.test(t),f=d?o.HTML_ENTITIES:o.XML_ENTITIES;a&&r.setDocumentLocator(a),n.errorHandler=function(e,t,i){if(!e){if(t instanceof p)return t;e=t}var n={},r=e instanceof Function;function o(t){var o=e[t];!o&&r&&(o=2==e.length?function(i){e(t,i)}:e),n[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+g(i))}||function(){}}return i=i||{},o("warning"),o("error"),o("fatalError"),n}(s,r,a),n.domBuilder=i.domBuilder||r,d&&(u[""]=l.HTML),u.xml=u.xml||l.XML;var m=i.normalizeLineEndings||h;return e&&"string"==typeof e?n.parse(m(e),u,f):n.errorHandler.error("invalid doc source"),r.doc},p.prototype={startDocument:function(){this.doc=(new a).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,n){var r=this.doc,o=r.createElementNS(e,i||t),s=n.length;v(this,o),this.currentElement=o,this.locator&&f(this.locator,o);for(var a=0;a<s;a++){e=n.getURI(a);var l=n.getValue(a),u=(i=n.getQName(a),r.createAttributeNS(e,i));this.locator&&f(n.getLocator(a),u),u.value=u.nodeValue=l,o.setAttributeNode(u)}},endElement:function(e,t,i){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&f(this.locator,i),v(this,i)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){if(e=m.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&f(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,i){e=m.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&f(this.locator,n),v(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var r=n.createDocumentType(e,t,i);this.locator&&f(this.locator,r),v(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,g(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,g(this.locator))},fatalError:function(e){throw new u(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){p.prototype[e]=function(){return null}})),t.DOMParser=d},5828:()=>{!function(){if("undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLElement){var e=!1;try{var t=document.createElement("div");t.addEventListener("focus",(function(e){e.preventDefault(),e.stopPropagation()}),!0),t.focus(Object.defineProperty({},"preventScroll",{get:function(){if(navigator&&void 0!==navigator.userAgent&&navigator.userAgent&&navigator.userAgent.match(/Edge\/1[7-8]/))return e=!1;e=!0}}))}catch(e){}if(void 0===HTMLElement.prototype.nativeFocus&&!e){HTMLElement.prototype.nativeFocus=HTMLElement.prototype.focus;var i=function(e){for(var t=0;t<e.length;t++)e[t][0].scrollTop=e[t][1],e[t][0].scrollLeft=e[t][2];e=[]};HTMLElement.prototype.focus=function(e){if(e&&e.preventScroll){var t=function(e){for(var t=e.parentNode,i=[],n=document.scrollingElement||document.documentElement;t&&t!==n;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&i.push([t,t.scrollTop,t.scrollLeft]),t=t.parentNode;return t=n,i.push([t,t.scrollTop,t.scrollLeft]),i}(this);if("function"==typeof setTimeout){var n=this;setTimeout((function(){n.nativeFocus(),i(t)}),0)}else this.nativeFocus(),i(t)}else this.nativeFocus()}}}}()},5891:e=>{var t={"":!0,up:!0};function i(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,n=3,r=0,o=100,s=0,a=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!i(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return n},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");n=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!i(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!i(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!i(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(e){if(!i(e))throw new Error("ViewportAnchorX must be between 0 and 100.");s=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var i=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);!1===i?console.warn("Scroll: an invalid or illegal string was specified."):l=i}}})}},5932:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupAnimationClasses=t.Link=t.markSwupElements=t.normalizeUrl=t.getCurrentUrl=t.transitionProperty=t.transitionEnd=t.fetch=t.getDataFromHtml=t.createHistoryRecord=t.classify=void 0;var n=f(i(3688)),r=f(i(341)),o=f(i(7589)),s=f(i(3447)),a=f(i(2008)),l=f(i(6240)),u=f(i(7630)),c=f(i(4242)),h=f(i(8085)),d=f(i(6078)),p=f(i(1526));function f(e){return e&&e.__esModule?e:{default:e}}t.classify=n.default,t.createHistoryRecord=r.default,t.getDataFromHtml=o.default,t.fetch=s.default,t.transitionEnd=a.default,t.transitionProperty=l.default,t.getCurrentUrl=u.default,t.normalizeUrl=c.default,t.markSwupElements=h.default,t.Link=d.default,t.cleanupAnimationClasses=p.default},5990:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var n=function(t){t&&Object.keys(t).forEach((function(i){return e[i]=t[i]}))},r=0,o=t;r<o.length;r++){n(o[r])}return e})},6023:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const n=new WeakMap;function r(e,t,i,r){var o,s;if(!e&&!n.has(t))return!1;const a=null!==(o=n.get(t))&&void 0!==o?o:new WeakMap;if(n.set(t,a),!e&&!n.has(t))return!1;const l=null!==(s=a.get(i))&&void 0!==s?s:new Set;a.set(i,l);const u=l.has(r);return e?l.add(r):l.delete(r),u&&e}const o=function e(t,i,n,o,s){if("string"==typeof t&&(t=document.querySelectorAll(t)),"function"!=typeof t.addEventListener){const r=Array.prototype.map.call(t,(t=>e(t,i,n,o,s)));return{destroy(){for(const e of r)e.destroy()}}}const a=t instanceof Document?t.documentElement:t,l=Boolean("object"==typeof s?s.capture:s),u=e=>{const t=function(e,t){let i=e.target;if(i instanceof Text&&(i=i.parentElement),i instanceof Element&&e.currentTarget instanceof Element){const n=i.closest(t);if(n&&e.currentTarget.contains(n))return n}}(e,i);t&&(e.delegateTarget=t,o.call(a,e))};"object"==typeof s&&delete s.once;const c=JSON.stringify({selector:i,type:n,capture:l}),h=r(!0,a,o,c),d={destroy(){a.removeEventListener(n,u,s),r(!1,a,o,c)}};return h||a.addEventListener(n,u,s),d}},6078:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t instanceof Element||t instanceof SVGElement?this.link=t:(this.link=document.createElement("a"),this.link.href=t)}return i(e,[{key:"getPath",value:function(){var e=this.link.pathname;return"/"!==e[0]&&(e="/"+e),e}},{key:"getAddress",value:function(){var e=this.link.pathname+this.link.search;return this.link.getAttribute("xlink:href")&&(e=this.link.getAttribute("xlink:href")),"/"!==e[0]&&(e="/"+e),e}},{key:"getHash",value:function(){return this.link.hash}}]),e}();t.default=n},6124:(e,t,i)=>{"use strict";var n,r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(2422);var s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(e.name="DebugPlugin",e.triggerEvent=function(t,i){i?(console.groupCollapsed("%cswup:%c"+t,"color: #343434","color: #009ACD"),console.log(i),console.groupEnd()):console.log("%cswup:%c"+t,"color: #343434","color: #009ACD"),e.swup._triggerEvent(t,i)},e.log=function(e,t){if(t){for(var i in console.groupCollapsed(e),t)console.log(t[i]);console.groupEnd()}else console.log(e+"%c","color: #009ACD")},e.debugLog=function(e,t){"error"===t?console.error("DEBUG PLUGIN: "+e):console.warn("DEBUG PLUGIN: "+e)},!document.getElementsByTagName("title").length){console.warn("DEBUG PLUGIN: This page doesn't have title tag. Title tag is required in every page.")}return e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"mount",value:function(){var e=this.swup;e.log=this.log,window.swup=e,e._triggerEvent=e.triggerEvent,e.triggerEvent=this.triggerEvent;var t='a[href]:not([href^="'+window.location.origin+'"]):not([href^="/"]):not([href^="http"]):not([href^="/"]):not([href^="?"]):not([href^="#"])';e.on("pageView",(function(){if(document.querySelectorAll(t).length){console.warn('DEBUG PLUGIN: It seems there are some links with a href attribute not starting with "#", "/" or current domain, which is potentially a problem.',document.querySelectorAll(t))}if(document.querySelectorAll(t).length){console.warn('DEBUG PLUGIN: It seems there are some links with a href attribute not starting with "#", "/" or current domain, which is potentially a problem.',document.querySelectorAll(t))}}))}},{key:"unmount",value:function(){this.swup.log=function(){},this.swup.triggerEvent=this.swup._triggerEvent}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);t.A=s},6128:function(e){e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=Date.now();function s(){var e={},t=!0,i=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],i++);for(var r=function(i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t&&"[object Object]"===Object.prototype.toString.call(i[n])?e[n]=s(!0,e[n],i[n]):e[n]=i[n])};i<n;i++)r(arguments[i]);return e}function a(e,t){if((C(e)||e===window||e===document)&&(e=[e]),P(e)||A(e)||(e=[e]),0!=D(e))if(P(e)&&!A(e))for(var i=e.length,n=0;n<i&&!1!==t.call(e[n],e[n],n,e);n++);else if(A(e))for(var r in e)if(L(e,r)&&!1===t.call(e[r],e[r],r,e))break}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e[o]=e[o]||[],r={all:n,evt:null,found:null};return t&&i&&D(n)>0&&a(n,(function(e,n){if(e.eventName==t&&e.fn.toString()==i.toString())return r.found=!0,r.evt=n,!1})),r}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.onElement,n=t.withCallback,r=t.avoidDuplicate,o=void 0===r||r,s=t.once,u=void 0!==s&&s,c=t.useCapture,h=void 0!==c&&c,d=arguments.length>2?arguments[2]:void 0,p=i||[];function f(e){E(n)&&n.call(d,e,this),u&&f.destroy()}return x(p)&&(p=document.querySelectorAll(p)),f.destroy=function(){a(p,(function(t){var i=l(t,e,f);i.found&&i.all.splice(i.evt,1),t.removeEventListener&&t.removeEventListener(e,f,h)}))},a(p,(function(t){var i=l(t,e,f);(t.addEventListener&&o&&!i.found||!o)&&(t.addEventListener(e,f,h),i.all.push({eventName:e,fn:f}))})),f}function c(e,t){a(t.split(" "),(function(t){return e.classList.add(t)}))}function h(e,t){a(t.split(" "),(function(t){return e.classList.remove(t)}))}function d(e,t){return e.classList.contains(t)}function p(e,t){for(;e!==document.body;){if(!(e=e.parentElement))return!1;if("function"==typeof e.matches?e.matches(t):e.msMatchesSelector(t))return e}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||""===t)return!1;if("none"===t)return E(i)&&i(),!1;var n=_(),r=t.split(" ");a(r,(function(t){c(e,"g"+t)})),u(n,{onElement:e,avoidDuplicate:!1,once:!0,withCallback:function(e,t){a(r,(function(e){h(t,"g"+e)})),E(i)&&i()}})}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""===t)return e.style.webkitTransform="",e.style.MozTransform="",e.style.msTransform="",e.style.OTransform="",e.style.transform="",!1;e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t,e.style.transform=t}function m(e){e.style.display="block"}function v(e){e.style.display="none"}function y(e){var t=document.createDocumentFragment(),i=document.createElement("div");for(i.innerHTML=e;i.firstChild;)t.appendChild(i.firstChild);return t}function b(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function _(){var e,t=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==t.style[e])return i[e]}function w(e,t,i,n){if(e())t();else{var r;i||(i=100);var o=setInterval((function(){e()&&(clearInterval(o),r&&clearTimeout(r),t())}),i);n&&(r=setTimeout((function(){clearInterval(o)}),n))}}function T(e,t,i){if(I(e))console.error("Inject assets error");else if(E(t)&&(i=t,t=!1),x(t)&&t in window)E(i)&&i();else{var n;if(-1!==e.indexOf(".css")){if((n=document.querySelectorAll('link[href="'+e+'"]'))&&n.length>0)return void(E(i)&&i());var r=document.getElementsByTagName("head")[0],o=r.querySelectorAll('link[rel="stylesheet"]'),s=document.createElement("link");return s.rel="stylesheet",s.type="text/css",s.href=e,s.media="all",o?r.insertBefore(s,o[0]):r.appendChild(s),void(E(i)&&i())}if((n=document.querySelectorAll('script[src="'+e+'"]'))&&n.length>0){if(E(i)){if(x(t))return w((function(){return void 0!==window[t]}),(function(){i()})),!1;i()}}else{var a=document.createElement("script");a.type="text/javascript",a.src=e,a.onload=function(){if(E(i)){if(x(t))return w((function(){return void 0!==window[t]}),(function(){i()})),!1;i()}},document.body.appendChild(a)}}}function S(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function E(e){return"function"==typeof e}function x(e){return"string"==typeof e}function C(e){return!(!e||!e.nodeType||1!=e.nodeType)}function k(e){return Array.isArray(e)}function P(e){return e&&e.length&&isFinite(e.length)}function A(e){return"object"===r(e)&&null!=e&&!E(e)&&!k(e)}function I(e){return null==e}function L(e,t){return null!==e&&hasOwnProperty.call(e,t)}function D(e){if(A(e)){if(e.keys)return e.keys().length;var t=0;for(var i in e)L(e,i)&&t++;return t}return e.length}function O(e){return!isNaN(parseFloat(e))&&isFinite(e)}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!t.length)return!1;if(1==t.length)return t[0];"string"==typeof e&&(e=parseInt(e));var i=[];a(t,(function(e){i.push(e.getAttribute("data-taborder"))}));var n=Math.max.apply(Math,i.map((function(e){return parseInt(e)}))),r=e<0?1:e+1;r>n&&(r="1");var o=i.filter((function(e){return e>=parseInt(r)})),s=o.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(s,'"]'))}function M(e){if(e.events.hasOwnProperty("keyboard"))return!1;e.events.keyboard=u("keydown",{onElement:window,withCallback:function(t,i){var n=(t=t||window.event).keyCode;if(9==n){var r=document.querySelector(".gbtn.focused");if(!r){var o=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if("input"==o||"textarea"==o||"button"==o)return}t.preventDefault();var s=document.querySelectorAll(".gbtn[data-taborder]");if(!s||s.length<=0)return;if(!r){var a=R();return void(a&&(a.focus(),c(a,"focused")))}var l=R(r.getAttribute("data-taborder"));h(r,"focused"),l&&(l.focus(),c(l,"focused"))}39==n&&e.nextSlide(),37==n&&e.prevSlide(),27==n&&e.close()}})}var N=i((function t(i,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e(this,t),this.img=i,this.slide=n,this.onclose=o,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",(function(e){return r.dragStart(e)}),!1),this.img.addEventListener("mouseup",(function(e){return r.dragEnd(e)}),!1),this.img.addEventListener("mousemove",(function(e){return r.drag(e)}),!1),this.img.addEventListener("click",(function(e){return r.slide.classList.contains("dragging-nav")?(r.zoomOut(),!1):r.zoomedIn?void(r.zoomedIn&&!r.dragging&&r.zoomOut()):r.zoomIn()}),!1),this.img.setZoomEvents=!0}),[{key:"zoomIn",value:function(){var e=this.widowWidth();if(!(this.zoomedIn||e<=768)){var t=this.img;if(t.setAttribute("data-style",t.getAttribute("style")),t.style.maxWidth=t.naturalWidth+"px",t.style.maxHeight=t.naturalHeight+"px",t.naturalWidth>e){var i=e/2-t.naturalWidth/2;this.setTranslate(this.img.parentNode,i,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&"function"==typeof this.onclose&&this.onclose()}},{key:"dragStart",value:function(e){e.preventDefault(),this.zoomedIn?("touchstart"===e.type?(this.initialX=e.touches[0].clientX-this.xOffset,this.initialY=e.touches[0].clientY-this.yOffset):(this.initialX=e.clientX-this.xOffset,this.initialY=e.clientY-this.yOffset),e.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(e){var t=this;e.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout((function(){t.dragging=!1,t.img.isDragging=!1,t.img.classList.remove("dragging")}),100)}},{key:"drag",value:function(e){this.active&&(e.preventDefault(),"touchmove"===e.type?(this.currentX=e.touches[0].clientX-this.initialX,this.currentY=e.touches[0].clientY-this.initialY):(this.currentX=e.clientX-this.initialX,this.currentY=e.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(e){if(this.zoomedIn){var t=e.clientX-this.img.naturalWidth/2,i=e.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,t,i)}}},{key:"setTranslate",value:function(e,t,i){e.style.transform="translate3d("+t+"px, "+i+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),B=i((function t(){var i=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t);var r=n.dragEl,o=n.toleranceX,s=void 0===o?40:o,a=n.toleranceY,l=void 0===a?65:a,u=n.slide,c=void 0===u?null:u,h=n.instance,d=void 0===h?null:h;this.el=r,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=s,this.toleranceY=l,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=c,this.instance=d,this.el.addEventListener("mousedown",(function(e){return i.dragStart(e)}),!1),this.el.addEventListener("mouseup",(function(e){return i.dragEnd(e)}),!1),this.el.addEventListener("mousemove",(function(e){return i.drag(e)}),!1)}),[{key:"dragStart",value:function(e){if(this.slide.classList.contains("zoomed"))this.active=!1;else{"touchstart"===e.type?(this.initialX=e.touches[0].clientX-this.xOffset,this.initialY=e.touches[0].clientY-this.yOffset):(this.initialX=e.clientX-this.xOffset,this.initialY=e.clientY-this.yOffset);var t=e.target.nodeName.toLowerCase();e.target.classList.contains("nodrag")||p(e.target,".nodrag")||-1!==["input","select","textarea","button","a"].indexOf(t)?this.active=!1:(e.preventDefault(),(e.target===this.el||"img"!==t&&p(e.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=p(e.target,".ginner-container")))}}},{key:"dragEnd",value:function(e){var t=this;e&&e.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,"right"==this.doSlideChange&&this.instance.prevSlide(),"left"==this.doSlideChange&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout((function(){t.instance.preventOutsideClick=!1,t.toleranceReached=!1,t.lastDirection=null,t.dragging=!1,t.el.isDragging=!1,t.el.classList.remove("dragging"),t.slide.classList.remove("dragging-nav"),t.dragContainer.style.transform="",t.dragContainer.style.transition=""}),100)}},{key:"drag",value:function(e){if(this.active){e.preventDefault(),this.slide.classList.add("dragging-nav"),"touchmove"===e.type?(this.currentX=e.touches[0].clientX-this.initialX,this.currentY=e.touches[0].clientY-this.initialY):(this.currentX=e.clientX-this.initialX,this.currentY=e.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var t=Math.abs(this.currentX),i=Math.abs(this.currentY);if(t>0&&t>=Math.abs(this.currentY)&&(!this.lastDirection||"x"==this.lastDirection)){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var n=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&n&&(this.doSlideChange=n),this.instance.settings.dragAutoSnap&&n)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),"right"==n&&this.instance.prevSlide(),void("left"==n&&this.instance.nextSlide())}if(this.toleranceY>0&&i>0&&i>=t&&(!this.lastDirection||"y"==this.lastDirection)){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var r=this.shouldClose();return!this.instance.settings.dragAutoSnap&&r&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&r&&this.instance.close())}}}},{key:"shouldChange",value:function(){var e=!1;if(Math.abs(this.currentX)>=this.toleranceX){var t=this.currentX>0?"right":"left";("left"==t&&this.slide!==this.slide.parentNode.lastChild||"right"==t&&this.slide!==this.slide.parentNode.firstChild)&&(e=t)}return e}},{key:"shouldClose",value:function(){var e=!1;return Math.abs(this.currentY)>=this.toleranceY&&(e=!0),e}},{key:"setTranslate",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.style.transition=n?"all .2s ease":"",e.style.transform="translate3d(".concat(t,"px, ").concat(i,"px, 0)")}}]);function F(e,t,i,n){var r=e.querySelector(".gslide-media"),o=new Image,s="gSlideTitle_"+i,a="gSlideDesc_"+i;o.addEventListener("load",(function(){E(n)&&n()}),!1),o.src=t.href,""!=t.sizes&&""!=t.srcset&&(o.sizes=t.sizes,o.srcset=t.srcset),o.alt="",I(t.alt)||""===t.alt||(o.alt=t.alt),""!==t.title&&o.setAttribute("aria-labelledby",s),""!==t.description&&o.setAttribute("aria-describedby",a),t.hasOwnProperty("_hasCustomWidth")&&t._hasCustomWidth&&(o.style.width=t.width),t.hasOwnProperty("_hasCustomHeight")&&t._hasCustomHeight&&(o.style.height=t.height),r.insertBefore(o,r.firstChild)}function U(e,t,i,n){var r=this,o=e.querySelector(".ginner-container"),s="gvideo"+i,a=e.querySelector(".gslide-media"),l=this.getAllPlayers();c(o,"gvideo-container"),a.insertBefore(y('<div class="gvideo-wrapper"></div>'),a.firstChild);var u=e.querySelector(".gvideo-wrapper");T(this.settings.plyr.css,"Plyr");var h=t.href,d=null==t?void 0:t.videoProvider,p=!1;a.style.maxWidth=t.width,T(this.settings.plyr.js,"Plyr",(function(){if(!d&&h.match(/vimeo\.com\/([0-9]*)/)&&(d="vimeo"),!d&&(h.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||h.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||h.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||h.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/))&&(d="youtube"),"local"===d||!d){d="local";var o='<video id="'+s+'" ';o+='style="background:#000; max-width: '.concat(t.width,';" '),o+='preload="metadata" ',o+='x-webkit-airplay="allow" ',o+="playsinline ",o+="controls ",o+='class="gvideo-local">',o+='<source src="'.concat(h,'">'),p=y(o+="</video>")}var a=p||y('<div id="'.concat(s,'" data-plyr-provider="').concat(d,'" data-plyr-embed-id="').concat(h,'"></div>'));c(u,"".concat(d,"-video gvideo")),u.appendChild(a),u.setAttribute("data-id",s),u.setAttribute("data-index",i);var f=L(r.settings.plyr,"config")?r.settings.plyr.config:{},g=new Plyr("#"+s,f);g.on("ready",(function(e){l[s]=e.detail.plyr,E(n)&&n()})),w((function(){return e.querySelector("iframe")&&"true"==e.querySelector("iframe").dataset.ready}),(function(){r.resize(e)})),g.on("enterfullscreen",$),g.on("exitfullscreen",$)}))}function $(e){var t=p(e.target,".gslide-media");"enterfullscreen"===e.type&&c(t,"fullscreen"),"exitfullscreen"===e.type&&h(t,"fullscreen")}function H(e,t,i,n){var r,o=this,s=e.querySelector(".gslide-media"),a=!(!L(t,"href")||!t.href)&&t.href.split("#").pop().trim(),l=!(!L(t,"content")||!t.content)&&t.content;if(l&&(x(l)&&(r=y('<div class="ginlined-content">'.concat(l,"</div>"))),C(l))){"none"==l.style.display&&(l.style.display="block");var h=document.createElement("div");h.className="ginlined-content",h.appendChild(l),r=h}if(a){var d=document.getElementById(a);if(!d)return!1;var p=d.cloneNode(!0);p.style.height=t.height,p.style.maxWidth=t.width,c(p,"ginlined-content"),r=p}if(!r)return console.error("Unable to append inline slide content",t),!1;s.style.height=t.height,s.style.width=t.width,s.appendChild(r),this.events["inlineclose"+a]=u("click",{onElement:s.querySelectorAll(".gtrigger-close"),withCallback:function(e){e.preventDefault(),o.close()}}),E(n)&&n()}function j(e,t,i,n){var r=e.querySelector(".gslide-media"),o=function(e){var t=e.url,i=e.allow,n=e.callback,r=e.appendTo,o=document.createElement("iframe");return o.className="vimeo-video gvideo",o.src=t,o.style.width="100%",o.style.height="100%",i&&o.setAttribute("allow",i),o.onload=function(){o.onload=null,c(o,"node-ready"),E(n)&&n()},r&&r.appendChild(o),o}({url:t.href,callback:n});r.parentNode.style.maxWidth=t.width,r.parentNode.style.height=t.height,r.appendChild(o)}var z=i((function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},A(i)&&(this.defaults=s(this.defaults,i))}),[{key:"sourceType",value:function(e){var t=e;return null!==(e=e.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/)?"image":e.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||e.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||e.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||e.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/)||e.match(/vimeo\.com\/([0-9]*)/)||null!==e.match(/\.(mp4|ogg|webm|mov)/)?"video":null!==e.match(/\.(mp3|wav|wma|aac|ogg)/)?"audio":e.indexOf("#")>-1&&""!==t.split("#").pop().trim()?"inline":e.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(e,t){var i=this,n=s({descPosition:t.descPosition},this.defaults);if(A(e)&&!C(e)){L(e,"type")||(L(e,"content")&&e.content?e.type="inline":L(e,"href")&&(e.type=this.sourceType(e.href)));var r=s(n,e);return this.setSize(r,t),r}var o="",l=e.getAttribute("data-glightbox"),u=e.nodeName.toLowerCase();if("a"===u&&(o=e.href),"img"===u&&(o=e.src,n.alt=e.alt),n.href=o,a(n,(function(r,o){L(t,o)&&"width"!==o&&(n[o]=t[o]);var s=e.dataset[o];I(s)||(n[o]=i.sanitizeValue(s))})),n.content&&(n.type="inline"),!n.type&&o&&(n.type=this.sourceType(o)),I(l)){if(!n.title&&"a"==u){var c=e.title;I(c)||""===c||(n.title=c)}if(!n.title&&"img"==u){var h=e.alt;I(h)||""===h||(n.title=h)}}else{var d=[];a(n,(function(e,t){d.push(";\\s?"+t)})),d=d.join("\\s?:|"),""!==l.trim()&&a(n,(function(e,t){var r=l,o=new RegExp("s?"+t+"s?:s?(.*?)("+d+"s?:|$)"),s=r.match(o);if(s&&s.length&&s[1]){var a=s[1].trim().replace(/;\s*$/,"");n[t]=i.sanitizeValue(a)}}))}if(n.description&&"."===n.description.substring(0,1)){var p;try{p=document.querySelector(n.description).innerHTML}catch(e){if(!(e instanceof DOMException))throw e}p&&(n.description=p)}if(!n.description){var f=e.querySelector(".glightbox-desc");f&&(n.description=f.innerHTML)}return this.setSize(n,t,e),this.slideConfig=n,n}},{key:"setSize",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="video"==e.type?this.checkSize(t.videosWidth):this.checkSize(t.width),r=this.checkSize(t.height);return e.width=L(e,"width")&&""!==e.width?this.checkSize(e.width):n,e.height=L(e,"height")&&""!==e.height?this.checkSize(e.height):r,i&&"image"==e.type&&(e._hasCustomWidth=!!i.dataset.width,e._hasCustomHeight=!!i.dataset.height),e}},{key:"checkSize",value:function(e){return O(e)?"".concat(e,"px"):e}},{key:"sanitizeValue",value:function(e){return"true"!==e&&"false"!==e?e:"true"===e}}]),q=i((function t(i,n,r){e(this,t),this.element=i,this.instance=n,this.index=r}),[{key:"setContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(d(t,"loaded"))return!1;var n=this.instance.settings,r=this.slideConfig,o=S();E(n.beforeSlideLoad)&&n.beforeSlideLoad({index:this.index,slide:t,player:!1});var s=r.type,a=r.descPosition,l=t.querySelector(".gslide-media"),u=t.querySelector(".gslide-title"),h=t.querySelector(".gslide-desc"),p=t.querySelector(".gdesc-inner"),f=i,g="gSlideTitle_"+this.index,m="gSlideDesc_"+this.index;if(E(n.afterSlideLoad)&&(f=function(){E(i)&&i(),n.afterSlideLoad({index:e.index,slide:t,player:e.instance.getSlidePlayerInstance(e.index)})}),""==r.title&&""==r.description?p&&p.parentNode.parentNode.removeChild(p.parentNode):(u&&""!==r.title?(u.id=g,u.innerHTML=r.title):u.parentNode.removeChild(u),h&&""!==r.description?(h.id=m,o&&n.moreLength>0?(r.smallDescription=this.slideShortDesc(r.description,n.moreLength,n.moreText),h.innerHTML=r.smallDescription,this.descriptionEvents(h,r)):h.innerHTML=r.description):h.parentNode.removeChild(h),c(l.parentNode,"desc-".concat(a)),c(p.parentNode,"description-".concat(a))),c(l,"gslide-".concat(s)),c(t,"loaded"),"video"!==s){if("external"!==s)return"inline"===s?(H.apply(this.instance,[t,r,this.index,f]),void(r.draggable&&new B({dragEl:t.querySelector(".gslide-inline"),toleranceX:n.dragToleranceX,toleranceY:n.dragToleranceY,slide:t,instance:this.instance}))):void("image"!==s?E(f)&&f():F(t,r,this.index,(function(){var i=t.querySelector("img");r.draggable&&new B({dragEl:i,toleranceX:n.dragToleranceX,toleranceY:n.dragToleranceY,slide:t,instance:e.instance}),r.zoomable&&i.naturalWidth>i.offsetWidth&&(c(i,"zoomable"),new N(i,t,(function(){e.instance.resize()}))),E(f)&&f()})));j.apply(this,[t,r,this.index,f])}else U.apply(this.instance,[t,r,this.index,f])}},{key:"slideShortDesc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("div");n.innerHTML=e;var r=i;if((e=n.innerText.trim()).length<=t)return e;var o=e.substr(0,t-1);return r?(n=null,o+'... <a href="#" class="desc-more">'+i+"</a>"):o}},{key:"descriptionEvents",value:function(e,t){var i=this,n=e.querySelector(".desc-more");if(!n)return!1;u("click",{onElement:n,withCallback:function(e,n){e.preventDefault();var r=document.body,o=p(n,".gslide-desc");if(!o)return!1;o.innerHTML=t.description,c(r,"gdesc-open");var s=u("click",{onElement:[r,p(o,".gslide-description")],withCallback:function(e,n){"a"!==e.target.nodeName.toLowerCase()&&(h(r,"gdesc-open"),c(r,"gdesc-closed"),o.innerHTML=t.smallDescription,i.descriptionEvents(o,t),setTimeout((function(){h(r,"gdesc-closed")}),400),s.destroy())}})}})}},{key:"create",value:function(){return y(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){C(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var e=new z(this.instance.settings.slideExtraAttributes);return this.slideConfig=e.parseConfig(this.element,this.instance.settings),this.slideConfig}}]);function V(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function W(e,t){var i=function(e,t){var i=V(e)*V(t);if(0===i)return 0;var n=function(e,t){return e.x*t.x+e.y*t.y}(e,t)/i;return n>1&&(n=1),Math.acos(n)}(e,t);return function(e,t){return e.x*t.y-t.x*e.y}(e,t)>0&&(i*=-1),180*i/Math.PI}var G=i((function t(i){e(this,t),this.handlers=[],this.el=i}),[{key:"add",value:function(e){this.handlers.push(e)}},{key:"del",value:function(e){e||(this.handlers=[]);for(var t=this.handlers.length;t>=0;t--)this.handlers[t]===e&&this.handlers.splice(t,1)}},{key:"dispatch",value:function(){for(var e=0,t=this.handlers.length;e<t;e++){var i=this.handlers[e];"function"==typeof i&&i.apply(this.el,arguments)}}}]);function Y(e,t){var i=new G(e);return i.add(t),i}var X=i((function t(i,n){e(this,t),this.element="string"==typeof i?document.querySelector(i):i,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var r=function(){};this.rotate=Y(this.element,n.rotate||r),this.touchStart=Y(this.element,n.touchStart||r),this.multipointStart=Y(this.element,n.multipointStart||r),this.multipointEnd=Y(this.element,n.multipointEnd||r),this.pinch=Y(this.element,n.pinch||r),this.swipe=Y(this.element,n.swipe||r),this.tap=Y(this.element,n.tap||r),this.doubleTap=Y(this.element,n.doubleTap||r),this.longTap=Y(this.element,n.longTap||r),this.singleTap=Y(this.element,n.singleTap||r),this.pressMove=Y(this.element,n.pressMove||r),this.twoFingerPressMove=Y(this.element,n.twoFingerPressMove||r),this.touchMove=Y(this.element,n.touchMove||r),this.touchEnd=Y(this.element,n.touchEnd||r),this.touchCancel=Y(this.element,n.touchCancel||r),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}}),[{key:"start",value:function(e){if(e.touches)if(e.target&&e.target.nodeName&&["a","button","input"].indexOf(e.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",e.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=e.touches[0].pageX,this.y1=e.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(e,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var t=this.preV;if(e.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var i={x:e.touches[1].pageX-this.x1,y:e.touches[1].pageY-this.y1};t.x=i.x,t.y=i.y,this.pinchStartLen=V(t),this.multipointStart.dispatch(e,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(e,this.element),this._preventTap=!0}.bind(this),750)}}},{key:"move",value:function(e){if(e.touches){var t=this.preV,i=e.touches.length,n=e.touches[0].pageX,r=e.touches[0].pageY;if(this.isDoubleTap=!1,i>1){var o=e.touches[1].pageX,s=e.touches[1].pageY,a={x:e.touches[1].pageX-n,y:e.touches[1].pageY-r};null!==t.x&&(this.pinchStartLen>0&&(e.zoom=V(a)/this.pinchStartLen,this.pinch.dispatch(e,this.element)),e.angle=W(a,t),this.rotate.dispatch(e,this.element)),t.x=a.x,t.y=a.y,null!==this.x2&&null!==this.sx2?(e.deltaX=(n-this.x2+o-this.sx2)/2,e.deltaY=(r-this.y2+s-this.sy2)/2):(e.deltaX=0,e.deltaY=0),this.twoFingerPressMove.dispatch(e,this.element),this.sx2=o,this.sy2=s}else{if(null!==this.x2){e.deltaX=n-this.x2,e.deltaY=r-this.y2;var l=Math.abs(this.x1-this.x2),u=Math.abs(this.y1-this.y2);(l>10||u>10)&&(this._preventTap=!0)}else e.deltaX=0,e.deltaY=0;this.pressMove.dispatch(e,this.element)}this.touchMove.dispatch(e,this.element),this._cancelLongTap(),this.x2=n,this.y2=r,i>1&&e.preventDefault()}}},{key:"end",value:function(e){if(e.changedTouches){this._cancelLongTap();var t=this;e.touches.length<2&&(this.multipointEnd.dispatch(e,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(e.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout((function(){t.swipe.dispatch(e,t.element)}),0)):(this.tapTimeout=setTimeout((function(){t._preventTap||t.tap.dispatch(e,t.element),t.isDoubleTap&&(t.doubleTap.dispatch(e,t.element),t.isDoubleTap=!1)}),0),t.isDoubleTap||(t.singleTapTimeout=setTimeout((function(){t.singleTap.dispatch(e,t.element)}),250))),this.touchEnd.dispatch(e,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(e){this.cancelAll(),this.touchCancel.dispatch(e,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(e,t,i,n){return Math.abs(e-t)>=Math.abs(i-n)?e-t>0?"Left":"Right":i-n>0?"Up":"Down"}},{key:"on",value:function(e,t){this[e]&&this[e].add(t)}},{key:"off",value:function(e,t){this[e]&&this[e].del(t)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]);function K(e){var t=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]}(),i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=d(e,"gslide-media")?e:e.querySelector(".gslide-media"),r=p(n,".ginner-container"),o=e.querySelector(".gslide-description");i>769&&(n=r),c(n,"greset"),g(n,"translate3d(0, 0, 0)"),u(t,{onElement:n,once:!0,withCallback:function(e,t){h(n,"greset")}}),n.style.opacity="",o&&(o.style.opacity="")}function Q(e){if(e.events.hasOwnProperty("touch"))return!1;var t,i,n,r=b(),o=r.width,s=r.height,a=!1,l=null,u=null,f=null,m=!1,v=1,y=1,_=!1,w=!1,T=null,S=null,E=null,x=null,C=0,k=0,P=!1,A=!1,I={},L={},D=0,O=0,R=document.getElementById("glightbox-slider"),M=document.querySelector(".goverlay"),N=new X(R,{touchStart:function(t){if(a=!0,(d(t.targetTouches[0].target,"ginner-container")||p(t.targetTouches[0].target,".gslide-desc")||"a"==t.targetTouches[0].target.nodeName.toLowerCase())&&(a=!1),p(t.targetTouches[0].target,".gslide-inline")&&!d(t.targetTouches[0].target.parentNode,"gslide-inline")&&(a=!1),a){if(L=t.targetTouches[0],I.pageX=t.targetTouches[0].pageX,I.pageY=t.targetTouches[0].pageY,D=t.targetTouches[0].clientX,O=t.targetTouches[0].clientY,l=e.activeSlide,u=l.querySelector(".gslide-media"),n=l.querySelector(".gslide-inline"),f=null,d(u,"gslide-image")&&(f=u.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(u=l.querySelector(".ginner-container")),h(M,"greset"),t.pageX>20&&t.pageX<window.innerWidth-20)return;t.preventDefault()}},touchMove:function(r){if(a&&(L=r.targetTouches[0],!_&&!w)){if(n&&n.offsetHeight>s){var l=I.pageX-L.pageX;if(Math.abs(l)<=13)return!1}m=!0;var c,h=r.targetTouches[0].clientX,d=r.targetTouches[0].clientY,p=D-h,v=O-d;if(Math.abs(p)>Math.abs(v)?(P=!1,A=!0):(A=!1,P=!0),t=L.pageX-I.pageX,C=100*t/o,i=L.pageY-I.pageY,k=100*i/s,P&&f&&(c=1-Math.abs(i)/s,M.style.opacity=c,e.settings.touchFollowAxis&&(C=0)),A&&(c=1-Math.abs(t)/o,u.style.opacity=c,e.settings.touchFollowAxis&&(k=0)),!f)return g(u,"translate3d(".concat(C,"%, 0, 0)"));g(u,"translate3d(".concat(C,"%, ").concat(k,"%, 0)"))}},touchEnd:function(){if(a){if(m=!1,w||_)return E=T,void(x=S);var t=Math.abs(parseInt(k)),i=Math.abs(parseInt(C));if(!(t>29&&f))return t<29&&i<25?(c(M,"greset"),M.style.opacity=1,K(u)):void 0;e.close()}},multipointEnd:function(){setTimeout((function(){_=!1}),50)},multipointStart:function(){_=!0,v=y||1},pinch:function(e){if(!f||m)return!1;_=!0,f.scaleX=f.scaleY=v*e.zoom;var t=v*e.zoom;if(w=!0,t<=1)return w=!1,t=1,x=null,E=null,T=null,S=null,void f.setAttribute("style","");t>4.5&&(t=4.5),f.style.transform="scale3d(".concat(t,", ").concat(t,", 1)"),y=t},pressMove:function(e){if(w&&!_){var t=L.pageX-I.pageX,i=L.pageY-I.pageY;E&&(t+=E),x&&(i+=x),T=t,S=i;var n="translate3d(".concat(t,"px, ").concat(i,"px, 0)");y&&(n+=" scale3d(".concat(y,", ").concat(y,", 1)")),g(f,n)}},swipe:function(t){if(!w)if(_)_=!1;else{if("Left"==t.direction){if(e.index==e.elements.length-1)return K(u);e.nextSlide()}if("Right"==t.direction){if(0==e.index)return K(u);e.prevSlide()}}}});e.events.touch=N}var Z=S(),J=null!==S()||void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,ee=document.getElementsByTagName("html")[0],te={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:'<div class="gslide">\n    <div class="gslide-inner-content">\n        <div class="ginner-container">\n            <div class="gslide-media">\n            </div>\n            <div class="gslide-description">\n                <div class="gdesc-inner">\n                    <h4 class="gslide-title"></h4>\n                    <div class="gslide-desc"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>',lightboxHTML:'<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">\n    <div class="gloader visible"></div>\n    <div class="goverlay"></div>\n    <div class="gcontainer">\n    <div id="glightbox-slider" class="gslider"></div>\n    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>\n    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>\n    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>\n</div>\n</div>'},ie=i((function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.customOptions=i,this.settings=s(te,i),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1}),[{key:"init",value:function(){var e=this,t=this.getSelector();t&&(this.baseEvents=u("click",{onElement:t,withCallback:function(t,i){t.preventDefault(),e.open(i)}})),this.elements=this.getElements()}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0===this.elements.length)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var i=O(t)?t:this.settings.startAt;if(C(e)){var n=e.getAttribute("data-gallery");n&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,n)),I(i)&&(i=this.getElementIndex(e))<0&&(i=0)}O(i)||(i=0),this.build(),f(this.overlay,"none"===this.settings.openEffect?"none":this.settings.cssEfects.fade.in);var r=document.body,o=window.innerWidth-document.documentElement.clientWidth;if(o>0){var s=document.createElement("style");s.type="text/css",s.className="gcss-styles",s.innerText=".gscrollbar-fixer {margin-right: ".concat(o,"px}"),document.head.appendChild(s),c(r,"gscrollbar-fixer")}c(r,"glightbox-open"),c(ee,"glightbox-open"),Z&&(c(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(i,!0),1===this.elements.length?(c(this.prevButton,"glightbox-button-hidden"),c(this.nextButton,"glightbox-button-hidden")):(h(this.prevButton,"glightbox-button-hidden"),h(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),E(this.settings.onOpen)&&this.settings.onOpen(),J&&this.settings.touchNavigation&&Q(this),this.settings.keyboardNavigation&&M(this)}},{key:"openAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.open(null,e)}},{key:"showSlide",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m(this.loader),this.index=parseInt(t);var n=this.slidesContainer.querySelector(".current");n&&h(n,"current"),this.slideAnimateOut();var r=this.slidesContainer.querySelectorAll(".gslide")[t];if(d(r,"loaded"))this.slideAnimateIn(r,i),v(this.loader);else{m(this.loader);var o=this.elements[t],s={index:this.index,slide:r,slideNode:r,slideConfig:o.slideConfig,slideIndex:this.index,trigger:o.node,player:null};this.trigger("slide_before_load",s),o.instance.setContent(r,(function(){v(e.loader),e.resize(),e.slideAnimateIn(r,i),e.trigger("slide_after_load",s)}))}this.slideDescription=r.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&d(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(t+1),this.preloadSlide(t-1)),this.updateNavigationClasses(),this.activeSlide=r}},{key:"preloadSlide",value:function(e){var t=this;if(e<0||e>this.elements.length-1)return!1;if(I(this.elements[e]))return!1;var i=this.slidesContainer.querySelectorAll(".gslide")[e];if(d(i,"loaded"))return!1;var n=this.elements[e],r=n.type,o={index:e,slide:i,slideNode:i,slideConfig:n.slideConfig,slideIndex:e,trigger:n.node,player:null};this.trigger("slide_before_load",o),"video"===r||"external"===r?setTimeout((function(){n.instance.setContent(i,(function(){t.trigger("slide_after_load",o)}))}),200):n.instance.setContent(i,(function(){t.trigger("slide_after_load",o)}))}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(e<0||e>this.elements.length-1))return!1;e<0?e=this.elements.length-1:e>=this.elements.length&&(e=0),this.showSlide(e)}},{key:"insertSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t<0&&(t=this.elements.length);var i=new q(e,this,t),n=i.getConfig(),r=s({},n),o=i.create(),a=this.elements.length-1;r.index=t,r.node=!1,r.instance=i,r.slideConfig=n,this.elements.splice(t,0,r);var l=null,u=null;if(this.slidesContainer){if(t>a)this.slidesContainer.appendChild(o);else{var c=this.slidesContainer.querySelectorAll(".gslide")[t];this.slidesContainer.insertBefore(o,c)}(this.settings.preload&&0==this.index&&0==t||this.index-1==t||this.index+1==t)&&this.preloadSlide(t),0===this.index&&0===t&&(this.index=1),this.updateNavigationClasses(),l=this.slidesContainer.querySelectorAll(".gslide")[t],u=this.getSlidePlayerInstance(t),r.slideNode=l}this.trigger("slide_inserted",{index:t,slide:l,slideNode:l,slideConfig:n,slideIndex:t,trigger:null,player:u}),E(this.settings.slideInserted)&&this.settings.slideInserted({index:t,slide:l,player:u})}},{key:"removeSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e<0||e>this.elements.length-1)return!1;var t=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[e];t&&(this.getActiveSlideIndex()==e&&(e==this.elements.length-1?this.prevSlide():this.nextSlide()),t.parentNode.removeChild(t)),this.elements.splice(e,1),this.trigger("slide_removed",e),E(this.settings.slideRemoved)&&this.settings.slideRemoved(e)}},{key:"slideAnimateIn",value:function(e,t){var i=this,n=e.querySelector(".gslide-media"),r=e.querySelector(".gslide-description"),o={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:I(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:I(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},s={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(n.offsetWidth>0&&r&&(v(r),r.style.display=""),h(e,this.effectsClasses),t)f(e,this.settings.cssEfects[this.settings.openEffect].in,(function(){i.settings.autoplayVideos&&i.slidePlayerPlay(e),i.trigger("slide_changed",{prev:o,current:s}),E(i.settings.afterSlideChange)&&i.settings.afterSlideChange.apply(i,[o,s])}));else{var a=this.settings.slideEffect,l="none"!==a?this.settings.cssEfects[a].in:a;this.prevActiveSlideIndex>this.index&&"slide"==this.settings.slideEffect&&(l=this.settings.cssEfects.slideBack.in),f(e,l,(function(){i.settings.autoplayVideos&&i.slidePlayerPlay(e),i.trigger("slide_changed",{prev:o,current:s}),E(i.settings.afterSlideChange)&&i.settings.afterSlideChange.apply(i,[o,s])}))}setTimeout((function(){i.resize(e)}),100),c(e,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var e=this.prevActiveSlide;h(e,this.effectsClasses),c(e,"prev");var t=this.settings.slideEffect,i="none"!==t?this.settings.cssEfects[t].out:t;this.slidePlayerPause(e),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:I(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:I(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),E(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&"slide"==this.settings.slideEffect&&(i=this.settings.cssEfects.slideBack.out),f(e,i,(function(){var t=e.querySelector(".ginner-container"),i=e.querySelector(".gslide-media"),n=e.querySelector(".gslide-description");t.style.transform="",i.style.transform="",h(i,"greset"),i.style.opacity="",n&&(n.style.opacity=""),h(e,"prev")}))}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(e){var t="gvideo"+e,i=this.getAllPlayers();return!(!L(i,t)||!i[t])&&i[t]}},{key:"stopSlideVideo",value:function(e){if(C(e)){var t=e.querySelector(".gvideo-wrapper");t&&(e=t.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var i=this.getSlidePlayerInstance(e);i&&i.playing&&i.pause()}},{key:"slidePlayerPause",value:function(e){if(C(e)){var t=e.querySelector(".gvideo-wrapper");t&&(e=t.getAttribute("data-index"))}var i=this.getSlidePlayerInstance(e);i&&i.playing&&i.pause()}},{key:"playSlideVideo",value:function(e){if(C(e)){var t=e.querySelector(".gvideo-wrapper");t&&(e=t.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var i=this.getSlidePlayerInstance(e);i&&!i.playing&&i.play()}},{key:"slidePlayerPlay",value:function(e){var t;if(!Z||null!==(t=this.settings.plyr.config)&&void 0!==t&&t.muted){if(C(e)){var i=e.querySelector(".gvideo-wrapper");i&&(e=i.getAttribute("data-index"))}var n=this.getSlidePlayerInstance(e);n&&!n.playing&&(n.play(),this.settings.autofocusVideos&&n.elements.container.focus())}}},{key:"setElements",value:function(e){var t=this;this.settings.elements=!1;var i=[];e&&e.length&&a(e,(function(e,n){var r=new q(e,t,n),o=r.getConfig(),a=s({},o);a.slideConfig=o,a.instance=r,a.index=n,i.push(a)})),this.elements=i,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(a(this.elements,(function(){var e=y(t.settings.slideHTML);t.slidesContainer.appendChild(e)})),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(e){var t=!1;return a(this.elements,(function(i,n){if(L(i,"node")&&i.node==e)return t=n,!0})),t}},{key:"getElements",value:function(){var e=this,t=[];this.elements=this.elements?this.elements:[],!I(this.settings.elements)&&k(this.settings.elements)&&this.settings.elements.length&&a(this.settings.elements,(function(i,n){var r=new q(i,e,n),o=r.getConfig(),a=s({},o);a.node=!1,a.index=n,a.instance=r,a.slideConfig=o,t.push(a)}));var i=!1;return this.getSelector()&&(i=document.querySelectorAll(this.getSelector())),i?(a(i,(function(i,n){var r=new q(i,e,n),o=r.getConfig(),a=s({},o);a.node=i,a.index=n,a.instance=r,a.slideConfig=o,a.gallery=i.getAttribute("data-gallery"),t.push(a)})),t):t}},{key:"getGalleryElements",value:function(e,t){return e.filter((function(e){return e.gallery==t}))}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&"data-"==this.settings.selector.substring(0,5)?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var e=[];for(var t in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(t)){var i=this.settings.cssEfects[t];e.push("g".concat(i.in)),e.push("g".concat(i.out))}return e.join(" ")}},{key:"build",value:function(){var e=this;if(this.built)return!1;var t=document.body.childNodes,i=[];a(t,(function(e){e.parentNode==document.body&&"#"!==e.nodeName.charAt(0)&&e.hasAttribute&&!e.hasAttribute("aria-hidden")&&(i.push(e),e.setAttribute("aria-hidden","true"))}));var n=L(this.settings.svg,"next")?this.settings.svg.next:"",r=L(this.settings.svg,"prev")?this.settings.svg.prev:"",o=L(this.settings.svg,"close")?this.settings.svg.close:"",s=this.settings.lightboxHTML;s=y(s=(s=(s=s.replace(/{nextSVG}/g,n)).replace(/{prevSVG}/g,r)).replace(/{closeSVG}/g,o)),document.body.appendChild(s);var l=document.getElementById("glightbox-body");this.modal=l;var h=l.querySelector(".gclose");this.prevButton=l.querySelector(".gprev"),this.nextButton=l.querySelector(".gnext"),this.overlay=l.querySelector(".goverlay"),this.loader=l.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=i,this.events={},c(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&h&&(this.events.close=u("click",{onElement:h,withCallback:function(t,i){t.preventDefault(),e.close()}})),h&&!this.settings.closeButton&&h.parentNode.removeChild(h),this.nextButton&&(this.events.next=u("click",{onElement:this.nextButton,withCallback:function(t,i){t.preventDefault(),e.nextSlide()}})),this.prevButton&&(this.events.prev=u("click",{onElement:this.prevButton,withCallback:function(t,i){t.preventDefault(),e.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=u("click",{onElement:l,withCallback:function(t,i){e.preventOutsideClick||d(document.body,"glightbox-mobile")||p(t.target,".ginner-container")||p(t.target,".gbtn")||d(t.target,"gnext")||d(t.target,"gprev")||e.close()}})),a(this.elements,(function(t,i){e.slidesContainer.appendChild(t.instance.create()),t.slideNode=e.slidesContainer.querySelectorAll(".gslide")[i]})),J&&c(document.body,"glightbox-touch"),this.events.resize=u("resize",{onElement:window,withCallback:function(){e.resize()}}),this.built=!0}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((e=e||this.activeSlide)&&!d(e,"zoomed")){var t=b(),i=e.querySelector(".gvideo-wrapper"),n=e.querySelector(".gslide-image"),r=this.slideDescription,o=t.width,s=t.height;if(o<=768?c(document.body,"glightbox-mobile"):h(document.body,"glightbox-mobile"),i||n){var a=!1;if(r&&(d(r,"description-bottom")||d(r,"description-top"))&&!d(r,"gabsolute")&&(a=!0),n)if(o<=768)n.querySelector("img");else if(a){var l,u,p=r.offsetHeight,f=n.querySelector("img"),g=null===(l=this.elements[this.index])||void 0===l?void 0:l.node,m="100vh";g&&(m=null!==(u=g.getAttribute("data-height"))&&void 0!==u?u:m),f.setAttribute("style","max-height: calc(".concat(m," - ").concat(p,"px)")),r.setAttribute("style","max-width: ".concat(f.offsetWidth,"px;"))}if(i){var v=L(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!v){var y=i.clientWidth,_=i.clientHeight,w=y/_;v="".concat(y/w,":").concat(_/w)}var T=v.split(":"),S=this.settings.videosWidth,E=this.settings.videosWidth,x=(E=O(S)||-1!==S.indexOf("px")?parseInt(S):-1!==S.indexOf("vw")?o*parseInt(S)/100:-1!==S.indexOf("vh")?s*parseInt(S)/100:-1!==S.indexOf("%")?o*parseInt(S)/100:parseInt(i.clientWidth))/(parseInt(T[0])/parseInt(T[1]));if(x=Math.floor(x),a&&(s-=r.offsetHeight),E>o||x>s||s<x&&o>E){var C=i.offsetWidth,k=i.offsetHeight,P=s/k,A={width:C*P,height:k*P};i.parentNode.setAttribute("style","max-width: ".concat(A.width,"px")),a&&r.setAttribute("style","max-width: ".concat(A.width,"px;"))}else i.parentNode.style.maxWidth="".concat(S),a&&r.setAttribute("style","max-width: ".concat(S,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var e=this.loop();h(this.nextButton,"disabled"),h(this.prevButton,"disabled"),0==this.index&&this.elements.length-1==0?(c(this.prevButton,"disabled"),c(this.nextButton,"disabled")):0!==this.index||e?this.index!==this.elements.length-1||e||c(this.nextButton,"disabled"):c(this.prevButton,"disabled")}},{key:"loop",value:function(){var e=L(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return e=L(this.settings,"loop")?this.settings.loop:e}},{key:"close",value:function(){var e=this;if(!this.lightboxOpen){if(this.events){for(var t in this.events)this.events.hasOwnProperty(t)&&this.events[t].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&a(this.bodyHiddenChildElms,(function(e){e.removeAttribute("aria-hidden")})),c(this.modal,"glightbox-closing"),f(this.overlay,"none"==this.settings.openEffect?"none":this.settings.cssEfects.fade.out),f(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,(function(){if(e.activeSlide=null,e.prevActiveSlideIndex=null,e.prevActiveSlide=null,e.built=!1,e.events){for(var t in e.events)e.events.hasOwnProperty(t)&&e.events[t].destroy();e.events=null}var i=document.body;h(ee,"glightbox-open"),h(i,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),e.modal.parentNode.removeChild(e.modal),e.trigger("close"),E(e.settings.onClose)&&e.settings.onClose();var n=document.querySelector(".gcss-styles");n&&n.parentNode.removeChild(n),e.lightboxOpen=!1,e.closing=null}))}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!E(t))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:e,once:i,callback:t})}},{key:"once",value:function(e,t){this.on(e,t,!0)}},{key:"trigger",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];a(this.apiEvents,(function(t,r){var o=t.evt,s=t.once,a=t.callback;o==e&&(a(i),s&&n.push(r))})),n.length&&a(n,(function(e){return t.apiEvents.splice(e,1)}))}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.3.1"}}]);return function(){var e=new ie(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return e.init(),e}}()},6240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){return void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?"WebkitTransition":"transition"}},6311:(e,t,i)=>{var n=i(9697),r=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function o(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function s(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function a(){this.values=r(null)}function l(e,t,i,n){var r=n?e.split(n):[e];for(var o in r)if("string"==typeof r[o]){var s=r[o].split(i);if(2===s.length)t(s[0].trim(),s[1].trim())}}function u(e,t,i){var n=e;function r(){var t=s(e);if(null===t)throw new o(o.Errors.BadTimeStamp,"Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function u(){e=e.replace(/^\s+/,"")}if(u(),t.startTime=r(),u(),"--\x3e"!==e.substr(0,3))throw new o(o.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),u(),t.endTime=r(),u(),function(e,t){var n=new a;l(e,(function(e,t){switch(e){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===t){n.set(e,i[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),s=o[0];n.integer(e,s),n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start","center","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");try{t.line=n.get("line","auto")}catch(e){}t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100);try{t.align=n.get("align","center")}catch(e){t.align=n.get("align","middle")}try{t.position=n.get("position","auto")}catch(e){t.position=n.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=n.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}o.prototype=r(Error.prototype),o.prototype.constructor=o,o.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var c=n.createElement&&n.createElement("textarea"),h={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},d={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function g(e,t){function i(){if(!t)return null;var e,i=t.match(/^([^<]*)(<[^>]*>?)?/);return e=i[1]?i[1]:i[2],t=t.substr(e.length),e}function n(e,t){return!f[t.localName]||f[t.localName]===e.localName}function r(t,i){var n=h[t];if(!n)return null;var r=e.document.createElement(n),o=p[t];return o&&i&&(r[o]=i.trim()),r}for(var o,a,l=e.document.createElement("div"),u=l,g=[];null!==(o=i());)if("<"!==o[0])u.appendChild(e.document.createTextNode((a=o,c.innerHTML=a,a=c.textContent,c.textContent="",a)));else{if("/"===o[1]){g.length&&g[g.length-1]===o.substr(2).replace(">","")&&(g.pop(),u=u.parentNode);continue}var m,v=s(o.substr(1,o.length-2));if(v){m=e.document.createProcessingInstruction("timestamp",v),u.appendChild(m);continue}var y=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(m=r(y[1],y[3])))continue;if(!n(u,m))continue;if(y[2]){var b=y[2].split(".");b.forEach((function(e){var t=/^bg_/.test(e),i=t?e.slice(3):e;if(d.hasOwnProperty(i)){var n=t?"background-color":"color",r=d[i];m.style[n]=r}})),m.className=b.join(" ")}g.push(y[1]),u.appendChild(m),u=m}return l}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(e){for(var t=0;t<m.length;t++){var i=m[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function y(e){var t=[],i="";if(!e||!e.childNodes)return"ltr";function n(e,t){for(var i=t.childNodes.length-1;i>=0;i--)e.push(t.childNodes[i])}function r(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):i}return"ruby"===t.tagName?r(e):t.childNodes?(n(e,t),r(e)):void 0}for(n(t,e);i=r(t);)for(var o=0;o<i.length;o++)if(v(i.charCodeAt(o)))return"rtl";return"ltr"}function b(){}function _(e,t,i){b.call(this),this.cue=t,this.cueDiv=g(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:y(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":case"line-left":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":case"line-right":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function w(e){var t,i,n,r;if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function T(e,t,i,n){var r=new w(t),o=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}(o),a=[];if(o.snapToLines){var l;switch(o.vertical){case"":a=["+y","-y"],l="height";break;case"rl":a=["+x","-x"],l="width";break;case"lr":a=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(s),h=i[l]+u,d=a[0];Math.abs(c)>h&&(c=c<0?-1:1,c*=Math.ceil(h/u)*u),s<0&&(c+=""===o.vertical?i.height:i.width,a=a.reverse()),r.move(d,c)}else{var p=r.lineHeight/i.height*100;switch(o.lineAlign){case"center":s-=p/2;break;case"end":s-=p}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}a=["+y","-x","+x","-y"],r=new w(t)}var f=function(e,t){for(var r,o=new w(e),s=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(i,t[a])||e.within(i)&&e.overlapsAny(n);)e.move(t[a]);if(e.within(i))return e;var l=e.intersectPercentage(i);s>l&&(r=new w(e),s=l),e=new w(o)}return r||o}(r,a);t.move(f.toCSSCompatValues(i))}function S(){}b.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=r(b.prototype),_.prototype.constructor=_,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},S.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},S.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null};S.processCues=function(e,t,i){if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",i.appendChild(n),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],o=w.getSimpleBoxPosition(n),s={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var i,a,l=0;l<t.length;l++)a=t[l],i=new _(e,a,s),n.appendChild(i.div),T(0,i,o,r),a.displayState=i.div,r.push(w.getSimpleBoxPosition(i))}()}else for(var a=0;a<t.length;a++)n.appendChild(t[a].displayState)},S.Parser=function(e,t,i){i||(i=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},S.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof o))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function i(){for(var e=t.buffer,i=0;i<e.length&&"\r"!==e[i]&&"\n"!==e[i];)++i;var n=e.substr(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.substr(i),n}function n(e){e.match(/X-TIMESTAMP-MAP/)?l(e,(function(e,i){if("X-TIMESTAMP-MAP"===e)!function(e){var i=new a;l(e,(function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",s(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}(i)}),/=/):l(e,(function(e,i){if("Region"===e)!function(e){var i=new a;if(l(e,(function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var r=new a;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;i.set(e+"X",r.get("x")),i.set(e+"Y",r.get("y"));break;case"scroll":i.alt(e,t,["up"])}}),/=/,/\s/),i.has("id")){var n=new(t.vttjs.VTTRegion||t.window.VTTRegion);n.width=i.get("width",100),n.lines=i.get("lines",3),n.regionAnchorX=i.get("regionanchorX",0),n.regionAnchorY=i.get("regionanchorY",100),n.viewportAnchorX=i.get("viewportanchorX",0),n.viewportAnchorY=i.get("viewportanchorY",100),n.scroll=i.get("scroll",""),t.onregion&&t.onregion(n),t.regionList.push({id:i.get("id"),region:n})}}(i)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var c=(r=i()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new o(o.Errors.BadSignature);t.state="HEADER"}for(var h=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(h?h=!1:r=i(),t.state){case"HEADER":/:/.test(r)?n(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{u(r,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var d=-1!==r.indexOf("--\x3e");if(!r||d&&(h=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new o(o.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=S},6545:(e,t)=>{function i(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return s[e];var i,o=String(e);return(i=n[o.toLowerCase()])?i:(i=r[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}i.isEventKey=function(e,t){if(e&&"object"==typeof e){var i=e.which||e.keyCode||e.charCode;if(null==i)return!1;if("string"==typeof t){var o;if(o=n[t.toLowerCase()])return o===i;if(o=r[t.toLowerCase()])return o===i}else if("number"==typeof t)return t===i;return!1}};var n=(t=e.exports=i).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)n[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)n[o-48]=o;for(o=1;o<13;o++)n["f"+o]=o+111;for(o=0;o<10;o++)n["numpad "+o]=o+96;var s=t.names=t.title={};for(o in n)s[n[o]]=o;for(var a in r)n[a]=r[a]},6559:(e,t,i)=>{"use strict";var n=i(4582).freeze;t.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=n({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES},6627:(e,t,i)=>{"use strict";var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2422);var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.name="GaPlugin";return i.options=r({},{gaMeasurementId:null},e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"mount",value:function(){var e=this;this.swup.on("contentReplaced",(function(t){if("function"==typeof gtag){var i=document.title,n=window.location.pathname+window.location.search,r=e.options.gaMeasurementId;if(!r)throw new Error("gaMeasurementId option is required for gtag.");window.gtag("config",r,{page_title:i,page_path:n}),e.swup.log("GTAG pageview (url '"+n+"').")}else if("function"==typeof window.ga){var o=document.title,s=window.location.pathname+window.location.search;window.ga("set","title",o),window.ga("set","page",s),window.ga("send","pageview"),e.swup.log("GA pageview (url '"+s+"').")}else console.warn("window.gtag and window.ga don't exists.")}))}}]),t}(((n=s)&&n.__esModule?n:{default:n}).default);t.A=a},6712:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSwupPlugin=!0}return i(e,[{key:"mount",value:function(){}},{key:"unmount",value:function(){}}]),e}();t.default=n},6902:(e,t,i)=>{"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=a(i(2422)),s=a(i(5302));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.name="JsPlugin",i.currentAnimation=null,i.getAnimationPromises=function(e){var t=i.getAnimationIndex(e);return[i.createAnimationPromise(t,e)]},i.createAnimationPromise=function(e,t){var n=i.swup.transition,r=i.options[e];return r&&r[t]?new Promise((function(e){r[t](e,{paramsFrom:r.regFrom.exec(n.from),paramsTo:r.regTo.exec(n.to),transition:n,from:r.from,to:r.to})})):(console.warn("No animation found"),Promise.resolve())},i.getAnimationIndex=function(e){if("in"===e)return i.currentAnimation;var t=i.options,n=0,r=0;return Object.keys(t).forEach((function(e,o){var s=t[e],a=i.rateAnimation(s);a>=r&&(n=o,r=a)})),i.currentAnimation=n,i.currentAnimation},i.rateAnimation=function(e){var t=i.swup.transition,n=0,r=e.regFrom.test(t.from);return n+=r?1:0,n+=e.regTo.test(t.to)?1:0,n+=r&&e.to===t.custom?2:0};return i.options=n({},[{from:"(.*)",to:"(.*)",out:function(e){return e()},in:function(e){return e()}}],e),i.generateRegex(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"mount",value:function(){var e=this.swup;e._getAnimationPromises=e.getAnimationPromises,e.getAnimationPromises=this.getAnimationPromises}},{key:"unmount",value:function(){var e=this.swup;e.getAnimationPromises=e._getAnimationPromises,e._getAnimationPromises=null}},{key:"generateRegex",value:function(){var e=this,t=function(e){return e instanceof RegExp};this.options=Object.keys(this.options).map((function(i){return n({},e.options[i],{regFrom:t(e.options[i].from)?e.options[i].from:(0,s.default)(e.options[i].from),regTo:t(e.options[i].to)?e.options[i].to:(0,s.default)(e.options[i].to)})}))}}]),t}(o.default);t.A=l},6907:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){this._handlers[e]?this._handlers[e].push(t):console.warn("Unsupported event "+e+".")}},7056:e=>{e.exports=function(e){if(!e)return!1;var i=t.call(e);return"[object Function]"===i||"function"==typeof e&&"[object RegExp]"!==i||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},7495:(e,t,i)=>{"use strict";var n=i(9840);e.exports=function(e,t){return void 0===t&&(t=!1),function(i,r,o){if(i)e(i);else if(r.statusCode>=400&&r.statusCode<=599){var s=o;if(t)if(n.TextDecoder){var a=function(e){void 0===e&&(e="");return e.toLowerCase().split(";").reduce((function(e,t){var i=t.split("="),n=i[0],r=i[1];return"charset"===n.trim()?r.trim():e}),"utf-8")}(r.headers&&r.headers["content-type"]);try{s=new TextDecoder(a).decode(o)}catch(e){}}else s=String.fromCharCode.apply(null,new Uint8Array(o));e({cause:s})}else e(null,o)}}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),i=t[0],n=t[1];return 3*(i+n)/4-n},t.toByteArray=function(e){var t,i,o=a(e),s=o[0],l=o[1],u=new r(function(e,t,i){return 3*(t+i)/4-i}(0,s,l)),c=0,h=l>0?s-4:s;for(i=0;i<h;i+=4)t=n[e.charCodeAt(i)]<<18|n[e.charCodeAt(i+1)]<<12|n[e.charCodeAt(i+2)]<<6|n[e.charCodeAt(i+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===l&&(t=n[e.charCodeAt(i)]<<2|n[e.charCodeAt(i+1)]>>4,u[c++]=255&t);1===l&&(t=n[e.charCodeAt(i)]<<10|n[e.charCodeAt(i+1)]<<4|n[e.charCodeAt(i+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o=[],s=16383,a=0,u=n-r;a<u;a+=s)o.push(l(e,a,a+s>u?u:a+s));1===r?(t=e[n-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return o.join("")};for(var i=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)i[s]=o[s],n[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function l(e,t,n){for(var r,o,s=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},7589:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3132);t.default=function(e,t){var i=document.createElement("html");i.innerHTML=e;var r=[];t.forEach((function(e){if(null==(0,n.query)(e,i))return console.warn("[swup] Container "+e+" not found on page."),null;(0,n.queryAll)(e).length!==(0,n.queryAll)(e,i).length&&console.warn("[swup] Mismatched number of containers found on new page."),(0,n.queryAll)(e).forEach((function(t,o){(0,n.queryAll)(e,i)[o].setAttribute("data-swup",r.length),r.push((0,n.queryAll)(e,i)[o].outerHTML)}))}));var o={title:(i.querySelector("title")||{}).innerText,pageClass:i.querySelector("body").className,originalContent:e,blocks:r};return i.innerHTML="",i=null,o}},7608:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=7608,e.exports=t},7630:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){return window.location.pathname+window.location.search}},7842:function(e){var t,i,n,r,o;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=o.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=o.normalizePath(s.path),o.buildURLFromParts(s)):t;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=i.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(u.netLoc=a.netLoc,"/"!==s.path[0]))if(s.path){var c=a.path,h=c.substring(0,c.lastIndexOf("/")+1)+s.path;u.path=o.normalizePath(h)}else u.path=a.path,s.params||(u.params=a.params,s.query||(u.query=a.query));return null===u.path&&(u.path=n.alwaysNormalize?o.normalizePath(s.path):s.path),o.buildURLFromParts(u)},parseURL:function(e){var i=t.exec(e);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o},8028:(e,t)=>{"use strict";var i;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function s(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var l=new WeakMap,u=navigator.connection||navigator.mozConnection||navigator.webkitConnection;function c(e){var t=u&&u.effectiveType;return"IntersectionObserver"in window?(i||(i=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t=l.get(e.target);t&&t(),l.delete(e.target)}}))}),{rootMargin:"4g"!==t||u&&u.saveData?"2500px":"1250px"})),function(t){return t&&(l.set(t,e),i.observe(t)),function(){i&&t&&(l.delete(t),i.unobserve(t))}}):function(){return e(),function(){}}}var h=new Set,d=function(){return s((function e(t){var i=this;r(this,e),this.el=t,this.main=t.querySelector("[data-main-image]"),this.placeholder=t.querySelector("[data-placeholder-image]"),this.isLoading="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype,this.isLoaded=!1,this.load=this.load.bind(this),this.reveal=this.reveal.bind(this),this.cacheKey=JSON.stringify(this.main.src||this.main.dataset.src),this.revealed=!1,this.main.dispatchEvent(new CustomEvent("twill-image:start")),this.main.onload=function(e){i.load(e.currentTarget),i.main.dispatchEvent(new CustomEvent("twill-image:loaded"))},this.isLoading&&this.reveal(),(this.isLoading||this.main.complete)&&this.load(this.main)}),[{key:"_unobserve",value:function(){}},{key:"isLoaded",get:function(){return this._isLoaded},set:function(e){this._isLoaded=e,e?(this.main.style.transition="opacity 500ms linear",this.main.style.opacity=1):(this.main.style.transition="",this.main.style.opacity=0),e&&this.unobserve()}},{key:"unobserve",get:function(){return this._unobserve},set:function(e){this._unobserve=e}},{key:"isCached",get:function(){return e=this.cacheKey,h.has(e);var e}},{key:"reveal",value:function(){var e=this.main.parentElement.querySelectorAll("source");e&&e.forEach((function(e){e.dataset.src&&(e.setAttribute("src",e.dataset.src),delete e.dataset.src),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),delete e.dataset.srcset)})),this.main.dataset.src&&(this.main.setAttribute("src",this.main.dataset.src),delete this.main.dataset.src),this.main.dataset.srcset&&(this.main.setAttribute("srcset",this.main.dataset.srcset),delete this.main.dataset.srcset),this.revealed=!0,this.main.dispatchEvent(new CustomEvent("twill-image:revealed"))}},{key:"load",value:function(e){var t=this;if(!this.isLoaded){var i;(i=this.cacheKey)&&h.add(i);var n=new Image;n.src=e.currentSrc,n.decode?n.decode().catch((function(){})).then((function(){t.isLoaded=!0})):this.isLoaded=!0}}}])}(),p=function(){return s((function e(){var t,i,n,o;r(this,e),this.reset=(t=this._reset,i=100,function(){var e=this,r=arguments,s=n&&!o;clearTimeout(o),o=setTimeout((function(){o=null,n||t.apply(e,r)}),i),s&&t.apply(e,r)}).bind(this),this.start()}),[{key:"images",get:function(){return document.querySelectorAll("[data-twill-image-wrapper]")}},{key:"start",value:function(){this.images.forEach((function(e){e.wrapper||(e.wrapper=new d(e));var t=c((function(){!e.wrapper.revealed&&e.wrapper.reveal(),e.wrapper.isCached&&(e.wrapper.isLoaded=!0)}));e.wrapper.unobserve=t(e)}))}},{key:"_reset",value:function(){var e=this;this.images.forEach((function(t){t.wrapper&&t.wrapper.unobserve&&t.wrapper.unobserve(),t.wrapper&&t.wrapper.unobserve&&(t.wrapper.unobserve=function(){}),e.start()}))}}])}();t.e=p},8085:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3132);t.default=function(e,t){var i=0;t.forEach((function(t){null==(0,n.query)(t,e)?console.warn("[swup] Container "+t+" not found on page."):(0,n.queryAll)(t).forEach((function(r,o){(0,n.queryAll)(t,e)[o].setAttribute("data-swup",i),i++}))}))}},8287:(e,t,i)=>{"use strict";var n=i(7526),r=i(251),o=i(2253);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,i)}function u(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,i,n):"string"==typeof t?function(e,t,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,i);e=a(e,n);var r=e.write(t,i);r!==n&&(e=e.slice(0,r));return e}(e,t,i):function(e,t){if(l.isBuffer(t)){var i=0|p(t.length);return 0===(e=a(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(c(t),e=a(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function d(e,t){var i=t.length<0?0:0|p(t.length);e=a(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return j(e).length;default:if(n)return H(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,i);case"utf8":case"utf-8":return C(this,t,i);case"ascii":return P(this,t,i);case"latin1":case"binary":return A(this,t,i);case"base64":return x(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function v(e,t,i,n,r){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:y(e,t,i,n,r);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):y(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function y(e,t,i,n,r){var o,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,i/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var c=-1;for(o=i;o<a;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(i+l>a&&(i=a-l),o=i;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(u(e,o+d)!==u(t,d)){h=!1;break}if(h)return o}return-1}function b(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n))>r&&(n=r):n=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[i+s]=a}return s}function _(e,t,i,n){return z(H(t,e.length-i),e,i,n)}function w(e,t,i,n){return z(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function T(e,t,i,n){return w(e,t,i,n)}function S(e,t,i,n){return z(j(t),e,i,n)}function E(e,t,i,n){return z(function(e,t){for(var i,n,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(i=e.charCodeAt(s))>>8,r=i%256,o.push(r),o.push(n);return o}(t,e.length-i),e,i,n)}function x(e,t,i){return 0===t&&i===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,i))}function C(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var o,s,a,l,u=e[r],c=null,h=u>239?4:u>223?3:u>191?2:1;if(r+h<=i)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[r+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[r+1],s=e[r+2],128==(192&o)&&128==(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[r+1],s=e[r+2],a=e[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),r+=h}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var i="",n=0;for(;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=k));return i}(n)}t.hp=l,t.IS=50,l.TYPED_ARRAY_SUPPORT=void 0!==i.g.TYPED_ARRAY_SUPPORT?i.g.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,i){return u(null,e,t,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,i){return function(e,t,i,n){return c(t),t<=0?a(e,t):void 0!==i?"string"==typeof n?a(e,t).fill(i,n):a(e,t).fill(i):a(e,t)}(null,e,t,i)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,r=0,o=Math.min(i,n);r<o;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=l.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var s=e[i];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",i=t.IS;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,i,n,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||i>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=i)return 0;if(n>=r)return-1;if(t>=i)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(n>>>=0),s=(i>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(n,r),c=e.slice(t,i),h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return v(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return v(this,e,t,i,!1)},l.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,i);case"utf8":case"utf-8":return _(this,e,t,i);case"ascii":return w(this,e,t,i);case"latin1":case"binary":return T(this,e,t,i);case"base64":return S(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function P(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function A(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function I(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=t;o<i;++o)r+=$(e[o]);return r}function L(e,t,i){for(var n=e.slice(t,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function D(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,i,n,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function R(e,t,i,n){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-i,2);r<o;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function M(e,t,i,n){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-i,4);r<o;++r)e[i+r]=t>>>8*(n?r:3-r)&255}function N(e,t,i,n,r,o){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function B(e,t,i,n,o){return o||N(e,0,i,4),r.write(e,t,i,n,23,4),i+4}function F(e,t,i,n,o){return o||N(e,0,i,8),r.write(e,t,i,n,52,8),i+8}l.prototype.slice=function(e,t){var i,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=l.prototype;else{var r=t-e;i=new l(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+e]}return i},l.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||D(e,t,this.length);for(var n=this[e],r=1,o=0;++o<t&&(r*=256);)n+=this[e+o]*r;return n},l.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||D(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},l.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||D(e,t,this.length);for(var n=this[e],r=1,o=0;++o<t&&(r*=256);)n+=this[e+o]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||D(e,t,this.length);for(var n=t,r=1,o=this[e+--n];n>0&&(r*=256);)o+=this[e+--n]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||O(this,e,t,i,Math.pow(2,8*i)-1,0);var r=1,o=0;for(this[t]=255&e;++o<i&&(r*=256);)this[t+o]=e/r&255;return t+i},l.prototype.writeUIntBE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||O(this,e,t,i,Math.pow(2,8*i)-1,0);var r=i-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+i},l.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);O(this,e,t,i,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<i&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+i},l.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);O(this,e,t,i,r-1,-r)}var o=i-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,i){return B(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return B(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return F(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return F(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r,o=n-i;if(this===e&&i<t&&t<n)for(r=o-1;r>=0;--r)e[r+t]=this[r+i];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},l.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var o;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(o=t;o<i;++o)this[o]=e;else{var s=l.isBuffer(e)?e:H(new l(e,n).toString()),a=s.length;for(o=0;o<i-t;++o)this[o+t]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function $(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var i;t=t||1/0;for(var n=e.length,r=null,o=[],s=0;s<n;++s){if((i=e.charCodeAt(s))>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;o.push(i)}else if(i<2048){if((t-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function j(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}},8434:(e,t,i)=>{"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=b(i(6023)),s=b(i(5138)),a=b(i(9449)),l=b(i(5093)),u=b(i(3382)),c=b(i(6907)),h=b(i(4409)),d=b(i(5640)),p=b(i(5373)),f=b(i(1034)),g=b(i(3719)),m=i(5404),v=i(3132),y=i(5932);function b(e){return e&&e.__esModule?e:{default:e}}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',linkSelector:'a[href^="'+window.location.origin+'"]:not([data-no-swup]), a[href^="/"]:not([data-no-swup]), a[href^="#"]:not([data-no-swup])',cache:!0,containers:["#swup"],requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},plugins:[],skipPopStateHandling:function(e){return!(e.state&&"swup"===e.state.source)}},r=n({},i,t);this._handlers={animationInDone:[],animationInStart:[],animationOutDone:[],animationOutStart:[],animationSkipped:[],clickLink:[],contentReplaced:[],disabled:[],enabled:[],openPageInNewTab:[],pageLoaded:[],pageRetrievedFromCache:[],pageView:[],popState:[],samePage:[],samePageWithHash:[],serverError:[],transitionStart:[],transitionEnd:[],willReplaceContent:[]},this.scrollToElement=null,this.preloadPromise=null,this.options=r,this.plugins=[],this.transition={},this.delegatedListeners={},this.boundPopStateHandler=this.popStateHandler.bind(this),this.cache=new s.default,this.cache.swup=this,this.loadPage=a.default,this.renderPage=l.default,this.triggerEvent=u.default,this.on=c.default,this.off=h.default,this.updateTransition=d.default,this.getAnimationPromises=f.default,this.getPageData=g.default,this.getAnchorElement=p.default,this.log=function(){},this.use=m.use,this.unuse=m.unuse,this.findPlugin=m.findPlugin,this.getCurrentUrl=y.getCurrentUrl,this.cleanupAnimationClasses=y.cleanupAnimationClasses,this.enable()}return r(e,[{key:"enable",value:function(){var e=this;"undefined"!=typeof Promise?(this.delegatedListeners.click=(0,o.default)(document,this.options.linkSelector,"click",this.linkClickHandler.bind(this)),window.addEventListener("popstate",this.boundPopStateHandler),this.options.cache,(0,y.markSwupElements)(document.documentElement,this.options.containers),this.options.plugins.forEach((function(t){e.use(t)})),window.history.replaceState(Object.assign({},window.history.state,{url:window.location.href,random:Math.random(),source:"swup"}),document.title,window.location.href),this.triggerEvent("enabled"),document.documentElement.classList.add("swup-enabled"),this.triggerEvent("pageView")):console.warn("Promise is not supported")}},{key:"destroy",value:function(){var e=this;this.delegatedListeners.click.destroy(),window.removeEventListener("popstate",this.boundPopStateHandler),this.cache.empty(),this.options.plugins.forEach((function(t){e.unuse(t)})),(0,v.queryAll)("[data-swup]").forEach((function(e){e.removeAttribute("data-swup")})),this.off(),this.triggerEvent("disabled"),document.documentElement.classList.remove("swup-enabled")}},{key:"linkClickHandler",value:function(e){if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)this.triggerEvent("openPageInNewTab",e);else if(0===e.button){this.triggerEvent("clickLink",e),e.preventDefault();var t=new y.Link(e.delegateTarget);if(t.getAddress()==(0,y.getCurrentUrl)()||""==t.getAddress()){if(""!=t.getHash())this.triggerEvent("samePageWithHash",e),null!=(0,p.default)(t.getHash())?history.replaceState({url:t.getAddress()+t.getHash(),random:Math.random(),source:"swup"},document.title,t.getAddress()+t.getHash()):console.warn("Element for offset not found ("+t.getHash()+")");else this.triggerEvent("samePage",e)}else{""!=t.getHash()&&(this.scrollToElement=t.getHash());var i=e.delegateTarget.getAttribute("data-swup-transition");this.loadPage({url:t.getAddress(),customTransition:i},!1)}}}},{key:"popStateHandler",value:function(e){if(!this.options.skipPopStateHandling(e)){var t=new y.Link(e.state?e.state.url:window.location.pathname);""!==t.getHash()?this.scrollToElement=t.getHash():e.preventDefault(),this.triggerEvent("popState",e),this.options.animateHistoryBrowsing||(document.documentElement.classList.remove("is-animating"),(0,y.cleanupAnimationClasses)()),this.loadPage({url:t.getAddress()},e)}}}]),e}();t.A=_},8865:e=>{e.exports=function(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(e){n=e}return[n,i]}},8962:(e,t,i)=>{var n=i(3626).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===i.version?(i.earliestPresentationTime=t.getUint32(r),i.firstOffset=t.getUint32(r+4),r+=8):(i.earliestPresentationTime=n(e.subarray(r)),i.firstOffset=n(e.subarray(r+8)),r+=16),r+=2;var o=t.getUint16(r);for(r+=2;o>0;r+=12,o--)i.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return i}},8978:(e,t,i)=>{var n=i(4722);n.DOMImplementation,n.XMLSerializer,t.DOMParser=i(5752).DOMParser},9449:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o=i(5932);t.default=function(e,t){var i=this,s=[],a=void 0;this.triggerEvent("transitionStart",t),null!=e.customTransition?(this.updateTransition(window.location.pathname,e.url,e.customTransition),document.documentElement.classList.add("to-"+(0,o.classify)(e.customTransition))):this.updateTransition(window.location.pathname,e.url),!t||this.options.animateHistoryBrowsing?function(){if(i.triggerEvent("animationOutStart"),document.documentElement.classList.add("is-changing"),document.documentElement.classList.add("is-leaving"),document.documentElement.classList.add("is-animating"),t&&document.documentElement.classList.add("is-popstate"),document.documentElement.classList.add("to-"+(0,o.classify)(e.url)),s=i.getAnimationPromises("out"),Promise.all(s).then((function(){i.triggerEvent("animationOutDone")})),!t){var n=void 0;n=null!=i.scrollToElement?e.url+i.scrollToElement:e.url,(0,o.createHistoryRecord)(n)}}():this.triggerEvent("animationSkipped"),this.cache.exists(e.url)?(a=new Promise((function(t){t(i.cache.getPage(e.url))})),this.triggerEvent("pageRetrievedFromCache")):a=this.preloadPromise&&this.preloadPromise.route==e.url?this.preloadPromise:new Promise((function(t,n){(0,o.fetch)(r({},e,{headers:i.options.requestHeaders}),(function(r){if(500===r.status)return i.triggerEvent("serverError"),void n(e.url);var o=i.getPageData(r);null!=o&&o.blocks.length>0?(o.url=e.url,i.cache.cacheUrl(o),i.triggerEvent("pageLoaded"),t(o)):n(e.url)}))})),Promise.all([a].concat(s)).then((function(e){var r=n(e,1)[0];i.renderPage(r,t),i.preloadPromise=null})).catch((function(e){i.options.skipPopStateHandling=function(){return window.location=e,!0},window.history.go(-1)}))}},9622:e=>{var t,i,n,r,o,s,a,l=9e4;t=function(e){return e*l},i=function(e,t){return e*t},n=function(e){return e/l},r=function(e,t){return e/t},o=function(e,i){return t(r(e,i))},s=function(e,t){return i(n(e),t)},a=function(e,t,i){return n(i?e:e-t)},e.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:t,secondsToAudioTs:i,videoTsToSeconds:n,audioTsToSeconds:r,audioTsToVideoTs:o,videoTsToAudioTs:s,metadataTsToSeconds:a}},9697:(e,t,i)=>{var n,r=void 0!==i.g?i.g:"undefined"!=typeof window?window:{},o=i(542);"undefined"!=typeof document?n=document:(n=r["__GLOBAL_DOCUMENT_CACHE@4"])||(n=r["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=n},9840:(e,t,i)=>{var n;n="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},e.exports=n}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return i[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=i,t=[],r.O=(e,i,n,o)=>{if(!i){var s=1/0;for(c=0;c<t.length;c++){for(var[i,n,o]=t[c],a=!0,l=0;l<i.length;l++)(!1&o||s>=o)&&Object.keys(r.O).every((e=>r.O[e](i[l])))?i.splice(l--,1):(a=!1,o<s&&(s=o));if(a){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[i,n,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.e=()=>Promise.resolve(),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={847:0,333:0,348:0,252:0};r.O.j=t=>0===e[t];var t=(t,i)=>{var n,o,[s,a,l]=i,u=0;if(s.some((t=>0!==e[t]))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(l)var c=l(r)}for(t&&t(i);u<s.length;u++)o=s[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(c)},i=self.webpackChunkfamsf=self.webpackChunkfamsf||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),r.O(void 0,[333,348,252],(()=>r(4017))),r.O(void 0,[333,348,252],(()=>r(4896))),r.O(void 0,[333,348,252],(()=>r(253)));var o=r.O(void 0,[333,348,252],(()=>r(47)));o=r.O(o)})();